(this["webpackJsonpalignment-viewer-2"]=this["webpackJsonpalignment-viewer-2"]||[]).push([[0],{40:function(e,t,r){e.exports=r(66)},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},51:function(e,t,r){},52:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(34),l=r.n(a),i=(r(45),r(10)),s=r(1),c=r(2),u=r(7),d=r(4),h=r(5),f=(r(46),[{letterA:"W",letterB:"F",score:1},{letterA:"L",letterB:"R",score:-2},{letterA:"S",letterB:"P",score:-1},{letterA:"V",letterB:"T",score:0},{letterA:"Q",letterB:"Q",score:5},{letterA:"N",letterB:"A",score:-2},{letterA:"Z",letterB:"Y",score:-2},{letterA:"W",letterB:"R",score:-3},{letterA:"Q",letterB:"A",score:-1},{letterA:"S",letterB:"D",score:0},{letterA:"H",letterB:"H",score:8},{letterA:"S",letterB:"H",score:-1},{letterA:"H",letterB:"D",score:-1},{letterA:"L",letterB:"N",score:-3},{letterA:"W",letterB:"A",score:-3},{letterA:"Y",letterB:"M",score:-1},{letterA:"G",letterB:"R",score:-2},{letterA:"Y",letterB:"I",score:-1},{letterA:"Y",letterB:"E",score:-2},{letterA:"B",letterB:"Y",score:-3},{letterA:"Y",letterB:"A",score:-2},{letterA:"V",letterB:"D",score:-3},{letterA:"B",letterB:"S",score:0},{letterA:"Y",letterB:"Y",score:7},{letterA:"G",letterB:"N",score:0},{letterA:"E",letterB:"C",score:-4},{letterA:"Y",letterB:"Q",score:-1},{letterA:"Z",letterB:"Z",score:4},{letterA:"V",letterB:"A",score:0},{letterA:"C",letterB:"C",score:9},{letterA:"M",letterB:"R",score:-1},{letterA:"V",letterB:"E",score:-2},{letterA:"T",letterB:"N",score:0},{letterA:"P",letterB:"P",score:7},{letterA:"V",letterB:"I",score:3},{letterA:"V",letterB:"S",score:-2},{letterA:"Z",letterB:"P",score:-1},{letterA:"V",letterB:"M",score:1},{letterA:"T",letterB:"F",score:-2},{letterA:"V",letterB:"Q",score:-2},{letterA:"K",letterB:"K",score:5},{letterA:"P",letterB:"D",score:-1},{letterA:"I",letterB:"H",score:-3},{letterA:"I",letterB:"D",score:-3},{letterA:"T",letterB:"R",score:-1},{letterA:"P",letterB:"L",score:-3},{letterA:"K",letterB:"G",score:-2},{letterA:"M",letterB:"N",score:-2},{letterA:"P",letterB:"H",score:-2},{letterA:"F",letterB:"Q",score:-3},{letterA:"Z",letterB:"G",score:-2},{letterA:"X",letterB:"L",score:-1},{letterA:"T",letterB:"M",score:-1},{letterA:"Z",letterB:"C",score:-3},{letterA:"X",letterB:"H",score:-1},{letterA:"D",letterB:"R",score:-2},{letterA:"B",letterB:"W",score:-4},{letterA:"X",letterB:"D",score:-1},{letterA:"Z",letterB:"K",score:1},{letterA:"F",letterB:"A",score:-2},{letterA:"Z",letterB:"W",score:-3},{letterA:"F",letterB:"E",score:-3},{letterA:"D",letterB:"N",score:1},{letterA:"B",letterB:"K",score:0},{letterA:"X",letterB:"X",score:-1},{letterA:"F",letterB:"I",score:0},{letterA:"B",letterB:"G",score:-1},{letterA:"X",letterB:"T",score:0},{letterA:"F",letterB:"M",score:0},{letterA:"B",letterB:"C",score:-3},{letterA:"Z",letterB:"I",score:-3},{letterA:"Z",letterB:"V",score:-2},{letterA:"S",letterB:"S",score:4},{letterA:"L",letterB:"Q",score:-2},{letterA:"W",letterB:"E",score:-3},{letterA:"Q",letterB:"R",score:1},{letterA:"N",letterB:"N",score:6},{letterA:"W",letterB:"M",score:-1},{letterA:"Q",letterB:"C",score:-3},{letterA:"W",letterB:"I",score:-3},{letterA:"S",letterB:"C",score:-1},{letterA:"L",letterB:"A",score:-1},{letterA:"S",letterB:"G",score:0},{letterA:"L",letterB:"E",score:-3},{letterA:"W",letterB:"Q",score:-2},{letterA:"H",letterB:"G",score:-2},{letterA:"S",letterB:"K",score:0},{letterA:"Q",letterB:"N",score:0},{letterA:"N",letterB:"R",score:0},{letterA:"H",letterB:"C",score:-3},{letterA:"Y",letterB:"N",score:-2},{letterA:"G",letterB:"Q",score:-2},{letterA:"Y",letterB:"F",score:3},{letterA:"C",letterB:"A",score:0},{letterA:"V",letterB:"L",score:1},{letterA:"G",letterB:"E",score:-2},{letterA:"G",letterB:"A",score:0},{letterA:"K",letterB:"R",score:2},{letterA:"E",letterB:"D",score:2},{letterA:"Y",letterB:"R",score:-2},{letterA:"M",letterB:"Q",score:0},{letterA:"T",letterB:"I",score:-1},{letterA:"C",letterB:"D",score:-3},{letterA:"V",letterB:"F",score:-1},{letterA:"T",letterB:"A",score:0},{letterA:"T",letterB:"P",score:-1},{letterA:"B",letterB:"P",score:-2},{letterA:"T",letterB:"E",score:-1},{letterA:"V",letterB:"N",score:-3},{letterA:"P",letterB:"G",score:-2},{letterA:"M",letterB:"A",score:-1},{letterA:"K",letterB:"H",score:-1},{letterA:"V",letterB:"R",score:-3},{letterA:"P",letterB:"C",score:-3},{letterA:"M",letterB:"E",score:-2},{letterA:"K",letterB:"L",score:-2},{letterA:"V",letterB:"V",score:4},{letterA:"M",letterB:"I",score:1},{letterA:"T",letterB:"Q",score:-1},{letterA:"I",letterB:"G",score:-4},{letterA:"P",letterB:"K",score:-1},{letterA:"M",letterB:"M",score:5},{letterA:"K",letterB:"D",score:-1},{letterA:"I",letterB:"C",score:-1},{letterA:"Z",letterB:"D",score:1},{letterA:"F",letterB:"R",score:-3},{letterA:"X",letterB:"K",score:-1},{letterA:"Q",letterB:"D",score:0},{letterA:"X",letterB:"G",score:-1},{letterA:"Z",letterB:"L",score:-3},{letterA:"X",letterB:"C",score:-2},{letterA:"Z",letterB:"H",score:0},{letterA:"B",letterB:"L",score:-4},{letterA:"B",letterB:"H",score:0},{letterA:"F",letterB:"F",score:6},{letterA:"X",letterB:"W",score:-2},{letterA:"B",letterB:"D",score:4},{letterA:"D",letterB:"A",score:-2},{letterA:"S",letterB:"L",score:-2},{letterA:"X",letterB:"S",score:0},{letterA:"F",letterB:"N",score:-3},{letterA:"S",letterB:"R",score:-1},{letterA:"W",letterB:"D",score:-4},{letterA:"V",letterB:"Y",score:-1},{letterA:"W",letterB:"L",score:-2},{letterA:"H",letterB:"R",score:0},{letterA:"W",letterB:"H",score:-2},{letterA:"H",letterB:"N",score:1},{letterA:"W",letterB:"T",score:-2},{letterA:"T",letterB:"T",score:5},{letterA:"S",letterB:"F",score:-2},{letterA:"W",letterB:"P",score:-4},{letterA:"L",letterB:"D",score:-4},{letterA:"B",letterB:"I",score:-3},{letterA:"L",letterB:"H",score:-3},{letterA:"S",letterB:"N",score:1},{letterA:"B",letterB:"T",score:-1},{letterA:"L",letterB:"L",score:4},{letterA:"Y",letterB:"K",score:-2},{letterA:"E",letterB:"Q",score:2},{letterA:"Y",letterB:"G",score:-3},{letterA:"Z",letterB:"S",score:0},{letterA:"Y",letterB:"C",score:-2},{letterA:"G",letterB:"D",score:-1},{letterA:"B",letterB:"V",score:-3},{letterA:"E",letterB:"A",score:-1},{letterA:"Y",letterB:"W",score:2},{letterA:"E",letterB:"E",score:5},{letterA:"Y",letterB:"S",score:-2},{letterA:"C",letterB:"N",score:-3},{letterA:"V",letterB:"C",score:-1},{letterA:"T",letterB:"H",score:-2},{letterA:"P",letterB:"R",score:-2},{letterA:"V",letterB:"G",score:-3},{letterA:"T",letterB:"L",score:-1},{letterA:"V",letterB:"K",score:-2},{letterA:"K",letterB:"Q",score:1},{letterA:"R",letterB:"A",score:-1},{letterA:"I",letterB:"R",score:-3},{letterA:"T",letterB:"D",score:-1},{letterA:"P",letterB:"F",score:-4},{letterA:"I",letterB:"N",score:-3},{letterA:"K",letterB:"I",score:-3},{letterA:"M",letterB:"D",score:-3},{letterA:"V",letterB:"W",score:-3},{letterA:"W",letterB:"W",score:11},{letterA:"M",letterB:"H",score:-2},{letterA:"P",letterB:"N",score:-2},{letterA:"K",letterB:"A",score:-1},{letterA:"M",letterB:"L",score:2},{letterA:"K",letterB:"E",score:1},{letterA:"Z",letterB:"E",score:4},{letterA:"X",letterB:"N",score:-1},{letterA:"Z",letterB:"A",score:-1},{letterA:"Z",letterB:"M",score:-1},{letterA:"X",letterB:"F",score:-1},{letterA:"K",letterB:"C",score:-3},{letterA:"B",letterB:"Q",score:0},{letterA:"X",letterB:"B",score:-1},{letterA:"B",letterB:"M",score:-3},{letterA:"F",letterB:"C",score:-2},{letterA:"Z",letterB:"Q",score:3},{letterA:"X",letterB:"Z",score:-1},{letterA:"F",letterB:"G",score:-3},{letterA:"B",letterB:"E",score:1},{letterA:"X",letterB:"V",score:-1},{letterA:"F",letterB:"K",score:-3},{letterA:"B",letterB:"A",score:-2},{letterA:"X",letterB:"R",score:-1},{letterA:"D",letterB:"D",score:6},{letterA:"W",letterB:"G",score:-2},{letterA:"Z",letterB:"F",score:-3},{letterA:"S",letterB:"Q",score:0},{letterA:"W",letterB:"C",score:-2},{letterA:"W",letterB:"K",score:-3},{letterA:"H",letterB:"Q",score:0},{letterA:"L",letterB:"C",score:-1},{letterA:"W",letterB:"N",score:-4},{letterA:"S",letterB:"A",score:1},{letterA:"L",letterB:"G",score:-4},{letterA:"W",letterB:"S",score:-3},{letterA:"S",letterB:"E",score:0},{letterA:"H",letterB:"E",score:0},{letterA:"S",letterB:"I",score:-2},{letterA:"H",letterB:"A",score:-2},{letterA:"S",letterB:"M",score:-1},{letterA:"Y",letterB:"L",score:-1},{letterA:"Y",letterB:"H",score:2},{letterA:"Y",letterB:"D",score:-3},{letterA:"E",letterB:"R",score:0},{letterA:"X",letterB:"P",score:-2},{letterA:"G",letterB:"G",score:6},{letterA:"G",letterB:"C",score:-3},{letterA:"E",letterB:"N",score:0},{letterA:"Y",letterB:"T",score:-2},{letterA:"Y",letterB:"P",score:-3},{letterA:"T",letterB:"K",score:-1},{letterA:"A",letterB:"A",score:4},{letterA:"P",letterB:"Q",score:-1},{letterA:"T",letterB:"C",score:-1},{letterA:"V",letterB:"H",score:-3},{letterA:"T",letterB:"G",score:-2},{letterA:"I",letterB:"Q",score:-3},{letterA:"Z",letterB:"T",score:-1},{letterA:"C",letterB:"R",score:-3},{letterA:"V",letterB:"P",score:-2},{letterA:"P",letterB:"E",score:-1},{letterA:"M",letterB:"C",score:-1},{letterA:"K",letterB:"N",score:0},{letterA:"I",letterB:"I",score:4},{letterA:"P",letterB:"A",score:-1},{letterA:"M",letterB:"G",score:-3},{letterA:"T",letterB:"S",score:1},{letterA:"I",letterB:"E",score:-3},{letterA:"P",letterB:"M",score:-2},{letterA:"M",letterB:"K",score:-1},{letterA:"I",letterB:"A",score:-1},{letterA:"P",letterB:"I",score:-3},{letterA:"R",letterB:"R",score:5},{letterA:"X",letterB:"M",score:-1},{letterA:"L",letterB:"I",score:2},{letterA:"X",letterB:"I",score:-1},{letterA:"Z",letterB:"B",score:1},{letterA:"X",letterB:"E",score:-1},{letterA:"Z",letterB:"N",score:0},{letterA:"X",letterB:"A",score:0},{letterA:"B",letterB:"R",score:-1},{letterA:"B",letterB:"N",score:3},{letterA:"F",letterB:"D",score:-3},{letterA:"X",letterB:"Y",score:-1},{letterA:"Z",letterB:"R",score:0},{letterA:"F",letterB:"H",score:-1},{letterA:"B",letterB:"F",score:-3},{letterA:"F",letterB:"L",score:0},{letterA:"X",letterB:"Q",score:-1},{letterA:"B",letterB:"B",score:4}].reduce((function(e,t){return e.has(t.letterA)||e.set(t.letterA,new Map),e.has(t.letterB)||e.set(t.letterB,new Map),e.get(t.letterA).set(t.letterB,t.score),e.get(t.letterB).set(t.letterA,t.score),e}),new Map)),m=function(){function e(t,r,n,o,a){Object(s.a)(this,e),this.key=t,this.description=r,this.isQuerySequenceDependent=n,this.targetAlignmentType=o,this.sortFn=a}return Object(c.a)(e,null,[{key:"hammingDistance",value:function(e,t){for(var r=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length,n=Math.abs(e.sequence.length-t.sequence.length),o=0;o<r;o++)e.sequence[o]!==t.sequence[o]&&(n+=1);return n}},{key:"blosumScore",value:function(e,t){for(var r=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length,n=0,o=0;o<r;o++)f.has(e.sequence[o])&&f.get(e.sequence[o]).has(t.sequence[o])&&(n+=f.get(e.sequence[o]).get(t.sequence[o]));return n}},{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();m.INPUT=new m("as-input","As input",!1,"both",(function(e,t){return e})),m.HAMMING_DIST_QUERY=new m("hamming-dist-to-query","Hamming distance to query sequence",!0,"both",(function(e,t){var r=t.getQuerySequence();return e.map((function(e){return e})).sort((function(e,t){return m.hammingDistance(r,e)-m.hammingDistance(r,t)}))})),m.HAMMING_DIST_CONSENSUS=new m("hamming-dist-to-consensus","Hamming distance to consensus sequence",!0,"both",(function(e,t){var r=t.getConsensus().sequence;return e.map((function(e){return e})).sort((function(e,t){return m.hammingDistance(r,e)-m.hammingDistance(r,t)}))})),m.BLOSUM62_SCORE_CONSENSUS=new m("blosum-score-to-consensus","BLOSUM62 score to consensus sequence",!0,"aminoacid",(function(e,t){var r=t.getConsensus().sequence;return e.map((function(e){return e})).sort((function(e,t){var n=m.blosumScore(r,e);return m.blosumScore(r,t)-n}))})),m.BLOSUM62_SCORE_QUERY=new m("blosum-score-to-query","BLOSUM62 score to query sequence",!0,"aminoacid",(function(e,t){var r=t.getQuerySequence();return e.map((function(e){return e})).sort((function(e,t){var n=m.blosumScore(r,e);return m.blosumScore(r,t)-n}))})),m.list=[m.INPUT,m.HAMMING_DIST_QUERY,m.HAMMING_DIST_CONSENSUS,m.BLOSUM62_SCORE_QUERY,m.BLOSUM62_SCORE_CONSENSUS],m.aminoAcidSorters=m.list.reduce((function(e,t){return"aminoacid"!==t.targetAlignmentType&&"both"!==t.targetAlignmentType||e.push(t),e}),[]),m.nucleotideSorters=m.list.reduce((function(e,t){return"nucleotide"!==t.targetAlignmentType&&"both"!==t.targetAlignmentType||e.push(t),e}),[]);var g=r(9),p=r(17);function y(e){var t=document.createElement("canvas").getContext("2d");t.fillStyle=e;var r=t.fillStyle;r=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return"#"+t+t+r+r+n+n}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);return{hex:r,rgb:{red:parseInt(n[1],16),green:parseInt(n[2],16),blue:parseInt(n[3],16)}}}function v(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(parseInt(e)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(e)/4).toString(16)}))}function S(e,t){return e.reduce((function(e,r){var n=t(r),o=e.get(n)?e.get(n):[];return e.set(n,[].concat(Object(p.a)(o),[r])),e}),new Map)}function A(e,t){var r=new Error(t);return r.name=e+" Parse Error",r}var L;r(47);!function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.both=2]="both"}(L||(L={}));var b=function(){function e(t){var r=this;Object(s.a)(this,e),this.scrollDirection=void 0,this.aceEditorDirection=void 0,this.scrollers=void 0,this.scrollFnHandles=void 0,this.handleScroll=function(e,t){r.scrollers.filter((function(t){return t!==e})).forEach((function(t){r.syncScrollPosition(e,t)}))},this.scrollDirection=t,this.aceEditorDirection=t===L.horizontal?"changeScrollLeft":"changeScrollTop",this.scrollers=[],this.scrollFnHandles=new Map}return Object(c.a)(e,[{key:"registerElementScroller",value:function(e){var t=this;this.scrollers.includes(e)||(this.scrollers.push(e),e.addEventListener("mouseenter",(function(){t.addScrollEvents(e)})),e.addEventListener("mouseleave",(function(){t.removeScrollEvents(e)})))}},{key:"registerAceScroller",value:function(e,t){var r=this;this.scrollers.includes(e)||(this.scrollers.push(e),t.addEventListener("mouseenter",(function(){r.addScrollEvents(e)})),t.addEventListener("mouseleave",(function(){r.removeScrollEvents(e)})))}},{key:"isAceEditor",value:function(e){return"renderer"in e}},{key:"syncScrollPosition",value:function(e,t){if(this.scrollDirection===L.horizontal){var r=this.isAceEditor(e)?e.session.getScrollLeft():e.scrollLeft;this.isAceEditor(t)?t.session.getScrollLeft()!==r&&t.session.setScrollLeft(r):t.scrollLeft!==r&&(t.scrollLeft=r)}else{var n=this.isAceEditor(e)?e.session.getScrollTop():e.scrollTop;this.isAceEditor(t)?t.session.getScrollTop()!==n&&t.session.setScrollTop(n):t.scrollTop!==n&&(t.scrollTop=n)}}},{key:"addScrollEvents",value:function(e){this.scrollFnHandles.has(e)||this.scrollFnHandles.set(e,this.handleScroll.bind(this,e));var t=this.scrollFnHandles.get(e);this.isAceEditor(e)?e.session.on(this.aceEditorDirection,t):e.addEventListener("scroll",t)}},{key:"removeScrollEvents",value:function(e){var t=this.scrollFnHandles.get(e);t?this.isAceEditor(e)?e.session.off(this.aceEditorDirection,t):e.removeEventListener("scroll",t):console.log("failed to remove scrollFn")}}]),e}(),E=(r(48),function(){function e(){Object(s.a)(this,e),this.letterToGlyphHM={A:e.A,B:e.B,C:e.C,D:e.D,E:e.E,F:e.F,G:e.G,H:e.H,I:e.I,J:e.J,K:e.K,L:e.L,M:e.M,N:e.N,O:e.O,P:e.P,Q:e.Q,R:e.R,S:e.S,T:e.T,U:e.U,V:e.V,W:e.W,X:e.X,Y:e.Y,Z:e.Z}}return Object(c.a)(e,null,[{key:"glyphFromChar",value:function(t){return e.singleton||(e.singleton=new e),e.singleton.letterToGlyphHM[t]}}]),e}());E.singleton=void 0,E.A=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 33 0 L 66 0 L 100 100 L 75 100 L 66 75 L 33 75 L 25 100 L 0 100"})),o.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 41 55 L 50 25 L 58 55 L 41 55"}))},E.B=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 105 50 105 100 80 100 L 00 100 L 0 0"})),o.a.createElement("path",{key:e.key+"_p2",transform:e.transform,d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15",fill:"#ffffff"}),o.a.createElement("path",{key:e.key+"_p3",transform:e.transform,d:"M 20 65 L 70 65 C 80 65 80 85 70 85 L 20 85 L 20 65",fill:"#ffffff"}))},E.C=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 10 75 28 L 100 28"}))},E.D=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 60 0 C 110 0 110 100 60 100 L 0 100 L 0 0"})),o.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 40 15 C 85 15 85 85 40 85 L 20 85 L 20 15"}))},E.E=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 90 40 L 90 60 L 20 60 L 20 80 L 100 80 L 100 100 L 0 100 L 0 0"}))},E.F=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 20 20 L 20 40 L 80 40 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},E.G=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 100 28 C 100 -13 0 -13 0 50 C 0 113 100 113 100 72 L 100 48 L 55 48 L 55 72 L 75 72 C 75 90 30 90 30 50 C 30 10 75 5 75 28 L 100 28"}))},E.H=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 80 40 L 80 0 L 100 0 L 100 100 L 80 100 L 80 60 L 20 60 L 20 100 L 0 100 L 0 0"}))},E.I=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 40 0 L 60 0 L 60 100 L 40 100 L 40 0"}))},E.J=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60"}))},E.K=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 20 40 L 75 0 L 100 0 L 50 50 L 100 100 L 75 100 L 30 65 L 20 75 L 20 100 L 0 100 L 0 0"}))},E.L=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 100 L 100 100 L 100 80 L 20 80 L 20 0 L 0 0"}))},E.M=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 35 L 80 0 L 100 0 L 100 100 L 80 100 L 80 30 L 50 65 L 20 30 L 20 100 L 0 100 L 0 0"}))},E.N=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 100 L 0 0 L 20 0 L 80 75 L 80 0 L 100 0 L 100 100 L 80 100 L 20 25 L 20 100 L 0 100"}))},E.O=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},e)),o.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}))},E.P=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 L 20 50 L 20 100 L 0 100 L 0 0"})),o.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},E.Q=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("circle",Object.assign({cx:"50",cy:"50",r:"50"},Object(i.a)({},e,{key:e.key+"_c1"}))),o.a.createElement("circle",{key:e.key+"_c2",transform:e.transform,cx:"50",cy:"50",r:"32",fill:"#ffffff"}),o.a.createElement("path",Object.assign({d:"M 85 100 L 55 70 L 70 55 L 100 85 L 85 100"},e)))},E.R=function(e){return o.a.createElement("g",{key:e.key+"_g"},o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 80 0 C 105 0 105 50 80 50 C 100 50 100 70 100 70 L 100 100 L 80 100 L 80 80 C 80 80 80 60 50 60 L 20 60 L 20 100 L 0 100 L 0 0"})),o.a.createElement("path",{key:e.key+"_p2",transform:e.transform,fill:"#ffffff",d:"M 20 15 L 70 15 C 80 15 80 35 70 35 L 20 35 L 20 15"}))},E.S=function(e){return e.stroke||(e.stroke=e.fill),e.strokeOpacity||(e.strokeOpacity=e.fillOpacity),o.a.createElement("path",Object.assign({fill:"#ffffff"},e,{strokeWidth:"18",d:"M92 26 A43 20 0 1 0 43 46 A42 23 0 1 1 9 68"}))},E.T=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 20 L 35 20 L 35 100 L 65 100 L 65 20 L 100 20 L 100 0 L 0 0"}))},E.U=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 0 60 C 0 111 100 111 100 60 L 100 0 L 75 0 L 75 60 C 80 90 20 90 25 60 L 25 0 L 0 0"}))},E.V=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 80 L 80 0 L 100 0 L 60 100 L 40 100 L 0 0"}))},E.W=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 30 70 L 50 30 L 70 70 L 80 0 L 100 0 L 90 100 L 70 100 L 50 65 L 30 100 L 10 100 L 0 0"}))},E.X=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 40 L 80 0 L 100 0 L 70 50 L 100 100 L 80 100 L 50 60 L 20 100 L 0 100 L 30 50 L 0 0"}))},E.Y=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 20 0 L 50 45 L 80 0 L 100 0 L 60 60 L 60 100 L 40 100 L 40 60 L 0 0"}))},E.Z=function(e){return o.a.createElement("path",Object.assign({},e,{d:"M 0 0 L 100 0 L 100 20 L 35 80 L 100 80 L 100 100 L 0 100 L 0 80 L 65 20 L 0 20 L 0 0"}))};var B=r(8),C=r.n(B),O=w("aa"),T=w("nt");function w(e){return Object.keys(C.a).reduce((function(t,r){if(-1!==r.indexOf(e+"StyClass_")){var n=r.split(e+"StyClass_")[1],o=C.a[e+"StyColorOrder_"+n].replace(/ /g,"").split(","),a=C.a[e+"StyColors_"+n].replace(/ /g,"").split(","),l=C.a[e+"StyDesc_"+n];t.push({commonName:n,description:l,className:C.a[r],backgroundAlpha:parseFloat(C.a[e+"StyBGAlpha_"+n]),colors:Object.fromEntries(o.map((function(e,t){return[o[t],a[t]]})))})}return t}),[])}var N=function(){function e(t,r,n,o){Object(s.a)(this,e),this.key=t,this.description=r,this.className=n,this.allColorSchemes=o}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();N.AMINOACID=new N("aminoacid-alignment","Amino Acid Sequences",C.a.aaAlignTypeClass,O),N.NUCLEOTIDE=new N("nucleotide-alignment","Nucleotide Sequences",C.a.ntAlignTypeClass,T),N.list=[N.AMINOACID,N.NUCLEOTIDE];var k=function(){function e(t,r,n){Object(s.a)(this,e),this.key=t,this.description=r,this.className=n}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();k.ALL=new k("all","All",C.a.styPosAllClass),k.QUERY=new k("query","Same as Query",C.a.styPosQueryClass),k.QUERY_DIFF=new k("query-diff","Different from Query",C.a.styPosQueryDiffClass),k.CONSENSUS=new k("consensus","Same as Consensus",C.a.styPosConsensusClass),k.CONSENSUS_DIFF=new k("consensus-diff","Different from Consensus",C.a.styPosConsensusDiffClass),k.list=[k.ALL,k.QUERY,k.QUERY_DIFF,k.CONSENSUS,k.CONSENSUS_DIFF];var M=function(){function e(t,r,n){Object(s.a)(this,e),this.key=t,this.description=r,this.className=n}return Object(c.a)(e,null,[{key:"fromKey",value:function(t){return e.list.find((function(e){return e.key===t}))}}]),e}();M.LIGHT=new M("light","Light",C.a.lightHueClass),M.DARK=new M("dark","Dark",C.a.darkHueClass),M.NO_BACKGROUND=new M("lettersonly","Letters Only",C.a.lettersOnlyHueClass),M.list=[M.DARK,M.LIGHT,M.NO_BACKGROUND];var D=function(){function e(){Object(s.a)(this,e),this.alignmentType=void 0,this.colorScheme=void 0,this.positionsToStyle=void 0,this.residueDetail=void 0}return Object(c.a)(e,null,[{key:"fromAlignmentType",value:function(e){return e===N.AMINOACID?new _:new P}}]),e}(),_=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.ALL,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.LIGHT;Object(s.a)(this,e),this.colorScheme=t,this.positionsToStyle=r,this.residueDetail=n,this.allColorSchemes=O,this.alignmentType=N.AMINOACID},P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.ALL,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.LIGHT;Object(s.a)(this,e),this.colorScheme=t,this.positionsToStyle=r,this.residueDetail=n,this.allColorSchemes=T,this.alignmentType=N.NUCLEOTIDE},I=(C.a.darkHueClass,C.a.lightHueClass,C.a.aceResidueParentClass);function R(e){for(var t="",r=32;r<=126;r++)t+=String.fromCharCode(r);return t.split("").reduce((function(t,r){var n="."===r?"dot":r,o=e?n:C.a.acePrefix+n;return t.set(r,new Map([[!0,new Map([[!0,o+" "+C.a.preAceConsensusClass+" "+C.a.preAceQueryClass],[!1,o+" "+C.a.preAceConsensusClass]])],[!1,new Map([[!0,o+" "+C.a.preAceQueryClass],[!1,o]])]])),t}),new Map)}var j=R(!1),H=R(!0);function x(e,t,r,n){return n?H.get(e).get(t).get(r):j.get(e).get(t).get(r)}var F=r(20),G=function(){function e(t,r,n){Object(s.a)(this,e),this.singleLetterCode=t,this.threeLetterCode=r,this.fullName=n,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.threeLetterCode=r,this.fullName=n,this.glyph=E.glyphFromChar(t),this.colors=O.reduce((function(e,r){var n=Object.entries(r.colors).find((function(e){var r=Object(g.a)(e,2),n=r[0];r[1];return n===t})),o="#ffffff";n&&(o=n[1]);var a=y(o);return e[r.commonName]={hexString:a.hex,rgb:a.rgb,backgroundAlpha:r.backgroundAlpha},e}),{})}return Object(c.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t in this.bySingleLetterCode?e.bySingleLetterCode[t]:e.UNKNOWN}},{key:"fromThreeLetterCode",value:function(t){return t in this.byThreeLetterCode?e.byThreeLetterCode[t]:e.UNKNOWN}}]),e}();G.canonicalAminoAcids=[new G("A","ALA","Alanine"),new G("R","ARG","Arginine"),new G("N","ASN","Asparagine"),new G("D","ASP","Aspartic Acid"),new G("C","CYS","Cysteine"),new G("Q","GLU","Glutamine"),new G("E","GLN","Glutamic Acid"),new G("G","GLY","Glycine"),new G("H","HIS","Histidine"),new G("I","ILE","Isoleucine"),new G("L","LEU","Leucine"),new G("K","LYS","Lysine"),new G("M","MET","Methionine"),new G("F","PHE","Phenylalanine"),new G("P","PRO","Proline"),new G("S","SER","Serine"),new G("T","THR","Threonine"),new G("W","TRP","Tryptophan"),new G("Y","TYR","Tyrosine"),new G("V","VAL","Valine"),new G("X","UKN","Unknown")],G.bySingleLetterCode=G.canonicalAminoAcids.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),G.byThreeLetterCode=G.canonicalAminoAcids.reduce((function(e,t){return e[t.threeLetterCode]=t,e}),{}),G.UNKNOWN=G.bySingleLetterCode.X;var W,U=function(){function e(t,r){Object(s.a)(this,e),this.singleLetterCode=t,this.fullName=r,this.glyph=void 0,this.colors=void 0,this.singleLetterCode=t,this.fullName=r,this.glyph=E.glyphFromChar(t),this.colors=T.reduce((function(e,r){var n=Object.entries(r.colors).find((function(e){var r=Object(g.a)(e,2),n=r[0];r[1];return n===t})),o="#ffffff";n&&(o=n[1]);var a=y(o);return e[r.commonName]={hexString:a.hex,rgb:a.rgb,backgroundAlpha:r.backgroundAlpha},e}),{})}return Object(c.a)(e,null,[{key:"fromSingleLetterCode",value:function(t){return t=t.toUpperCase(),this.bySingleLetterCode[t]?e.bySingleLetterCode[t]:e.UNKNOWN}}]),e}();U.allNucleotides=[new U("A","Adenine"),new U("C","Cytosine"),new U("G","Guanine"),new U("T","Thymidine"),new U("U","Uracil"),new U("R","Purine"),new U("Y","Pyrimidine"),new U("X","Unknown")],U.bySingleLetterCode=U.allNucleotides.reduce((function(e,t){return e[t.singleLetterCode]=t,e}),{}),U.UNKNOWN=U.bySingleLetterCode.X,function(e){e.LETTERS="Letter Stack",e.BARS="Bar Plot"}(W||(W={}));var q=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).logoData=void 0,e}return Object(c.a)(r,[{key:"renderTooltip",value:function(){var e=this,t=this.props.tooltipPlacement;return o.a.createElement(F.a,{id:"getLogoTooltip",effect:"solid",type:"light",place:t,border:!0,getContent:function(t){if(t&&e.logoData&&e.logoData[parseInt(t)]){var r=parseInt(t)+1,n=e.logoData[parseInt(t)];return 0===n.length?null:o.a.createElement("div",{className:"logo-tooltip"},o.a.createElement("h1",null,"Position: ",r),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col legend-square"}),o.a.createElement("div",{className:"col header name"},"Residue"),o.a.createElement("div",{className:"col header frequency"},"Frequency"),o.a.createElement("div",{className:"col header count"},"Count")),n.slice().reverse().map((function(e,t){return o.a.createElement("div",{key:t,className:"row"},o.a.createElement("div",{className:"col legend-square ".concat(e.letter.classNames)}),o.a.createElement("div",{className:"col name"},"".concat(e.residue.fullName," [").concat(e.letter.letter,"]")),o.a.createElement("div",{className:"col frequency"},+(100*e.frequency).toFixed(2),"%"),o.a.createElement("div",{className:"col count"},e.count))})))}}})}},{key:"renderSinglePositionStack",value:function(e,t){var r=this.props.logoType,n=100;return e.map((function(e,a){if(n-=100*e.frequency,r===W.BARS){var l=2/t;return o.a.createElement("rect",{width:"100",height:"100",transform:"translate(0, ".concat(n,") scale(").concat(l,",").concat(e.frequency,")"),className:e.letter.classNames,key:"idxrect_".concat(a)})}return E.glyphFromChar(e.letter.letter)({className:e.letter.classNames,transform:"translate(0, ".concat(n,") scale(").concat(.009,",").concat(e.frequency,")"),key:"idxglyph_".concat(a)})}))}},{key:"mungeLogoData",value:function(){var e=this.props.alignment,t=e.getSequences().length,r=e.getAllUpperAlphaLettersInAlignmentSorted(),n=(this.props.alignmentType?this.props.alignmentType:this.props.alignment.getPredictedType())===N.AMINOACID?G:U,o=r.reduce((function(e,t){return e[t]={letter:t,classNames:x(t,!1,!1,!1)},e}),{}),a=e.getPositionalLetterCounts(!1,r);return Array.from(a).map((function(e){var r=Object(g.a)(e,2),a=(r[0],r[1]);return Object.entries(a).map((function(e){var r=Object(g.a)(e,2),a=r[0],l=r[1];return{count:l,frequency:l/t,letter:o[a],residue:n.fromSingleLetterCode(a)}})).filter((function(e){return 0!==e.frequency})).sort((function(e,t){return e.frequency>t.frequency?1:-1}))}))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=t.alignment,n=t.alignmentType,o=t.logoType,a=t.glyphWidth;return!this.logoData||o!==e.logoType||a!==e.glyphWidth||r!==e.alignment||n!==e.alignmentType}},{key:"componentDidUpdate",value:function(){F.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.props,n=t.alignment,a=t.glyphWidth,l=t.height;if(!n||!a)return null;this.logoData=this.mungeLogoData();var i=this.logoData.length*a;return o.a.createElement("div",{className:"sequence-logo"},o.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(this.logoData.length," 100"),style:{width:i,height:l||r.defaultProps.height},xmlns:"http://www.w3.org/2000/svg"},this.logoData.map((function(t,r){return o.a.createElement("g",{transform:"translate(".concat(r,",0)"),className:I,key:"p_"+r},e.renderSinglePositionStack(t,e.logoData.length),o.a.createElement("rect",{className:"interaction-placeholder",width:"1",height:"100","data-for":"getLogoTooltip","data-tip":r,"data-class":"sequence-logo-tooltip-container"}))}))),this.renderTooltip())}}]),r}(o.a.Component);q.defaultProps={logoType:W.LETTERS,height:"100px"};r(51);var z=r(35),Q=r.n(z),V=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).cache={},n.state={svgHovered:!1,positionsSelected:[],hoverKey:v()},n.handleSvgHover=n.handleSvgHover.bind(Object(u.a)(n)),n.handlePositionHover=n.handlePositionHover.bind(Object(u.a)(n)),n.handlePositionClicked=n.handlePositionClicked.bind(Object(u.a)(n)),n}return Object(c.a)(r,[{key:"handleSvgHover",value:function(e){this.setState({svgHovered:e})}},{key:"handlePositionHover",value:function(e,t,r){var n=this.props,o=n.onPositionMouseEnter,a=n.onPositionMouseLeave;r&&o?o(t,e.relatedTarget,this.getBars().barsGroupedByPosition.get(t)):!r&&a&&a(t,e.relatedTarget,this.getBars().barsGroupedByPosition.get(t)),this.setState({positionHovered:r?{position:t,element:e.relatedTarget,bars:this.getBars().barsGroupedByPosition.get(t)}:void 0})}},{key:"handlePositionClicked",value:function(e,t){var r=this.state.positionsSelected,n=this.props.onPositionSelectionChanged,o=r.some((function(e){return e.position===t}))?r.filter((function(e){return e.position!==t})):[].concat(Object(p.a)(r),[{position:t,element:e.relatedTarget,bars:this.getBars().barsGroupedByPosition.get(t)}]);n&&n(o),this.setState({positionsSelected:o})}},{key:"normalizeBarHeights",value:function(e){var t=this.props.alignment,n=e.reduce((function(e,t){return void 0!==t.height&&e.push(t.height),e}),[]),o=Math.min.apply(Math,Object(p.a)(n)),a=Math.max.apply(Math,Object(p.a)(n));return e.map((function(e){var n=o,l=e.dataSeriesSet.plotOptions&&e.dataSeriesSet.plotOptions.fixYMax?e.dataSeriesSet.plotOptions.fixYMax(t):a;return Object(i.a)({},e,{normalizedHeight:void 0===e.height?void 0:(e.height-n)/(l-n)*r.POSITION_VIEWBOX_HEIGHT})}))}},{key:"getBars",value:function(){var e=this,t=this.props,r=t.alignment,n=t.dataSeriesSet,o=!this.cache.dataSeriesSet||this.cache.dataSeriesSet.find((function(e,t){return e!==n[t]}));if(!this.cache.bars||r!==this.cache.alignment||o){this.cache.alignment=r,this.cache.dataSeriesSet=n;var a=[];n.forEach((function(e){a=a.concat(e.getBars(r).map((function(t,r){return Object(i.a)({},t,{position:r,dataSeriesSet:e,normalizedHeight:-1})})))})),this.cache.bars=Object.entries(Q.a.groupBy(a,(function(e){return e.dataSeriesSet.id}))).map((function(t){var r=Object(g.a)(t,2),n=(r[0],r[1]);return e.normalizeBarHeights(n)})).flat(),this.cache.barsGroupedByPosition=S(this.cache.bars,(function(e){return e.position})),this.cache.barsGroupedByDataseries=S(this.cache.bars,(function(e){return e.dataSeriesSet}))}return{bars:this.cache.bars,barsGroupedByPosition:this.cache.barsGroupedByPosition,barsGroupedByDataseries:this.cache.barsGroupedByDataseries}}},{key:"renderTooltip",value:function(){var e=this.getBars(),t=this.props.tooltipPlacement,r=this.state.hoverKey;return o.a.createElement(F.a,{id:"getBarTooltip-".concat(r),effect:"solid",type:"light",border:!0,place:t,getContent:function(t){var r=parseInt(t),n=r+1,a=e.barsGroupedByPosition.get(r);return(a?a.reduce((function(e,t){return e+(void 0!==t.height?1:0)}),0):0)<1?void 0:o.a.createElement("div",{className:"bar-position-textblock"},o.a.createElement("h1",null,"Position: ",n),a.map((function(e){return o.a.createElement("div",{className:"dataseries-line ".concat(e.dataSeriesSet.cssClass),key:e.dataSeriesSet.id},o.a.createElement("span",{className:"legend-square",style:{backgroundColor:e.dataSeriesSet.color?e.dataSeriesSet.color:void 0}}),o.a.createElement("span",{className:"legend-text"},e.dataSeriesSet.name,":"," ",e.tooltipValueText?e.tooltipValueText:void 0!==e.height?+e.height.toFixed(1):"undefined"))})))}})}},{key:"renderBarPlot",value:function(){var e=this,t=this.props,n=t.alignment,a=t.positionWidth,l=t.height,i=this.state.hoverKey,s=n.getMaxSequenceLength(),c=a*s,u=this.getBars();return o.a.createElement("svg",{preserveAspectRatio:"none",viewBox:"0 0 ".concat(s*r.POSITION_VIEWBOX_WIDTH," ").concat(r.POSITION_VIEWBOX_HEIGHT),style:{width:c,height:l||r.defaultProps.height},xmlns:"http://www.w3.org/2000/svg",onMouseEnter:function(){return e.handleSvgHover(!0)},onMouseLeave:function(){return e.handleSvgHover(!1)}},Array.from(u.barsGroupedByPosition.entries()).map((function(t){var n=Object(g.a)(t,2),a=n[0],l=n[1],s=l.reduce((function(e,t){return void 0!==t.normalizedHeight&&e.push(t.normalizedHeight),e}),[]),c=s.length<1?0:Math.max.apply(Math,Object(p.a)(s)),d=u.barsGroupedByDataseries.size,h=(1===d?.9:1/d)*r.POSITION_VIEWBOX_WIDTH,f=(1===d?a+.05:a)*r.POSITION_VIEWBOX_WIDTH;return s.length<1?null:o.a.createElement("g",{transform:"translate(".concat(f,",0)"),className:e.state.positionsSelected.some((function(e){return e.position===a}))?"position-container selected":"position-container pos"+a,onClick:function(t){e.handlePositionClicked(t,a)},onMouseEnter:function(t){e.handlePositionHover(t,a,!0)},onMouseLeave:function(t){e.handlePositionHover(t,a,!1)},"data-for":"getBarTooltip-".concat(i),"data-tip":a,"data-class":"barplot-tooltip-container",key:"pos_".concat(a)},l.reduce((function(e,t,n){return void 0!==t.normalizedHeight&&e.push(o.a.createElement("rect",{className:t.dataSeriesSet.cssClass,style:{fill:t.dataSeriesSet.color?t.dataSeriesSet.color:void 0,color:t.dataSeriesSet.color?t.dataSeriesSet.color:void 0},transform:"translate(".concat(1*n/l.length*r.POSITION_VIEWBOX_WIDTH,",").concat(r.POSITION_VIEWBOX_HEIGHT-t.normalizedHeight,")"),width:h,height:t.normalizedHeight,key:"".concat(t.position,"_").concat(t.dataSeriesSet.id)})),e}),new Array),o.a.createElement("rect",{className:"interaction-placeholder",transform:"translate(0,".concat(r.POSITION_VIEWBOX_HEIGHT-c,")"),width:r.POSITION_VIEWBOX_WIDTH,height:c}))})))}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,r=t.alignment,n=t.dataSeriesSet,o=t.positionWidth;return!this.cache||r!==e.alignment||n!==e.dataSeriesSet||o!==e.positionWidth}},{key:"componentDidUpdate",value:function(){F.a.rebuild()}},{key:"render",value:function(){var e=this.state.svgHovered?"barplot hovered":"barplot";return this.props.alignment?o.a.createElement("div",{className:e},this.renderTooltip(),this.renderBarPlot()):null}}]),r}(o.a.Component);V.POSITION_VIEWBOX_HEIGHT=100,V.POSITION_VIEWBOX_WIDTH=1,V.defaultProps={height:"100px"},V.SHANNON_ENTROPY_BARPLOT={id:"entropy",name:"Entropy",cssClass:"barplot-shannon-entropy",color:"#000000",plotOptions:{fixYMax:function(e){var t=e.getAllUpperAlphaLettersInAlignmentSorted(),r=1/t.length;return-1*t.reduce((function(e){return e+r*Math.log2(r)}),0)}},getBars:function(e){for(var t=[],r=e.getPositionalLetterCounts(!0,e.getAllUpperAlphaLettersInAlignmentSorted()),n=e.getMaxSequenceLength(),o=0;o<n;o++){var a=r.get(o);a&&0!==Object.keys(a).length?t.push({height:-1*Object.values(a).reduce((function(e,t){return e+t*Math.log2(t)}),0)}):t.push({height:void 0})}return t}},V.CONSERVATION_BARPLOT={id:"conservation",name:"Conservation",cssClass:"barplot-conservation",color:"#414141",plotOptions:{fixYMax:function(e){return V.SHANNON_ENTROPY_BARPLOT.plotOptions.fixYMax(e)}},getBars:function(e){var t=V.SHANNON_ENTROPY_BARPLOT.plotOptions.fixYMax(e);return V.SHANNON_ENTROPY_BARPLOT.getBars(e).map((function(e){return Object(i.a)({},e,{height:void 0===e.height?void 0:t-e.height})}))}},V.KULLBAC_LEIBLER_DIVERGENCE_BARPLOT={id:"kullback-leibler-divergence",name:"KL Divergence",cssClass:"barplot-kullback-leibler-divergence",color:"darkred",getBars:function(e){for(var t=e.getAllUpperAlphaLettersInAlignmentSorted(),r=e.getPositionalLetterCounts(!0,t),n=e.getGlobalAlphaLetterCounts(!0,t),o=[],a=e.getMaxSequenceLength(),l=function(e){var a=r.get(e);a&&0!==Object.keys(a).length?o.push({height:t.reduce((function(e,t){return t in a&&(e+=a[t]*Math.log(a[t]/n[t])),e}),0)}):o.push({height:void 0})},i=0;i<a;i++)l(i);return o}},V.GAPS_BARPLOT={id:"gaps",name:"Gaps",cssClass:"barplot-gaps",color:"#b7b7b7",plotOptions:{fixYMax:function(e){return e.getSequences().length}},getBars:function(e){for(var t=[],r=e.getMaxSequenceLength(),n=0;n<r;n++){var o=e.getGapCountAtColumn(n);t.push({height:o,tooltipValueText:"".concat((o/e.getSequences().length*100).toFixed(1),"% (").concat(o,")")})}return t}};r(52);var Y=r(3),K=r(13),X=r(37),Z=Object(K.PixiComponent)("CanvasAlignmentViewport",{create:function(e){var t=e.app,r=e.numColumns,n=e.numRows,o=e.stageDimensions;t.renderer.backgroundColor=16777215;var a=new X.a({screenWidth:o.width,worldWidth:r,worldHeight:n,interaction:t.renderer.plugins.interaction}).decelerate().clamp({direction:"all"}).bounce({friction:.1,time:150,underflow:"center"});return a=(a=(a=a.drag({direction:"all"})).pinch()).wheel()},applyProps:function(e,t,r){var n=r.onMouseClick,o=r.numRows,a=r.numColumns,l=r.stageDimensions;t.onMouseClick!==n&&(e.off("clicked"),n&&e.on("clicked",(function(e){n({x:e.world.x,y:e.world.y})})));var i=!t.stageDimensions||t.stageDimensions.height!==l.height||t.stageDimensions.width!==l.width,s=!t.numColumns||!t.numRows||t.numColumns!==a||t.numRows!==o;if(i||s){var c,u;e.resize(l.width,l.height,a,o);var d=r.ensureVisible?r.ensureVisible.height:void 0;if(a/l.width>o/l.height?(c=a+.05*a,e=e.clampZoom({maxHeight:void 0,maxWidth:c,minHeight:d})):(u=o+.05*o,e=e.clampZoom({maxWidth:void 0,maxHeight:u,minHeight:d})),s)e=(e=e.fitWorld(!0)).setZoom(l.width/a,!1);else if(t.stageDimensions&&t.stageDimensions.width!==l.width)if(t.stageDimensions.width>l.width)e.scale.x*a>l.width&&(e=e.setZoom(l.width/a,!1));else{var h=e.scale.x*(l.width/t.stageDimensions.width);(c&&(h*a<c||a>l.width)||u&&(h*o<u||o>l.height))&&(e=e.setZoom(h,!1))}}return r.ensureVisible&&e.ensureVisible(void 0,r.ensureVisible.y,void 0,r.ensureVisible.height),e}}),J=Object(K.PixiComponent)("CanvasAlignmentHighlighter",{create:function(e){var t=new Y.Graphics;return t.interactive=!0,t},applyProps:function(e,t,r){var n=r.x,o=r.y,a=r.width,l=r.height,i=r.fillColor,s=r.fillAlpha;if(e.clear(),e.beginFill(i,s),e.drawRect(n,o,a,l),e.endFill(),t.dragFunctions!==r.dragFunctions&&(e.removeAllListeners(),r.dragFunctions)){e.addListener("pointerdown",(function(e){e.stopPropagation()}));var c=function(t){var n;null===(n=r.dragFunctions)||void 0===n||n.onDragStart(t,e.parent)},u=function(t){var n;null===(n=r.dragFunctions)||void 0===n||n.onDragEnd(t,e.parent)},d=function(t){var n;null===(n=r.dragFunctions)||void 0===n||n.onDragMove(t,e.parent)};e.addListener("mousedown",c),e.addListener("touchstart",c),e.addListener("mouseup",u),e.addListener("mouseupoutside",u),e.addListener("touchend",u),e.addListener("touchendoutside",u),e.addListener("mousemove",d),e.addListener("touchmove",d)}}}),$=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"shouldComponentUpdate",value:function(e){return e.alignment!==this.props.alignment||e.colorScheme!==this.props.colorScheme||e.positionsToStyle!==this.props.positionsToStyle||e.sortBy!==this.props.sortBy}},{key:"render",value:function(){if(!this.props.alignment)return null;for(var e=this.props,t=e.alignment,r=e.alignmentType,n=e.colorScheme,a=e.positionsToStyle,l=e.sortBy,i=t.getSequences(l),s=t.getMaxSequenceLength(),c=i.length,u={fullWidth:s,fullHeight:c,targetTileWidth:Math.min(400,s),targetTileHeight:Math.min(400,c)},d=this.initializeTiledImages(u),h=0;h<d.numYTiles;h++)for(var f=0;f<d.numXTiles;f++){var m=this.generateCanvasForTile(f,h,u.targetTileWidth,u.targetTileHeight,d,i);d.tiles.push(m)}return o.a.createElement(o.a.Fragment,null,d.tiles.map((function(e){return o.a.createElement(K.Sprite,{source:e.image,x:e.pixelX,y:e.pixelY,key:"".concat(e.tileX,"_\n                  ").concat(e.tileY,"_\n                  ").concat(n.commonName,"_\n                  ").concat(a.key,"_\n                  ").concat(r.key,"_\n                  ").concat(l.key,"_\n                  ").concat(t.getName())})})))}},{key:"colorCanvasWithSequence",value:function(e,t,r,n,o){for(var a=0,l=0;l<r.height;l++)for(var i=n[l+o.seqY],s=0;s<r.width;s++){var c=i.sequence[s+o.letterX],u=this.getCurrentMoleculeColors(c,s,o);e.data[a]=u.rgb.red,e.data[a+1]=u.rgb.green,e.data[a+2]=u.rgb.blue,e.data[a+3]=255,a+=4}t.putImageData(e,0,0)}},{key:"generateCanvasForTile",value:function(e,t,r,n,o,a){var l=document.createElement("canvas");l.height=t===o.numYTiles-1?o.lastTileHeight:n,l.width=e===o.numXTiles-1?o.lastTileWidth:r;var i={seqY:t*n,letterX:e*r},s=l.getContext("2d");null===s||void 0===s||s.fillRect(0,0,l.width,l.height);var c=null===s||void 0===s?void 0:s.getImageData(0,0,l.width,l.height);return c&&s&&this.colorCanvasWithSequence(c,s,l,a,i),{tileX:e,tileY:t,pixelX:i.letterX,pixelY:i.seqY,width:l.width,height:l.height,image:l}}},{key:"getCurrentMoleculeColors",value:function(e,t,r){var n=this.props,o=n.alignment,a=n.alignmentType,l=n.colorScheme,i=o.getConsensus().statistics,s=o.getQuerySequence().sequence,c=a===N.AMINOACID?G:U,u=c.UNKNOWN;if(this.props.positionsToStyle===k.ALL)u=c.fromSingleLetterCode(e);else{var d=i[t+r.letterX].letter===e,h=s[t+r.letterX]===e;(this.props.positionsToStyle===k.CONSENSUS&&d||this.props.positionsToStyle===k.CONSENSUS_DIFF&&!d||this.props.positionsToStyle===k.QUERY&&h||this.props.positionsToStyle===k.QUERY_DIFF&&!h)&&(u=c.fromSingleLetterCode(e))}return u.colors[l.commonName]}},{key:"initializeTiledImages",value:function(e){var t=e.targetTileWidth,r=void 0===t?0:t,n=e.targetTileHeight,o=void 0===n?0:n,a=e.fullWidth,l=void 0===a?0:a,i=e.fullHeight,s=void 0===i?0:i;return{targetTileWidth:r,targetTileHeight:o,lastTileWidth:l%r!==0?l%r:r,lastTileHeight:s%o!==0?s%o:o,numXTiles:l%r!==0?Math.floor(l/r)+1:Math.floor(l/r),numYTiles:s%o!==0?Math.floor(s/o)+1:Math.floor(s/o),tiles:[]}}}]),r}(o.a.Component),ee=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).app=void 0,n.divElement=void 0,n.onMouseEnter=function(e){document.body.style.overflow="hidden"},n.onMouseLeave=function(e){document.body.style.overflow="auto"},n.onWheel=function(e){},n.state={dragging:!1},n.divElement=o.a.createRef(),n}return Object(c.a)(r,[{key:"informParentOfIndicatorDragged",value:function(e){var t=this.props,r=t.alignment,n=t.onIndicatorDrag,o=this.state.dragPositions;n&&o&&n({x:0,y:Math.round(e.y-o.startOffset.top),width:r.getMaxSequenceLength(),height:0},e)}},{key:"render",value:function(){var e=this;if(!this.props.alignment)return null;var t,r,n=this.props,a=n.alignment,l=n.alignmentType,i=n.colorScheme,s=n.highlightRows,c=n.onClick,u=n.positionsToStyle,d=n.sortBy,h=n.stageDimensions,f=n.viewportProps,m=this.state,g=m.dragging,p=m.dragPositions,y=a.getSequences().length,v=a.getMaxSequenceLength();Y.utils.skipHello(),Y.settings.SCALE_MODE=Y.SCALE_MODES.NEAREST,s&&(r=s.rowEnd-s.rowStart+1,t=(t=g&&p?Math.round(p.current.y-p.startOffset.top):s.rowStart)>0?t:0);var S=null===h||void 0===h?void 0:h.height,A=null===h||void 0===h?void 0:h.width;return o.a.createElement("div",{className:"alignment-canvas",onWheel:this.onWheel,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.divElement},this.divElement?o.a.createElement(K.Stage,{width:A,height:S,options:{transparent:!0}},o.a.createElement(K.AppContext.Consumer,null,(function(t){return e.app=t,o.a.createElement(o.a.Fragment,null)})),o.a.createElement(K.AppContext.Consumer,null,(function(n){return o.a.createElement(Z,Object.assign({app:n,ensureVisible:void 0===t||void 0===r?void 0:{y:t,height:r},numColumns:v,numRows:y,onMouseClick:c,stageDimensions:h},f),o.a.createElement($,{alignment:a,alignmentType:l,sortBy:d,colorScheme:i,positionsToStyle:u}),void 0!==t&&void 0!==r&&r<a.getSequences().length?o.a.createElement(J,{fillColor:16711680,fillAlpha:.25,x:0,y:t,width:v,height:r,dragFunctions:{onDragStart:function(r,n){var o=r.data.getLocalPosition(n);e.setState({dragging:!0,dragPositions:{startOffset:{left:o.x-0,top:o.y-t},current:o}})},onDragEnd:function(t,r){e.setState({dragging:!1}),e.informParentOfIndicatorDragged(t.data.getLocalPosition(r))},onDragMove:function(t,r){if(g){var n=t.data.getLocalPosition(r);e.setState({dragPositions:{startOffset:p.startOffset,current:n}}),e.informParentOfIndicatorDragged(n)}}}}):o.a.createElement(o.a.Fragment,null))}))):null)}}]),r}(o.a.Component);ee.defaultProps={stageDimensions:{width:485,height:650}};var te=r(38),re=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var o;return Object(s.a)(this,r),(o=t.call(this,e)).ref=void 0,o.resizeSensor=void 0,o.renderCanvasComponent=function(){var e=o.props,t=e.alignment,r=e.highlightRows,a=e.sortBy,l=e.alignmentStyle,i=o.getSizing();return n.createElement(ee,{alignment:t,alignmentType:l.alignmentType,positionsToStyle:l.positionsToStyle,colorScheme:l.colorScheme,sortBy:a,stageDimensions:{width:i.frameWidth-14,height:i.frameHeight},highlightRows:r,onClick:o.props.onClick,onIndicatorDrag:o.props.onIndicatorDrag})},o.state={height:window.innerHeight},o.setupResizeSensor=o.setupResizeSensor.bind(Object(u.a)(o)),o}return Object(c.a)(r,[{key:"getSizing",value:function(){var e=this.props.startingWidth,t=this.state,n=t.height,o=t.resizedWidth;function a(e){return e-4-1}return{borderWidth:1,margin:2,frameHeight:n,frameWidth:o||a(e||r.defaultProps.startingWidth)}}},{key:"setupResizeSensor",value:function(e){var t=this;e&&!this.resizeSensor&&(this.ref=e,this.resizeSensor=new te.ResizeSensor(e,(function(){t.state.resizedWidth===e.clientWidth&&t.state.height===e.clientHeight||setTimeout((function(){t.setState({resizedWidth:e.clientWidth,height:e.clientHeight})}))})))}},{key:"render",value:function(){var e=this.props,t=e.alignHorizontal,r=e.resizable,o=e.verticalHeight,a=this.getSizing(),l="div"===o?"absolute":"fixed";return n.createElement("div",{ref:this.setupResizeSensor,className:"minimap-holder",style:Object(i.a)({},"left"===t?{left:0}:{right:0},{position:l,width:a.frameWidth,borderWidth:"".concat(a.borderWidth,"px"),margin:"".concat(a.margin,"px"),resize:r||"none",direction:"left"===t?"ltr":"rtl"})},this.renderCanvasComponent())}}]),r}(n.Component);re.defaultProps={alignHorizontal:"right",startingWidth:120,resizable:"none",verticalHeight:"div"};var ne=r(22),oe=r.n(ne),ae=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).editor=void 0,e.lastText=void 0,e.lastMode=void 0,e.element=void 0,e.lastElementWidth=void 0,e.lastElementHeight=void 0,e}return Object(c.a)(r,[{key:"getText",value:function(){if(this.props.text)return this.props.text;throw Error("Internal error: 'text' attribute must be provided or subclasses must implement getText()")}},{key:"getEditorMode",value:function(){return this.props.editorMode}},{key:"setupEditor",value:function(e){this.editor=oe.a.edit(e),this.editor.setShowPrintMargin(!1),this.editor.setReadOnly(!0),this.editor.setHighlightActiveLine(!1),this.editor.setHighlightGutterLine(!1),this.editor.setFontSize(this.props.fontSize+"px"),this.editor.renderer.setShowGutter(!1),this.editor.renderer.setPadding(0),this.editor.renderer.$cursorLayer.element.style.display="none"}},{key:"addEventListeners",value:function(){var e=this;if(!this.editor)throw Error("Editor must be defined before adding listeners.");var t=this.props,r=t.characterSizeChanged,n=t.mouseDown,o=t.mouseMove;function a(e,t){var r=t.getDocumentPosition(),n=e.renderer.textToScreenCoordinates(r.row,r.column);return{mouseRow:r.row,mouseColumn:r.column,mousePageX:n.pageX,mousePageY:n.pageY}}this.editor.on("mousemove",(function(t){o&&o(a(e.editor,t))})),this.editor.on("mousedown",(function(t){n&&n(a(e.editor,t))})),this.editor.renderer.on("changeCharacterSize",(function(e){r&&r(e.data.width)}))}},{key:"setText",value:function(){if(!this.editor)throw Error("Editor must be defined to call setText()");if(this.props.fontSize+"px"!==this.editor.getFontSize()&&this.editor.setFontSize(this.props.fontSize+"px"),this.lastMode!==this.getEditorMode()){var e=this.getEditorMode();this.editor.session.setMode(e),this.lastMode=e}if(!this.lastText||this.lastText!==this.getText()){this.editor.selectAll(),this.editor.removeLines();var t=this.getText();this.editor.insert(t),this.lastText=t}}},{key:"initialLoad",value:function(e){e&&!this.editor&&(this.element=e,this.lastElementWidth=e.clientWidth,this.lastElementHeight=e.clientHeight,this.setupEditor(e),this.addEventListeners(),this.setText(),this.props.editorLoaded&&this.props.editorLoaded(this.editor,e))}},{key:"componentDidUpdate",value:function(){if(!this.editor||!this.element)throw Error("internal error - componentDidUpdate called before editor initialized");return this.setText(),this.element.clientWidth===this.lastElementWidth&&this.element.clientHeight===this.lastElementHeight||(this.lastElementWidth=this.element.clientWidth,this.lastElementHeight=this.element.clientHeight,this.editor.resize()),!1}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:this.props.classNames,onMouseEnter:function(){e.props.mouseEnter&&e.props.mouseEnter()},onMouseLeave:function(){e.props.mouseLeave&&e.props.mouseLeave()}},o.a.createElement("div",{id:this.props.id,ref:function(t){return e.initialLoad(t)}}))}}]),r}(o.a.Component);ae.defaultProps={fontSize:14};var le=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getText",value:function(){return this.props.alignment.getSequences(this.props.sortBy).map((function(e){return e.sequence})).join("\n")}},{key:"getEditorMode",value:function(){return this.props.alignment.getAceEditorMode()}}]),r}(ae);le.defaultProps={sortBy:m.INPUT,fontSize:14};var ie,se=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getText",value:function(){return this.props.alignment.getConsensus().sequence.sequence}}]),r}(le),ce=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getText",value:function(){return this.props.alignment.getQuerySequence().sequence}}]),r}(le),ue=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,[{key:"getText",value:function(){return r.generateTextualRuler(this.props.alignment.getMaxSequenceLength())}},{key:"getEditorMode",value:function(){}}],[{key:"generateTextualRuler",value:function(e){for(var t="",r=1;r<=e+1;r++){var n=r%10===0;if(t+=n?"|":!n&&r%5===0?":":".",n){var o=""+r,a=t.length-o.length-1;a<0||(t=t.substr(0,a)+o+"|")}}return t}}]),r}(ae),de={zoomLevel:13,sortBy:m.INPUT,showAnnotations:!0,showConsensus:!0,showLogo:!0,showMinimap:!1,showQuery:!0,showRuler:!0,logoOptions:{logoType:W.LETTERS,height:"100px",tooltipPlacement:void 0},minimapOptions:{alignHorizontal:"right",startingWidth:100,resizable:"horizontal",verticalHeight:"div"},barplots:[{dataSeriesSet:[V.SHANNON_ENTROPY_BARPLOT,V.GAPS_BARPLOT],tooltipPlacement:void 0,height:"100px"}]};!function(e){e.QUERY="QUERY",e.CONSENSUS="CONSENSUS",e.POSITIONAL_RULER="POSITIONAL_RULER",e.MSA_SEQUENCES="MSA_SEQUENCES",e.MSA_IDS="MSA_IDS"}(ie||(ie={}));var he=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).verticalScrollSync=void 0,n.horizontalScrollSync=void 0,n.renderSequenceLogo=function(){var e=n.props,t=e.alignment,r=e.logoOptions,a=e.style,l=r||de.logoOptions;return o.a.createElement("div",{className:"".concat(a.alignmentType.className," ")+"".concat(a.colorScheme.className," ")+"".concat(k.ALL.className)},o.a.createElement(q,{alignment:t,glyphWidth:n.state.aceCharacterWidth,alignmentType:a.alignmentType,logoType:l.logoType,tooltipPlacement:l.tooltipPlacement,height:l.height}))},n.renderBarplot=function(e){return o.a.createElement(V,{alignment:n.props.alignment,tooltipPlacement:e.tooltipPlacement,dataSeriesSet:e.dataSeriesSet,positionWidth:n.state.aceCharacterWidth,height:e.height})},n.renderConsensusQueryBox=function(){return o.a.createElement("div",{className:"consensusseq-box"},o.a.createElement(se,{alignment:n.props.alignment,fontSize:n.props.zoomLevel?n.props.zoomLevel:de.zoomLevel,classNames:["ace-consensusseq",n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),editorLoaded:function(e,t){n.aceEditorLoaded(ie.CONSENSUS,e,t,L.horizontal)}}))},n.renderQuerySeqBox=function(){return o.a.createElement("div",{className:"queryseq-box"},o.a.createElement(ce,{alignment:n.props.alignment,fontSize:n.props.zoomLevel?n.props.zoomLevel:de.zoomLevel,sortBy:n.props.sortBy?n.props.sortBy:de.sortBy,classNames:["ace-queryseq",n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),editorLoaded:function(e,t){n.aceEditorLoaded(ie.QUERY,e,t,L.horizontal)}}))},n.renderPositionBox=function(){return o.a.createElement("div",{className:"position-box"},o.a.createElement(ue,{classNames:"ace-positions",alignment:n.props.alignment,fontSize:n.props.zoomLevel?n.props.zoomLevel:de.zoomLevel,editorLoaded:function(e,t){n.aceEditorLoaded(ie.POSITIONAL_RULER,e,t,L.horizontal)}}))},n.renderAlignmentBox=function(){return o.a.createElement("div",{className:"alignment-box"},o.a.createElement(le,{alignment:n.props.alignment,fontSize:n.props.zoomLevel?n.props.zoomLevel:de.zoomLevel,sortBy:n.props.sortBy?n.props.sortBy:de.sortBy,classNames:["ace-alignment",n.props.style.residueDetail.className,n.props.style.alignmentType.className,n.props.style.positionsToStyle.className,n.props.style.colorScheme.className].join(" "),characterSizeChanged:n.handleCharacterSizeChanged,editorLoaded:function(e,t){n.aceEditorLoaded(ie.MSA_SEQUENCES,e,t,L.both)}}))},n.renderAlignmentAnnotationBox=function(){return o.a.createElement("div",{className:"alignment-metadata-box"},o.a.createElement(ae,{classNames:"ace-alignment-metadata",text:n.props.alignment.getSequences(n.props.sortBy?n.props.sortBy:de.sortBy).map((function(e){return e.id})).join("\n"),fontSize:n.props.zoomLevel?n.props.zoomLevel:de.zoomLevel,editorLoaded:function(e,t){n.aceEditorLoaded(ie.MSA_IDS,e,t,L.vertical)}}))},n.state={aceEditors:{},aceCharacterWidth:0,windowWidth:window.innerWidth},n.verticalScrollSync=new b(L.vertical),n.horizontalScrollSync=new b(L.horizontal),n.minimapClicked=n.minimapClicked.bind(Object(u.a)(n)),n.minimapRectHighlightMoved=n.minimapRectHighlightMoved.bind(Object(u.a)(n)),n.handleCharacterSizeChanged=n.handleCharacterSizeChanged.bind(Object(u.a)(n)),n.aceEditorLoaded=n.aceEditorLoaded.bind(Object(u.a)(n)),n.windowDimensionsUpdated=n.windowDimensionsUpdated.bind(Object(u.a)(n)),n}return Object(c.a)(r,[{key:"handleCharacterSizeChanged",value:function(e){this.state.aceCharacterWidth!==e&&this.setState({aceCharacterWidth:e})}},{key:"aceEditorLoaded",value:function(e,t,r,n){var o=this;n!==L.horizontal&&n!==L.both||this.horizontalScrollSync.registerAceScroller(t,r),n!==L.vertical&&n!==L.both||this.verticalScrollSync.registerAceScroller(t,r),this.setState((function(r){var n=Object(i.a)({},r.aceEditors);return n[e]=t,{aceCharacterWidth:t.renderer.characterWidth,aceEditors:n}})),e===ie.MSA_SEQUENCES&&t.renderer.on("afterRender",(function(){o.setState({msaEditorVewport:{numberVisibleRows:t.renderer.getLastFullyVisibleRow()-t.renderer.getFirstFullyVisibleRow()+1,firstFullyVisibleRow:t.renderer.getFirstFullyVisibleRow(),lastFullyVisibleRow:t.renderer.getLastFullyVisibleRow()}})}))}},{key:"windowDimensionsUpdated",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"minimapClicked",value:function(e){var t=this.state,r=t.aceEditors,n=t.msaEditorVewport,o=n?n.numberVisibleRows:0,a=Math.round(e.y-o/2);a=a<0?0:a,void 0!==r[ie.MSA_SEQUENCES]&&r[ie.MSA_SEQUENCES].scrollToRow(a),void 0!==r[ie.MSA_IDS]&&r[ie.MSA_IDS].scrollToRow(a)}},{key:"minimapRectHighlightMoved",value:function(e,t){var r=this.state.aceEditors;void 0!==r[ie.MSA_SEQUENCES]&&r[ie.MSA_SEQUENCES].scrollToRow(e.y),void 0!==r[ie.MSA_IDS]&&r[ie.MSA_IDS].scrollToRow(e.y)}},{key:"renderWidget",value:function(e,t,r,n,a){var l=this;return o.a.createElement("div",{className:"av-widget ".concat(e),key:a},o.a.createElement("div",{className:"av-annotation"},t),o.a.createElement("div",{className:"av-content",ref:function(e){e&&n&&l.horizontalScrollSync.registerElementScroller(e)}},r))}},{key:"renderMiniMap",value:function(){var e=this.props,t=e.alignment,r=e.showMinimap,n=e.sortBy,a=e.style,l=this.state.msaEditorVewport,i=this.props.minimapOptions?this.props.minimapOptions:de.minimapOptions;return t&&a&&o.a.createElement("div",{className:"minimap",style:{display:r?"flex":"none"}},o.a.createElement(re,{alignment:t,alignmentStyle:a,sortBy:n||de.sortBy,highlightRows:l?{rowStart:l.firstFullyVisibleRow,rowEnd:l.lastFullyVisibleRow}:void 0,alignHorizontal:i.alignHorizontal,resizable:i.resizable,startingWidth:i.startingWidth,verticalHeight:i.verticalHeight,onClick:this.minimapClicked,onIndicatorDrag:this.minimapRectHighlightMoved}))}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.windowDimensionsUpdated)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.windowDimensionsUpdated)}},{key:"render",value:function(){var e=this,t=this.props,r=t.alignment,n=t.barplots,a=t.showAnnotations,l=t.showConsensus,i=t.showQuery,s=t.showRuler;if(!r)return null;var c=["alignment-viewer"];return a||c.push("annotation-closed"),o.a.createElement("div",{className:c.join(" ")},this.renderMiniMap(),!n||n.length<1?null:n.map((function(t,r){return e.renderWidget("av-barplot-holder",t.dataSeriesSet.map((function(e){return e.name})).join(" / "),e.renderBarplot(t),!0,"".concat(r,"-").concat(t.dataSeriesSet.map((function(e){return e.id})).join("|")))})),this.props.showLogo&&this.props.logoOptions?this.renderWidget("av-sequence-logo-holder","Logo:",this.renderSequenceLogo(),!0):null,l?this.renderWidget("av-consensus-seq-holder","Consensus:",this.renderConsensusQueryBox()):null,i?this.renderWidget("av-query-seq-holder","Query:",this.renderQuerySeqBox()):null,s?this.renderWidget("av-position-indicator-holder","Position:",this.renderPositionBox()):null,this.renderWidget("av-ace-msa-holder",this.renderAlignmentAnnotationBox(),this.renderAlignmentBox()))}}]),r}(o.a.Component);he.defaultProps=de;var fe=r(16),me=r.n(fe),ge=r(23),pe=(r(65),r(39));var ye=function(){function e(t,r){Object(s.a)(this,e),this.uuid=void 0,this.aceEditorMode=void 0,this.name=void 0,this.predictedNT=void 0,this.sequences=void 0,this.querySequence=void 0,this.positionalLetterCounts=new Map,this.globalAlphaLetterCounts={},this.allUpperAlphaLettersInAlignmentSorted=void 0,this.consensus=void 0,this.uuid=v(),this.name=t,this.sequences=new Map,this.sequences.set(m.INPUT,r),this.querySequence=r[0],this.predictedNT=!0;for(var n=new Date,o={},a=0;a<r.length;a++)for(var l=r[a].sequence,i=0;i<l.length;i++){var c=l[i],u=!!c.match(/[a-z]/i);u&&this.predictedNT&&U.fromSingleLetterCode(c)===U.UNKNOWN&&(this.predictedNT=!1);var d=i;o[c]=1;var h=this.positionalLetterCounts.get(d);h||(h={},this.positionalLetterCounts.set(d,h)),c in h===!1&&(h[c]=0),h[c]+=1,u&&(c in this.globalAlphaLetterCounts===!1&&(this.globalAlphaLetterCounts[c]=0),this.globalAlphaLetterCounts[c]+=1)}this.allUpperAlphaLettersInAlignmentSorted=Object.keys(o).sort().reduce((function(e,t){return t.match(/[A-Z]/)&&e.push(t),e}),[]);var f=Array.from(this.positionalLetterCounts).map((function(e){var t=Object(g.a)(e,2),r=t[0],n=t[1],o=Object.keys(n).reduce((function(e,t){var r=e.match(/[a-z]/i),o=t.match(/[a-z]/i);return r&&!o?e:o&&!r?t:n[e]>n[t]?e:t}));return{position:r,letter:o,occurrences:n[o]}}));this.consensus={sequence:{id:"consensus",sequence:f.map((function(e){return e.letter})).join("")},statistics:f},console.log("done parsing alignment. took "+((new Date).getTime()-n.getTime())+"ms")}return Object(c.a)(e,null,[{key:"normalizeLetterCounts",value:function(e,t){var r=Object.keys(e).reduce((function(r,n){return t&&!t.includes(n)||(r+=e[n]),r}),0);return Object.keys(e).reduce((function(n,o){return t&&!t.includes(o)||(n[o]=e[o]/r),n}),{})}}]),Object(c.a)(e,[{key:"getPredictedType",value:function(){return this.predictedNT?N.NUCLEOTIDE:N.AMINOACID}},{key:"getDefaultStyle",value:function(){return this.predictedNT?new P:new _}},{key:"getUUID",value:function(){return this.uuid}},{key:"getName",value:function(){return this.name}},{key:"getAceEditorMode",value:function(){return this.aceEditorMode||(this.aceEditorMode="ace/mode/"+this.uuid,function(e,t){var r=e.split("/");if(3!==r.length||"ace"!==r[0]||"mode"!==r[1])throw Error("ace mode name must be of the form '/ace/mode/MODENAME'");var n=e.split("/")[2];oe.a.define("ace/mode/"+n+"_highlight_rules",(function(e,r,n){var o=e("../lib/oop"),a=e("./text_highlight_rules").TextHighlightRules,l=function(){for(var e={},r=/./,n=function(n){var o=0===n?"start":"p"+n,a=n===t.getMaxSequenceLength()-1?"start":"p"+(n+1);e[o]=[{token:function(e){return x(e,e===t.getConsensus().statistics[n].letter,e===t.getQuerySequence().sequence[n],!0)},regex:r,next:a}]},o=0;o<t.getMaxSequenceLength();o++)n(o);this.$rules=e};o.inherits(l,a),r.AlignmentHighlightRules=l})),oe.a.define("ace/mode/"+n,(function(e,t,r){var o=e("../lib/oop"),a=e("../mode/text").Mode,l=e("../tokenizer").Tokenizer,i=e("ace/mode/"+n+"_highlight_rules").AlignmentHighlightRules,s=function(){this.$tokenizer=new l((new i).getRules())};o.inherits(s,a),function(){}.call(s.prototype),t.Mode=s}))}(this.aceEditorMode,this)),this.aceEditorMode}},{key:"getConsensus",value:function(){return this.consensus}},{key:"getGapsPerColumn",value:function(){return Array.from(this.positionalLetterCounts).map((function(e){var t=Object(g.a)(e,2),r=(t[0],t[1]);return isNaN(r["-"])?0:r["-"]}))}},{key:"getGapCountAtColumn",value:function(e){var t=this.positionalLetterCounts.get(e);return t&&t["-"]?t["-"]:0}},{key:"getGlobalAlphaLetterCounts",value:function(t,r){var n=this;return t?e.normalizeLetterCounts(this.globalAlphaLetterCounts,r):r?Object.keys(this.globalAlphaLetterCounts).reduce((function(e,t){return r.includes(t)&&(e[t]=n.globalAlphaLetterCounts[t]),e}),{}):this.globalAlphaLetterCounts}},{key:"getMaxSequenceLength",value:function(){return this.getSequences().reduce((function(e,t){return t.sequence.length>e&&(e=t.sequence.length),e}),-1)}},{key:"getPositionalLetterCounts",value:function(t,r){return t||r?Array.from(this.positionalLetterCounts).reduce((function(n,o){var a=Object(g.a)(o,2),l=a[0],i=a[1];return n.set(l,t?e.normalizeLetterCounts(i,r):Object.keys(i).reduce((function(e,t){return r.includes(t)&&(e[t]=i[t]),e}),{})),n}),new Map):this.positionalLetterCounts}},{key:"getSequences",value:function(e,t){return t=t||!1,(e=e||m.INPUT)===m.INPUT||this.sequences.has(e)&&!t||this.sequences.set(e,e.sortFn(this.sequences.get(m.INPUT),this)),this.sequences.get(e)}},{key:"getAllUpperAlphaLettersInAlignmentSorted",value:function(){return this.allUpperAlphaLettersInAlignmentSorted}},{key:"getQuerySequence",value:function(){return this.querySequence}}]),e}(),ve=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(c.a)(r,null,[{key:"fromFileContents",value:function(e,t){var n=t.trim();if(n.length<1||">"!==n[0])throw A("Fasta","File needs to begin with '>'");for(var o=n.split(">"),a=[],l=0;l<o.length;l++){var i=o[l].split(/\r?\n/);if(i.length>1){var s={id:i[0],sequence:i.slice(1).join("")};a.push(s)}}return new r(e,a)}}]),r}(ye),Se=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e,n,o){var a;return Object(s.a)(this,r),(a=t.call(this,e,n)).metadata=void 0,a.metadata=o,a}return Object(c.a)(r,[{key:"getMetadata",value:function(){return this.metadata}}],[{key:"fromFileContents",value:function(e,t){var n=t.trim().split(/\r?\n/);if(n.length<3)throw A("Stockholm","The file length is less than 3 rows");if(!1===n[0].startsWith("# STOCKHOLM 1.0"))throw A("Stockholm","The first line must be '# STOCKHOLM 1.0'");if("//"!==n[n.length-1])throw A("Stockholm","The last line must be '//'");var o={GF:{},GS:{},GR:{},GC:{}},a=[];return n.slice(1,n.length-1).forEach((function(e,t){if((e=e.trim()).startsWith("#"))if(e.length<8||!1===["GF","GS","GR","GC"].includes(e.substr(2,2)))console.warn("Unexpected metadata line in Stockholm alignment: "+e);else{var r=e.substr(2,2),n=e.substr(5).trim().match(/^(\S+)\s(.*)/).slice(1);if(n[1]=n[1].trim(),"GF"===r)n[0]in o.GF===!1?o.GF[n[0]]=n[1]:o.GF[n[0]]+=" "+n[1];else if("GS"===r){var l=n[0],i=n[1].trim().match(/^(\S+)\s(.*)/).slice(1);l in o.GS===!1&&(o.GS[l]={}),i[0]in o.GS[l]===!1&&(o.GS[l][i[0]]=[]),o.GS[l][i[0]].push(i[1])}else if("GR"===r){var s=n[0],c=n[1].trim().match(/^(\S+)\s(.*)/).slice(1);s in o.GR===!1&&(o.GR[s]={}),o.GR[s][c[0]]=c[1]}else"GC"===r&&(o.GC[n[0]]=n[1])}else{var u=e.match(/^(\S+)\s(.*)/).slice(1);a.push({id:u[0].trim(),sequence:u[1].trim()})}})),new r(e,a,o)}}]),r}(ye),Ae=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e,n,o){var a;return Object(s.a)(this,r),(a=t.call(this,e)).errors=void 0,a.possibleResolution=void 0,a.errors=n,a.possibleResolution=o,a}return r}(Object(pe.a)(Error)),Le=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"loadAlignmentFromURL",value:function(){var t=Object(ge.a)(me.a.mark((function t(r,n,o,a){var l,i;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=File,t.next=4,fetch("".concat(r));case 4:return t.next=6,t.sent.blob();case 6:t.t1=t.sent,t.t2=[t.t1],t.t3=a||r.substring(r.lastIndexOf("/")+1),l=new t.t0(t.t2,t.t3),t.next=18;break;case 12:return t.prev=12,t.t4=t.catch(0),console.error("Unable to load alignment by URL '"+r+"'",t.t4),i=new Ae("Unable to fetch alignment in URL",[{name:"Browser-reported error message",message:t.t4.message}],"Possible causes: (1) The alignment is not sent using SSL or (2) the server that hosts the alignment has not enabled CORS. To be assessible to Alignment Viewer 2, the alignment must be served by HTTPS and the server must enable CORS."),o(i),t.abrupt("return");case 18:try{e.loadAlignmentFromFile(l,n,o)}catch(s){o(s)}case 19:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"loadAlignmentFromFile",value:function(){var t=Object(ge.a)(me.a.mark((function t(r,n,o){var a;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FileReader).onload=function(t){try{n(e.loadAlignmentFromText(r.name,a.result))}catch(t){o(t)}},a.readAsText(r);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"loadAlignmentFromText",value:function(t,r){for(var n=new Ae("Alignment Format Error",[]),o=0;o<e.AlignmentFileTypes.length;o++)try{return e.AlignmentFileTypes[o].fromFileContents(t,r)}catch(a){n.errors.push(a)}throw n}}]),e}();Le.AlignmentFileTypes=[Se,ve];var be=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var o;return Object(s.a)(this,r),(o=t.call(this,e)).fileInput=void 0,o.handleFileUploadInputChange=o.handleFileUploadInputChange.bind(Object(u.a)(o)),o.handleClick=o.handleClick.bind(Object(u.a)(o)),o.alignmentLoaded=o.alignmentLoaded.bind(Object(u.a)(o)),o.handleFileUploadInputChange=o.handleFileUploadInputChange.bind(Object(u.a)(o)),o.fileInput=n.createRef(),o}return Object(c.a)(r,[{key:"handleClick",value:function(e){var t;e.preventDefault(),null===(t=this.fileInput.current)||void 0===t||t.click()}},{key:"alignmentLoaded",value:function(e){this.props.onAlignmentLoaded(e),this.fileInput.current&&(this.fileInput.current.value="")}},{key:"handleFileUploadInputChange",value:function(e){var t=this,r=this.props,n=r.onFileLoadStart,o=r.onAlignmenLoadError;e.preventDefault(),this.fileInput.current&&this.fileInput.current.files&&(n&&n(),setTimeout((function(){var e=t.fileInput.current.files[0];Le.loadAlignmentFromFile(e,t.alignmentLoaded,o)})))}},{key:"renderFileUpload",value:function(){var e=this.props.fileSelectorLabelText;return n.createElement("label",null,n.createElement("strong",null,e),n.createElement("input",{type:"file",className:"hidden-file-input",ref:this.fileInput,onChange:this.handleFileUploadInputChange}),n.createElement("button",{type:"button",onClick:this.handleClick},"Choose File"))}},{key:"renderExampleFiles",value:function(){var e=this,t=this.props,r=t.exampleFiles,o=t.onFileLoadStart,a=t.onAlignmenLoadError;return r?n.createElement("label",null,n.createElement("strong",null,"Example Alignments:"),r.map((function(t){return n.createElement("button",{type:"button",className:"button-link",key:t.fileURL,onClick:function(){var r=Object(ge.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o&&o(),Le.loadAlignmentFromURL(t.fileURL,e.alignmentLoaded,a,t.fileName);case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},t.labelText)}))):null}},{key:"render",value:function(){return n.createElement("div",{className:"alignment-file-loader"},n.createElement("div",{className:"file-upload-input"},this.renderFileUpload()),n.createElement("div",{className:"example-files"},this.renderExampleFiles()))}}]),r}(n.Component);be.defaultProps={fileSelectorLabelText:"Upload:"};var Ee="alignment-url",Be=function(e){Object(d.a)(r,e);var t=Object(h.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).renderSettingsBox=function(e){var t=n.state,r=t.alignment,a=t.loading,l=t.loadError,i=t.showSettings,s=r?o.a.createElement("div",null,o.a.createElement("h3",null,r.getName()),o.a.createElement("h4",null,"".concat(r.getSequences().length," sequences (rows) and ").concat(r.getMaxSequenceLength()," positions (columns) "))):o.a.createElement(o.a.Fragment,null);return o.a.createElement("div",{className:"app-header"},o.a.createElement("div",{className:"settings-box"},o.a.createElement("form",null,o.a.createElement("div",{className:"settings-header"},o.a.createElement("button",{className:"button-link".concat(i?" hide":""),type:"button",onClick:function(e){n.setState({showSettings:!0})}},"Expand"),o.a.createElement("button",{className:"button-link".concat(i?"":" hide"),type:"button",onClick:function(e){n.setState({showSettings:!1})}},"Hide"),o.a.createElement("div",null,o.a.createElement("h2",null,"AlignmentViewer 2.0 Settings Demo"),s)),o.a.createElement("div",{style:{display:i?"block":"none",position:"relative"}},n.renderAlignmentTypeLabel(e),n.renderSortControl(),n.renderColorScheme(e),n.renderResidueDetail(e),n.renderPositionStyling(e),n.renderSequenceLogo(),n.renderZoomButtons(),n.renderMiniMapToggle(),n.renderConservationBarplotToggle(),n.renderEntropyGapBarplotToggle(),n.renderKLDivergenceBarplot(),n.renderAnnotationToggle(),o.a.createElement("br",null),n.renderFileUpload(),a?o.a.createElement("div",{className:"loader"}):null,l?o.a.createElement("div",{className:"load-error"},o.a.createElement("h3",null,o.a.createElement("strong",null,l.message)),o.a.createElement("ul",null,l.errors.map((function(e){return o.a.createElement("li",{key:e.name},o.a.createElement("strong",null,e.name,":")," ",e.message)}))),l.possibleResolution?o.a.createElement("div",null,l.possibleResolution):null):null))))},n.renderSortControl=function(){var e=n.state,t=e.sortBy,r=e.style instanceof _?m.aminoAcidSorters:m.nucleotideSorters;return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Sort order:"),o.a.createElement("select",{value:t.key,onChange:function(e){return n.setState({sortBy:m.fromKey(e.target.value)})}},r.map((function(e){return o.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},n.renderAlignmentTypeLabel=function(e){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Alignment Type:"),o.a.createElement("select",{value:e.alignmentType.key,onChange:function(e){return n.setState({style:D.fromAlignmentType(N.fromKey(e.target.value))})}},N.list.map((function(e){return o.a.createElement("option",{value:e.key,key:e.key},e.description)})))))},n.renderColorScheme=function(e){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Color Scheme:"),o.a.createElement("select",{value:e.alignmentType.allColorSchemes.indexOf(e.colorScheme),onChange:function(t){n.setState({style:Object(i.a)({},e,{colorScheme:e.alignmentType.allColorSchemes[parseInt(t.target.value)]})})}},e.alignmentType.allColorSchemes.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e.description)})))))},n.renderResidueDetail=function(e){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Residue Style:"),o.a.createElement("select",{value:e.residueDetail.key,onChange:function(t){n.setState({style:Object(i.a)({},e,{residueDetail:M.fromKey(t.target.value)})})}},M.list.map((function(e){return o.a.createElement("option",{key:e.key,value:e.key},e.description)})))))},n.renderPositionStyling=function(e){return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Positions to Style:"),o.a.createElement("select",{value:k.list.indexOf(e.positionsToStyle),onChange:function(t){n.setState({style:Object(i.a)({},e,{positionsToStyle:k.list[parseInt(t.target.value)]})})}},k.list.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e.description)})))))},n.renderSequenceLogo=function(){var e=n.state.logoPlotStyle;return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Sequence Logo Style:"),o.a.createElement("select",{value:e,onChange:function(e){n.setState({logoPlotStyle:e.target.value})}},Object.values(W).map((function(e){return o.a.createElement("option",{key:e,value:e},e)})))))},n.renderZoomButtons=function(){var e=n.state.zoomLevel;return o.a.createElement("div",null,o.a.createElement("label",null,o.a.createElement("strong",null,"Zoom Level:"),o.a.createElement("div",{className:"zoom-level"},o.a.createElement("button",{type:"button",disabled:e<7,onClick:function(t){n.setState({zoomLevel:e-1})}},"-"),e,o.a.createElement("button",{type:"button",disabled:e>15,onClick:function(t){n.setState({zoomLevel:e+1})}},"+"))))},n.renderFileUpload=function(){return o.a.createElement("div",null,o.a.createElement(be,{fileSelectorLabelText:"Upload Alignment File:",exampleFiles:[{labelText:"\u03b2-lactamase",fileURL:"/AlignmentViewer2.0/7fa1c5691376beab198788a726917d48_b0.4.a2m",fileName:"7fa1c5691376beab198788a726917d48_b0.4.a2m"}],onFileLoadStart:function(){n.setState({loading:!0})},onAlignmentLoaded:n.onAlignmentReceived,onAlignmenLoadError:n.onAlignmentLoadError}))},n.renderConservationBarplotToggle=function(){return o.a.createElement("div",{className:"barplot-conservation-toggle"},o.a.createElement("label",null,o.a.createElement("strong",null,"Show conservation barplot:"),o.a.createElement("input",{name:"conservationBarplotToggle",type:"checkbox",checked:n.state.showConservationBarplot,onChange:function(e){var t=e.target;n.setState({showConservationBarplot:t.checked})}})))},n.renderEntropyGapBarplotToggle=function(){return o.a.createElement("div",{className:"barplot-entroy-gap-toggle"},o.a.createElement("label",null,o.a.createElement("strong",null,"Show entropy/gap barplot:"),o.a.createElement("input",{name:"entropyGapBarplotToggle",type:"checkbox",checked:n.state.showEntropyGapBarplot,onChange:function(e){var t=e.target;n.setState({showEntropyGapBarplot:t.checked})}})))},n.renderKLDivergenceBarplot=function(){return o.a.createElement("div",{className:"barplot-kldivergence-toggle"},o.a.createElement("label",null,o.a.createElement("strong",null,"Show KL Divergence barplot:"),o.a.createElement("input",{name:"kldivergenceBarplotToggle",type:"checkbox",checked:n.state.showKLDivergenceBarplot,onChange:function(e){var t=e.target;n.setState({showKLDivergenceBarplot:t.checked})}})))},n.renderMiniMapToggle=function(){return o.a.createElement("div",{className:"minimap-toggle"},o.a.createElement("label",null,o.a.createElement("strong",null,"Show MiniMap:"),o.a.createElement("input",{name:"showMiniMap",type:"checkbox",checked:n.state.showMiniMap,onChange:function(e){var t=e.target;n.setState({showMiniMap:t.checked})}})))},n.renderAnnotationToggle=function(){return o.a.createElement("div",{className:"annotation-toggle"},o.a.createElement("label",null,o.a.createElement("strong",null,"Show Annotations:"),o.a.createElement("input",{name:"showAnnotations",type:"checkbox",checked:n.state.showAnnotations,onChange:function(e){var t=e.target;n.setState({showAnnotations:t.checked})}})))},n.state={style:new _,logoPlotStyle:W.LETTERS,zoomLevel:14,sortBy:m.INPUT,showMiniMap:!1,showConservationBarplot:!0,showEntropyGapBarplot:!0,showKLDivergenceBarplot:!1,showAnnotations:!0,showSettings:!0},n.onAlignmentReceived=n.onAlignmentReceived.bind(Object(u.a)(n)),n.onAlignmentLoadError=n.onAlignmentLoadError.bind(Object(u.a)(n)),n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=window.location.search.substring(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){var r=Object(g.a)(t,2),n=r[0],o=r[1];return e.set(n,decodeURIComponent(o))}),new Map);e.has(Ee)&&(this.setState({loading:!0}),Le.loadAlignmentFromURL(e.get(Ee),this.onAlignmentReceived,this.onAlignmentLoadError))}},{key:"render",value:function(){var e=this.state,t=e.alignment,r=e.logoPlotStyle,n=e.showAnnotations,a=e.showConservationBarplot,l=e.showEntropyGapBarplot,i=e.showKLDivergenceBarplot,s=e.showMiniMap,c=e.sortBy,u=e.style,d=e.zoomLevel,h=[];a&&h.push({dataSeriesSet:[V.CONSERVATION_BARPLOT],height:"75px"}),l&&h.push({dataSeriesSet:[V.SHANNON_ENTROPY_BARPLOT,V.GAPS_BARPLOT],height:"75px"}),i&&h.push({dataSeriesSet:[V.KULLBAC_LEIBLER_DIVERGENCE_BARPLOT],height:"75px"});var f=t?o.a.createElement("div",{className:"app-content"},o.a.createElement(he,{alignment:t,style:u,zoomLevel:d,sortBy:c,showMinimap:s,showAnnotations:n,logoOptions:{logoType:r,height:"80px"},minimapOptions:{startingWidth:120,verticalHeight:"div",alignHorizontal:"right",resizable:"horizontal"},barplots:h})):o.a.createElement(o.a.Fragment,null);return o.a.createElement(o.a.Fragment,null,this.renderSettingsBox(u),f)}},{key:"onAlignmentLoadError",value:function(e){this.setState({loadError:e,loading:!1})}},{key:"onAlignmentReceived",value:function(e){this.setState({alignment:e,showSettings:!1,style:e.getDefaultStyle(),loading:!1,loadError:void 0})}}]),r}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,r){e.exports={acePrefix:"ace_",preAceQueryClass:"q",preAceConsensusClass:"c",aceQueryClass:"q",aceConsensusClass:"c",aceResidueParentClass:"ace_line",darkHueClass:"dark-residues",lightHueClass:"light-residues",lettersOnlyHueClass:"letters-only-residues",aaAlignTypeClass:"alignment-aa",ntAlignTypeClass:"alignment-nt",styPosAllClass:"alignment-positions-tostyle-all",styPosQueryClass:"alignment-positions-tostyle-query",styPosQueryDiffClass:"alignment-positions-tostyle-query-diff",styPosConsensusClass:"alignment-positions-tostyle-consensus",styPosConsensusDiffClass:"alignment-positions-tostyle-consensus-diff",aaStyClass_Default:"aa-alignment-style-default",aaStyDesc_Default:"Default",aaStyBGAlpha_Default:".25",aaStyColorOrder_Default:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V",aaStyColors_Default:"#3c0,#c00,#60c,#03f,#ff0,#60c,#03f,#3c0,#090,#3c0,#3c0,#c00,#3c0,#090,#3c0,#09f,#09f,#090,#090,#3c0",aaStyClass_Buried:"aa-alignment-style-buried",aaStyDesc_Buried:"Buried Index",aaStyBGAlpha_Buried:".25",aaStyColorOrder_Buried:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Buried:"#00a35c,#00fc03,#00eb14,#00eb14,blue,#00f10e,#00f10e,#009d62,#00d52a,#0054ab,#007b84,lime,#009768,#008778,#00e01f,#00d52a,#00db24,#00a857,#00e619,#005fa0,#00eb14,#00b649,#00f10e",aaStyClass_Cinema:"aa-alignment-style-cinema",aaStyDesc_Cinema:"Cinema",aaStyBGAlpha_Cinema:".25",aaStyColorOrder_Cinema:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Cinema:"#bbb,grey,#ff0,red,red,#f0f,brown,cyan,#bbb,#fff,cyan,#bbb,#bbb,green,#fff,brown,green,cyan,green,green,#fff,#bbb,#f0f,grey,#f0f,grey",aaStyClass_Clustal:"aa-alignment-style-clustal",aaStyDesc_Clustal:"Clustal",aaStyBGAlpha_Clustal:".25",aaStyColorOrder_Clustal:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Clustal:"orange,#fff,green,red,red,blue,orange,red,green,#fff,red,green,green,#fff,#fff,orange,#fff,red,orange,orange,#fff,green,blue,#fff,blue,#fff",aaStyClass_Clustal2:"aa-alignment-style-clustal2",aaStyDesc_Clustal2:"Clustal2",aaStyBGAlpha_Clustal2:".25",aaStyColorOrder_Clustal2:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Clustal2:"#80a0f0,#f01505,lime,#c048c0,#f08080,lime,#c048c0,#f09048,#15a4a4,#80a0f0,#80a0f0,#f01505,#80a0f0,#80a0f0,#ff0,lime,lime,#80a0f0,#15a4a4,#80a0f0,#fff,#fff,#fff",aaStyClass_Helix:"aa-alignment-style-helix",aaStyDesc_Helix:"Helix Propensity",aaStyBGAlpha_Helix:".25",aaStyColorOrder_Helix:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Helix:"#e718e7,#6f906f,#1be41b,#787,#23dc23,#926d92,#f0f,lime,#758a75,#8a758a,#ae51ae,#a05fa0,#ef10ef,#986798,lime,#36c936,#47b847,#8a758a,#21de21,#857a85,#49b649,#758a75,#c936c9",aaStyClass_Hydrophobicity:"aa-alignment-style-hydrophobicity",aaStyDesc_Hydrophobicity:"Hydrophobicity",aaStyBGAlpha_Hydrophobicity:".25",aaStyColorOrder_Hydrophobicity:"F,I,W,L,V,M,Y,C,A,T,H,G,S,Q,R,K,N,E,P,D",aaStyColors_Hydrophobicity:"red,red,#ff0606,#ff0606,#ff4c4c,#ff5252,#f77,#ffa5a5,#ffc0c0,#e1e1ff,#d0d0ff,#b6b6ff,#a5a5ff,#9595ff,#8787ff,#6969ff,#5959ff,#4f4fff,#1d1dff,blue",aaStyClass_Lesk:"aa-alignment-style-lesk",aaStyDesc_Lesk:"Lesk",aaStyBGAlpha_Lesk:".25",aaStyColorOrder_Lesk:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_Lesk:"orange,#fff,green,red,red,green,orange,#f0f,green,#fff,red,green,green,#f0f,#fff,green,#f0f,red,orange,orange,#fff,green,green,#fff,green,#fff",aaStyClass_MAE:"aa-alignment-style-mae",aaStyDesc_MAE:"MAE",aaStyBGAlpha_MAE:".25",aaStyColorOrder_MAE:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z",aaStyColors_MAE:"#7d8,#fff,#9e6,#5b3,#5b3,#99f,#7d8,#55f,#6bf,#fff,#fc7,#6bf,#6bf,#5b3,#fff,#eaa,#5b3,#fc7,#f45,#f45,#fff,#6bf,#99f,#fff,#99f,#fff",aaStyClass_Strand:"aa-alignment-style-strand",aaStyDesc_Strand:"Strand Propensity",aaStyBGAlpha_Strand:".25",aaStyColorOrder_Strand:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Strand:"#5858a7,#6b6b94,#64649b,#2121de,#9d9d62,#8c8c73,blue,#4949b6,#60609f,#ecec13,#b2b24d,#4747b8,#82827d,#c2c23d,#2323dc,#4949b6,#9d9d62,#c0c03f,#d3d32c,#ff0,#4343bc,#797986,#4747b8",aaStyClass_Taylor:"aa-alignment-style-taylor",aaStyDesc_Taylor:"Taylor",aaStyBGAlpha_Taylor:".25",aaStyColorOrder_Taylor:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Taylor:"#cf0,blue,#c0f,red,#ff0,#f0c,#f06,#f90,#06f,#6f0,#3f0,#60f,lime,#0f6,#fc0,#f30,#f60,#0cf,#0fc,#9f0,#fff,#fff,#fff",aaStyClass_Turn:"aa-alignment-style-turn",aaStyDesc_Turn:"Turn Propensity",aaStyBGAlpha_Turn:".25",aaStyColorOrder_Turn:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Turn:"#2cd3d3,#708f8f,red,#e81717,#a85757,#3fc0c0,#788,red,#708f8f,cyan,#1ce3e3,#7e8181,#1ee1e1,#1ee1e1,#f60909,#e11e1e,#738c8c,#738c8c,#9d6262,#07f8f8,#f30c0c,#7c8383,#5ba4a4",aaStyClass_Zappo:"aa-alignment-style-zappo",aaStyDesc_Zappo:"Zappo",aaStyBGAlpha_Zappo:".25",aaStyColorOrder_Zappo:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,X,Z",aaStyColors_Zappo:"#ffafaf,#6464ff,lime,red,#ff0,lime,red,#f0f,#6464ff,#ffafaf,#ffafaf,#6464ff,#ffafaf,#ffc800,#f0f,lime,lime,#ffc800,#ffc800,#ffafaf,#fff,#fff,#fff",ntStyClass_Default:"nt-alignment-style-default",ntStyDesc_Default:"Default",ntStyBGAlpha_Default:".25",ntStyColorOrder_Default:"A,C,G,T,U,R,Y",ntStyColors_Default:"#5050ff,#e00000,#00c000,#e6e600,#c90,#2e8b57,#ff8c00",ntStyClass_Nucleotide:"nt-alignment-style-nucleotide",ntStyDesc_Nucleotide:"Nucleotide",ntStyBGAlpha_Nucleotide:".25",ntStyColorOrder_Nucleotide:"A,C,G,T,U",ntStyColors_Nucleotide:"#64f73f,#ffb340,#eb413c,#3c88ee,#3c88ee",ntStyClass_Purine:"nt-alignment-style-purine",ntStyDesc_Purine:"Purine/Pyrimidine",ntStyBGAlpha_Purine:".25",ntStyColorOrder_Purine:"A,C,G,R,T,U,Y",ntStyColors_Purine:"#ff83fa,#40e0d0,#ff83fa,#ff83fa,#40e0d0,#40e0d0,#40e0d0"}}},[[40,1,2]]]);
//# sourceMappingURL=main.9172d652.chunk.js.map