/*! For license information please see main.d8bc8f88.js.LICENSE.txt */
(()=>{var e={829:(e,t,n)=>{"use strict";var r=n(793),i=n(912),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&o(e,".prototype.")>-1?i(n):n}},912:(e,t,n)=>{"use strict";var r=n(480),i=n(793),o=n(535),s=i("%TypeError%"),a=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),c=i("%Reflect.apply%",!0)||r.call(l,a),u=i("%Object.defineProperty%",!0),h=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(f){u=null}e.exports=function(e){if("function"!==typeof e)throw new s("a function is required");var t=c(r,l,arguments);return o(t,1+h(0,e.length-(arguments.length-1)),!0)};var d=function(){return c(r,a,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},715:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},885:(e,t,n)=>{"use strict";var r=n(241)(),i=n(793),o=r&&i("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch(c){o=!1}var s=i("%SyntaxError%"),a=i("%TypeError%"),l=n(516);e.exports=function(e,t,n){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new a("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],h=!!l&&l(e,t);if(o)o(e,t,{configurable:null===c&&h?h.configurable:!c,enumerable:null===r&&h?h.enumerable:!r,value:n,writable:null===i&&h?h.writable:!i});else{if(!u&&(r||i||c))throw new s("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},386:e=>{"use strict";function t(e,t,r){r=r||2;var o,s,a,l,h,d,p,m=t&&t.length,g=m?t[0]*r:e.length,v=n(e,0,g,r,!0),y=[];if(!v||v.next===v.prev)return y;if(m&&(v=function(e,t,r,i){var o,s,a,l=[];for(o=0,s=t.length;o<s;o++)(a=n(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(c),o=0;o<l.length;o++)r=u(l[o],r);return r}(e,t,v,r)),e.length>80*r){o=a=e[0],s=l=e[1];for(var b=r;b<g;b+=r)(h=e[b])<o&&(o=h),(d=e[b+1])<s&&(s=d),h>a&&(a=h),d>l&&(l=d);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return i(v,y,r,o,s,p,0),y}function n(e,t,n,r,i){var o,s;if(i===T(e,t,n,r)>0)for(o=t;o<n;o+=r)s=w(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=w(o,e[o],e[o+1],s);return s&&v(s,s.next)&&(E(s),s=s.next),s}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(E(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,c,u,h,f){if(e){!f&&h&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(e,c,u,h);for(var p,m,g=e;e.prev!==e.next;)if(p=e.prev,m=e.next,h?s(e,c,u,h):o(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(m.i/n|0),E(e),e=m.next,g=m.next;else if((e=m)===g){f?1===f?i(e=a(r(e),t,n),t,n,c,u,h,2):2===f&&l(e,t,n,c,u,h):i(r(e),t,n,c,u,h,1);break}}}function o(e){var t=e.prev,n=e,r=e.next;if(g(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,s=r.x,a=t.y,l=n.y,c=r.y,u=i<o?i<s?i:s:o<s?o:s,h=a<l?a<c?a:c:l<c?l:c,d=i>o?i>s?i:s:o>s?o:s,f=a>l?a>c?a:c:l>c?l:c,m=r.next;m!==t;){if(m.x>=u&&m.x<=d&&m.y>=h&&m.y<=f&&p(i,a,o,l,s,c,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function s(e,t,n,r){var i=e.prev,o=e,s=e.next;if(g(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,c=s.x,u=i.y,h=o.y,f=s.y,m=a<l?a<c?a:c:l<c?l:c,v=u<h?u<f?u:f:h<f?h:f,y=a>l?a>c?a:c:l>c?l:c,b=u>h?u>f?u:f:h>f?h:f,x=d(m,v,t,n,r),_=d(y,b,t,n,r),S=e.prevZ,w=e.nextZ;S&&S.z>=x&&w&&w.z<=_;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=b&&S!==i&&S!==s&&p(a,u,l,h,c,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;if(S=S.prevZ,w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==i&&w!==s&&p(a,u,l,h,c,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;S&&S.z>=x;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=b&&S!==i&&S!==s&&p(a,u,l,h,c,f,S.x,S.y)&&g(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==i&&w!==s&&p(a,u,l,h,c,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function a(e,t,n){var i=e;do{var o=i.prev,s=i.next.next;!v(o,s)&&y(o,i,i.next,s)&&_(o,s)&&_(s,o)&&(t.push(o.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),E(i),E(i.next),i=e=s),i=i.next}while(i!==e);return r(i)}function l(e,t,n,o,s,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=S(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,t,n,o,s,a,0),void i(u,t,n,o,s,a,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function u(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<d?i:s,o,u,d,o<d?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),_(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var i=S(n,e);return r(i,i.next),r(n,n.next)}function h(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,o,s,a){return(i-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(r-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(_(e,t)&&_(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||v(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){var i=x(g(e,t,n)),o=x(g(e,t,r)),s=x(g(n,r,e)),a=x(g(n,r,t));return i!==o&&s!==a||(!(0!==i||!b(e,n,t))||(!(0!==o||!b(e,r,t))||(!(0!==s||!b(n,e,r))||!(0!==a||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function x(e){return e>0?1:e<0?-1:0}function _(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function S(e,t){var n=new A(e.i,e.x,e.y),r=new A(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(e,t,n,r){var i=new A(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(T(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,u=a<l-1?t[a+1]*n:e.length;s-=Math.abs(T(e,c,u,n))}var h=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},904:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},27:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!==typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(e,t){for(var n=[],r=t||0,i=0;r<e.length;r+=1,i+=1)n[i]=e[r];return n}(arguments,1),a=n(0,i.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e,t){for(var n="",r=0;r<e.length;r+=1)n+=e[r],r+1<e.length&&(n+=t);return n}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var t=i.apply(this,r(s,arguments));return Object(t)===t?t:this}return i.apply(e,r(s,arguments))})),i.prototype){var u=function(){};u.prototype=i.prototype,o.prototype=new u,u.prototype=null}return o}},480:(e,t,n)=>{"use strict";var r=n(27);e.exports=Function.prototype.bind||r},793:(e,t,n)=>{"use strict";var r,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(I){l=null}var c=function(){throw new s},u=l?function(){try{return c}catch(e){try{return l(arguments,"callee").get}catch(t){return c}}}():c,h=n(285)(),d=n(695)(),f=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),p={},m="undefined"!==typeof Uint8Array&&f?f(Uint8Array):r,g={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h&&f?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h&&f?f(f([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h&&f?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h&&f?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h&&f?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":m,"%TypeError%":s,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(f)try{null.error}catch(I){var v=f(f(I));g["%Error.prototype%"]=v}var y=function e(t){var n;if("%AsyncFunction%"===t)n=a("async function () {}");else if("%GeneratorFunction%"===t)n=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=a("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&f&&(n=f(i.prototype))}return g[t]=n,n},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(480),_=n(908),S=x.call(Function.call,Array.prototype.concat),w=x.call(Function.apply,Array.prototype.splice),E=x.call(Function.call,String.prototype.replace),A=x.call(Function.call,String.prototype.slice),T=x.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,R=function(e,t){var n,r=e;if(_(b,r)&&(r="%"+(n=b[r])[0]+"%"),_(g,r)){var o=g[r];if(o===p&&(o=y(r)),"undefined"===typeof o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=A(e,0,1),n=A(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return E(e,C,(function(e,t,n,i){r[r.length]=n?E(i,P,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",o=R("%"+r+"%",t),a=o.name,c=o.value,u=!1,h=o.alias;h&&(r=h[0],w(n,S([0,1],h)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],m=A(p,0,1),v=A(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(u=!0),_(g,a="%"+(r+="."+p)+"%"))c=g[a];else if(null!=c){if(!(p in c)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var y=l(c,p);c=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[p]}else f=_(c,p),c=c[p];f&&!u&&(g[a]=c)}}return c}},516:(e,t,n)=>{"use strict";var r=n(793)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(i){r=null}e.exports=r},241:(e,t,n)=>{"use strict";var r=n(793)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},695:e=>{"use strict";var t={foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof n)}},285:(e,t,n)=>{"use strict";var r="undefined"!==typeof Symbol&&Symbol,i=n(4);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},4:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},908:(e,t,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(480);e.exports=o.call(r,i)},178:(e,t,n)=>{"use strict";var r=n(557),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=u(n);h&&(s=s.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<s.length;++g){var v=s[g];if(!o[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{c(t,v,y)}catch(b){}}}}return t}},190:(e,t,n)=>{var r="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"===typeof i.get?i.get:null,s=r&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"===typeof l.get?l.get:null,u=a&&Set.prototype.forEach,h="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,x=String.prototype.toUpperCase,_=String.prototype.toLowerCase,S=RegExp.prototype.test,w=Array.prototype.concat,E=Array.prototype.join,A=Array.prototype.slice,T=Math.floor,C="function"===typeof BigInt?BigInt.prototype.valueOf:null,P=Object.getOwnPropertySymbols,R="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"===typeof Symbol&&"object"===typeof Symbol.iterator,M="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I||"symbol")?Symbol.toStringTag:null,O=Object.prototype.propertyIsEnumerable,k=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function L(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var r=e<0?-T(-e):T(e);if(r!==e){var i=String(r),o=y.call(t,i.length+1);return b.call(i,n,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,n,"$&_")}var D=n(654),N=D.custom,B=j(N)?N:null;function F(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function U(e){return b.call(String(e),/"/g,"&quot;")}function z(e){return"[object Array]"===W(e)&&(!M||!("object"===typeof e&&M in e))}function H(e){return"[object RegExp]"===W(e)&&(!M||!("object"===typeof e&&M in e))}function j(e){if(I)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!R)return!1;try{return R.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,i,a){var l=r||{};if(G(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(G(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!G(l,"customInspect")||l.customInspect;if("boolean"!==typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(G(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(G(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var x=l.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return X(t,l);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var S=String(t);return x?L(t,S):S}if("bigint"===typeof t){var T=String(t)+"n";return x?L(t,T):T}var P="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof i&&(i=0),i>=P&&P>0&&"object"===typeof t)return z(t)?"[Array]":"[Object]";var N=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;n=E.call(Array(e.indent+1)," ")}return{base:n,prev:E.call(Array(t+1),n)}}(l,i);if("undefined"===typeof a)a=[];else if(q(a,t)>=0)return"[Circular]";function V(t,n,r){if(n&&(a=A.call(a)).push(n),r){var o={depth:l.depth};return G(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),e(t,o,i+1,a)}return e(t,l,i+1,a)}if("function"===typeof t&&!H(t)){var Y=function(e){if(e.name)return e.name;var t=v.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),ee=J(t,V);return"[Function"+(Y?": "+Y:" (anonymous)")+"]"+(ee.length>0?" { "+E.call(ee,", ")+" }":"")}if(j(t)){var te=I?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):R.call(t);return"object"!==typeof t||I?te:K(te)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var ne="<"+_.call(String(t.nodeName)),re=t.attributes||[],ie=0;ie<re.length;ie++)ne+=" "+re[ie].name+"="+F(U(re[ie].value),"double",l);return ne+=">",t.childNodes&&t.childNodes.length&&(ne+="..."),ne+="</"+_.call(String(t.nodeName))+">"}if(z(t)){if(0===t.length)return"[]";var oe=J(t,V);return N&&!function(e){for(var t=0;t<e.length;t++)if(q(e[t],"\n")>=0)return!1;return!0}(oe)?"["+Z(oe,N)+"]":"[ "+E.call(oe,", ")+" ]"}if(function(e){return"[object Error]"===W(e)&&(!M||!("object"===typeof e&&M in e))}(t)){var se=J(t,V);return"cause"in Error.prototype||!("cause"in t)||O.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+E.call(se,", ")+" }":"{ ["+String(t)+"] "+E.call(w.call("[cause]: "+V(t.cause),se),", ")+" }"}if("object"===typeof t&&m){if(B&&"function"===typeof t[B]&&D)return D(t,{depth:P-i});if("symbol"!==m&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!==typeof e)return!1;try{o.call(e);try{c.call(e)}catch(ne){return!0}return e instanceof Map}catch(t){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,n){ae.push(V(n,t,!0)+" => "+V(e,t))})),Q("Map",o.call(t),ae,N)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{o.call(e)}catch(t){return!0}return e instanceof Set}catch(n){}return!1}(t)){var le=[];return u&&u.call(t,(function(e){le.push(V(e,t))})),Q("Set",c.call(t),le,N)}if(function(e){if(!h||!e||"object"!==typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(ne){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return $("WeakMap");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(ne){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return $("WeakSet");if(function(e){if(!f||!e||"object"!==typeof e)return!1;try{return f.call(e),!0}catch(t){}return!1}(t))return $("WeakRef");if(function(e){return"[object Number]"===W(e)&&(!M||!("object"===typeof e&&M in e))}(t))return K(V(Number(t)));if(function(e){if(!e||"object"!==typeof e||!C)return!1;try{return C.call(e),!0}catch(t){}return!1}(t))return K(V(C.call(t)));if(function(e){return"[object Boolean]"===W(e)&&(!M||!("object"===typeof e&&M in e))}(t))return K(p.call(t));if(function(e){return"[object String]"===W(e)&&(!M||!("object"===typeof e&&M in e))}(t))return K(V(String(t)));if("undefined"!==typeof window&&t===window)return"{ [object Window] }";if(t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===W(e)&&(!M||!("object"===typeof e&&M in e))}(t)&&!H(t)){var ce=J(t,V),ue=k?k(t)===Object.prototype:t instanceof Object||t.constructor===Object,he=t instanceof Object?"":"null prototype",de=!ue&&M&&Object(t)===t&&M in t?y.call(W(t),8,-1):he?"Object":"",fe=(ue||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(de||he?"["+E.call(w.call([],de||[],he||[]),": ")+"] ":"");return 0===ce.length?fe+"{}":N?fe+"{"+Z(ce,N)+"}":fe+"{ "+E.call(ce,", ")+" }"}return String(t)};var V=Object.prototype.hasOwnProperty||function(e){return e in this};function G(e,t){return V.call(e,t)}function W(e){return m.call(e)}function q(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function X(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return X(y.call(e,0,t.maxStringLength),t)+r}return F(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Y),"single",t)}function Y(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+x.call(t.toString(16))}function K(e){return"Object("+e+")"}function $(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?Z(n,r):E.call(n,", "))+"}"}function Z(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+E.call(e,","+n)+"\n"+t.prev}function J(e,t){var n=z(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=G(e,i)?t(e[i],e):""}var o,s="function"===typeof P?P(e):[];if(I){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in e)G(e,l)&&(n&&String(Number(l))===l&&l<e.length||I&&o["$"+l]instanceof Symbol||(S.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if("function"===typeof P)for(var c=0;c<s.length;c++)O.call(e,s[c])&&r.push("["+t(s[c])+"]: "+t(e[s[c]],e));return r}},470:(e,t,n)=>{"use strict";var r=n(390),i=n(124);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var N,B=Object.assign;function F(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function H(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case A:return"Profiler";case E:return"StrictMode";case R:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,Ee=null;function Ae(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function Te(e){we?Ee?Ee.push(e):Ee=[e]:we=e}function Ce(){if(we){var e=we,t=Ee;if(Ee=we=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Re(){}var Ie=!1;function Me(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Pe(e,t,n)}finally{Ie=!1,(null!==we||null!==Ee)&&(Re(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var ke=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){ke=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ne=!1,Be=null,Fe=!1,Ue=null,ze={onError:function(e){Ne=!0,Be=e}};function He(e,t,n,r,i,o,s,a,l){Ne=!1,Be=null,De.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(je(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ge(i),e;if(s===r)return Ge(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,$e=i.unstable_requestPaint,Qe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,wt,Et,At,Tt=!1,Ct=[],Pt=null,Rt=null,It=null,Mt=new Map,Ot=new Map,kt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){Tt=!1,null!==Pt&&Ft(Pt)&&(Pt=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==It&&Ft(It)&&(It=null),Mt.forEach(Ut),Ot.forEach(Ut)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Ht(t,e)}if(0<Ct.length){Ht(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Pt&&Ht(Pt,e),null!==Rt&&Ht(Rt,e),null!==It&&Ht(It,e),Mt.forEach(t),Ot.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Bt(n),null===n.blockedOn&&kt.shift()}var Vt=x.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function qt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Xt(e,t,n,r){if(Gt){var i=Kt(e,t,n,r);if(null===i)Gr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Pt=Nt(Pt,e,t,n,r,i),!0;case"dragenter":return Rt=Nt(Rt,e,t,n,r,i),!0;case"mouseover":return It=Nt(It,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Mt.set(o,Nt(Mt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Nt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Kt(e,t,n,r))&&Gr(e,t,r,Yt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=yi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=B({},cn,{view:0,detail:0}),dn=on(hn),fn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(B({},fn,{dataTransfer:0})),gn=on(B({},hn,{relatedTarget:0})),vn=on(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(B({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function An(){return En}var Tn=B({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=on(Tn),Pn=on(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),In=on(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Mn),kn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Nn=u&&"TextEvent"in window&&!Dn,Bn=u&&(!Ln||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){Fr(e,0)}function Kn(e){if(X(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];Wn(t,Xn,e,_e(e)),Me(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function or(e,t){if("click"===e)return Kn(t)}function sr(e,t){if("input"===e||"change"===e)return Kn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},wr={},Er={};function Ar(e){if(wr[e])return wr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return wr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Ar("animationend"),Cr=Ar("animationiteration"),Pr=Ar("animationstart"),Rr=Ar("transitionend"),Ir=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ir.set(e,t),l(t,[e])}for(var kr=0;kr<Mr.length;kr++){var Lr=Mr[kr];Or(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(Pr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(He.apply(this,arguments),Ne){if(!Ne)throw Error(o(198));var u=Be;Ne=!1,Be=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Br(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Br(i,a,c),o=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Hr]){e[Hr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Nr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Me((function(){var r=o,i=_e(n),s=[];e:{var a=Ir.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Tr:case Cr:case Pr:l=vn;break;case Rr:l=In;break;case"scroll":l=dn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Pn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Oe(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Pn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:xi(l),f=null==c?a:xi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Xr(f))p++;for(f=0,m=d;m;m=Xr(m))f++;for(;0<p-f;)u=Xr(u),p--;for(;0<f-p;)d=Xr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Xr(u),d=Xr(d)}u=null}else u=null;null!==l&&Yr(s,a,l,u,!1),null!==c&&null!==h&&Yr(s,h,c,u,!0)}if("select"===(l=(a=r?xi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Gn(a))if(Qn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?xi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(s,n,i)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(y=en()):(Zt="value"in(Qt=i)?Qt.value:Qt.textContent,jn=!0)),0<(v=qr(r,b)).length&&(b=new xn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Nn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Ln&&zn(e,t)?(e=en(),Jt=Zt=Qt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Kr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace($r,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Si=[],wi=-1;function Ei(e){return{current:e}}function Ai(e){0>wi||(e.current=Si[wi],Si[wi]=null,wi--)}function Ti(e,t){wi++,Si[wi]=e.current,e.current=t}var Ci={},Pi=Ei(Ci),Ri=Ei(!1),Ii=Ci;function Mi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ki(){Ai(Ri),Ai(Pi)}function Li(e,t,n){if(Pi.current!==Ci)throw Error(o(168));Ti(Pi,t),Ti(Ri,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return B({},n,r)}function Ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ii=Pi.current,Ti(Pi,e),Ti(Ri,Ri.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Pi),Ti(Pi,e)):Ai(Ri),Ti(Ri,n)}var Fi=null,Ui=!1,zi=!1;function Hi(e){null===Fi?Fi=[e]:Fi.push(e)}function ji(){if(!zi&&null!==Fi){zi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Xe(Je,ji),i}finally{bt=t,zi=!1}}return null}var Vi=[],Gi=0,Wi=null,qi=0,Xi=[],Yi=0,Ki=null,$i=1,Qi="";function Zi(e,t){Vi[Gi++]=qi,Vi[Gi++]=Wi,Wi=e,qi=t}function Ji(e,t,n){Xi[Yi++]=$i,Xi[Yi++]=Qi,Xi[Yi++]=Ki,Ki=e;var r=$i;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Qi=o+e}else $i=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Zi(e,1),Ji(e,1,0))}function to(e){for(;e===Wi;)Wi=Vi[--Gi],Vi[Gi]=null,qi=Vi[--Gi],Vi[Gi]=null;for(;e===Ki;)Ki=Xi[--Yi],Xi[Yi]=null,Qi=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ei(null),bo=null,xo=null,_o=null;function So(){_o=xo=bo=null}function wo(e){var t=yo.current;Ai(yo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){bo=e,_o=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xa=!0),e.firstContext=null)}function To(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===bo)throw Error(o(308));xo=e,bo.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Co=null;function Po(e){null===Co?Co=[e]:Co.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,Io(e,r)}function Io(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Io(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,Io(e,n)}function No(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=B({},h,d);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Bl|=s,e.lanes=s,e.memoizedState=h}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var jo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),No(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Lo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),No(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Lo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rc(t,e,r,n),No(t,e,r))}};function Vo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Go(e,t,n){var r=!1,i=Ci,o=t.contextType;return"object"===typeof o&&null!==o?o=To(o):(i=Oi(t)?Ii:Pi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):Ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=To(o):(o=Oi(t)?Ii:Pi.current,i.context=Mi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Ho(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&jo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&Ko(o)===t.type)?((r=i(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Nc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Nc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),io&&Zi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Zi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Zi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),io&&Zi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return io&&Zi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===w&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===w){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ko(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Xo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===w?((o=Nc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=Xo(r,o,s),l.return=r,r=l)}return a(r);case S:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uc(s,r.mode,l)).return=r,r=o}return a(r);case O:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);Yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Qo=$o(!0),Zo=$o(!1),Jo={},es=Ei(Jo),ts=Ei(Jo),ns=Ei(Jo);function rs(e){if(e===Jo)throw Error(o(174));return e}function is(e,t){switch(Ti(ns,t),Ti(ts,e),Ti(es,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(es),Ti(es,t)}function os(){Ai(es),Ai(ts),Ai(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ti(ts,e),Ti(es,n))}function as(e){ts.current===e&&(Ai(es),Ai(ts))}var ls=Ei(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=x.ReactCurrentDispatcher,fs=x.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,vs=null,ys=!1,bs=!1,xs=0,_s=0;function Ss(){throw Error(o(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Es(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,xs=0,25<=s)throw Error(o(301));s+=1,vs=gs=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(bs)}if(ds.current=sa,t=null!==gs&&null!==gs.next,ps=0,vs=gs=ms=null,ys=!1,t)throw Error(o(300));return e}function As(){var e=0!==xs;return xs=0,e}function Ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?ms.memoizedState=vs=e:vs=vs.next=e,vs}function Cs(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===vs?ms.memoizedState:vs.next;if(null!==t)vs=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===vs?ms.memoizedState=vs=e:vs=vs.next=e}return vs}function Ps(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,ms.lanes|=h,Bl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(xa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Bl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Is(e){var t=Cs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(xa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ms(){}function Os(e,t){var n=ms,r=Cs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,xa=!0),r=r.queue,Gs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Us(9,Ls.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&ps)||ks(n,t,i)}return i}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ls(e,t,n,r){t.value=n,t.getSnapshot=r,Ns(t)&&Bs(e)}function Ds(e,t,n){return n((function(){Ns(t)&&Bs(e)}))}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Bs(e){var t=Io(e,1);null!==t&&rc(t,e,1,-1)}function Fs(e){var t=Ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function Us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return Cs().memoizedState}function Hs(e,t,n,r){var i=Ts();ms.flags|=e,i.memoizedState=Us(1|t,n,void 0,void 0===r?null:r)}function js(e,t,n,r){var i=Cs();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&ws(r,s.deps))return void(i.memoizedState=Us(t,n,o,r))}ms.flags|=e,i.memoizedState=Us(1|t,n,o,r)}function Vs(e,t){return Hs(8390656,8,e,t)}function Gs(e,t){return js(2048,8,e,t)}function Ws(e,t){return js(4,2,e,t)}function qs(e,t){return js(4,4,e,t)}function Xs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4,4,Xs.bind(null,t,e),n)}function Ks(){}function $s(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,xa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Bl|=n,e.baseState=!0),t)}function Js(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ea(){return Cs().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ro(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ro(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){bs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:To,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},aa={readContext:To,useCallback:function(e,t){return Ts().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:Vs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4194308,4,Xs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hs(4,2,e,t)},useMemo:function(e,t){var n=Ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ts().memoizedState=e},useState:Fs,useDebugValue:Ks,useDeferredValue:function(e){return Ts().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=Js.bind(null,e[1]),Ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=Ts();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&ps)||ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Vs(Ds.bind(null,r,s,e),[e]),r.flags|=2048,Us(9,Ls.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ts(),t=Il.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=xs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:To,useCallback:$s,useContext:To,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Ws,useLayoutEffect:qs,useMemo:Qs,useReducer:Rs,useRef:zs,useState:function(){return Rs(Ps)},useDebugValue:Ks,useDeferredValue:function(e){return Zs(Cs(),gs.memoizedState,e)},useTransition:function(){return[Rs(Ps)[0],Cs().memoizedState]},useMutableSource:Ms,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1},ca={readContext:To,useCallback:$s,useContext:To,useEffect:Gs,useImperativeHandle:Ys,useInsertionEffect:Ws,useLayoutEffect:qs,useMemo:Qs,useReducer:Is,useRef:zs,useState:function(){return Is(Ps)},useDebugValue:Ks,useDeferredValue:function(e){var t=Cs();return null===gs?t.memoizedState=e:Zs(t,gs.memoizedState,e)},useTransition:function(){return[Is(Ps)[0],Cs().memoizedState]},useMutableSource:Ms,useSyncExternalStore:Os,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Lo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),da(0,t)},n}function ma(e,t,n){(n=Lo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Lo(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=x.ReactCurrentOwner,xa=!1;function _a(e,t,n,r){t.child=null===e?Zo(t,null,n,r):Qo(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=Es(e,t,n,r,o,i),n=As(),null===e||xa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function wa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||kc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Lc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(xa=!0)}}return Ca(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ll,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ll,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Ll,kl),kl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Ll,kl),kl|=r;return _a(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Oi(n)?Ii:Pi.current;return o=Mi(t,o),Ao(t,i),n=Es(e,t,n,r,o,i),r=As(),null===e||xa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Pa(e,t,n,r,i){if(Oi(n)){var o=!0;Ni(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Ga(e,t),Go(t,n,r),qo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=To(c):c=Mi(t,c=Oi(n)?Ii:Pi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Mo=!1;var d=t.memoizedState;s.state=d,Fo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ri.current||Mo?("function"===typeof u&&(Ho(t,n,u,r),l=t.memoizedState),(a=Mo||Vo(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ko(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=To(l):l=Mi(t,l=Oi(n)?Ii:Pi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Wo(t,s,r,l),Mo=!1,d=t.memoizedState,s.state=d,Fo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ri.current||Mo?("function"===typeof f&&(Ho(t,n,f,r),p=t.memoizedState),(c=Mo||Vo(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,o,i)}function Ra(e,t,n,r,i,o){Ta(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Bi(t,n,!1),Wa(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ia(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),is(e,t.containerInfo)}function Ma(e,t,n,r,i){return po(),mo(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,ka,La,Da,Na={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ti(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),e=Nc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(n),t.memoizedState=Na,e):Ua(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(s=Nc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=Na,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),xa||l){if(null!==(r=Il)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Io(e,i),rc(r,e,i,-1))}return gc(),za(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Pc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Xi[Yi++]=$i,Xi[Yi++]=Qi,Xi[Yi++]=Ki,$i=e.id,Qi=e.overflow,Ki=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Lc(r,a):(a=Nc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Na,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&mo(r),Qo(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function ja(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Va(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,o);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Oi(t.type)&&ki(),Xa(t),null;case 3:return r=t.stateNode,os(),Ai(Ri),Ai(Pi),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),ka(e,t),Xa(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)La(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Xa(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":q(r),J(r,s,!0);break;case"textarea":q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=K(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Ur("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Xa(t),null;case 13:if(Ai(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return os(),ka(e,t),null===e&&jr(t.stateNode.containerInfo),Xa(t),null;case 10:return wo(t.type._context),Xa(t),null;case 19:if(Ai(ls),null===(s=t.memoizedState))return Xa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)qa(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,qa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Vl&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Xa(t),null}else 2*Qe()-s.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=ls.current,Ti(ls,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ai(Ri),Ai(Pi),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ai(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ls),null;case 4:return os(),null;case 10:return wo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ka=function(){},La=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=K(e,i),r=K(e,r),s=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Qa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Qa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,fl(e,t,n),Qa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ac(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":Z(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Ac(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ac(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Qe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||h,gl(t,e),Qa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Ja=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Ac(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ja=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=$a;var c=Qa;if($a=s,(Qa=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,Ja=l):wl(i);for(;null!==o;)Ja=o,xl(o,t,n),o=o.sibling;Ja=i,$a=a,Qa=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):_l(e)}}function _l(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Uo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&ol(t)}catch(f){Ac(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function Sl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Ac(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Ac(t,s,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var El,Al=Math.ceil,Tl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Pl=x.ReactCurrentBatchConfig,Rl=0,Il=null,Ml=null,Ol=0,kl=0,Ll=Ei(0),Dl=0,Nl=null,Bl=0,Fl=0,Ul=0,zl=null,Hl=null,jl=0,Vl=1/0,Gl=null,Wl=!1,ql=null,Xl=null,Yl=!1,Kl=null,$l=0,Ql=0,Zl=null,Jl=-1,ec=0;function tc(){return 0!==(6&Rl)?Qe():-1!==Jl?Jl:Jl=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Ol?Ol&-Ol:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ql)throw Ql=0,Zl=null,Error(o(185));vt(e,n,r),0!==(2&Rl)&&e===Il||(e===Il&&(0===(2&Rl)&&(Fl|=n),4===Dl&&lc(e,Ol)),ic(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(Vl=Qe()+500,Ui&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Il?Ol:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Hi(e)}(cc.bind(null,e)):Hi(cc.bind(null,e)),si((function(){0===(6&Rl)&&ji()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Jl=-1,ec=0,0!==(6&Rl))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Rl;Rl|=2;var s=mc();for(Il===e&&Ol===t||(Gl=null,Vl=Qe()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}So(),Tl.current=s,Rl=i,null!==Ml?t=0:(Il=null,Ol=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Nl,fc(e,0),lc(e,r),ic(e,Qe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Nl,fc(e,0),lc(e,r),ic(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,Hl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=jl+500-Qe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Hl,Gl),t);break}Sc(e,Hl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Hl,Gl),r);break}Sc(e,Hl,Gl);break;default:throw Error(o(329))}}}return ic(e,Qe()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Hl,Hl=n,null!==t&&ac(t)),e}function ac(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Rl))throw Error(o(327));wc();var t=dt(e,0);if(0===(1&t))return ic(e,Qe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Nl,fc(e,0),lc(e,t),ic(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Hl,Gl),ic(e,Qe()),null}function uc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Vl=Qe()+500,Ui&&ji())}}function hc(e){null!==Kl&&0===Kl.tag&&0===(6&Rl)&&wc();var t=Rl;Rl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Rl=t))&&ji()}}function dc(){kl=Ll.current,Ai(Ll)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ki();break;case 3:os(),Ai(Ri),Ai(Pi),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ai(ls);break;case 10:wo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Ml=e=Lc(e.current,null),Ol=kl=t,Dl=0,Nl=null,Ul=Fl=Bl=0,Hl=zl=null,null!==Co){for(t=0;t<Co.length;t++)if(null!==(r=(n=Co[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Co=null}return e}function pc(e,t){for(;;){var n=Ml;try{if(So(),ds.current=sa,ys){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=gs=ms=null,bs=!1,xs=0,Cl.current=null,null===n||null===n.return){Dl=1,Nl=t,Ml=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(x){t=x,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=sa,null===e?sa:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Il||0===(268435455&Bl)&&0===(268435455&Fl)||lc(Il,Ol)}function vc(e,t){var n=Rl;Rl|=2;var r=mc();for(Il===e&&Ol===t||(Gl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(So(),Rl=n,Tl.current=r,null!==Ml)throw Error(o(261));return Il=null,Ol=0,Dl}function yc(){for(;null!==Ml;)xc(Ml)}function bc(){for(;null!==Ml&&!Ke();)xc(Ml)}function xc(e){var t=El(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?_c(e):Ml=t,Cl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,kl)))return void(Ml=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Dl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Dl&&(Dl=5)}function Sc(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Kl);if(0!==(6&Rl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Il&&(Ml=Il=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Ic(tt,(function(){return wc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Rl;Rl|=4,Cl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(_){Ac(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),$e(),Rl=l,bt=a,Pl.transition=s}else e.current=n;if(Yl&&(Yl=!1,Kl=e,$l=i),s=e.pendingLanes,0===s&&(Xl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!==(1&$l)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Zl?Ql++:(Ql=0,Zl=e):Ql=0,ji()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function wc(){if(null!==Kl){var e=xt($l),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,$l=0,0!==(6&Rl))throw Error(o(331));var i=Rl;for(Rl|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(sl(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ja=y;break e}Ja=s.return}}var b=e.current;for(Ja=b;null!==Ja;){var x=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Ja=x;else e:for(a=b;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Ac(l,l.return,S)}if(l===a){Ja=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Ja=_;break e}Ja=l.return}}if(Rl=i,ji(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Ec(e,t,n){e=Do(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ac(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Do(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Ol&n)===n&&(4===Dl||3===Dl&&(130023424&Ol)===Ol&&500>Qe()-jl?fc(e,0):Ul|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Io(e,t))&&(vt(e,t,n),ic(e,n))}function Pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return Xe(e,t)}function Mc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Mc(e,t,n,r)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)kc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case w:return Nc(n.children,i,s,t);case E:a=8,i|=8;break;case A:return(e=Oc(12,n,t,2|i)).elementType=A,e.lanes=s,e;case R:return(e=Oc(13,n,t,i)).elementType=R,e.lanes=s,e;case I:return(e=Oc(19,n,t,i)).elementType=I,e.lanes=s,e;case k:return Bc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case P:a=11;break e;case M:a=14;break e;case O:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Oc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Nc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,i,o,s,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Oc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function jc(e){if(!e)return Ci;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function Vc(e,t,n,r,i,o,s,a,l){return(e=Hc(n,r,!0,e,0,o,0,a,l)).context=jc(null),n=e.current,(o=Lo(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Lo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,s))&&(rc(e,i,s,o),No(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)xa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xa=!1,function(e,t,n){switch(t.tag){case 3:Ia(t),po();break;case 5:ss(t);break;case 1:Oi(t.type)&&Ni(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ti(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Wa(e,t,n)}(e,t,n);xa=0!==(131072&e.flags)}else xa=!1,io&&0!==(1048576&t.flags)&&Ji(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Mi(t,Pi.current);Ao(t,n),i=Es(null,t,r,e,i,n);var s=As();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Ni(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=jo,t.stateNode=i,i._reactInternals=t,qo(t,r,e,n),t=Ra(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return kc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===M)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Pa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=wa(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Ia(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,ko(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ma(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ma(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ta(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ti(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ri.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Lo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Eo(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Eo(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=To(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),wa(e,t,r,i=vo(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Ga(e,t),t.tag=1,Oi(r)?(e=!0,Ni(t)):e=!1,Ao(t,n),Go(t,r,i),qo(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Gc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Vc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,jr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}$c.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},$c.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Bt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Qe()),0===(6&Rl)&&(Vl=Qe()+500,ji()))}break;case 13:hc((function(){var t=Io(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Xc(e,1)}},St=function(e){if(13===e.tag){var t=Io(e,134217728);if(null!==t)rc(t,e,134217728,tc());Xc(e,134217728)}},wt=function(e){if(13===e.tag){var t=nc(e),n=Io(e,t);if(null!==n)rc(n,e,t,tc());Xc(e,t)}},Et=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));X(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Pe=uc,Re=hc;var tu={usingClientEntryPoint:!1,Events:[bi,xi,_i,Te,Ce,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},254:(e,t,n)=>{"use strict";var r=n(599);t.s=r.createRoot,r.hydrateRoot},599:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(470)},647:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===v)},t.typeOf=_},557:(e,t,n)=>{"use strict";e.exports=n(647)},511:(e,t,n)=>{"use strict";var r=n(390),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},23:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:w.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+P(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(s,t,i,"",(function(e){return e}))):null!=s&&(T(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+P(a=e[c],c);l+=R(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=R(a=a.value,t,i,u=o+P(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function I(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},k={transition:null},L={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:k,ReactCurrentOwner:w};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},390:(e,t,n)=>{"use strict";e.exports=n(23)},559:(e,t,n)=>{"use strict";e.exports=n(511)},17:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,k(S);else{var t=r(u);null!==t&&L(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var o=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&L(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,A=null,T=-1,C=5,P=-1;function R(){return!(t.unstable_now()-P<C)}function I(){if(null!==A){var e=t.unstable_now();P=e;var n=!0;try{n=A(!0,e)}finally{n?w():(E=!1,A=null)}}else E=!1}if("function"===typeof b)w=function(){b(I)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=I,w=function(){O.postMessage(null)}}else w=function(){v(I,0)};function k(e){A=e,E||(E=!0,w())}function L(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,k(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,L(_,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,k(S))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},124:(e,t,n)=>{"use strict";e.exports=n(17)},535:(e,t,n)=>{"use strict";var r=n(793),i=n(885),o=n(241)(),s=n(516),a=r("%TypeError%"),l=r("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new a("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,c=!0;if("length"in e&&s){var u=s(e,"length");u&&!u.configurable&&(r=!1),u&&!u.writable&&(c=!1)}return(r||c||!n)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},738:(e,t,n)=>{"use strict";var r=n(793),i=n(829),o=n(190),s=r("%TypeError%"),a=r("%WeakMap%",!0),l=r("%Map%",!0),c=i("WeakMap.prototype.get",!0),u=i("WeakMap.prototype.set",!0),h=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),m=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new s("Side channel does not contain "+o(e))},get:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(e)return c(e,r)}else if(l){if(t)return d(t,r)}else if(n)return function(e,t){var n=m(e,t);return n&&n.value}(n,r)},has:function(r){if(a&&r&&("object"===typeof r||"function"===typeof r)){if(e)return h(e,r)}else if(l){if(t)return p(t,r)}else if(n)return function(e,t){return!!m(e,t)}(n,r);return!1},set:function(r,i){a&&r&&("object"===typeof r||"function"===typeof r)?(e||(e=new a),u(e,r,i)):l?(t||(t=new l),f(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=m(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},931:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,l=36,c=1,u=26,h=38,d=700,f=72,p=128,m="-",g=/^xn--/,v=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-c,_=Math.floor,S=String.fromCharCode;function w(e){throw new RangeError(b[e])}function E(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function A(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+E((e=e.replace(y,".")).split("."),t).join(".")}function T(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function C(e){return E(e,(function(e){var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=S(e)})).join("")}function P(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function R(e,t,n){var r=0;for(e=n?_(e/d):e>>1,e+=_(e/t);e>x*u>>1;r+=l)e=_(e/x);return _(r+(x+1)*e/(e+h))}function I(e){var t,n,r,i,o,s,h,d,g,v,y,b=[],x=e.length,S=0,E=p,A=f;for((n=e.lastIndexOf(m))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&w("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<x;){for(o=S,s=1,h=l;i>=x&&w("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||d>_((a-S)/s))&&w("overflow"),S+=d*s,!(d<(g=h<=A?c:h>=A+u?u:h-A));h+=l)s>_(a/(v=l-g))&&w("overflow"),s*=v;A=R(S-o,t=b.length+1,0==o),_(S/t)>a-E&&w("overflow"),E+=_(S/t),S%=t,b.splice(S++,0,E)}return C(b)}function M(e){var t,n,r,i,o,s,h,d,g,v,y,b,x,E,A,C=[];for(b=(e=T(e)).length,t=p,n=0,o=f,s=0;s<b;++s)(y=e[s])<128&&C.push(S(y));for(r=i=C.length,i&&C.push(m);r<b;){for(h=a,s=0;s<b;++s)(y=e[s])>=t&&y<h&&(h=y);for(h-t>_((a-n)/(x=r+1))&&w("overflow"),n+=(h-t)*x,t=h,s=0;s<b;++s)if((y=e[s])<t&&++n>a&&w("overflow"),y==t){for(d=n,g=l;!(d<(v=g<=o?c:g>=o+u?u:g-o));g+=l)A=d-v,E=l-v,C.push(S(P(v+A%E,0))),d=_(A/E);C.push(S(P(d,0))),o=R(n,x,r==i),n=0,++r}++n,++t}return C.join("")}s={version:"1.4.1",ucs2:{decode:T,encode:C},decode:I,encode:M,toASCII:function(e){return A(e,(function(e){return v.test(e)?"xn--"+M(e):e}))},toUnicode:function(e){return A(e,(function(e){return g.test(e)?I(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},495:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:i}},629:(e,t,n)=>{"use strict";var r=n(180),i=n(117),o=n(495);e.exports={formats:o,parse:i,stringify:r}},117:(e,t,n)=>{"use strict";var r=n(222),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=n.depth>0&&/(\[[^[\]]*])/.exec(o),c=a?o.slice(0,a.index):o,u=[];if(c){if(!n.plainObjects&&i.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var h=0;n.depth>0&&null!==(a=s.exec(o))&&h<n.depth;){if(h+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+o.slice(a.index)+"]"),function(e,t,n,r){for(var i=r?t:l(t,n),o=e.length-1;o>=0;--o){var s,a=e[o];if("[]"===a&&n.parseArrays)s=[].concat(i);else{s=n.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);n.parseArrays||""!==c?!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(s=[])[u]=i:"__proto__"!==c&&(s[c]=i):s={0:i}}i=s}return i}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?s.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:s.comma,decoder:"function"===typeof e.decoder?e.decoder:s.decoder,delimiter:"string"===typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return n.plainObjects?Object.create(null):{};for(var u="string"===typeof e?function(e,t){var n,c={__proto__:null},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,h=t.parameterLimit===1/0?void 0:t.parameterLimit,d=u.split(t.delimiter,h),f=-1,p=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?p="utf-8":"utf8=%26%2310003%3B"===d[n]&&(p="iso-8859-1"),f=n,n=d.length);for(n=0;n<d.length;++n)if(n!==f){var m,g,v=d[n],y=v.indexOf("]="),b=-1===y?v.indexOf("="):y+1;-1===b?(m=t.decoder(v,s.decoder,p,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(v.slice(0,b),s.decoder,p,"key"),g=r.maybeMap(l(v.slice(b+1),t),(function(e){return t.decoder(e,s.decoder,p,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===p&&(g=a(g)),v.indexOf("[]=")>-1&&(g=o(g)?[g]:g),i.call(c,m)?c[m]=r.combine(c[m],g):c[m]=g}return c}(e,n):e,h=n.plainObjects?Object.create(null):{},d=Object.keys(u),f=0;f<d.length;++f){var p=d[f],m=c(p,u[p],n,"string"===typeof e);h=r.merge(h,m,n)}return!0===n.allowSparse?h:r.compact(h)}},180:(e,t,n)=>{"use strict";var r=n(738),i=n(222),o=n(495),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},h=Date.prototype.toISOString,d=o.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(e){return h.call(e)},skipNulls:!1,strictNullHandling:!1},p={},m=function e(t,n,o,s,a,c,h,d,m,g,v,y,b,x,_,S){for(var w,E=t,A=S,T=0,C=!1;void 0!==(A=A.get(p))&&!C;){var P=A.get(t);if(T+=1,"undefined"!==typeof P){if(P===T)throw new RangeError("Cyclic object value");C=!0}"undefined"===typeof A.get(p)&&(T=0)}if("function"===typeof d?E=d(n,E):E instanceof Date?E=v(E):"comma"===o&&l(E)&&(E=i.maybeMap(E,(function(e){return e instanceof Date?v(e):e}))),null===E){if(a)return h&&!x?h(n,f.encoder,_,"key",y):n;E=""}if("string"===typeof(w=E)||"number"===typeof w||"boolean"===typeof w||"symbol"===typeof w||"bigint"===typeof w||i.isBuffer(E))return h?[b(x?n:h(n,f.encoder,_,"key",y))+"="+b(h(E,f.encoder,_,"value",y))]:[b(n)+"="+b(String(E))];var R,I=[];if("undefined"===typeof E)return I;if("comma"===o&&l(E))x&&h&&(E=i.maybeMap(E,h)),R=[{value:E.length>0?E.join(",")||null:void 0}];else if(l(d))R=d;else{var M=Object.keys(E);R=m?M.sort(m):M}for(var O=s&&l(E)&&1===E.length?n+"[]":n,k=0;k<R.length;++k){var L=R[k],D="object"===typeof L&&"undefined"!==typeof L.value?L.value:E[L];if(!c||null!==D){var N=l(E)?"function"===typeof o?o(O,L):O:O+(g?"."+L:"["+L+"]");S.set(t,T);var B=r();B.set(p,S),u(I,e(D,N,o,s,a,c,"comma"===o&&x&&l(E)?null:h,d,m,g,v,y,b,x,_,B))}}return I};e.exports=function(e,t){var n,i=e,c=function(e){if(!e)return f;if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if("undefined"!==typeof e.format){if(!s.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=f.filter;return("function"===typeof e.filter||l(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?f.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:f.encode,encoder:"function"===typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):l(c.filter)&&(n=c.filter);var h,d=[];if("object"!==typeof i||null===i)return"";h=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=a[h];if(t&&"commaRoundTrip"in t&&"boolean"!==typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var g="comma"===p&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),c.sort&&n.sort(c.sort);for(var v=r(),y=0;y<n.length;++y){var b=n[y];c.skipNulls&&null===i[b]||u(d,m(i[b],b,p,g,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,v))}var x=d.join(c.delimiter),_=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),x.length>0?_+x:""}},222:(e,t,n)=>{"use strict";var r=n(495),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],s=i.obj[i.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],u=s[c];"object"===typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:s,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)"undefined"!==typeof n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(i){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var a=e;if("symbol"===typeof e?a=Symbol.prototype.toString.call(e):"string"!==typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var l="",c=0;c<a.length;++c){var u=a.charCodeAt(c);45===u||46===u||95===u||126===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===r.RFC1738&&(40===u||41===u)?l+=a.charAt(c):u<128?l+=s[u]:u<2048?l+=s[192|u>>6]+s[128|63&u]:u<55296||u>=57344?l+=s[224|u>>12]+s[128|u>>6&63]+s[128|63&u]:(c+=1,u=65536+((1023&u)<<10|1023&a.charCodeAt(c)),l+=s[240|u>>18]+s[128|u>>12&63]+s[128|u>>6&63]+s[128|63&u])}return l},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==typeof n){if(o(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);var s=t;return o(t)&&!o(n)&&(s=a(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var s=t[o];s&&"object"===typeof s&&n&&"object"===typeof n?t[o]=e(s,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var s=n[o];return i.call(t,o)?t[o]=e(t[o],s,r):t[o]=s,t}),s)}}},232:(e,t,n)=>{"use strict";var r=n(931);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),u=["%","/","?",";","#"].concat(c),h=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(629);function y(e,t,n){if(e&&"object"===typeof e&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if("string"!==typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(s);l[0]=l[0].replace(/\\/g,"/");var y=e=l.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var b=a.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=o.exec(y);if(x){var _=(x=x[0]).toLowerCase();this.protocol=_,y=y.substr(x.length)}if(n||x||y.match(/^\/\/[^@/]+@[^@/]+/)){var S="//"===y.substr(0,2);!S||x&&m[x]||(y=y.substr(2),this.slashes=!0)}if(!m[x]&&(S||x&&!g[x])){for(var w,E,A=-1,T=0;T<h.length;T++){-1!==(C=y.indexOf(h[T]))&&(-1===A||C<A)&&(A=C)}-1!==(E=-1===A?y.lastIndexOf("@"):y.lastIndexOf("@",A))&&(w=y.slice(0,E),y=y.slice(E+1),this.auth=decodeURIComponent(w)),A=-1;for(T=0;T<u.length;T++){var C;-1!==(C=y.indexOf(u[T]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=y.length),this.host=y.slice(0,A),y=y.slice(A),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var R=this.hostname.split(/\./),I=(T=0,R.length);T<I;T++){var M=R[T];if(M&&!M.match(d)){for(var O="",k=0,L=M.length;k<L;k++)M.charCodeAt(k)>127?O+="x":O+=M[k];if(!O.match(d)){var D=R.slice(0,T),N=R.slice(T+1),B=M.match(f);B&&(D.push(B[1]),N.unshift(B[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!p[_])for(T=0,I=c.length;T<I;T++){var z=c[T];if(-1!==y.indexOf(z)){var H=encodeURIComponent(z);H===z&&(H=escape(z)),y=y.split(z).join(H)}}var j=y.indexOf("#");-1!==j&&(this.hash=y.substr(j),y=y.slice(0,j));var V=y.indexOf("?");if(-1!==V?(this.search=y.substr(V),this.query=y.substr(V+1),t&&(this.query=v.parse(this.query)),y=y.slice(0,V)):t&&(this.search="",this.query={}),y&&(this.pathname=y),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var G=this.search||"";this.path=F+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(o=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if("string"===typeof e){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var u=Object.keys(e),h=0;h<u.length;h++){var d=u[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",v=n.search||"";n.path=p+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=b||y||n.host&&e.pathname,_=x,S=n.pathname&&n.pathname.split("/")||[],w=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===S[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),n.search=e.search,n.query=e.query;else if(null!=e.search){if(w)n.host=S.shift(),n.hostname=n.host,(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname);return n.search=e.search,n.query=e.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=S.slice(-1)[0],A=(n.host||e.host||S.length>1)&&("."===E||".."===E)||""===E,T=0,C=S.length;C>=0;C--)"."===(E=S[C])?S.splice(C,1):".."===E?(S.splice(C,1),T++):T&&(S.splice(C,1),T--);if(!x&&!_)for(;T--;T)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var P,R=""===S[0]||S[0]&&"/"===S[0].charAt(0);w&&(n.hostname=R?"":S.length?S.shift():"",n.host=n.hostname,(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.hostname=P.shift(),n.host=n.hostname));return(x=x||n.host&&S.length)&&!R&&S.unshift(""),S.length>0?n.pathname=S.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.Qc=y,t.DB=function(e,t){return y(e,!1,!0).resolve(t)},t.WU=function(e){return"string"===typeof e&&(e=y(e)),e instanceof i?e.format():i.prototype.format.call(e)}},284:(e,t,n)=>{"use strict";var r=n(390);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(o=e,s=n)}var o,s,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=o(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},343:(e,t,n)=>{"use strict";e.exports=n(284)},654:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=n(390),t=n.t(e,2),r=n(254),i=n(599);function o(e){const t=document.createElement("canvas").getContext("2d");t.fillStyle=e;let n=t.fillStyle;n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return"#"+t+t+n+n+r+r}));var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return{hexString:n,rgb:{red:parseInt(r[1],16),green:parseInt(r[2],16),blue:parseInt(r[3],16)}}}function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(parseInt(e)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(e)/4).toString(16)}))}function a(e,t){return e.reduce(((e,n)=>{const r=t(n),i=e.get(r)?e.get(r):[];return e.set(r,[...i,n]),e}),new Map)}function l(e,t){const n=new Error(t);return n.name=e+" Parse Error",n}function c(e,t){return Array.from({length:t-e+1},((t,n)=>e+n))}let u=function(e){return e[e.ShiftOnlyFullyRendered=0]="ShiftOnlyFullyRendered",e[e.Virtualize=1]="Virtualize",e[e.Manual=2]="Manual",e}({}),h=function(e){return e.NeverOn="NeverOn",e.AlwaysOnWhenOverflowed="AlwaysOnWhenOverflowed",e.OnHoverWhenOverflowed="AlwaysOnWOnHoverWhenOverflowedhenOverflowed",e}({}),d=function(e){return e[e.Controller=0]="Controller",e[e.Responder=1]="Responder",e}({});const f={hoverTrackerSize:"5"};var p=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(p||{}),m=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(m||{}),g=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(g||{}),v=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(v||{}),y=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(y||{}),b=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(b||{}),x=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(x||{}),_=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(_||{}),S=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(S||{}),w=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(w||{}),E=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(E||{}),A=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(A||{}),T=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(T||{}),C=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(C||{}),P=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(P||{}),R=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(R||{}),I=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(I||{}),M=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(M||{}),O=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(O||{});const k={createCanvas:(e,t)=>{const n=document.createElement("canvas");return n.width=e,n.height=t,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>{var e;return null!==(e=document.baseURI)&&void 0!==e?e:window.location.href},getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},L={ADAPTER:k,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var D,N=/iPhone/i,B=/iPod/i,F=/iPad/i,U=/\biOS-universal(?:.+)Mac\b/i,z=/\bAndroid(?:.+)Mobile\b/i,H=/Android/i,j=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,V=/Silk/i,G=/Windows Phone/i,W=/\bWindows(?:.+)ARM\b/i,q=/BlackBerry/i,X=/BB10/i,Y=/Opera Mini/i,K=/\b(CriOS|Chrome)(?:.+)Mobile/i,$=/Mobile(?:.+)Firefox\b/i,Q=function(e){return"undefined"!==typeof e&&"MacIntel"===e.platform&&"number"===typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"===typeof MSStream};function Z(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"===typeof navigator?"string"===typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i(N)&&!i(G),ipod:i(B),tablet:!i(N)&&(i(F)||Q(t))&&!i(G),universal:i(U),device:(i(N)||i(B)||i(F)||i(U)||Q(t))&&!i(G)},amazon:{phone:i(j),tablet:!i(j)&&i(V),device:i(j)||i(V)},android:{phone:!i(G)&&i(j)||!i(G)&&i(z),tablet:!i(G)&&!i(j)&&!i(z)&&(i(V)||i(H)),device:!i(G)&&(i(j)||i(V)||i(z)||i(H))||i(/\bokhttp\b/i)},windows:{phone:i(G),tablet:i(W),device:i(G)||i(W)},other:{blackberry:i(q),blackberry10:i(X),opera:i(Y),firefox:i($),chrome:i(K),device:i(q)||i(X)||i(Y)||i($)||i(K)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const J=(null!==(D=Z.default)&&void 0!==D?D:Z)(globalThis.navigator);L.RETINA_PREFIX=/@([0-9\.]+)x/,L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var ee=n(904),te=n(386);n(232);const ne={};function re(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(ne[t])return;let r=(new Error).stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ","".concat(t,"\nDeprecated since v").concat(e)):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6","".concat(t,"\nDeprecated since v").concat(e)),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ","".concat(t,"\nDeprecated since v").concat(e)),console.warn(r))),ne[t]=!0}function ie(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(e)))}function oe(e){return e.split("?")[0].split("#")[0]}const se={toPosix:e=>function(e,t,n){return e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}(e,"\\","/"),isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){ie(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(e);return n?n[0]:""},toAbsolute(e,t,n){if(ie(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const r=oe(this.toPosix(null!==t&&void 0!==t?t:L.ADAPTER.getBaseUrl())),i=oe(this.toPosix(null!==n&&void 0!==n?n:this.rootname(r)));return(e=this.toPosix(e)).startsWith("/")?se.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(r,e)},normalize(e){if(ie(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;let t="";const n=(e=this.toPosix(e)).startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const r=e.endsWith("/");return(e=function(e,t){let n="",r=0,i=-1,o=0,s=-1;for(let a=0;a<=e.length;++a){if(a<e.length)s=e.charCodeAt(a);else{if(47===s)break;s=47}if(47===s){if(i!==a-1&&1!==o)if(i!==a-1&&2===o){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const e=n.lastIndexOf("/");if(e!==n.length-1){-1===e?(n="",r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(2===n.length||1===n.length){n="",r=0,i=a,o=0;continue}t&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/".concat(e.slice(i+1,a)):n=e.slice(i+1,a),r=a-i-1;i=a,o=0}else 46===s&&-1!==o?++o:o=-1}return n}(e,!1)).length>0&&r&&(e+="/"),n?"/".concat(e):t+e},isAbsolute(e){return ie(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(){if(0===arguments.length)return".";let e;for(let n=0;n<arguments.length;++n){const r=n<0||arguments.length<=n?void 0:arguments[n];if(ie(r),r.length>0)if(void 0===e)e=r;else{var t;const i=null!==(t=n-1<0||arguments.length<=n-1?void 0:arguments[n-1])&&void 0!==t?t:"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+="/../".concat(r):e+="/".concat(r)}}return void 0===e?".":this.normalize(e)},dirname(e){if(ie(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const n=47===t;let r=-1,i=!0;const o=this.getProtocol(e),s=e;for(let a=(e=e.slice(o.length)).length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":this.isUrl(s)?o+e:o:n&&1===r?"//":o+e.slice(0,r)},rootname(e){ie(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const n=e.indexOf("/",t.length);t=-1!==n?e.slice(0,n):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){ie(e),t&&ie(t),e=oe(this.toPosix(e));let n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(47===l){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(l===t.charCodeAt(s)?-1===--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname(e){ie(e);let t=-1,n=0,r=-1,i=!0,o=0;for(let s=(e=oe(this.toPosix(e))).length-1;s>=0;--s){const a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},parse(e){ie(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let n=(e=oe(this.toPosix(e))).charCodeAt(0);const r=this.isAbsolute(e);let i;t.root=this.rootname(e),i=r||this.hasProtocol(e)?1:0;let o=-1,s=0,a=-1,l=!0,c=e.length-1,u=0;for(;c>=i;--c)if(n=e.charCodeAt(c),47!==n)-1===a&&(l=!1,a=c+1),46===n?-1===o?o=c:1!==u&&(u=1):-1!==o&&(u=-1);else if(!l){s=c+1;break}return-1===o||-1===a||0===u||1===u&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&r?e.slice(1,a):e.slice(s,a)):(0===s&&r?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let ae,le;async function ce(){var e;return null!==(e=ae)&&void 0!==e||(ae=(async e=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return T.UNPACK;const n=await new Promise((e=>{const t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()}));if(!n)return T.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(i),t.deleteTexture(r),null!==(e=t.getExtension("WEBGL_lose_context"))&&void 0!==e&&e.loseContext(),o[0]<=o[3]?T.PMA:T.UNPACK})()),ae}var ue={grad:.9,turn:360,rad:360/(2*Math.PI)},he=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},de=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},fe=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},pe=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},me=function(e){return{r:fe(e.r,0,255),g:fe(e.g,0,255),b:fe(e.b,0,255),a:fe(e.a)}},ge=function(e){return{r:de(e.r),g:de(e.g),b:de(e.b),a:de(e.a,3)}},ve=/^#([0-9a-f]{3,8})$/i,ye=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},be=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),s=o-Math.min(t,n,r),a=s?o===t?(n-r)/s:o===n?2+(r-t)/s:4+(t-n)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},xe=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),s=r*(1-n),a=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:255*[r,a,s,s,l,r][c],g:255*[l,r,r,a,s,s][c],b:255*[s,s,l,r,r,a][c],a:i}},_e=function(e){return{h:pe(e.h),s:fe(e.s,0,100),l:fe(e.l,0,100),a:fe(e.a)}},Se=function(e){return{h:de(e.h),s:de(e.s),l:de(e.l),a:de(e.a,3)}},we=function(e){return xe((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Ee=function(e){return{h:(t=be(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},Ae=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Te=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ce=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Re={string:[[function(e){var t=ve.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?de(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?de(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Ce.exec(e)||Pe.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:me({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Ae.exec(e)||Te.exec(e);if(!t)return null;var n,r,i=_e({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(ue[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return we(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=void 0===i?1:i;return he(t)&&he(n)&&he(r)?me({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=void 0===i?1:i;if(!he(t)||!he(n)||!he(r))return null;var s=_e({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return we(s)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=void 0===i?1:i;if(!he(t)||!he(n)||!he(r))return null;var s=function(e){return{h:pe(e.h),s:fe(e.s,0,100),v:fe(e.v,0,100),a:fe(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return xe(s)},"hsv"]]},Ie=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},Me=function(e){return"string"==typeof e?Ie(e.trim(),Re.string):"object"==typeof e&&null!==e?Ie(e,Re.object):[null,void 0]},Oe=function(e,t){var n=Ee(e);return{h:n.h,s:fe(n.s+100*t,0,100),l:n.l,a:n.a}},ke=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Le=function(e,t){var n=Ee(e);return{h:n.h,s:n.s,l:fe(n.l+100*t,0,100),a:n.a}},De=function(){function e(e){this.parsed=Me(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return de(ke(this.rgba),2)},e.prototype.isDark=function(){return ke(this.rgba)<.5},e.prototype.isLight=function(){return ke(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=ge(this.rgba)).r,n=e.g,r=e.b,o=(i=e.a)<1?ye(de(255*i)):"","#"+ye(t)+ye(n)+ye(r)+o;var e,t,n,r,i,o},e.prototype.toRgb=function(){return ge(this.rgba)},e.prototype.toRgbString=function(){return t=(e=ge(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return Se(Ee(this.rgba))},e.prototype.toHslString=function(){return t=(e=Se(Ee(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=be(this.rgba),{h:de(e.h),s:de(e.s),v:de(e.v),a:de(e.a,3)};var e},e.prototype.invert=function(){return Ne({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),Ne(Oe(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),Ne(Oe(this.rgba,-e))},e.prototype.grayscale=function(){return Ne(Oe(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),Ne(Le(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),Ne(Le(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?Ne({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):de(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Ee(this.rgba);return"number"==typeof e?Ne({h:e,s:t.s,l:t.l,a:t.a}):de(t.h)},e.prototype.isEqual=function(e){return this.toHex()===Ne(e).toHex()},e}(),Ne=function(e){return e instanceof De?e:new De(e)},Be=[];!function(e){e.forEach((function(e){Be.indexOf(e)<0&&(e(De,Re),Be.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,s,a=r[this.toHex()];if(a)return a;if(null==t?void 0:t.closest){var l=this.toRgb(),c=1/0,u="black";if(!o.length)for(var h in n)o[h]=new e(n[h]).toRgb();for(var d in n){var f=(i=l,s=o[d],Math.pow(i.r-s.r,2)+Math.pow(i.g-s.g,2)+Math.pow(i.b-s.b,2));f<c&&(c=f,u=d)}return u}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);const Fe=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if("number"===n||"string"===n||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every(((e,n)=>e===t[n]));if(null!==e&&null!==t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((n=>e[n]===t[n]))}return e===t}toRgba(){const[e,t,n,r]=this._components;return{r:e,g:t,b:n,a:r}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(this.alpha,")")}toUint8RgbArray(e){var t;const[n,r,i]=this._components;return(e=null!==(t=e)&&void 0!==t?t:[])[0]=Math.round(255*n),e[1]=Math.round(255*r),e[2]=Math.round(255*i),e}toRgbArray(e){var t;e=null!==(t=e)&&void 0!==t?t:[];const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[n,r,i,o]=e.temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=255&this._int;return t&&(n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(255*e<<24)+(n<<16)+(r<<8)+i}toHex(){const e=this._int.toString(16);return"#".concat("000000".substring(0,6-e.length)+e)}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,r]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(r*e)/e,this.refreshInt(),this._value=null,this}toArray(e){var t;e=null!==(t=e)&&void 0!==t?t:[];const[n,r,i,o]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=o,e}normalize(t){let n,r,i,o;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){n=(t>>16&255)/255,r=(t>>8&255)/255,i=(255&t)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,r,i,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,r,i,o=255]=t,n/=255,r/=255,i/=255,o/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const n=e.HEX_PATTERN.exec(t);n&&(t="#".concat(n[2]))}const s=Ne(t);s.isValid()&&(({r:n,g:r,b:i,a:o}=s.rgba),n/=255,r/=255,i/=255)}if(void 0===n)throw new Error("Unable to convert color ".concat(t));this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=o,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*n|0)}_clamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"==typeof e?Math.min(Math.max(e,t),n):(e.forEach(((r,i)=>{e[i]=Math.min(Math.max(r,t),n)})),e)}};Fe.shared=new Fe,Fe.temp=new Fe,Fe.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ue=Fe;const ze=function(){const e=[],t=[];for(let r=0;r<32;r++)e[r]=r,t[r]=r;e[v.NORMAL_NPM]=v.NORMAL,e[v.ADD_NPM]=v.ADD,e[v.SCREEN_NPM]=v.SCREEN,t[v.NORMAL]=v.NORMAL_NPM,t[v.ADD]=v.ADD_NPM,t[v.SCREEN]=v.SCREEN_NPM;const n=[];return n.push(t),n.push(e),n}();function He(e,t){return ze[t?1:0][e]}function je(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}Float32Array,Uint32Array,Int32Array,Uint8Array;function Ve(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function Ge(e){return!(e&e-1)&&!!e}function We(e){let t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,n=((e>>>=n)>15?1:0)<<2,t|=n,n=((e>>>=n)>3?1:0)<<1,t|=n,t|(e>>>=n)>>1}function qe(e,t,n){const r=e.length;let i;if(t>=r||0===n)return;const o=r-(n=t+n>r?r-t:n);for(i=t;i<o;++i)e[i]=e[i+n];e.length=o}function Xe(e){return 0===e?0:e<0?-1:1}let Ye=0;function Ke(){return++Ye}const $e=class{constructor(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};$e.EMPTY=new $e(0,0,0,0);let Qe=$e;const Ze={},Je=Object.create(null),et=Object.create(null);class tt{constructor(e,t,n){this._canvas=L.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||L.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function nt(e,t,n){for(let r=0,i=4*n*t;r<t;++r,i+=4)if(0!==e[i+3])return!1;return!0}function rt(e,t,n,r,i){const o=4*t;for(let s=r,a=r*o+4*n;s<=i;++s,a+=o)if(0!==e[a+3])return!1;return!0}function it(e){const t=function(e){const{width:t,height:n}=e,r=e.getContext("2d",{willReadFrequently:!0});if(null===r)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,t,n).data;let o=0,s=0,a=t-1,l=n-1;for(;s<n&&nt(i,t,s);)++s;if(s===n)return Qe.EMPTY;for(;nt(i,t,l);)--l;for(;rt(i,t,o,s,l);)++o;for(;rt(i,t,a,s,l);)--a;return++a,++l,new Qe(o,s,a,l)}(e),{width:n,height:r}=t;let i=null;if(!t.isEmpty()){const o=e.getContext("2d");if(null===o)throw new TypeError("Failed to get canvas 2D context");i=o.getImageData(t.left,t.top,n,r)}return{width:n,height:r,data:i}}function ot(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=null===(t=L.RETINA_PREFIX)||void 0===t?void 0:t.exec(e);return r?parseFloat(r[1]):n}var st=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(st||{});const at=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},lt=(e,t)=>{var n;return null!==(n=at(e).priority)&&void 0!==n?n:t},ct={_addHandlers:{},_removeHandlers:{},_queue:{},remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(at).forEach((e=>{e.type.forEach((t=>{var n,r;return null===(n=(r=this._removeHandlers)[t])||void 0===n?void 0:n.call(r,e)}))})),this},add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(at).forEach((e=>{e.type.forEach((t=>{const n=this._addHandlers,r=this._queue;n[t]?n[t](e):(r[t]=r[t]||[],r[t].push(e))}))})),this},handle(e,t,n){const r=this._addHandlers,i=this._removeHandlers;if(r[e]||i[e])throw new Error("Extension type ".concat(e," already has a handler"));r[e]=t,i[e]=n;const o=this._queue;return o[e]&&(o[e].forEach((e=>t(e))),delete o[e]),this},handleByMap(e,t){return this.handle(e,(e=>{t[e.name]=e.ref}),(e=>{delete t[e.name]}))},handleByList(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(e,(e=>{t.includes(e.ref)||(t.push(e.ref),t.sort(((e,t)=>lt(t,n)-lt(e,n))))}),(e=>{const n=t.indexOf(e.ref);-1!==n&&t.splice(n,1)}))}};class ut{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this["".concat(e,"View")]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(e," isn't a valid view type"))}}}const ht=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function dt(e){let t="";for(let n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == ".concat(n,".0){}"));return t}class ft{constructor(){this.data=0,this.blendMode=v.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==v.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new ft;return e.depthTest=!1,e.blend=!0,e}}ft.prototype.toString=function(){return"[@pixi/core:State blendMode=".concat(this.blendMode," clockwiseFrontFace=").concat(this.clockwiseFrontFace," culling=").concat(this.culling," depthMask=").concat(this.depthMask," polygonOffset=").concat(this.polygonOffset,"]")};const pt=[];function mt(e,t){if(!e)return null;let n="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(n=t[1].toLowerCase())}for(let r=pt.length-1;r>=0;--r){const i=pt[r];if(i.test&&i.test(e,n))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class gt{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,r,i,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:c}=this;this._aliasCount++;for(let u=0,h=c.length;u<h;u++)c[u][l](e,t,n,r,i,o,s,a);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(gt.prototype,{dispatch:{value:gt.prototype.emit},run:{value:gt.prototype.emit}});class vt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new gt("setRealSize"),this.onUpdate=new gt("update"),this.onError=new gt("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class yt extends vt{constructor(e,t){var n;const{width:r,height:i}=t||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=null!==(n=t.unpackAlignment)&&void 0!==n?n:4}upload(e,t,n){const r=e.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===T.UNPACK);const i=t.realWidth,o=t.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(t.target,0,0,0,i,o,t.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(t.target,0,n.internalFormat,i,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const bt={scaleMode:w.NEAREST,alphaMode:T.NPM},xt=class e extends ee{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),n=Object.assign({},e.defaultOptions,n);const{alphaMode:r,mipmap:i,anisotropicLevel:o,scaleMode:s,width:a,height:l,wrapMode:c,format:u,type:h,target:d,resolution:f,resourceOptions:p}=n;t&&!(t instanceof vt)&&(t=mt(t,p),t.internal=!0),this.resolution=f||L.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=o,this._wrapMode=c,this._scaleMode=s,this.format=u,this.type=h,this.target=d,this.alphaMode=r,this.uid=Ke(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Ge(this.realWidth)&&Ge(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete et[this.cacheId],delete Je[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.STRICT_TEXTURE_CACHE;const i="string"==typeof t;let o=null;if(i)o=t;else{if(!t._pixiId){const e=(null===n||void 0===n?void 0:n.pixiIdPrefix)||"pixiid";t._pixiId="".concat(e,"_").concat(Ke())}o=t._pixiId}let s=et[o];if(i&&r&&!s)throw new Error('The cacheId "'.concat(o,'" does not exist in BaseTextureCache.'));return s||(s=new e(t,n),s.cacheId=o,e.addToCache(s,o)),s}static fromBuffer(t,n,r,i){t=t||new Float32Array(n*r*4);const o=new yt(t,{width:n,height:r,...null===i||void 0===i?void 0:i.resourceOptions});let s,a;return t instanceof Float32Array?(s=b.RGBA,a=_.FLOAT):t instanceof Int32Array?(s=b.RGBA_INTEGER,a=_.INT):t instanceof Uint32Array?(s=b.RGBA_INTEGER,a=_.UNSIGNED_INT):t instanceof Int16Array?(s=b.RGBA_INTEGER,a=_.SHORT):t instanceof Uint16Array?(s=b.RGBA_INTEGER,a=_.UNSIGNED_SHORT):t instanceof Int8Array?(s=b.RGBA,a=_.BYTE):(s=b.RGBA,a=_.UNSIGNED_BYTE),o.internal=!0,new e(o,Object.assign({},bt,{type:a,format:s},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),et[t]&&et[t]!==e&&console.warn("BaseTexture added to the cache with an id [".concat(t,"] that already had an entry")),et[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=et[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete et[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete et[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};xt.defaultOptions={mipmap:A.POW2,anisotropicLevel:0,scaleMode:w.LINEAR,wrapMode:E.CLAMP,alphaMode:T.UNPACK,target:x.TEXTURE_2D,format:b.RGBA,type:_.UNSIGNED_BYTE},xt._globalBatch=0;let _t=xt;class St{constructor(){this.texArray=null,this.blend=0,this.type=y.TRIANGLES,this.start=0,this.size=0,this.data=null}}let wt=0;class Et{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=wt++,this.disposeRunner=new gt("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?O.ELEMENT_ARRAY_BUFFER:O.ARRAY_BUFFER}get index(){return this.type===O.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Et(e)}}class At{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.FLOAT,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=s,this.divisor=a}destroy(){this.buffer=null}static from(e,t,n,r,i){return new At(e,t,n,r,i)}}const Tt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};const Ct={5126:4,5123:2,5121:1};let Pt=0;const Rt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class It{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Pt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new gt("disposeGeometry"),this.refCount=0}addAttribute(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Et||(t instanceof Array&&(t=new Float32Array(t)),t=new Et(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,n,r,i);return this}let c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new At(c,n,r,i,o,s,a),this.instanced=this.instanced||a,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Et||(e instanceof Array&&(e=new Uint16Array(e)),e=new Et(e)),e.type=O.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],n=new Et;let r;for(r in this.attributes){const n=this.attributes[r],i=this.buffers[n.buffer];e.push(i.data),t.push(n.size*Ct[n.type]/4),n.buffer=0}for(n.data=function(e,t){let n=0,r=0;const i={};for(let l=0;l<e.length;l++)r+=t[l],n+=e[l].length;const o=new ArrayBuffer(4*n);let s=null,a=0;for(let l=0;l<e.length;l++){const n=t[l],c=e[l],u=je(c);i[u]||(i[u]=new Tt[u](o)),s=i[u];for(let e=0;e<c.length;e++)s[(e/n|0)*r+a+e%n]=c[e];a+=n}return new Float32Array(o)}(e,t),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new It;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Et(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new At(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=O.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new It,n=[],r=[],i=[];let o;for(let s=0;s<e.length;s++){o=e[s];for(let e=0;e<o.buffers.length;e++)r[e]=r[e]||0,r[e]+=o.buffers[e].data.length,i[e]=0}for(let s=0;s<o.buffers.length;s++)n[s]=new(Rt[je(o.buffers[s].data)])(r[s]),t.buffers[s]=new Et(n[s]);for(let s=0;s<e.length;s++){o=e[s];for(let e=0;e<o.buffers.length;e++)n[e].set(o.buffers[e].data,i[e]),i[e]+=o.buffers[e].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=O.ELEMENT_ARRAY_BUFFER;let n=0,r=0,i=0,s=0;for(let e=0;e<o.buffers.length;e++)if(o.buffers[e]!==o.indexBuffer){s=e;break}for(const e in o.attributes){const t=o.attributes[e];(0|t.buffer)===s&&(r+=t.size*Ct[t.type]/4)}for(let o=0;o<e.length;o++){const a=e[o].indexBuffer.data;for(let e=0;e<a.length;e++)t.indexBuffer.data[e+i]+=n;n+=e[o].buffers[s].data.length/r,i+=a.length}}return t}}class Mt extends It{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this._buffer=new Et(null,e,!1),this._indexBuffer=new Et(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,_.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,_.FLOAT).addAttribute("aColor",this._buffer,4,!0,_.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,_.FLOAT).addIndex(this._indexBuffer)}}const Ot=2*Math.PI,kt=180/Math.PI,Lt=Math.PI/180;var Dt=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Dt||{});class Nt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Nt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x=e,this.y=t,this}}Nt.prototype.toString=function(){return"[@pixi/math:Point x=".concat(this.x," y=").concat(this.y,"]")};const Bt=[new Nt,new Nt,new Nt,new Nt];class Ft{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=Dt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ft(0,0,0,0)}clone(){return new Ft(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const n=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>n}const n=this.left,r=this.right,i=this.top,o=this.bottom;if(r<=n||o<=i)return!1;const s=Bt[0].set(e.left,e.top),a=Bt[1].set(e.left,e.bottom),l=Bt[2].set(e.right,e.top),c=Bt[3].set(e.right,e.bottom);if(l.x<=s.x||a.y<=s.y)return!1;const u=Math.sign(t.a*t.d-t.b*t.c);if(0===u||(t.apply(s,s),t.apply(a,a),t.apply(l,l),t.apply(c,c),Math.max(s.x,a.x,l.x,c.x)<=n||Math.min(s.x,a.x,l.x,c.x)>=r||Math.max(s.y,a.y,l.y,c.y)<=i||Math.min(s.y,a.y,l.y,c.y)>=o))return!1;const h=u*(a.y-s.y),d=u*(s.x-a.x),f=h*n+d*i,p=h*r+d*i,m=h*n+d*o,g=h*r+d*o;if(Math.max(f,p,m,g)<=h*s.x+d*s.y||Math.min(f,p,m,g)>=h*c.x+d*c.y)return!1;const v=u*(s.y-l.y),y=u*(l.x-s.x),b=v*n+y*i,x=v*r+y*i,_=v*n+y*o,S=v*r+y*o;return!(Math.max(b,x,_,S)<=v*s.x+y*s.y||Math.min(b,x,_,S)>=v*c.x+y*c.y)}pad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this}ceil(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this}}Ft.prototype.toString=function(){return"[@pixi/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")};class Ut{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=e,this.y=t,this.radius=n,this.type=Dt.CIRC}clone(){return new Ut(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-e,i=this.y-t;return r*=r,i*=i,r+i<=n}getBounds(){return new Ft(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}Ut.prototype.toString=function(){return"[@pixi/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]")};class zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=e,this.y=t,this.width=n,this.height=r,this.type=Dt.ELIP}clone(){return new zt(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,r=(t-this.y)/this.height;return n*=n,r*=r,n+r<=1}getBounds(){return new Ft(this.x-this.width,this.y-this.height,this.width,this.height)}}zt.prototype.toString=function(){return"[@pixi/math:Ellipse x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")};class Ht{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=Array.isArray(t[0])?t[0]:t;if("number"!=typeof r[0]){const e=[];for(let t=0,n=r.length;t<n;t++)e.push(r[t].x,r[t].y);r=e}this.points=r,this.type=Dt.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new Ht(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const r=this.points.length/2;for(let i=0,o=r-1;i<r;o=i++){const r=this.points[2*i],s=this.points[2*i+1],a=this.points[2*o],l=this.points[2*o+1];s>t!=l>t&&e<(t-s)/(l-s)*(a-r)+r&&(n=!n)}return n}}Ht.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke=".concat(this.closeStroke,"points=").concat(this.points.reduce(((e,t)=>"".concat(e,", ").concat(t)),""),"]")};class jt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=Dt.RREC}clone(){return new jt(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),i=t-(this.y+n);const o=n*n;if(r*r+i*i<=o||(r=e-(this.x+this.width-n),r*r+i*i<=o)||(i=t-(this.y+this.height-n),r*r+i*i<=o)||(r=e-(this.x+n),r*r+i*i<=o))return!0}return!1}}jt.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]")};class Vt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Nt;const n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Nt;const n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}setTransform(e,t,n,r,i,o,s,a,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,n=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,r=this.c,i=this.d,o=e.pivot,s=-Math.atan2(-r,i),a=Math.atan2(n,t),l=Math.abs(s+a);return l<1e-5||Math.abs(Ot-l)<1e-5?(e.rotation=a,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=a),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*n+o.y*i),e}invert(){const e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Vt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Vt}static get TEMP_MATRIX(){return new Vt}}Vt.prototype.toString=function(){return"[@pixi/math:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]")};const Gt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Wt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],qt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Yt=[],Kt=[],$t=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];Yt.push(t);for(let n=0;n<16;n++){const r=$t(Gt[e]*Gt[n]+qt[e]*Wt[n]),i=$t(Wt[e]*Gt[n]+Xt[e]*Wt[n]),o=$t(Gt[e]*qt[n]+qt[e]*Xt[n]),s=$t(Wt[e]*qt[n]+Xt[e]*Xt[n]);for(let e=0;e<16;e++)if(Gt[e]===r&&Wt[e]===i&&qt[e]===o&&Xt[e]===s){t.push(e);break}}}for(let e=0;e<16;e++){const t=new Vt;t.set(Gt[e],Wt[e],qt[e],Xt[e],0,0),Kt.push(t)}}();const Qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Gt[e],uY:e=>Wt[e],vX:e=>qt[e],vY:e=>Xt[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>Yt[e][t],sub:(e,t)=>Yt[e][Qt.inv(t)],rotate180:e=>4^e,isVertical:e=>2===(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?Qt.S:Qt.N:2*Math.abs(t)<=Math.abs(e)?e>0?Qt.E:Qt.W:t>0?e>0?Qt.SE:Qt.SW:e>0?Qt.NE:Qt.NW,matrixAppendRotationInv:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=Kt[Qt.inv(t)];i.tx=n,i.ty=r,e.append(i)}};class Zt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._x=n,this._y=r,this.cb=e,this.scope=t}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cb,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scope;return new Zt(e,t,this._x,this._y)}set(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Zt.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=".concat(this.x," y=").concat(this.y," scope=").concat(this.scope,"]")};const Jt=class{constructor(){this.worldTransform=new Vt,this.localTransform=new Vt,this.position=new Zt(this.onChange,this,0,0),this.scale=new Zt(this.onChange,this,1,1),this.pivot=new Zt(this.onChange,this,0,0),this.skew=new Zt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};Jt.IDENTITY=new Jt;let en=Jt;en.prototype.toString=function(){return"[@pixi/math:Transform position=(".concat(this.position.x,", ").concat(this.position.y,") rotation=").concat(this.rotation," scale=(").concat(this.scale.x,", ").concat(this.scale.y,") skew=(").concat(this.skew.x,", ").concat(this.skew.y,") ]")};const tn=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>'\n            if(uv["'.concat(e,'"] !== ud["').concat(e,'"].value)\n            {\n                ud["').concat(e,'"].value = uv["').concat(e,'"]\n                gl.uniform1f(ud["').concat(e,'"].location, uv["').concat(e,'"])\n            }\n            ')},{test:(e,t)=>("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray&&(null==t||void 0!==t.castToBaseTexture),code:e=>'t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'.concat(e,'"], t);\n\n            if(ud["').concat(e,'"].value !== t)\n            {\n                ud["').concat(e,'"].value = t;\n                gl.uniform1i(ud["').concat(e,'"].location, t);\n; // eslint-disable-line max-len\n            }')},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>'\n            gl.uniformMatrix3fv(ud["'.concat(e,'"].location, false, uv["').concat(e,'"].toArray(true));\n            '),codeUbo:e=>"\n                var ".concat(e,"_matrix = uv.").concat(e,".toArray(true);\n\n                data[offset] = ").concat(e,"_matrix[0];\n                data[offset+1] = ").concat(e,"_matrix[1];\n                data[offset+2] = ").concat(e,"_matrix[2];\n        \n                data[offset + 4] = ").concat(e,"_matrix[3];\n                data[offset + 5] = ").concat(e,"_matrix[4];\n                data[offset + 6] = ").concat(e,"_matrix[5];\n        \n                data[offset + 8] = ").concat(e,"_matrix[6];\n                data[offset + 9] = ").concat(e,"_matrix[7];\n                data[offset + 10] = ").concat(e,"_matrix[8];\n            ")},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["').concat(e,'"].location, v.x, v.y);\n                }'),codeUbo:e=>"\n                v = uv.".concat(e,";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            ")},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["').concat(e,'"].location, v[0], v[1]);\n                }\n            ')},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.x, v.y, v.width, v.height)\n                }'),codeUbo:e=>"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                ")},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.red, v.green, v.blue, v.alpha)\n                }'),codeUbo:e=>"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                ")},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["').concat(e,'"].location, v.red, v.green, v.blue)\n                }'),codeUbo:e=>"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                ")},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["').concat(e,'"].location, v[0], v[1], v[2], v[3])\n                }')}],nn={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},rn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};const on={};let sn,an=on;function ln(){if(!sn){sn=R.MEDIUM;const e=function(){var e;if(an===on||null!==(e=an)&&void 0!==e&&e.isContextLost()){const e=L.ADAPTER.createCanvas();let t;L.PREFER_ENV>=p.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),an=t}return an}();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(sn=t.precision?R.HIGH:R.MEDIUM)}}return sn}const cn={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function un(e){return cn[e]}let hn=null;const dn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fn(e,t){if(!hn){const t=Object.keys(dn);hn={};for(let n=0;n<t.length;++n){const r=t[n];hn[e[r]]=dn[r]}}return hn[t]}function pn(e,t,n){if("precision"!==e.substring(0,9)){let r=t;return t===R.HIGH&&n!==R.HIGH&&(r=R.MEDIUM),"precision ".concat(r," float;\n").concat(e)}return n!==R.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let mn=0;const gn={},vn=class e{constructor(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pixi-shader",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.extra={},this.id=mn++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),gn[r]?(gn[r]++,r+="-".concat(gn[r])):gn[r]=1,this.vertexSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.vertexSrc),this.fragmentSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.fragmentSrc),this.vertexSrc=pn(this.vertexSrc,e.defaultVertexPrecision,R.HIGH),this.fragmentSrc=pn(this.fragmentSrc,e.defaultFragmentPrecision,ln())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,n,r){const i=t+n;let o=Ze[i];return o||(Ze[i]=o=new e(t,n,r)),o}};vn.defaultVertexPrecision=R.HIGH,vn.defaultFragmentPrecision=J.apple.device?R.HIGH:R.MEDIUM;let yn=vn,bn=0;class xn{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=bn++,this.static=!!t,this.ubo=!!n,e instanceof Et?(this.buffer=e,this.buffer.type=O.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Et(new Float32Array(1)),this.buffer.type=O.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new xn(t,n)}static from(e,t,n){return new xn(e,t,n)}static uboFrom(e,t){return new xn(e,null===t||void 0===t||t,!0)}}class _n{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof xn?t:new xn(t):new xn({}),this.disposeRunner=new gt("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const r=t.uniforms[n];if(!0===r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const r=yn.from(e,t);return new _n(r,n)}}class Sn{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=xn.from({uSamplers:t},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,"".concat(e)),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new yn(this.vertexSrc,n)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Vt,default:this.defaultGroupCache[e]};return new _n(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < ".concat(n,".5)")),t+="\n{",t+="\n\tcolor = texture2D(uSamplers[".concat(n,"], vTextureCoord);"),t+="\n}";return t+="\n",t+="\n",t}}class wn{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class En{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const An=class e extends En{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Mt,this.vertexSize=6,this.state=ft.for2d(),this.size=4*e.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){var e;return this._defaultMaxTextures=null!==(e=this._defaultMaxTextures)&&void 0!==e?e:function(e){let t=!0;const n=L.ADAPTER.getNavigator();if(J.tablet||J.phone){if(J.apple.device){const e=n.userAgent.match(/OS (\d+)_(\d+)?/);e&&parseInt(e[1],10)<11&&(t=!1)}if(J.android.device){const e=n.userAgent.match(/Android\s([0-9.]*)/);e&&parseInt(e[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){var e;return this._canUploadSameBuffer=null!==(e=this._canUploadSameBuffer)&&void 0!==e?e:!J.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return re("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator(){let{vertex:t=e.defaultVertexSrc,fragment:n=e.defaultFragmentTemplate}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.shaderGenerator=new Sn(t,n)}contextChange(){const t=this.renderer.gl;L.PREFER_ENV===p.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);for(;;){const r=ht.replace(/%forloop%/gi,dt(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:n}=e,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new St);for(;n.length<i;)n.push(new wn);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:n}=this,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count;let a=++_t._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(o,n);for(let e=0;e<this._bufferSize;++e){const h=t[e];t[e]=null,h._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,o,a,n),this.buildDrawCalls(c,u,e),u=e,c=r[++l],++a),h._batchEnabled=a,h.touched=s,c.elements[c.count++]=h)}c.count>0&&(i.boundArray(c,o,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let e=0;e<o.length;e++)o[e]=null;_t._globalBatch=a}buildDrawCalls(t,n,r){const{_bufferedElements:i,_attributeBuffer:o,_indexBuffer:s,vertexSize:a}=this,l=e._drawCallPool;let c=this._dcIndex,u=this._aIndex,h=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=t;for(let e=n;e<r;++e){const r=i[e],f=r._texture.baseTexture,p=ze[f.alphaMode?1:0][r.blendMode];i[e]=null,n<e&&d.blend!==p&&(d.size=h-d.start,n=e,d=l[++c],d.texArray=t,d.start=h),this.packInterleavedGeometry(r,o,s,u,h),u+=r.vertexData.length/2*a,h+=r.indices.length,d.blend=p}n<r&&(d.size=h-d.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:n,_indexBuffer:r}=this;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:n,state:r}=this.renderer,i=e._drawCallPool;let o=null;for(let e=0;e<t;e++){const{texArray:t,type:s,size:a,start:l,blend:c}=i[e];o!==t&&(o=t,this.bindAndClearTexArray(t)),this.state.blendMode=c,r.set(this.state),n.drawElements(s,a,n.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Ve(Math.ceil(e/8)),n=We(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new ut(r*this.vertexSize*4)),i}getIndexBuffer(e){const t=Ve(Math.ceil(e/12)),n=We(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}packInterleavedGeometry(e,t,n,r,i){const{uint32View:o,float32View:s}=t,a=r/this.vertexSize,l=e.uvs,c=e.indices,u=e.vertexData,h=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=Ue.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0);for(let p=0;p<u.length;p+=2)s[r++]=u[p],s[r++]=u[p+1],s[r++]=l[p],s[r++]=l[p+1],o[r++]=f,s[r++]=h;for(let p=0;p<c.length;p++)n[i++]=a+c[p]}};An.defaultBatchSize=4096,An.extension={name:"batch",type:st.RendererPlugin},An._drawCallPool=[],An._textureArrayPool=[];let Tn=An;ct.add(Tn);const Cn=class e extends _n{constructor(t,n,r){super(yn.from(t||e.defaultVertexSrc,n||e.defaultFragmentSrc),r),this.padding=0,this.resolution=e.defaultResolution,this.multisample=e.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ft}apply(e,t,n,r,i){e.applyFilter(this,t,n,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};Cn.defaultResolution=1,Cn.defaultMultisample=M.NONE;let Pn=Cn;class Rn{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Ue(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:r}=e,i=null!==n&&void 0!==n?n:t;void 0!==i&&(this.color=i),this.alpha=r}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Rn.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Rn.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"background"},ct.add(Rn);class In{constructor(e){this.renderer=e,this.emptyRenderer=new En(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,t,n,r){const{elements:i,ids:o,count:s}=e;let a=0;for(let l=0;l<s;l++){const e=i[l],s=e._batchLocation;if(s>=0&&s<r&&t[s]===e)o[l]=s;else for(;a<r;){const r=t[a];if(!r||r._batchEnabled!==n||r._batchLocation!==a){o[l]=a,e._batchLocation=a,t[a]=e;break}a++}}}destroy(){this.renderer=null}}In.extension={type:st.RendererSystem,name:"batch"},ct.add(In);let Mn=0;class On{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Mn++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Mn++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(L.PREFER_ENV>=p.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}On.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},On.extension={type:st.RendererSystem,name:"context"},ct.add(On);class kn{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new gt("disposeFramebuffer"),this.multisample=M.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.colorTextures[e]=t||new _t(null,{scaleMode:w.NEAREST,resolution:1,mipmap:A.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new _t(null,{scaleMode:w.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:A.OFF,format:b.DEPTH_COMPONENT,type:_.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Ln extends _t{constructor(){var e,t,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof r){r={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}r.width=null!==(e=r.width)&&void 0!==e?e:100,r.height=null!==(t=r.height)&&void 0!==t?t:100,null!==(n=r.multisample)&&void 0!==n||(r.multisample=M.NONE),super(null,r),this.mipmap=A.OFF,this.valid=!0,this._clear=new Ue([0,0,0,0]),this.framebuffer=new kn(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=r.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Dn extends vt{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){void 0!==n||t.startsWith("data:")?!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous"):e.crossOrigin=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis.location;if(e.startsWith("data:"))return"";t=t||globalThis.location;const n=new URL(e,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}(t)}upload(e,t,n,r){const i=e.gl,o=t.realWidth,s=t.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===T.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==o||n.height!==s?(n.width=o,n.height=s,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class Nn extends Dn{constructor(e,t){var n;if(t=t||{},"string"==typeof e){const n=new Image;Dn.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(null!==(n=t.createBitmap)&&void 0!==n?n:L.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(((e,t)=>{const n=this.source;this.url=n.src;const r=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?r():(n.onload=r,n.onerror=e=>{t(e),this.onError.emit(e)})}))),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then((e=>e.blob())).then((n=>t(n,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===T.UNPACK?"premultiply":"none"}))).then((e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(e,t,n){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let e=!0;const r=t._glTextures;for(const i in r){const o=r[i];if(o!==n&&o.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class Bn{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const r=t.width,i=t.height;if(n){const t=e.width/2/r,o=e.height/2/i,s=e.x/r+t,a=e.y/i+o;n=Qt.add(n,Qt.NW),this.x0=s+t*Qt.uX(n),this.y0=a+o*Qt.uY(n),n=Qt.add(n,2),this.x1=s+t*Qt.uX(n),this.y1=a+o*Qt.uY(n),n=Qt.add(n,2),this.x2=s+t*Qt.uX(n),this.y2=a+o*Qt.uY(n),n=Qt.add(n,2),this.x3=s+t*Qt.uX(n),this.y3=a+o*Qt.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Bn.prototype.toString=function(){return"[@pixi/core:TextureUvs x0=".concat(this.x0," y0=").concat(this.y0," x1=").concat(this.x1," y1=").concat(this.y1," x2=").concat(this.x2," y2=").concat(this.y2," x3=").concat(this.x3," y3=").concat(this.y3,"]")};const Fn=new Bn;function Un(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class zn extends ee{constructor(e,t,n,r,i,o,s){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Ft(0,0,1,1)),e instanceof zn&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=r,this.valid=!1,this.destroyed=!1,this._uvs=Fn,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Nt(o.x,o.y):new Nt(0,0),this.defaultBorders=s,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;null!==e&&void 0!==e&&e.url&&Je[e.url]&&zn.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,zn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var e;const t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new zn(this.baseTexture,!this.noFrame&&t,n,null===(e=this.trim)||void 0===e?void 0:e.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===Fn&&(this._uvs=new Bn),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L.STRICT_TEXTURE_CACHE;const r="string"==typeof e;let i=null;if(r)i=e;else if(e instanceof _t){if(!e.cacheId){const n=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId="".concat(n,"-").concat(Ke()),_t.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const n=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(n,"_").concat(Ke())}i=e._pixiId}let o=Je[i];if(r&&n&&!o)throw new Error('The cacheId "'.concat(i,'" does not exist in TextureCache.'));return o||e instanceof _t?!o&&e instanceof _t&&(o=new zn(e),zn.addToCache(o,i)):(t.resolution||(t.resolution=ot(e)),o=new zn(new _t(e,t)),o.baseTexture.cacheId=i,_t.addToCache(o.baseTexture,i),zn.addToCache(o,i)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},null===t||void 0===t?void 0:t.resourceOptions),r=zn.from(e,Object.assign({resourceOptions:n},t),!1),i=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):i.load().then((()=>Promise.resolve(r)))}static fromBuffer(e,t,n,r){return new zn(_t.fromBuffer(e,t,n,r))}static fromLoader(e,t,n,r){const i=new _t(e,Object.assign({scaleMode:_t.defaultOptions.scaleMode,resolution:ot(t)},r)),{resource:o}=i;o instanceof Nn&&(o.url=t);const s=new zn(i);return n||(n=t),_t.addToCache(s.baseTexture,n),zn.addToCache(s,n),n!==t&&(_t.addToCache(s.baseTexture,t),zn.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise((e=>{s.baseTexture.once("loaded",(()=>e(s)))}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Je[t]&&Je[t]!==e&&console.warn("Texture added to the cache with an id [".concat(t,"] that already had an entry")),Je[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Je[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Je[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Je[e.textureCacheIds[t]]===e&&delete Je[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:r,height:i}=e,o=t+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s){const e=o&&s?"and":"or",a="X: ".concat(t," + ").concat(r," = ").concat(t+r," > ").concat(this.baseTexture.width),l="Y: ".concat(n," + ").concat(i," = ").concat(n+i," > ").concat(this.baseTexture.height);throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: ".concat(a," ").concat(e," ").concat(l))}this.valid=r&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return zn._EMPTY||(zn._EMPTY=new zn(new _t),Un(zn._EMPTY),Un(zn._EMPTY.baseTexture)),zn._EMPTY}static get WHITE(){if(!zn._WHITE){const e=L.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),zn._WHITE=new zn(_t.from(e)),Un(zn._WHITE),Un(zn._WHITE.baseTexture)}return zn._WHITE}}class Hn extends zn{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.baseTexture.resolution,i=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Hn(new Ln(e))}}class jn{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M.NONE;const r=new Ln(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Hn(r)}getOptimalTexture(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M.NONE;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?n=i>1?-i:-1:(n=((65535&(e=Ve(e)))<<16|65535&(t=Ve(t)))>>>0,i>1&&(n+=4294967296*i)),this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=n,o.setResolution(r),o}getFilterTexture(e,t,n){const r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||M.NONE);return r.filterFrame=e.filterFrame,r}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}jn.SCREEN_KEY=-1;class Vn extends It{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Gn extends It{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Et(this.vertices),this.uvBuffer=new Et(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Wn{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=M.NONE,this.sourceFrame=new Ft,this.destinationFrame=new Ft,this.bindingSourceFrame=new Ft,this.bindingDestinationFrame=new Ft,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const qn=[new Nt,new Nt,new Nt,new Nt],Xn=new Vt;class Yn{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new jn,this.statePool=[],this.quad=new Vn,this.quadUv=new Gn,this.tempRect=new Ft,this.activeState={},this.globalUniforms=new xn({outputFrame:new Ft,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){var n,r;const i=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new Wn,a=i.renderTexture;let l,c;if(a.current){const e=a.current;l=e.resolution,c=e.multisample}else l=i.resolution,c=i.multisample;let u=t[0].resolution||l,h=null!==(n=t[0].multisample)&&void 0!==n?n:c,d=t[0].padding,f=t[0].autoFit,p=null===(r=t[0].legacy)||void 0===r||r;for(let b=1;b<t.length;b++){var m,g;const e=t[b];u=Math.min(u,e.resolution||l),h=Math.min(h,null!==(m=e.multisample)&&void 0!==m?m:c),d=this.useMaxPadding?Math.max(d,e.padding):d+e.padding,f=f&&e.autoFit,p=p||null===(g=e.legacy)||void 0===g||g}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=u,s.multisample=h,s.legacy=p,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(d);const v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Xn.copyFrom(i.projection.transform).invert(),v),f?(s.sourceFrame.fit(v),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(v)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,y),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;const i=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*t.resolution),o[1]=Math.round(i[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=t.sourceFrame.width*i[2]-.5*o[2],s[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){const e=r.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const a=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,a.renderTexture,C.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,r=this.getOptimalFilterTexture(e.width,e.height,t.resolution);r.filterFrame=e.filterFrame;let i=0;for(i=0;i<n.length-1;++i){1===i&&t.multisample>1&&(r=this.getOptimalFilterTexture(e.width,e.height,t.resolution),r.filterFrame=e.filterFrame),n[i].apply(this,e,r,C.CLEAR,t);const o=e;e=r,r=o}n[i].apply(this,e,a.renderTexture,C.BLEND,t),i>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(r)}t.clear(),this.statePool.push(t)}bindAndClear(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.CLEAR;const{renderTexture:n,state:r}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,null!==e&&void 0!==e&&e.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,n.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&r.stateId||this.forceClear;(t===C.CLEAR||t===C.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,r){const i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(y.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(y.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:r}=this.activeState,{orig:i}=t._texture,o=e.set(r.width,0,0,r.height,n.x,n.y),s=t.worldTransform.copyTo(Vt.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M.NONE;return this.texturePool.getOptimalTexture(e,t,n,r)}getFilterTexture(e,t,n){if("number"==typeof e){const n=e;e=t,t=n}e=e||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||M.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=qn[0],r=qn[1],i=qn[2],o=qn[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(o,o);const s=Math.min(n.x,r.x,i.x,o.x),a=Math.min(n.y,r.y,i.y,o.y),l=Math.max(n.x,r.x,i.x,o.x),c=Math.max(n.y,r.y,i.y,o.y);t.x=s,t.y=a,t.width=l-s,t.height=c-a}roundFrame(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){const{a:e,b:t,c:n,d:r}=i;if((Math.abs(t)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4))return}(i=i?Xn.copyFrom(i):Xn.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}Yn.extension={type:st.RendererSystem,name:"filter"},ct.add(Yn);class Kn{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=M.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const $n=new Ft;class Qn{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new kn(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ft,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;L.PREFER_ENV===p.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{gl:r}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const n=e.colorTextures[t];this.renderer.texture.unbind(n.parentTextureArray||n)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>n,r=t.height>>n,i=e/t.width;this.setViewport(t.x*i,t.y*i,e,r)}else{const t=e.width>>n,r=e.height>>n;this.setViewport(0,0,t,r)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,r){const i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),(i.width!==n||i.height!==r||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:g.COLOR|g.DEPTH;const{gl:o}=this;o.clearColor(e,t,n,r),o.clear(i)}initFramebuffer(e){const{gl:t}=this,n=new Kn(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){let r;t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),r=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,r,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,r,e.width,e.height)}const r=e.colorTextures;let i=r.length;t.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const i=r[o],s=i.parentTextureArray||i;this.renderer.texture.bind(s,0),0===o&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer():r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const s=[];for(let a=0;a<o;a++){const o=i[a],l=o.parentTextureArray||o;this.renderer.texture.bind(l,0),0===a&&r.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+a,o.target,l._glTextures[this.CONTEXT_UID].texture,t),s.push(n.COLOR_ATTACHMENT0+a))}if(s.length>1&&n.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){const r=e.depthTexture;this.renderer.texture.bind(r,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,t)}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null);else{let t,i;r.stencil=r.stencil||n.createRenderbuffer(),1===this.renderer.context.webGLVersion?(t=n.DEPTH_STENCIL_ATTACHMENT,i=n.DEPTH_STENCIL):e.depth&&e.stencil?(t=n.DEPTH_STENCIL_ATTACHMENT,i=n.DEPTH24_STENCIL8):e.depth?(t=n.DEPTH_ATTACHMENT,i=n.DEPTH_COMPONENT24):(t=n.STENCIL_ATTACHMENT,i=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,i,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,i,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,t,n.RENDERBUFFER,r.stencil)}}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=M.NONE;if(e<=1||null===t)return n;for(let r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=M.NONE),n}blit(e,t,n){const{current:r,renderer:i,gl:o,CONTEXT_UID:s}=this;if(2!==i.context.webGLVersion||!r)return;const a=r.glFramebuffers[s];if(!a)return;if(!e){if(!a.msaaBuffer)return;const t=r.colorTextures[0];if(!t)return;a.blitFramebuffer||(a.blitFramebuffer=new kn(r.width,r.height),a.blitFramebuffer.addColorTexture(0,t)),(e=a.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||((t=$n).width=r.width,t.height=r.height),n||(n=t);const l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,r=e.height,i=this.gl,o=t.stencil=i.createRenderbuffer();let s,a;i.bindRenderbuffer(i.RENDERBUFFER,o),1===this.renderer.context.webGLVersion?(s=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH_STENCIL):e.depth?(s=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH24_STENCIL8):(s=i.STENCIL_ATTACHMENT,a=i.STENCIL_INDEX8),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,a,n,r):i.renderbufferStorage(i.RENDERBUFFER,a,n,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,s,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ft}destroy(){this.renderer=null}}Qn.extension={type:st.RendererSystem,name:"framebuffer"},ct.add(Qn);const Zn={5126:4,5123:2,5121:1};class Jn{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;L.PREFER_ENV===p.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,n)=>t.vertexAttribDivisorANGLE(e,n),e.drawElementsInstanced=(e,n,r,i,o)=>t.drawElementsInstancedANGLE(e,n,r,i,o),e.drawArraysInstanced=(e,n,r,i)=>t.drawArraysInstancedANGLE(e,n,r,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);const o=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const r=e.buffers[n];t.update(r)}}checkCompatibility(e,t){const n=e.attributes,r=t.attributeData;for(const i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'.concat(i,'" attribute'))}getSignature(e,t){const n=e.attributes,r=t.attributeData,i=["g",e.id];for(const o in n)r[o]&&i.push(o,r[o].location);return i.join("-")}initGeometryVao(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=t.program;s.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);const a=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID];let c=l[a];if(c)return l[s.id]=c,c;const u=e.buffers,h=e.attributes,d={},f={};for(const p in u)d[p]=0,f[p]=0;for(const p in h)!h[p].size&&s.attributeData[p]?h[p].size=s.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '".concat(p,"' size cannot be determined (likely the bound shader does not have the attribute)")),d[h[p].buffer]+=h[p].size*Zn[h[p].type];for(const p in h){const e=h[p],t=e.size;void 0===e.stride&&(d[e.buffer]===t*Zn[e.type]?e.stride=0:e.stride=d[e.buffer]),void 0===e.start&&(e.start=f[e.buffer],f[e.buffer]+=t*Zn[e.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let p=0;p<u.length;p++){const e=u[p];o.bind(e),n&&e._glBuffers[i].refCount++}return this.activateVao(e,s),l[s.id]=c,l[a]=c,r.bindVertexArray(null),o.unbind(O.ARRAY_BUFFER),c}disposeGeometry(e,t){var n;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=e.buffers,s=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(s)for(let e=0;e<o.length;e++){const n=o[e]._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0===n.refCount&&!t&&s.dispose(o[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),i.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let a=null;for(const l in s){const e=s[l],c=o[e.buffer],u=c._glBuffers[r];if(t.attributeData[l]){a!==u&&(i.bind(c),a=u);const r=t.attributeData[l].location;if(n.enableVertexAttribArray(r),n.vertexAttribPointer(r,e.size,e.type||n.FLOAT,e.normalized,e.stride,e.start),e.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(r,e.divisor)}}}}draw(e,t,n,r){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,a,(n||0)*s,r||1):i.drawElements(e,t||o.indexBuffer.data.length,a,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,t||o.getSize(),r||1):i.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Jn.extension={type:st.RendererSystem,name:"geometry"},ct.add(Jn);const er=new Vt;class tr{constructor(e,t){this._texture=e,this.mapCoord=new Vt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const n=this.mapCoord;for(let r=0;r<e.length;r+=2){const i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const r=t.orig,i=t.trim;i&&(er.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(er));const o=t.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(t._frame.x+a+l)/o.width,s[1]=(t._frame.y+a+l)/o.height,s[2]=(t._frame.x+t._frame.width-a+l)/o.width,s[3]=(t._frame.y+t._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0}}class nr extends Pn{constructor(e,t,n){let r=null;"string"!=typeof e&&void 0===t&&void 0===n&&(r=e,e=void 0,t=void 0,n=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n),this.maskSprite=r,this.maskMatrix=new Vt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,r){const i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new tr(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))}}class rr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.type=I.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Pn.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=I.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class ir{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const e=this.maskDataPool.pop()||new rr;e.pooled=!0,e.maskObject=t,n=e}const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(r),n._colorMask=r?r._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==I.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case I.SCISSOR:this.renderer.scissor.push(n);break;case I.STENCIL:this.renderer.stencil.push(n);break;case I.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case I.COLOR:this.pushColorMask(n)}n.type===I.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case I.SCISSOR:this.renderer.scissor.pop(t);break;case I.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case I.SPRITE:this.popSpriteMask(t);break;case I.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===I.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=I.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=I.SCISSOR:e.type=I.STENCIL:e.type=I.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new nr])),r[0].resolution=e.resolution,r[0].multisample=e.multisample,r[0].maskSprite=t;const i=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}destroy(){this.renderer=null}}ir.extension={type:st.RendererSystem,name:"mask"},ct.add(ir);class or{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const sr=new Vt,ar=[],lr=class e extends or{constructor(e){super(e),this.glConst=L.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){var t;if(e._scissorRectLocal)return;const n=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,o=i.renderTexture,s=r.getBounds(!0,null!==(t=ar.pop())&&void 0!==t?t:new Ft);this.roundFrameToPixels(s,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n&&s.fit(n),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:r,d:i}=e;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:n}=t;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?sr.copyFrom(o):sr.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&ar.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};lr.extension={type:st.RendererSystem,name:"scissor"};let cr=lr;ct.add(cr);class ur extends or{constructor(e){super(e),this.glConst=L.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;0!==i&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,n.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;0!==r&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(n._colorMask=r,t.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}ur.extension={type:st.RendererSystem,name:"stencil"},ct.add(ur);class hr{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(re("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(re("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(re("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}hr.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_plugin"},ct.add(hr);class dr{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Vt,this.transform=null}update(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,t,n,r){const i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d}setTransform(e){}destroy(){this.renderer=null}}dr.extension={type:st.RendererSystem,name:"projection"},ct.add(dr);const fr=new en,pr=new Ft;class mr{constructor(e){this.renderer=e,this._tempMatrix=new Vt}generateTexture(e,t){var n;const{region:r,...i}=t||{},o=(null===r||void 0===r?void 0:r.copyTo(pr))||e.getLocalBounds(pr,!0),s=i.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/s),o.height=Math.max(o.height,1/s),i.width=o.width,i.height=o.height,i.resolution=s,null!==(n=i.multisample)&&void 0!==n||(i.multisample=this.renderer.multisample);const a=Hn.create(i);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const l=e.transform;return e.transform=fr,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}mr.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"textureGenerator"},ct.add(mr);const gr=new Ft,vr=new Ft;class yr{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ft,this.destinationFrame=new Ft,this.viewportFrame=new Ft}contextChange(){var e;const t=null===(e=this.renderer)||void 0===e?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const r=this.renderer;let i,o,s;this.current=e,e?(i=e.baseTexture,s=i.resolution,t||(gr.width=e.frame.width,gr.height=e.frame.height,t=gr),n||(vr.x=e.frame.x,vr.y=e.frame.y,vr.width=t.width,vr.height=t.height,n=vr),o=i.framebuffer):(s=r.resolution,t||(gr.width=r._view.screen.width,gr.height=r._view.screen.height,t=gr),n||(n=gr,n.width=t.width,n.height=t.height));const a=this.viewportFrame;a.x=n.x*s,a.y=n.y*s,a.width=n.width*s,a.height=n.height*s,e||(a.y=r.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(o,a),this.renderer.projection.update(n,t,s,!o),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=Ue.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==o.width||i.height!==o.height;if(s){let{x:e,y:t,width:n,height:r}=this.viewportFrame;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,n,r)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,t),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}yr.extension={type:st.RendererSystem,name:"renderTexture"},ct.add(yr);class br{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function xr(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function _r(e){const t=new Array(e);for(let n=0;n<t.length;n++)t[n]=!1;return t}function Sr(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return _r(2*t);case"bvec3":return _r(3*t);case"bvec4":return _r(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function wr(e,t){const n=e.getShaderSource(t).split("\n").map(((e,t)=>"".concat(t,": ").concat(e))),r=e.getShaderInfoLog(t),i=r.split("\n"),o={},s=i.map((e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((e=>!(!e||o[e])&&(o[e]=!0,!0))),a=[""];s.forEach((e=>{n[e-1]="%c".concat(n[e-1],"%c"),a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=n.join("\n");a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Er(e,t){var n;const r=xr(e,e.VERTEX_SHADER,t.vertexSrc),i=xr(e,e.FRAGMENT_SHADER,t.fragmentSrc),o=e.createProgram();e.attachShader(o,r),e.attachShader(o,i);const s=null===(n=t.extra)||void 0===n?void 0:n.transformFeedbackVaryings;if(s&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(o,s.names,"separate"===s.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||wr(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||wr(e,r),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,o,r,i),t.attributeData=function(e,t){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=t.getActiveAttrib(e,i);if(r.name.startsWith("gl_"))continue;const o=fn(t,r.type),s={type:o,name:r.name,size:un(o),location:t.getAttribLocation(e,r.name)};n[r.name]=s}return n}(o,e),t.uniformData=function(e,t){const n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const r=t.getActiveUniform(e,i),o=r.name.replace(/\[.*?\]$/,""),s=!!r.name.match(/\[.*?\]$/),a=fn(t,r.type);n[o]={name:o,index:i,type:a,size:r.size,isArray:s,value:Sr(a,r.size)}}return n}(o,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const n=Object.keys(t.attributeData);n.sort(((e,t)=>e>t?1:-1));for(let r=0;r<n.length;r++)t.attributeData[n[r]].location=r,e.bindAttribLocation(o,r,n[r]);e.linkProgram(o)}e.deleteShader(r),e.deleteShader(i);const a={};for(const l in t.uniformData){const n=t.uniformData[l];a[l]={location:e.getUniformLocation(o,l),value:Sr(n.type,n.size)}}return new br(o,a)}function Ar(e,t,n,r,i){n.buffer.update(i)}const Tr={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Cr={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Pr(e,t){if(!e.autoManage)return{size:0,syncFunc:Ar};const n=function(e,t){const n=[];for(const r in e)t[r]&&n.push(t[r]);return n.sort(((e,t)=>e.index-t.index)),n}(e.uniforms,t),{uboElements:r,size:i}=function(e){const t=e.map((e=>({data:e,offset:0,dataLen:0,dirty:0})));let n=0,r=0,i=0;for(let o=0;o<t.length;o++){const e=t[o];if(n=Cr[e.data.type],e.data.size>1&&(n=Math.max(n,16)*e.data.size),e.dataLen=n,r%n!==0&&r<16){const e=r%n%16;r+=e,i+=e}r+n>16?(i=16*Math.ceil(i/16),e.offset=i,i+=n,r=n):(e.offset=i,r+=n,i+=n)}return i=16*Math.ceil(i/16),{uboElements:t,size:i}}(n),o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let s=0;s<r.length;s++){const t=r[s],n=e.uniforms[t.data.name],i=t.data.name;let a=!1;for(let e=0;e<tn.length;e++){const r=tn[e];if(r.codeUbo&&r.test(t.data,n)){o.push("offset = ".concat(t.offset/4,";"),tn[e].codeUbo(t.data.name,n)),a=!0;break}}if(!a)if(t.data.size>1){const e=un(t.data.type),n=Math.max(Cr[t.data.type]/16,1),r=e/n,s=(4-r%4)%4;o.push("\n                cv = ud.".concat(i,".value;\n                v = uv.").concat(i,";\n                offset = ").concat(t.offset/4,";\n\n                t = 0;\n\n                for(var i=0; i < ").concat(t.data.size*n,"; i++)\n                {\n                    for(var j = 0; j < ").concat(r,"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ").concat(s,";\n                }\n\n                "))}else{const e=Tr[t.data.type];o.push("\n                cv = ud.".concat(i,".value;\n                v = uv.").concat(i,";\n                offset = ").concat(t.offset/4,";\n                ").concat(e,";\n                "))}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}let Rr;let Ir=0;const Mr={textureCount:0,uboCount:0};class Or{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ir++}systemCheck(){if(!function(){if("boolean"==typeof Rr)return Rr;try{Rr=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{Rr=!1}return Rr}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Mr.textureCount=0,Mr.uboCount=0,this.syncUniformGroup(e.uniformGroup,Mr)),r}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in e.uniforms){const o=t[i];if(!o){var r;!0===(null===(r=e.uniforms[i])||void 0===r?void 0:r.group)&&(e.uniforms[i].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv.".concat(i,", '").concat(i,"');\n                    ")):n.push("\n                        renderer.shader.syncUniformGroup(uv.".concat(i,", syncData);\n                    ")));continue}const s=e.uniforms[i];let a=!1;for(let e=0;e<tn.length;e++)if(tn[e].test(o,s)){n.push(tn[e].code(i,s)),a=!0;break}if(!a){const e=(1!==o.size||o.isArray?rn:nn)[o.type].replace("location",'ud["'.concat(i,'"].location'));n.push('\n            cu = ud["'.concat(i,'"];\n            cv = cu.value;\n            v = uv["').concat(i,'"];\n            ').concat(e,";"))}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;const r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,Mr,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let s=this._uboCache[o];if(s||(s=this._uboCache[o]=Pr(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(s.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const r=e.uniforms,i=["".concat(n,"-")];for(const o in r)i.push(o),t[o]&&i.push(t[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,r=Er(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Or.extension={type:st.RendererSystem,name:"shader"},ct.add(Or);class kr{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log("PixiJS 7.3.3 - ".concat(t.rendererLogId," - https://pixijs.com")),t.resize(t.screen.width,t.screen.height)}destroy(){}}kr.defaultOptions={hello:!1},kr.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"startup"},ct.add(kr);const Lr=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=v.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new ft,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[v.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.ADD]=[e.ONE,e.ONE],t[v.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.NONE]=[0,0],t[v.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[v.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[v.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[v.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[v.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[v.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[v.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[v.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[v.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[v.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[v.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):!t&&-1!==n&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Lr.extension={type:st.RendererSystem,name:"state"};let Dr=Lr;ct.add(Dr);class Nr extends ee{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){var t;this.addRunners(...e.runners);const n=(null!==(t=e.priority)&&void 0!==t?t:[]).filter((t=>e.systems[t])),r=[...n,...Object.keys(e.systems).filter((e=>!n.includes(e)))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this.runners[e]=new gt(e)}))}addSystem(e,t){const n=new e(this);if(this[t])throw new Error('Whoops! The name "'.concat(t,'" is already in use'));this[t]=n,this._systemsHash[t]=n;for(const r in this.runners)this.runners[r].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach((r=>{const i=n.find((e=>this._systemsHash[e]===r));r[e.name](t[i])}))}destroy(){Object.values(this.runners).forEach((e=>{e.destroy()})),this._systemsHash={}}}const Br=class e{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==P.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let r=0;r<t.length;r++){const i=t[r];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){let e=0;for(let n=0;n<t.length;n++)null!==t[n]&&(t[e++]=t[n]);t.length=e}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}};Br.defaultMode=P.AUTO,Br.defaultMaxIdle=3600,Br.defaultCheckCountMax=600,Br.extension={type:st.RendererSystem,name:"textureGC"};let Fr=Br;ct.add(Fr);class Ur{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=_.UNSIGNED_BYTE,this.internalFormat=b.RGBA,this.samplerType=0}}class zr{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _t,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[_.UNSIGNED_BYTE]:{[b.RGBA]:e.RGBA8,[b.RGB]:e.RGB8,[b.RG]:e.RG8,[b.RED]:e.R8,[b.RGBA_INTEGER]:e.RGBA8UI,[b.RGB_INTEGER]:e.RGB8UI,[b.RG_INTEGER]:e.RG8UI,[b.RED_INTEGER]:e.R8UI,[b.ALPHA]:e.ALPHA,[b.LUMINANCE]:e.LUMINANCE,[b.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[_.BYTE]:{[b.RGBA]:e.RGBA8_SNORM,[b.RGB]:e.RGB8_SNORM,[b.RG]:e.RG8_SNORM,[b.RED]:e.R8_SNORM,[b.RGBA_INTEGER]:e.RGBA8I,[b.RGB_INTEGER]:e.RGB8I,[b.RG_INTEGER]:e.RG8I,[b.RED_INTEGER]:e.R8I},[_.UNSIGNED_SHORT]:{[b.RGBA_INTEGER]:e.RGBA16UI,[b.RGB_INTEGER]:e.RGB16UI,[b.RG_INTEGER]:e.RG16UI,[b.RED_INTEGER]:e.R16UI,[b.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[_.SHORT]:{[b.RGBA_INTEGER]:e.RGBA16I,[b.RGB_INTEGER]:e.RGB16I,[b.RG_INTEGER]:e.RG16I,[b.RED_INTEGER]:e.R16I},[_.UNSIGNED_INT]:{[b.RGBA_INTEGER]:e.RGBA32UI,[b.RGB_INTEGER]:e.RGB32UI,[b.RG_INTEGER]:e.RG32UI,[b.RED_INTEGER]:e.R32UI,[b.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[_.INT]:{[b.RGBA_INTEGER]:e.RGBA32I,[b.RGB_INTEGER]:e.RGB32I,[b.RG_INTEGER]:e.RG32I,[b.RED_INTEGER]:e.R32I},[_.FLOAT]:{[b.RGBA]:e.RGBA32F,[b.RGB]:e.RGB32F,[b.RG]:e.RG32F,[b.RED]:e.R32F,[b.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[_.HALF_FLOAT]:{[b.RGBA]:e.RGBA16F,[b.RGB]:e.RGB16F,[b.RG]:e.RG16F,[b.RED]:e.R16F},[_.UNSIGNED_SHORT_5_6_5]:{[b.RGB]:e.RGB565},[_.UNSIGNED_SHORT_4_4_4_4]:{[b.RGBA]:e.RGBA4},[_.UNSIGNED_SHORT_5_5_5_1]:{[b.RGBA]:e.RGB5_A1},[_.UNSIGNED_INT_2_10_10_10_REV]:{[b.RGBA]:e.RGB10_A2,[b.RGBA_INTEGER]:e.RGB10_A2UI},[_.UNSIGNED_INT_10F_11F_11F_REV]:{[b.RGB]:e.R11F_G11F_B10F},[_.UNSIGNED_INT_5_9_9_9_REV]:{[b.RGB]:e.RGB9_E5},[_.UNSIGNED_INT_24_8]:{[b.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[_.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[b.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[_.UNSIGNED_BYTE]:{[b.RGBA]:e.RGBA,[b.RGB]:e.RGB,[b.ALPHA]:e.ALPHA,[b.LUMINANCE]:e.LUMINANCE,[b.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[_.UNSIGNED_SHORT_5_6_5]:{[b.RGB]:e.RGB},[_.UNSIGNED_SHORT_4_4_4_4]:{[b.RGBA]:e.RGBA},[_.UNSIGNED_SHORT_5_5_5_1]:{[b.RGBA]:e.RGBA}},t}(e),this.samplerTypes=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[e.RGB]:S.FLOAT,[e.RGBA]:S.FLOAT,[e.ALPHA]:S.FLOAT,[e.LUMINANCE]:S.FLOAT,[e.LUMINANCE_ALPHA]:S.FLOAT,[e.R8]:S.FLOAT,[e.R8_SNORM]:S.FLOAT,[e.RG8]:S.FLOAT,[e.RG8_SNORM]:S.FLOAT,[e.RGB8]:S.FLOAT,[e.RGB8_SNORM]:S.FLOAT,[e.RGB565]:S.FLOAT,[e.RGBA4]:S.FLOAT,[e.RGB5_A1]:S.FLOAT,[e.RGBA8]:S.FLOAT,[e.RGBA8_SNORM]:S.FLOAT,[e.RGB10_A2]:S.FLOAT,[e.RGB10_A2UI]:S.FLOAT,[e.SRGB8]:S.FLOAT,[e.SRGB8_ALPHA8]:S.FLOAT,[e.R16F]:S.FLOAT,[e.RG16F]:S.FLOAT,[e.RGB16F]:S.FLOAT,[e.RGBA16F]:S.FLOAT,[e.R32F]:S.FLOAT,[e.RG32F]:S.FLOAT,[e.RGB32F]:S.FLOAT,[e.RGBA32F]:S.FLOAT,[e.R11F_G11F_B10F]:S.FLOAT,[e.RGB9_E5]:S.FLOAT,[e.R8I]:S.INT,[e.R8UI]:S.UINT,[e.R16I]:S.INT,[e.R16UI]:S.UINT,[e.R32I]:S.INT,[e.R32UI]:S.UINT,[e.RG8I]:S.INT,[e.RG8UI]:S.UINT,[e.RG16I]:S.INT,[e.RG16UI]:S.UINT,[e.RG32I]:S.INT,[e.RG32UI]:S.UINT,[e.RGB8I]:S.INT,[e.RGB8UI]:S.UINT,[e.RGB16I]:S.INT,[e.RGB16UI]:S.UINT,[e.RGB32I]:S.INT,[e.RGB32UI]:S.UINT,[e.RGBA8I]:S.INT,[e.RGBA8UI]:S.UINT,[e.RGBA16I]:S.INT,[e.RGBA16UI]:S.UINT,[e.RGBA32I]:S.INT,[e.RGBA32UI]:S.UINT,[e.DEPTH_COMPONENT16]:S.FLOAT,[e.DEPTH_COMPONENT24]:S.FLOAT,[e.DEPTH_COMPONENT32F]:S.FLOAT,[e.DEPTH_STENCIL]:S.FLOAT,[e.DEPTH24_STENCIL8]:S.FLOAT,[e.DEPTH32F_STENCIL8]:S.FLOAT}:{[e.RGB]:S.FLOAT,[e.RGBA]:S.FLOAT,[e.ALPHA]:S.FLOAT,[e.LUMINANCE]:S.FLOAT,[e.LUMINANCE_ALPHA]:S.FLOAT,[e.DEPTH_STENCIL]:S.FLOAT},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};const n=new Ur(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ur(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{gl:i}=this;if(null!==(n=e=null===(t=e)||void 0===t?void 0:t.castToBaseTexture())&&void 0!==n&&n.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const t=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,t.texture)),t.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)):t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<n.length;e++)n[e]===this.unknownTexture&&this.bind(null,e)}for(let r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:r}=this;if(n)for(let i=e-1;i>=0;--i){const e=t[i];e&&e._glTextures[r].samplerType!==S.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new Ur(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var n,r,i;t.internalFormat=null!==(n=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==n?n:e.format,t.samplerType=null!==(i=this.samplerTypes[t.internalFormat])&&void 0!==i?i:S.FLOAT,2===this.webGLVersion&&e.type===_.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var t;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),null!==(t=e.resource)&&void 0!==t&&t.upload(r,e,n))n.samplerType!==S.FLOAT&&(this.hasIntegerTextures=!0);else{const t=e.realWidth,i=e.realHeight,o=r.gl;(n.width!==t||n.height!==i||n.dirtyId<0)&&(n.width=t,n.height=i,o.texImage2D(e.target,0,n.internalFormat,t,i,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&qe(this.managedTextures,t,1)}}updateTextureStyle(e){var t;const n=e._glTextures[this.CONTEXT_UID];n&&(e.mipmap!==A.POW2&&2===this.webGLVersion||e.isPowerOfTwo?n.mipmap=e.mipmap>=1:n.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?n.wrapMode=e.wrapMode:n.wrapMode=E.CLAMP,null!==(t=e.resource)&&void 0!==t&&t.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==A.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===w.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===w.LINEAR){const r=Math.min(e.anisotropicLevel,n.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,r)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===w.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===w.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}zr.extension={type:st.RendererSystem,name:"texture"},ct.add(zr);class Hr{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:r}=this;t&&r.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:r}=this,i=t.createTransformFeedback();e._glTransformFeedbacks[r]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(let o=0;o<e.buffers.length;o++){const i=e.buffers[o];i&&(n.buffer.update(i),i._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,i._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<e.buffers.length;o++){const n=e.buffers[o];if(!n)continue;const r=n._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0===r.refCount&&!t&&i.dispose(n,t))}n&&(t||r.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Hr.extension={type:st.RendererSystem,name:"transformFeedback"},ct.add(Hr);class jr{constructor(e){this.renderer=e}init(e){this.screen=new Ft(0,0,e.width,e.height),this.element=e.view||L.ADAPTER.createCanvas(),this.resolution=e.resolution||L.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.element.style.width="".concat(n,"px"),this.element.style.height="".concat(r,"px")),this.renderer.emit("resize",n,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&null!==(t=this.element.parentNode)&&void 0!==t&&t.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}jr.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},jr.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_view"},ct.add(jr),L.PREFER_ENV=p.WEBGL2,L.STRICT_TEXTURE_CACHE=!1,L.RENDER_OPTIONS={...On.defaultOptions,...Rn.defaultOptions,...jr.defaultOptions,...kr.defaultOptions},Object.defineProperties(L,{WRAP_MODE:{get:()=>_t.defaultOptions.wrapMode,set(e){re("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),_t.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>_t.defaultOptions.scaleMode,set(e){re("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),_t.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>_t.defaultOptions.mipmap,set(e){re("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),_t.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>_t.defaultOptions.anisotropicLevel,set(e){re("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),_t.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(re("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Pn.defaultResolution),set(e){Pn.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(re("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Pn.defaultMultisample),set(e){Pn.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>Tn.defaultMaxTextures,set(e){re("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Tn.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>Tn.defaultBatchSize,set(e){re("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Tn.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>Tn.canUploadSameBuffer,set(e){re("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Tn.canUploadSameBuffer=e}},GC_MODE:{get:()=>Fr.defaultMode,set(e){re("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Fr.defaultMode=e}},GC_MAX_IDLE:{get:()=>Fr.defaultMaxIdle,set(e){re("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Fr.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>Fr.defaultCheckCountMax,set(e){re("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Fr.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>yn.defaultVertexPrecision,set(e){re("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),yn.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>yn.defaultFragmentPrecision,set(e){re("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),yn.defaultFragmentPrecision=e}}});var Vr=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Vr||{});class Gr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}match(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Wr=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Gr(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vr.NORMAL;return this._addListener(new Gr(e,t,n))}addOnce(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vr.NORMAL;return this._addListener(new Gr(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(){let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(n>this.lastTime){if(t=this.elapsedMS=n-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const e=n-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=n-e%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*e.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=n}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,n)/1e3,e.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};Wr.targetFPMS=.06;let qr=Wr;Object.defineProperties(L,{TARGET_FPMS:{get:()=>qr.targetFPMS,set(e){re("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),qr.targetFPMS=e}}});class Xr{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Vr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?qr.shared:new qr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Xr.extension=st.Application,ct.add(Xr);const Yr=[];ct.handleByList(st.Renderer,Yr);const Kr="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class $r{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=M.HIGH?this.multisample=M.HIGH:t>=M.MEDIUM?this.multisample=M.MEDIUM:t>=M.LOW?this.multisample=M.LOW:this.multisample=M.NONE}destroy(){}}$r.extension={type:st.RendererSystem,name:"_multisample"},ct.add($r);class Qr{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Zr{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:r}=this;if(this.boundBufferBases[t]!==e){const i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}}bindBufferRange(e,t,n){const{gl:r,CONTEXT_UID:i}=this;n=n||0;const o=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,256*n,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const n=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,n)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new Qr(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Zr.extension={type:st.RendererSystem,name:"buffer"},ct.add(Zr);class Jr{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let r,i,o,s;if(t&&(r=t.renderTexture,i=t.clear,o=t.transform,s=t.skipUpdateTransform),this.renderingToScreen=!r,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){var a;if(r||(this.lastObjectRendered=e),!s){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}n.renderTexture.bind(r),n.batch.currentRenderer.start(),(null!==(a=i)&&void 0!==a?a:n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),r&&(t.blit&&n.framebuffer.blit(),r.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Jr.extension={type:st.RendererSystem,name:"objectRenderer"},ct.add(Jr);const ei=class e extends Nr{constructor(t){super(),this.type=m.WEBGL,t=Object.assign({},L.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new xn({projectionMatrix:new Vt},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in t&&(re("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=e.__plugins,this.options=t,this.startup.run(this.options)}static test(e){return(null===e||void 0===e||!e.forceCanvas)&&(typeof le>"u"&&(le=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:L.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{var t;if(!L.ADAPTER.getWebGLRenderingContext())return!1;const n=L.ADAPTER.createCanvas();let r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const i=!(null===(t=r)||void 0===t||null===(t=t.getContextAttributes())||void 0===t||!t.stencil);if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,i}catch{return!1}}()),le)}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return"WebGL ".concat(this.context.webGLVersion)}get clearBeforeRender(){return re("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return re("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return re("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return re("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){re("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return re("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){re("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return re("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};ei.extension={type:st.Renderer,priority:1},ei.__plugins={},ei.__systems={};let ti=ei;ct.handleByMap(st.RendererPlugin,ti.__plugins),ct.handleByMap(st.RendererSystem,ti.__systems),ct.add(ti);class ni extends vt{constructor(e,t){const{width:n,height:r}=t||{};super(n,r),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const e=new _t;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof vt?this.addResourceAt(e[n],n):this.addResourceAt(mt(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map((e=>e.resource)).filter((e=>e)).map((e=>e.load()));return this._load=Promise.all(e).then((()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),this.update(),Promise.resolve(this)})),this._load}}const ri=class e extends ni{constructor(t,n){const{width:r,height:i,autoLoad:o,linkBaseTexture:s}=n||{};if(t&&t.length!==e.SIDES)throw new Error("Invalid length. Got ".concat(t.length,", expected 6"));super(6,{width:r,height:i});for(let a=0;a<e.SIDES;a++)this.items[a].target=x.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,n),!1!==o&&this.load()}bind(e){super.bind(e),e.target=x.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=x.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(t,n,r){const i=this.itemDirtyIds;for(let o=0;o<e.SIDES;o++){const e=this.items[o];(i[o]<e.dirtyId||r.dirtyId<n.dirtyId)&&(e.valid&&e.resource?(e.resource.upload(t,e,r),i[o]=e.dirtyId):i[o]<-1&&(t.gl.texImage2D(e.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===e.SIDES}};ri.SIDES=6;let ii=ri;class oi extends Dn{constructor(e,t){var n,r;let i,o,s;t=t||{},"string"==typeof e?(i=oi.EMPTY,o=e,s=!0):(i=e,o=null,s=!1),super(i),this.url=o,this.crossOrigin=null===(n=t.crossOrigin)||void 0===n||n,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.ownsImageBitmap=null!==(r=t.ownsImageBitmap)&&void 0!==r?r:s,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(e,t)=>{if(null!==this.url)try{const t=await L.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await t.blob();if(this.destroyed)return;const r=await createImageBitmap(n,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===T.UNPACK?"premultiply":"none"});if(this.destroyed)return void r.close();this.source=r,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}else e(this)}))),this._load}upload(e,t,n){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){var e;return oi._EMPTY=null!==(e=oi._EMPTY)&&void 0!==e?e:L.ADAPTER.createCanvas(0,0),oi._EMPTY}}const si=class e extends Dn{constructor(e,t){t=t||{},super(L.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.update(),t(this)},e.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg="data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(this.svg))))}this._loadSvg()}))),this._load}_loadSvg(){const e=new Image;Dn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=t*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*t,i=this._overrideHeight||this._overrideWidth/t*n),r=Math.round(r),i=Math.round(i);const o=this.source;o.width=r,o.height=i,o._pixiId="canvas_".concat(Ke()),o.getContext("2d").drawImage(e,0,0,t,n,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,n){return"svg"===n||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)}};si.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,si.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let ai=si;const li=class e extends Dn{constructor(t,n){if(n=n||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");!1!==n.autoLoad&&r.setAttribute("preload","auto"),!1!==n.playsinline&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),!0===n.muted&&(r.setAttribute("muted",""),r.muted=!0),!0===n.loop&&r.setAttribute("loop",""),!1!==n.autoPlay&&r.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];Dn.crossOrigin(r,i,n.crossorigin);for(let n=0;n<t.length;++n){const i=document.createElement("source");let{src:o,mime:s}=t[n];if(o=o||t[n],o.startsWith("data:"))s=o.slice(5,o.indexOf(";"));else if(!o.startsWith("blob:")){const t=o.split("?").shift().toLowerCase(),n=t.slice(t.lastIndexOf(".")+1);s=s||e.MIME_TYPES[n]||"video/".concat(n)}i.src=o,s&&(i.type=s),r.appendChild(i)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==n.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==n.autoLoad&&this.load()}update(){if(!this.destroyed){if(this._updateFPS){const e=qr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())})),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(qr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(n)}};li.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],li.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ci=li;pt.push(oi,Nn,class extends Dn{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},ci,ai,yt,ii,class extends ni{constructor(e,t){const{width:n,height:r}=t||{};let i,o;Array.isArray(e)?(i=e,o=e.length):o=e,super(o,{width:n,height:r}),i&&this.initFromArray(i,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=x.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:r,itemDirtyIds:i,items:o}=this,{gl:s}=e;n.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,t.format,n.type,null);for(let a=0;a<r;a++){const e=o[a];i[a]<e.dirtyId&&(i[a]=e.dirtyId,e.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,e.resource.width,e.resource.height,1,t.format,n.type,e.resource.source))}return!0}});class ui{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ft.EMPTY:((e=e||new Ft(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:r,c:i,d:o,tx:s,ty:a}=e,l=n*t.x+i*t.y+s,c=r*t.x+o*t.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],s=e[1];t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[2],s=e[3],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[4],s=e[5],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,o=e[6],s=e[7],t=o<t?o:t,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i}addFrame(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)}addFrameMatrix(e,t,n,r,i){const o=e.a,s=e.b,a=e.c,l=e.d,c=e.tx,u=e.ty;let h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=o*t+a*n+c,g=s*t+l*n+u;h=m<h?m:h,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=o*r+a*n+c,g=s*r+l*n+u,h=m<h?m:h,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=o*t+a*i+c,g=s*t+l*i+u,h=m<h?m:h,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=o*r+a*i+c,g=s*r+l*i+u,h=m<h?m:h,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p}addVertexData(e,t,n){let r=this.minX,i=this.minY,o=this.maxX,s=this.maxY;for(let a=t;a<n;a+=2){const t=e[a],n=e[a+1];r=t<r?t:r,i=n<i?n:i,o=t>o?t:o,s=n>s?n:s}this.minX=r,this.minY=i,this.maxX=o,this.maxY=s}addVertices(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)}addVerticesMatrix(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i;const s=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,h=e.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let g=n;g<r;g+=2){const e=t[g],n=t[g+1],r=s*e+l*n+u,v=c*n+a*e+h;d=Math.min(d,r-i),p=Math.max(p,r+i),f=Math.min(f,v-o),m=Math.max(m,v+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){const e=this.minX,t=this.minY,s=this.maxX,a=this.maxY;this.minX=n<e?n:e,this.minY=r<t?r:t,this.maxX=i>s?i:s,this.maxY=o>a?o:a}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){const e=this.minX,t=this.minY,s=this.maxX,a=this.maxY;this.minX=n<e?n:e,this.minY=r<t?r:t,this.maxX=i>s?i:s,this.maxY=o>a?o:a}}pad(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}class hi extends ee{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new en,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ui,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const r=t[n];Object.defineProperty(hi.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Ft),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){var t;e||(this._localBoundsRect||(this._localBoundsRect=new Ft),e=this._localBoundsRect),this._localBounds||(this._localBounds=new ui);const n=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=null!==(t=null===r||void 0===r?void 0:r.worldAlpha)&&void 0!==t?t:1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-o,s}toGlobal(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;null===(e=this.parent)||void 0===e||e.removeChild(this)}setTransform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new di),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*kt}set angle(e){this.transform.rotation=e*Lt}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class di extends hi{constructor(){super(...arguments),this.sortDirty=null}}hi.prototype.displayObjectUpdateTransform=hi.prototype.updateTransform;const fi=new Vt;function pi(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const mi=class e extends hi{constructor(){super(),this.children=[],this.sortableChildren=e.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(){if(arguments.length>1)for(let e=0;e<arguments.length;e++)this.addChild(e<0||arguments.length<=e?void 0:arguments[e]);else{const e=arguments.length<=0?void 0:arguments[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return arguments.length<=0?void 0:arguments[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error("".concat(e,"addChildAt: The index ").concat(t," supplied is out of bounds ").concat(this.children.length));return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error("The index ".concat(t," supplied is out of bounds ").concat(this.children.length));const n=this.getChildIndex(e);qe(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index (".concat(e,") does not exist."));return this.children[e]}removeChild(){if(arguments.length>1)for(let e=0;e<arguments.length;e++)this.removeChild(e<0||arguments.length<=e?void 0:arguments[e]);else{const e=arguments.length<=0?void 0:arguments[0],t=this.children.indexOf(e);if(-1===t)return null;e.parent=null,e.transform._parentID=-1,qe(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t)}return arguments.length<=0?void 0:arguments[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,qe(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;const n=e,r=t-n;let i;if(r>0&&r<=t){i=this.children.splice(n,r);for(let e=0;e<i.length;++e)i[e].parent=null,i[e].transform&&(i[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<i.length;++e)i[e].emit("removed",this),this.emit("childRemoved",i[e],this,e);return i}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&0!==n.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(pi),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=super.getLocalBounds(e);if(!t)for(let r=0,i=this.children.length;r<i;++r){const e=this.children[r];e.visible&&e.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const n=t.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(r=this.getBounds(!0));const o=t.projection.transform;if(o&&(i?(i=fi.copyFrom(i),i.prepend(o)):i=o),r&&n.intersects(r,i))this._render(t);else if(this.cullArea)return;for(let e=0,s=this.children.length;e<s;++e){const n=this.children[e],r=n.cullable;n.cullable=r||!this.cullArea,n.render(t),n.cullable=r}}render(e){var t;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||null!==(t=this.filters)&&void 0!==t&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}}renderAdvanced(e){var t,n,r;const i=this.filters,o=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<i.length;e++)i[e].enabled&&this._enabledFilters.push(i[e])}const s=i&&(null===(t=this._enabledFilters)||void 0===t?void 0:t.length)||o&&(!o.isMaskData||o.enabled&&(o.autoDetect||o.type!==I.NONE));if(s&&e.batch.flush(),i&&null!==(n=this._enabledFilters)&&void 0!==n&&n.length&&e.filter.push(this,this._enabledFilters),o&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}s&&e.batch.flush(),o&&e.mask.pop(this),i&&(null===(r=this._enabledFilters)||void 0===r?void 0:r.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:null===e||void 0===e?void 0:e.children,n=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<n.length;++r)n[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};mi.defaultSortableChildren=!1;let gi=mi;gi.prototype.containerUpdateTransform=gi.prototype.updateTransform,Object.defineProperties(L,{SORTABLE_CHILDREN:{get:()=>gi.defaultSortableChildren,set(e){re("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),gi.defaultSortableChildren=e}}});const vi=new Nt,yi=new Uint16Array([0,1,2,0,2,3]);class bi extends gi{constructor(e){super(),this._anchor=new Zt(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Ue(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=v.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||zn.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=yi,this.pluginName="batch",this.isSprite=!0,this._roundPixels=L.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Xe(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Xe(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=this.vertexData,c=e.trim,u=e.orig,h=this._anchor;let d=0,f=0,p=0,m=0;if(c?(f=c.x-h._x*u.width,d=f+c.width,m=c.y-h._y*u.height,p=m+c.height):(f=-h._x*u.width,d=f+u.width,m=-h._y*u.height,p=m+u.height),l[0]=n*f+i*m+s,l[1]=o*m+r*f+a,l[2]=n*d+i*m+s,l[3]=o*m+r*d+a,l[4]=n*d+i*p+s,l[5]=o*p+r*d+a,l[6]=n*f+i*p+s,l[7]=o*p+r*f+a,this._roundPixels){const e=L.RESOLUTION;for(let t=0;t<l.length;++t)l[t]=Math.round(l[t]*e)/e}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,h=-r._x*n.width,d=h+n.width,f=-r._y*n.height,p=f+n.height;if(t[0]=o*h+a*f+c,t[1]=l*f+s*h+u,t[2]=o*d+a*f+c,t[3]=l*f+s*d+u,t[4]=o*d+a*p+c,t[5]=l*p+s*d+u,t[6]=o*h+a*p+c,t[7]=l*p+s*h+u,this._roundPixels){const e=L.RESOLUTION;for(let n=0;n<t.length;++n)t[n]=Math.round(t[n]*e)/e}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new ui),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ft),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,vi);const t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x;let i=0;return vi.x>=r&&vi.x<r+t&&(i=-n*this.anchor.y,vi.y>=i&&vi.y<i+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:null===e||void 0===e?void 0:e.texture){const t="boolean"==typeof e?e:null===e||void 0===e?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof zn?e:zn.from(e,t);return new bi(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Xe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Xe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||zn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const xi=new Vt;hi.prototype._cacheAsBitmap=!1,hi.prototype._cacheData=null,hi.prototype._cacheAsBitmapResolution=null,hi.prototype._cacheAsBitmapMultisample=null;class _i{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(hi.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;let t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new _i),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),hi.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},hi.prototype._initCachedDisplayObject=function(e){var t,n,r;if(null!==(t=this._cacheData)&&void 0!==t&&t.sprite)return;const i=this.alpha;this.alpha=1,e.batch.flush();const o=this.getLocalBounds(new Ft,!0);if(null!==(n=this.filters)&&void 0!==n&&n.length){const e=this.filters[0].padding;o.pad(e)}const s=this.cacheAsBitmapResolution||e.resolution;o.ceil(s),o.width=Math.max(o.width,1/s),o.height=Math.max(o.height,1/s);const a=e.renderTexture.current,l=e.renderTexture.sourceFrame.clone(),c=e.renderTexture.destinationFrame.clone(),u=e.projection.transform,h=Hn.create({width:o.width,height:o.height,resolution:s,multisample:null!==(r=this.cacheAsBitmapMultisample)&&void 0!==r?r:e.multisample}),d="cacheAsBitmap_".concat(Ke());this._cacheData.textureCacheId=d,_t.addToCache(h.baseTexture,d),zn.addToCache(h,d);const f=this.transform.localTransform.copyTo(xi).invert().translate(-o.x,-o.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=u,e.renderTexture.bind(a,l,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const p=new bi(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-o.x/o.width,p.anchor.y=-o.y/o.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)},hi.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},hi.prototype._initCachedDisplayObjectCanvas=function(e){var t;if(null!==(t=this._cacheData)&&void 0!==t&&t.sprite)return;const n=this.getLocalBounds(new Ft,!0),r=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,o=e._projTransform,s=this.cacheAsBitmapResolution||e.resolution;n.ceil(s),n.width=Math.max(n.width,1/s),n.height=Math.max(n.height,1/s);const a=Hn.create({width:n.width,height:n.height,resolution:s}),l="cacheAsBitmap_".concat(Ke());this._cacheData.textureCacheId=l,_t.addToCache(a.baseTexture,l),zn.addToCache(a,l);const c=xi;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=n.x,c.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:c,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new bi(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-n.x/n.width,u.anchor.y=-n.y/n.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)},hi.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},hi.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},hi.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),zn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},hi.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},hi.prototype.name=null,gi.prototype.getChildByName=function(e,t){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(let n=0,r=this.children.length;n<r;n++){const t=this.children[n];if(!t.getChildByName)continue;const r=t.getChildByName(e,!0);if(r)return r}return null},hi.prototype.getGlobalPosition=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Nt,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};const Si={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},wi=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class Ei extends Pn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pn.defaultResolution,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;const o=function(e,t){const n=Math.ceil(e/2);let r,i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";r=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let s=0;s<e;s++){let e=r.replace("%index%",s.toString());e=e.replace("%sampleIndex%","".concat(s-(n-1),".0")),o+=e,o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",e.toString()),i}(i,e),s=function(e){const t=Si[e],n=t.length;let r,i=wi,o="";for(let s=0;s<e;s++){let i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());r=s,s>=n&&(r=e-s-1),i=i.replace("%value%",t[r].toString()),o+=i,o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",e.toString()),i}(i);super(o,s),this.horizontal=e,this.resolution=r,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{const i=e.getFilterTexture(),o=e.renderer;let s=t,a=i;this.state.blend=!1,e.applyFilter(this,s,a,C.CLEAR);for(let t=1;t<this.passes-1;t++){e.bindAndClear(s,C.BLIT),this.uniforms.uSampler=a;const t=a;a=s,s=t,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,a,n,r),e.returnFilterTexture(i)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class Ai extends Pn{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Kr,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e){let t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,r,i]=Ue.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,r,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),s=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(s,t)}contrast(e,t){const n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)}saturate(){let e=arguments.length>1?arguments[1]:void 0;const t=2*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/3+1,n=-.5*(t-1),r=[t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,n,r,i){e=e||.2,t=t||.15,n=n||16770432,r=r||3375104;const o=Ue.shared,[s,a,l]=o.setValue(n).toArray(),[c,u,h]=o.setValue(r).toArray(),d=[.3,.59,.11,0,0,s,a,l,e,0,c,u,h,t,0,s-c,a-u,l-h,0,0];this._loadMatrix(d,i)}night(e,t){const n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Ai.prototype.grayscale=Ai.prototype.greyscale;const Ti={AlphaFilter:class extends Pn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}},BlurFilter:class extends Pn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pn.defaultResolution,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;super(),this._repeatEdgePixels=!1,this.blurXFilter=new Ei(!0,e,t,n,r),this.blurYFilter=new Ei(!1,e,t,n,r),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,r){const i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){const i=e.getFilterTexture();this.blurXFilter.apply(e,t,i,C.CLEAR),this.blurYFilter.apply(e,i,n,r),e.returnFilterTexture(i)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}},BlurFilterPass:Ei,ColorMatrixFilter:Ai,DisplacementFilter:class extends Pn{constructor(e,t){const n=new Vt;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,null==t&&(t=20),this.scale=new Nt(t,t)}apply(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),s=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/s,this.uniforms.rotation[3]=i.d/s),e.applyFilter(this,t,n,r)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}},FXAAFilter:class extends Pn{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class extends Pn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();super(Kr,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}};Object.entries(Ti).forEach((e=>{let[t,n]=e;Object.defineProperty(Ti,t,{get:()=>(re("7.1.0","filters.".concat(t," has moved to ").concat(t)),n)})}));const Ci=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(qr.system.add(this.tickerUpdate,this,Vr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(qr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class Pi{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Pi.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Nt,this.page=new Nt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,r,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ri extends Pi{constructor(){super(...arguments),this.client=new Nt,this.movement=new Nt,this.offset=new Nt,this.global=new Nt,this.screen=new Nt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,r,i,o,s,a,l,c,u,h,d,f,p){throw new Error("Method not implemented.")}}class Ii extends Ri{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Mi extends Ri{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Mi.DOM_DELTA_PIXEL=0,Mi.DOM_DELTA_LINE=1,Mi.DOM_DELTA_PAGE=2;const Oi=new Nt,ki=new Nt;class Li{constructor(e){this.dispatch=new ee,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(((e,t)=>e.priority-t.priority))}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn("[EventBoundary]: Event mapping not defined for ".concat(e.type))}hitTest(e,t){Ci.pauseUpdate=!0;const n=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,Oi.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,i=n.length-1;r<i;r++)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._allInteractiveElements;if(0===n.length)return;e.eventPhase=e.BUBBLING_PHASE;const r=Array.isArray(t)?t:[t];for(let i=n.length-1;i>=0;i--)r.forEach((t=>{e.currentTarget=n[i],this.notifyTarget(e,t)}))}propagationPath(e){const t=[e];for(let n=0;n<2048&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!1;if(this._interactivePrune(e))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(Ci.pauseUpdate=!1),e.interactiveChildren&&e.children){const a=e.children;for(let l=a.length-1;l>=0;l--){const c=a[l],u=this.hitTestMoveRecursive(c,this._isInteractive(t)?t:c.eventMode,n,r,i,o||i(e,n));if(u){if(u.length>0&&!u[u.length-1].parent)continue;const t=e.isInteractive();(u.length>0||t)&&(t&&this._allInteractiveElements.push(e),u.push(e)),0===this._hitElements.length&&(this._hitElements=u),s=!0}}}const a=this._isInteractive(t),l=e.isInteractive();return a&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:s?this._hitElements:a&&!i(e,n)&&r(e,n)?l?[e]:[]:null}hitTestRecursive(e,t,n,r,i){if(this._interactivePrune(e)||i(e,n))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(Ci.pauseUpdate=!1),e.interactiveChildren&&e.children){const o=e.children;for(let s=o.length-1;s>=0;s--){const a=o[s],l=this.hitTestRecursive(a,this._isInteractive(t)?t:a.eventMode,n,r,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;const t=e.isInteractive();return(l.length>0||t)&&l.push(e),l}}}const o=this._isInteractive(t),s=e.isInteractive();return o&&r(e,n)?s?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable&&"none"!==e.eventMode&&("passive"!==e.eventMode||e.interactiveChildren)&&!e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,ki),!e.hitArea.contains(ki.x,ki.y)))return!0;if(e._mask){var n;const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&(null===(n=r.containsPoint)||void 0===n||!n.call(r,t)))return!0}return!1}hitTestFn(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}notifyTarget(e,t){var n,r,i;t=null!==(n=t)&&void 0!==n?n:e.type;const o="on".concat(t);null===(r=(i=e.currentTarget)[o])||void 0===r||r.call(i,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var t,n,r;if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const o="mouse"===i.pointerType||"pen"===i.pointerType,s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if((null===(t=s.overTargets)||void 0===t?void 0:t.length)>0&&a!==i.target){const t="mousemove"===e.type?"mouseout":"pointerout",n=this.createPointerEvent(e,t,a);if(this.dispatchEvent(n,"pointerout"),o&&this.dispatchEvent(n,"mouseout"),!i.composedPath().includes(a)){const t=this.createPointerEvent(e,"pointerleave",a);for(t.eventPhase=t.AT_TARGET;t.target&&!i.composedPath().includes(t.target);)t.currentTarget=t.target,this.notifyTarget(t),o&&this.notifyTarget(t,"mouseleave"),t.target=t.target.parent;this.freeEvent(t)}this.freeEvent(n)}if(a!==i.target){const t="mousemove"===e.type?"mouseover":"pointerover",n=this.clonePointerEvent(i,t);this.dispatchEvent(n,"pointerover"),o&&this.dispatchEvent(n,"mouseover");let r=null===a||void 0===a?void 0:a.parent;for(;r&&r!==this.rootTarget.parent&&r!==i.target;)r=r.parent;if(!r||r===this.rootTarget.parent){const e=this.clonePointerEvent(i,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==a&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),o&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(n)}const l=[],c=null===(n=this.enableGlobalMoveEvents)||void 0===n||n;this.moveOnAll?l.push("pointermove"):this.dispatchEvent(i,"pointermove"),c&&l.push("globalpointermove"),"touch"===i.pointerType&&(this.moveOnAll?l.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),c&&l.push("globaltouchmove")),o&&(this.moveOnAll?l.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),c&&l.push("globalmousemove"),this.cursor=null===(r=i.target)||void 0===r?void 0:r.cursor),l.length>0&&this.all(i,l),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(e){var t;if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=null===(t=r.target)||void 0===t?void 0:t.cursor);const o=this.clonePointerEvent(r,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const n="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(i),n&&this.dispatchEvent(i,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){const e=2===n.button;this.dispatchEvent(n,e?"rightup":"mouseup")}const r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=i;if(i&&!n.composedPath().includes(i)){let t=i;for(;t&&!n.composedPath().includes(t);){if(n.currentTarget=t,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){const e=2===n.button;this.notifyTarget(n,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete r.pressTargetsByButton[e.button],o=t}if(o){const i=this.clonePointerEvent(n,"click");i.target=o,i.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:i.target,timeStamp:t});const s=r.clicksByButton[e.button];if(s.target===i.target&&t-s.timeStamp<200?++s.clickCount:s.clickCount=1,s.target=i.target,s.timeStamp=t,i.detail=s.clickCount,"mouse"===i.pointerType){const e=2===i.button;this.dispatchEvent(i,e?"rightclick":"click")}else"touch"===i.pointerType&&this.dispatchEvent(i,"tap");this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Ii))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){let i=n;for(;i;)r.currentTarget=i,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):("mouse"===r.pointerType||"pen"===r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof Mi))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){var r;const i=this.allocateEvent(Ii);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=null!==(r=null!==n&&void 0!==n?n:this.hitTest(i.global.x,i.global.y))&&void 0!==r?r:this._hitElements[0],"string"==typeof t&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Mi);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(Ii);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!==t&&void 0!==t?t:n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Ii&&t instanceof Ii&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ri&&t instanceof Ri&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let r=0,i=n.length;r<i&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(t,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}}const Di={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ni=class e{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Li(null),Ci.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ii(null),this.rootWheelEvent=new Mi(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,n)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=n),e[t]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){var n,r;const{view:i,resolution:o}=this.renderer;this.setTargetElement(i),this.resolution=o,e._defaultEventMode=null!==(n=t.eventMode)&&void 0!==n?n:"auto",Object.assign(this.features,null!==(r=t.eventFeatures)&&void 0!==r?r:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,r=t.length;n<r;n++){const e=t[n],r=this.bootstrapEvent(this.rootPointerEvent,e);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ci.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,r=t.length;n<r;n++){const e=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let i=0,o=r.length;i<o;i++){const e=this.bootstrapEvent(this.rootPointerEvent,r[i]);e.type+=n,this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,r=t.length;n<r;n++){const e=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(e)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Ci.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ci.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ci.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*i,e.y=(n-r.top)*(this.domElement.height/r.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,r=e.changedTouches.length;n<r;n++){const r=e.changedTouches[n];typeof r.button>"u"&&(r.button=0),typeof r.buttons>"u"&&(r.buttons=1),typeof r.isPrimary>"u"&&(r.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof r.width>"u"&&(r.width=r.radiusX||1),typeof r.height>"u"&&(r.height=r.radiusY||1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="touch"),typeof r.pointerId>"u"&&(r.pointerId=r.identifier||0),typeof r.pressure>"u"&&(r.pressure=r.force||.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),typeof r.layerX>"u"&&(r.layerX=r.offsetX=r.clientX),typeof r.layerY>"u"&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(globalThis.MouseEvent&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof globalThis.PointerEvent))t.push(e);else{const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=1),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Di[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Ni.extension={name:"events",type:[st.RendererSystem,st.CanvasRendererSystem]},Ni.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Bi=Ni;function Fi(e){return"dynamic"===e||"static"===e}ct.add(Bi);const Ui={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var e;return null!==(e=this._internalInteractive)&&void 0!==e?e:Fi(Bi.defaultEventMode)},set interactive(e){re("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){var e;return null!==(e=this._internalEventMode)&&void 0!==e?e:Bi.defaultEventMode},set eventMode(e){this._internalInteractive=Fi(e),this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,n){const r="function"==typeof t?void 0:t;e="boolean"==typeof n&&n||"object"==typeof n&&n.capture?"".concat(e,"capture"):e,t="function"==typeof t?t:t.handleEvent,this.on(e,t,r)},removeEventListener(e,t,n){const r="function"==typeof t?void 0:t;e="boolean"==typeof n&&n||"object"==typeof n&&n.capture?"".concat(e,"capture"):e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,r)},dispatchEvent(e){if(!(e instanceof Pi))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};hi.mixin(Ui);hi.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});const zi=100;class Hi{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(J.tablet||J.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="".concat(zi,"px"),t.style.height="".concat(zi,"px"),t.style.position="absolute",t.style.top="".concat(0,"px"),t.style.left="".concat(0,"px"),t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="".concat(1,"px"),e.style.height="".concat(1,"px"),e.style.position="absolute",e.style.top="".concat(-1e3,"px"),e.style.left="".concat(-1e3,"px"),e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if(J.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:r,height:i}=this.renderer.view.getBoundingClientRect(),{width:o,height:s,resolution:a}=this.renderer,l=r/o*a,c=i/s*a;let u=this.div;u.style.left="".concat(t,"px"),u.style.top="".concat(n,"px"),u.style.width="".concat(o,"px"),u.style.height="".concat(s,"px");for(let h=0;h<this.children.length;h++){const e=this.children[h];if(e.renderId!==this.renderId)e._accessibleActive=!1,qe(this.children,h,1),this.div.removeChild(e._accessibleDiv),this.pool.push(e._accessibleDiv),e._accessibleDiv=null,h--;else{u=e._accessibleDiv;let t=e.hitArea;const n=e.worldTransform;e.hitArea?(u.style.left="".concat((n.tx+t.x*n.a)*l,"px"),u.style.top="".concat((n.ty+t.y*n.d)*c,"px"),u.style.width="".concat(t.width*n.a*l,"px"),u.style.height="".concat(t.height*n.d*c,"px")):(t=e.getBounds(),this.capHitArea(t),u.style.left="".concat(t.x*l,"px"),u.style.top="".concat(t.y*c,"px"),u.style.width="".concat(t.width*l,"px"),u.style.height="".concat(t.height*c,"px"),u.title!==e.accessibleTitle&&null!==e.accessibleTitle&&(u.title=e.accessibleTitle),u.getAttribute("aria-label")!==e.accessibleHint&&null!==e.accessibleHint&&u.setAttribute("aria-label",e.accessibleHint)),(e.accessibleTitle!==u.title||e.tabIndex!==u.tabIndex)&&(u.title=e.accessibleTitle,u.tabIndex=e.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(e){e.innerHTML="type: ".concat(e.type,"</br> title : ").concat(e.title,"</br> tabIndex: ").concat(e.tabIndex)}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="".concat(zi,"px"),t.style.height="".concat(zi,"px"),t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title="displayObject ".concat(e.tabIndex)),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,r=this.renderer.events.rootBoundary,i=Object.assign(new Pi(r),{target:n});r.rootTarget=this.renderer.lastObjectRendered,t.forEach((e=>r.dispatchEvent(i,e)))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Hi.extension={name:"accessibility",type:[st.RendererPlugin,st.CanvasRendererPlugin]},ct.add(Hi);const ji=class e{constructor(t){this.stage=new gi,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){for(const t of Yr)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}(t),e._plugins.forEach((e=>{e.init.call(this,t)}))}render(){this.renderer.render(this.stage)}get view(){var e;return null===(e=this.renderer)||void 0===e?void 0:e.view}get screen(){var e;return null===(e=this.renderer)||void 0===e?void 0:e.screen}destroy(t,n){const r=e._plugins.slice(0);r.reverse(),r.forEach((e=>{e.destroy.call(this)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};ji._plugins=[];let Vi=ji;ct.handleByList(st.Application,Vi._plugins);class Gi{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:r}=this._resizeTo;e=n,t=r}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Gi.extension=st.Application,ct.add(Gi);const Wi={loader:st.LoadParser,resolver:st.ResolveParser,cache:st.CacheParser,detection:st.DetectionParser};ct.handle(st.Asset,(e=>{const t=e.ref;Object.entries(Wi).filter((e=>{let[n]=e;return!!t[n]})).forEach((e=>{var n;let[r,i]=e;return ct.add(Object.assign(t[r],{extension:null!==(n=t[r].extension)&&void 0!==n?n:i}))}))}),(e=>{const t=e.ref;Object.keys(Wi).filter((e=>!!t[e])).forEach((e=>ct.remove(t[e])))}));class qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach((e=>{this._assetList.push(e)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Xi(e,t){const n=e.split("?")[0],r=se.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const Yi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)||(e=[e]),t?e.map((e=>"string"==typeof e||n?t(e):e)):e};const Ki=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn("[Assets] Asset id ".concat(e," was not found in the Cache")),t}set(e,t){const n=Yi(e);let r;for(let s=0;s<this.parsers.length;s++){const e=this.parsers[s];if(e.test(t)){r=e.getCacheableAssets(n,t);break}}r||(r={},n.forEach((e=>{r[e]=t})));const i=Object.keys(r),o={cacheKeys:i,keys:n};if(n.forEach((e=>{this._cacheMap.set(e,o)})),i.forEach((e=>{this._cache.has(e)&&this._cache.get(e)!==t&&console.warn("[Cache] already has key:",e),this._cache.set(e,r[e])})),t instanceof zn){const e=t;n.forEach((t=>{e.baseTexture!==zn.EMPTY.baseTexture&&_t.addToCache(e.baseTexture,t),zn.addToCache(e,t)}))}}remove(e){if(!this._cacheMap.has(e))return void console.warn("[Assets] Asset id ".concat(e," was not found in the Cache"));const t=this._cacheMap.get(e);t.cacheKeys.forEach((e=>{this._cache.delete(e)})),t.keys.forEach((e=>{this._cacheMap.delete(e)}))}get parsers(){return this._parsers}},$i=e=>!Array.isArray(e);class Qi{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{let r=null,i=null;if(t.loadParser&&(i=this._parserHash[t.loadParser],i||console.warn('[Assets] specified load parser "'.concat(t.loadParser,'" not found while loading ').concat(e))),!i){for(let n=0;n<this.parsers.length;n++){var o;const r=this.parsers[n];if(r.load&&null!==(o=r.test)&&void 0!==o&&o.call(r,e,t,this)){i=r;break}}if(!i)return console.warn("[Assets] ".concat(e," could not be loaded as we don't know how to parse it, ensure the correct parser has been added")),null}r=await i.load(e,t,this),n.parser=i;for(let e=0;e<this.parsers.length;e++){var s;const i=this.parsers[e];i.parse&&i.parse&&await(null===(s=i.testParse)||void 0===s?void 0:s.call(i,r,t,this))&&(r=await i.parse(r,t,this)||r,n.parser=i)}return r})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const r={},i=$i(e),o=Yi(e,(e=>({alias:[e],src:e}))),s=o.length,a=o.map((async e=>{const i=se.toAbsolute(e.src);if(!r[e.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,e)),r[e.src]=await this.promiseCache[i].promise,t&&t(++n/s)}catch(o){throw delete this.promiseCache[i],delete r[e.src],new Error("[Loader.load] Failed to load ".concat(i,".\n").concat(o))}}));return await Promise.all(a),i?r[o[0].src]:r}async unload(e){const t=Yi(e,(e=>({alias:[e],src:e}))).map((async e=>{const t=se.toAbsolute(e.src),n=this.promiseCache[t];if(n){var r,i;const o=await n.promise;delete this.promiseCache[t],null===(r=n.parser)||void 0===r||null===(i=r.unload)||void 0===i||i.call(r,o,e,this)}}));await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((e=>e.name)).reduce(((e,t)=>(e[t.name]&&console.warn('[Assets] loadParser name conflict "'.concat(t.name,'"')),{...e,[t.name]:t})),{})}}var Zi=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Zi||{});function Ji(e,t){if(Array.isArray(t)){for(const n of t)if(e.startsWith("data:".concat(n)))return!0;return!1}return e.startsWith("data:".concat(t))}const eo={extension:{type:st.LoadParser,priority:Zi.Low},name:"loadJson",test:e=>Ji(e,"application/json")||Xi(e,".json"),load:async e=>await(await L.ADAPTER.fetch(e)).json()};ct.add(eo);const to={name:"loadTxt",extension:{type:st.LoadParser,priority:Zi.Low},test:e=>Ji(e,"text/plain")||Xi(e,".txt"),load:async e=>await(await L.ADAPTER.fetch(e)).text()};ct.add(to);const no=["normal","bold","100","200","300","400","500","600","700","800","900"],ro=[".ttf",".otf",".woff",".woff2"],io=["font/ttf","font/otf","font/woff","font/woff2"],oo=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;const so=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;const ao={extension:{type:st.LoadParser,priority:Zi.Low},name:"loadWebFont",test:e=>Ji(e,io)||Xi(e,ro),async load(e,t){const n=L.ADAPTER.getFontFaceSet();if(n){var r,i,o,s,a;const c=[],u=null!==(r=null===(i=t.data)||void 0===i?void 0:i.family)&&void 0!==r?r:function(e){const t=se.extname(e),n=se.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1)));let r=n.length>0;for(const o of n)if(!o.match(oo)){r=!1;break}let i=n.join(" ");return r||(i='"'.concat(i.replace(/[\\"]/g,"\\$&"),'"')),i}(e),h=null!==(o=null===(s=t.data)||void 0===s||null===(s=s.weights)||void 0===s?void 0:s.filter((e=>no.includes(e))))&&void 0!==o?o:["normal"],d=null!==(a=t.data)&&void 0!==a?a:{};for(let t=0;t<h.length;t++){const r=h[t],i=new FontFace(u,"url(".concat((l=e,so.test(l)?l:encodeURI(l)),")"),{...d,weight:r});await i.load(),n.add(i),c.push(i)}return 1===c.length?c[0]:c}var l;return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach((e=>L.ADAPTER.getFontFaceSet().delete(e)))}};ct.add(ao);let lo,co=0;const uo={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=","');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ")},ho="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let fo;const po=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((e=>{const t=URL.createObjectURL(new Blob([uo.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",(r=>{n.terminate(),URL.revokeObjectURL(t),e(r.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===lo&&(lo=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<lo&&(fo||(fo=URL.createObjectURL(new Blob([ho],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(fo),e.addEventListener("message",(e=>{this.complete(e.data),this.returnWorker(e.target),this.next()}))),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise(((n,r)=>{this.queue.push({id:e,arguments:t,resolve:n,reject:r})}));return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[co]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:co++,id:n})}};function mo(e,t,n){e.resource.internal=!0;const r=new zn(e),i=()=>{delete t.promiseCache[n],Ki.has(n)&&Ki.remove(n)};return r.baseTexture.once("destroyed",(()=>{n in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())})),r.once("destroyed",(()=>{e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())})),r}const go=[".jpeg",".jpg",".png",".webp",".avif"],vo=["image/jpeg","image/png","image/webp","image/avif"];const yo={name:"loadTextures",extension:{type:st.LoadParser,priority:Zi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>Ji(e,vo)||Xi(e,go),async load(e,t,n){var r,i;const o=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;s=o?this.config.preferWorkers&&await po.isImageBitmapSupported()?await po.loadImageBitmap(e):await async function(e){const t=await L.ADAPTER.fetch(e);if(!t.ok)throw new Error("[loadImageBitmap] Failed to fetch ".concat(e,": ").concat(t.status," ").concat(t.statusText));const n=await t.blob();return await createImageBitmap(n)}(e):await new Promise(((t,n)=>{const r=new Image;r.crossOrigin=this.config.crossOrigin,r.src=e,r.complete?t(r):(r.onload=()=>t(r),r.onerror=e=>n(e))}));const a={...t.data};null!==(r=a.resolution)&&void 0!==r||(a.resolution=ot(e)),o&&void 0===(null===(i=a.resourceOptions)||void 0===i?void 0:i.ownsImageBitmap)&&(a.resourceOptions={...a.resourceOptions},a.resourceOptions.ownsImageBitmap=!0);const l=new _t(s,a);return l.resource.src=e,mo(l,n,e)},unload(e){e.destroy(!0)}};ct.add(yo);const bo={extension:{type:st.LoadParser,priority:Zi.High},name:"loadSVG",test:e=>Ji(e,"image/svg+xml")||Xi(e,".svg"),testParse:async e=>ai.test(e),async parse(e,t,n){var r;const i=new ai(e,null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.resourceOptions);await i.load();const o=new _t(i,{resolution:ot(e),...null===t||void 0===t?void 0:t.data});return o.resource.src=t.src,mo(o,n,t.src)},load:async(e,t)=>(await L.ADAPTER.fetch(e)).text(),unload:yo.unload};ct.add(bo);const xo=[".mp4",".m4v",".webm",".ogv"],_o=["video/mp4","video/webm","video/ogg"],So={name:"loadVideo",extension:{type:st.LoadParser,priority:Zi.High},config:{defaultAutoPlay:!0},test:e=>Ji(e,_o)||Xi(e,xo),async load(e,t,n){let r;const i=await(await L.ADAPTER.fetch(e)).blob(),o=URL.createObjectURL(i);try{var s;const i={autoPlay:this.config.defaultAutoPlay,...null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.resourceOptions},a=new ci(o,i);await a.load();const l=new _t(a,{alphaMode:await ce(),resolution:ot(e),...null===t||void 0===t?void 0:t.data});l.resource.src=e,r=mo(l,n,e),r.baseTexture.once("destroyed",(()=>{URL.revokeObjectURL(o)}))}catch(a){throw URL.revokeObjectURL(o),a}return r},unload(e){e.destroy(!0)}};function wo(e,t,n,r,i){const o=t[n];for(let s=0;s<o.length;s++){const a=o[s];n<t.length-1?wo(e.replace(r[n],a),t,n+1,r,i):i.push(e.replace(r[n],a))}}function Eo(e){const t=e.match(/\{(.*?)\}/g),n=[];if(t){const r=[];t.forEach((e=>{const t=e.substring(1,e.length-1).split(",");r.push(t)})),wo(e,r,0,t,n)}else n.push(e);return n}ct.add(So);class Ao{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>"".concat(e).concat(this._bundleIdConnector).concat(t),extractAssetIdFromBundle:(e,t)=>t.replace("".concat(e).concat(this._bundleIdConnector),"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){var t,n,r;if(this._bundleIdConnector=null!==(t=e.connector)&&void 0!==t?t:this._bundleIdConnector,this._createBundleAssetId=null!==(n=e.createBundleAssetId)&&void 0!==n?n:this._createBundleAssetId,this._extractAssetIdFromBundle=null!==(r=e.extractAssetIdFromBundle)&&void 0!==r?r:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))})),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map((e=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e])))).join("&")}}getAlias(e){const{alias:t,name:n,src:r,srcs:i}=e;return Yi(t||n||r||i,(e=>{var t;return"string"==typeof e?e:Array.isArray(e)?e.map((e=>{var t,n;return null!==(t=null!==(n=null===e||void 0===e?void 0:e.src)&&void 0!==n?n:null===e||void 0===e?void 0:e.srcs)&&void 0!==t?t:e})):null!==e&&void 0!==e&&e.src||null!==e&&void 0!==e&&e.srcs?null!==(t=e.src)&&void 0!==t?t:e.srcs:e}),!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach((e=>{this.addBundle(e.name,e.assets)}))}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach((t=>{var r,i;const o=null!==(r=t.src)&&void 0!==r?r:t.srcs,s=null!==(i=t.alias)&&void 0!==i?i:t.name;let a;if("string"==typeof s){const t=this._createBundleAssetId(e,s);n.push(t),a=[s,t]}else{const t=s.map((t=>this._createBundleAssetId(e,t)));n.push(...t),a=[...s,...t]}this.add({...t,alias:a,src:o})})):Object.keys(t).forEach((r=>{const i=[r,this._createBundleAssetId(e,r)];if("string"==typeof t[r])this.add({alias:i,src:t[r]});else if(Array.isArray(t[r]))this.add({alias:i,src:t[r]});else{var o;const e=t[r],n=null!==(o=e.src)&&void 0!==o?o:e.srcs;this.add({...e,alias:i,src:Array.isArray(n)?n:[n]})}n.push(...i)})),this._bundles[e]=n}add(e,t,n,r,i){const o=[];let s;"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]?(re("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),o.push({alias:e,src:t,data:n,format:r,loadParser:i})):Array.isArray(e)?o.push(...e):o.push(e),s=e=>{this.hasKey(e)&&console.warn("[Resolver] already has key: ".concat(e," overwriting"))},Yi(o).forEach((e=>{const{src:t,srcs:n}=e;let{data:r,format:i,loadParser:o}=e;const a=Yi(t||n).map((e=>"string"==typeof e?Eo(e):Array.isArray(e)?e:[e])),l=this.getAlias(e);Array.isArray(l)?l.forEach(s):s(l);const c=[];a.forEach((e=>{e.forEach((e=>{var t,n,s;let a={};if("object"!=typeof e){a.src=e;for(let t=0;t<this._parsers.length;t++){const n=this._parsers[t];if(n.test(e)){a=n.parse(e);break}}}else r=null!==(t=e.data)&&void 0!==t?t:r,i=null!==(n=e.format)&&void 0!==n?n:i,o=null!==(s=e.loadParser)&&void 0!==s?s:o,a={...a,...e};if(!l)throw new Error("[Resolver] alias is undefined for this asset: ".concat(a.src));a=this.buildResolvedAsset(a,{aliases:l,data:r,format:i,loadParser:o}),c.push(a)}))})),l.forEach((e=>{this._assetMap[e]=c}))}))}resolveBundle(e){const t=$i(e);e=Yi(e);const n={};return e.forEach((e=>{const t=this._bundles[e];if(t){const r=this.resolve(t),i={};for(const t in r){const n=r[t];i[this._extractAssetIdFromBundle(e,t)]=n}n[e]=i}})),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const n in t)e[n]=t[n].src;return e}return t.src}resolve(e){const t=$i(e);e=Yi(e);const n={};return e.forEach((e=>{if(!this._resolverHash[e])if(this._assetMap[e]){var t;let n=this._assetMap[e];const r=n[0],i=this._getPreferredOrder(n);null!==i&&void 0!==i&&i.priority.forEach((e=>{i.params[e].forEach((t=>{const r=n.filter((n=>!!n[e]&&n[e]===t));r.length&&(n=r)}))})),this._resolverHash[e]=null!==(t=n[0])&&void 0!==t?t:r}else this._resolverHash[e]=this.buildResolvedAsset({alias:[e],src:e},{});n[e]=this._resolverHash[e]})),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const t=e[0],n=this._preferredOrder.find((e=>e.params.format.includes(t.format)));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return"".concat(e).concat(t).concat(this._defaultSearchParams)}buildResolvedAsset(e,t){var n;const{aliases:r,data:i,loadParser:o,format:s}=t;return(this._basePath||this._rootPath)&&(e.src=se.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=null!==(n=null!==r&&void 0!==r?r:e.alias)&&void 0!==n?n:[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=null!==o&&void 0!==o?o:e.loadParser,e.format=null!==s&&void 0!==s?s:se.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}const To=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ao,this.loader=new Qi,this.cache=Ki,this._backgroundLoader=new qi(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(){var e,t,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,r.defaultSearchParams&&this.resolver.setDefaultSearchParams(r.defaultSearchParams),r.basePath&&(this.resolver.basePath=r.basePath),r.bundleIdentifier&&this.resolver.setBundleIdentifier(r.bundleIdentifier),r.manifest){let e=r.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const i=null!==(e=null===(t=r.texturePreference)||void 0===t?void 0:t.resolution)&&void 0!==e?e:1,o="number"==typeof i?[i]:i,s=await this._detectFormats({preferredFormats:null===(n=r.texturePreference)||void 0===n?void 0:n.format,skipDetections:r.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:o}}),r.preferences&&this.setPreferences(r.preferences)}add(e,t,n,r,i){this.resolver.add(e,t,n,r,i)}async load(e,t){this._initialized||await this.init();const n=$i(e),r=Yi(e).map((e=>{if("string"!=typeof e){const t=this.resolver.getAlias(e);return t.some((e=>!this.resolver.hasKey(e)))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e})),i=this.resolver.resolve(r),o=await this._mapLoadToResolve(i,t);return n?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;"string"==typeof e&&(n=!0,e=[e]);const r=this.resolver.resolveBundle(e),i={},o=Object.keys(r);let s=0,a=0;const l=()=>{null===t||void 0===t||t(++s/a)},c=o.map((e=>{const t=r[e];return a+=Object.keys(t).length,this._mapLoadToResolve(t,l).then((t=>{i[e]=t}))}));return await Promise.all(c),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach((e=>{this._backgroundLoader.add(Object.values(e))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Ki.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=Ki.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),r=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach(((e,t)=>{const n=i[e.src],s=[e.src];e.alias&&s.push(...e.alias),o[r[t]]=n,Ki.set(s,n)})),o}async unload(e){this._initialized||await this.init();const t=Yi(e).map((e=>"string"!=typeof e?e.src:e)),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Yi(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map((e=>this._unloadFromResolved(t[e])));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach((e=>{Ki.remove(e.src)})),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter(((e,n)=>t.indexOf(e)===n)),t}get detections(){return this._detections}get preferWorkers(){return yo.config.preferWorkers}set preferWorkers(e){re("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach((t=>{t.config&&Object.keys(t.config).filter((t=>t in e)).forEach((n=>{t.config[n]=e[n]}))}))}};ct.handleByList(st.LoadParser,To.loader.parsers).handleByList(st.ResolveParser,To.resolver.parsers).handleByList(st.CacheParser,To.cache.parsers).handleByList(st.DetectionParser,To.detections);const Co={extension:st.CacheParser,test:e=>Array.isArray(e)&&e.every((e=>e instanceof zn)),getCacheableAssets:(e,t)=>{const n={};return e.forEach((e=>{t.forEach(((t,r)=>{n[e+(0===r?"":r+1)]=t}))})),n}};async function Po(e){if("Image"in globalThis)return new Promise((t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e}));if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}ct.add(Co);const Ro={extension:{type:st.DetectionParser,priority:1},test:async()=>Po("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter((e=>"avif"!==e))};ct.add(Ro);const Io={extension:{type:st.DetectionParser,priority:0},test:async()=>Po("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter((e=>"webp"!==e))};ct.add(Io);const Mo=["png","jpg","jpeg"],Oo={extension:{type:st.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Mo],remove:async e=>e.filter((e=>!Mo.includes(e)))};ct.add(Oo);const ko="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Lo(e){return!ko&&""!==document.createElement("video").canPlayType(e)}const Do={extension:{type:st.DetectionParser,priority:0},test:async()=>Lo("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter((e=>"webm"!==e))};ct.add(Do);const No={extension:{type:st.DetectionParser,priority:0},test:async()=>Lo("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter((e=>"mp4"!==e&&"m4v"!==e))};ct.add(No);const Bo={extension:{type:st.DetectionParser,priority:0},test:async()=>Lo("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter((e=>"ogv"!==e))};ct.add(Bo);const Fo={extension:st.ResolveParser,test:yo.test,parse:e=>{var t,n;return{resolution:parseFloat(null!==(t=null===(n=L.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:se.extname(e).slice(1),src:e}}};ct.add(Fo);const Uo=(e,t)=>{const n=t.split("?")[1];return n&&(e+="?".concat(n)),e};var zo=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(zo||{});const Ho={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1};let jo,Vo;function Go(){Vo={s3tc:jo.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:jo.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:jo.getExtension("WEBGL_compressed_texture_etc"),etc1:jo.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:jo.getExtension("WEBGL_compressed_texture_pvrtc")||jo.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:jo.getExtension("WEBGL_compressed_texture_atc"),astc:jo.getExtension("WEBGL_compressed_texture_astc")}}const Wo={extension:{type:st.DetectionParser,priority:2},test:async()=>{const e=L.ADAPTER.createCanvas().getContext("webgl");return e?(jo=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{Vo||Go();const t=[];for(const n in Vo)Vo[n]&&t.push(n);return[...t,...e]},remove:async e=>(Vo||Go(),e.filter((e=>!(e in Vo))))};ct.add(Wo);class qo extends yt{constructor(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:1,height:1,autoLoad:!0};"string"==typeof e?(t=e,n=new Uint8Array):(t=null,n=e),super(n,r),this.origin=t,this.buffer=n?new ut(n):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==r.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load||(this._load=fetch(this.origin).then((e=>e.blob())).then((e=>e.arrayBuffer())).then((e=>(this.data=new Uint32Array(e),this.buffer=new ut(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)))),this._load}}class Xo extends qo{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=Xo._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||Xo._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error("".concat(this._extension," textures are not supported on the current machine"));if(!this._levelBuffers)return!1;r.pixelStorei(r.UNPACK_ALIGNMENT,4);for(let i=0,o=this.levels;i<o;i++){const{levelID:e,levelWidth:t,levelHeight:n,levelBuffer:o}=this._levelBuffers[i];r.compressedTexImage2D(r.TEXTURE_2D,e,this.format,t,n,0,o)}return!0}onBlobLoaded(){this._levelBuffers=Xo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,n,r,i,o,s){const a=new Array(n);let l=e.byteOffset,c=o,u=s,h=c+r-1&~(r-1),d=u+i-1&~(i-1),f=h*d*Ho[t];for(let p=0;p<n;p++)a[p]={levelID:p,levelWidth:n>1?c:h,levelHeight:n>1?u:d,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,c=c>>1||1,u=u>>1||1,h=c+r-1&~(r-1),d=u+i-1&~(i-1),f=h*d*Ho[t];return a}}const Yo=124,Ko=3,$o=4,Qo=7,Zo=19,Jo=2,es=0,ts=1,ns=2,rs=3,is={827611204:zo.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:zo.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:zo.COMPRESSED_RGBA_S3TC_DXT5_EXT},os={70:zo.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:zo.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:zo.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:zo.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:zo.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:zo.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:zo.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};const ss=[171,75,84,88,32,49,49,187,13,10,26,10],as=12,ls=16,cs=24,us=28,hs=36,ds=40,fs=44,ps=48,ms=52,gs=56,vs=60,ys=64,bs={[_.UNSIGNED_BYTE]:1,[_.UNSIGNED_SHORT]:2,[_.INT]:4,[_.UNSIGNED_INT]:4,[_.FLOAT]:4,[_.HALF_FLOAT]:8},xs={[b.RGBA]:4,[b.RGB]:3,[b.RG]:2,[b.RED]:1,[b.LUMINANCE]:1,[b.LUMINANCE_ALPHA]:2,[b.ALPHA]:1},_s={[_.UNSIGNED_SHORT_4_4_4_4]:2,[_.UNSIGNED_SHORT_5_5_5_1]:2,[_.UNSIGNED_SHORT_5_6_5]:2};function Ss(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new DataView(t);if(!function(e,t){for(let n=0;n<ss.length;n++)if(t.getUint8(n)!==ss[n])return console.error("".concat(e," is not a valid *.ktx file!")),!1;return!0}(e,r))return null;const i=67305985===r.getUint32(as,!0),o=r.getUint32(ls,i),s=r.getUint32(cs,i),a=r.getUint32(us,i),l=r.getUint32(hs,i),c=r.getUint32(ds,i)||1,u=r.getUint32(fs,i)||1,h=r.getUint32(ps,i)||1,d=r.getUint32(ms,i),f=r.getUint32(gs,i),p=r.getUint32(vs,i);if(0===c||1!==u)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");const m=l+3&-4,g=c+3&-4,v=new Array(h);let y,b=l*c;if(0===o&&(b=m*g),y=0!==o?bs[o]?bs[o]*xs[s]:_s[o]:Ho[a],void 0===y)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const x=n?function(e,t,n){const r=new Map;let i=0;for(;i<t;){const o=e.getUint32(ys+i,n),s=ys+i+4,a=3-(o+3)%4;if(0===o||o>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<o&&0!==e.getUint8(s+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=(new TextDecoder).decode(new Uint8Array(e.buffer,s,l)),u=new DataView(e.buffer,s+l+1,o-l-1);r.set(c,u),i+=4+o+a}return r}(r,p,i):null;let S=b*y,w=l,E=c,A=m,T=g,C=ys+p;for(let _=0;_<f;_++){const e=r.getUint32(C,i);let n=C+4;for(let r=0;r<h;r++){let e=v[r];e||(e=v[r]=new Array(f)),e[_]={levelID:_,levelWidth:f>1||0!==o?w:A,levelHeight:f>1||0!==o?E:T,levelBuffer:new Uint8Array(t,n,S)},n+=S}C+=e+4,C=C%4!==0?C+4-C%4:C,w=w>>1||1,E=E>>1||1,A=w+4-1&-4,T=E+4-1&-4,S=A*T*y}return 0!==o?{uncompressed:v.map((e=>{let t=e[0].levelBuffer,n=!1;return o===_.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===_.UNSIGNED_INT?(n=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===_.INT&&(n=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new yt(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:n?ws(s):s}})),kvData:x}:{compressed:v.map((e=>new Xo(null,{format:a,width:l,height:c,levels:f,levelBuffers:e}))),kvData:x}}function ws(e){switch(e){case b.RGBA:return b.RGBA_INTEGER;case b.RGB:return b.RGB_INTEGER;case b.RG:return b.RG_INTEGER;case b.RED:return b.RED_INTEGER;default:return e}}const Es={extension:{type:st.LoadParser,priority:Zi.High},name:"loadDDS",test:e=>Xi(e,".dds"),async load(e,t,n){const r=function(e){const t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,Yo/Uint32Array.BYTES_PER_ELEMENT),r=n[Ko],i=n[$o],o=n[Qo],s=new Uint32Array(e,Zo*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=s[1];if(4&a){const n=s[Jo];if(808540228!==n){const t=is[n],s=new Uint8Array(e,128);return[new Xo(s,{format:t,width:i,height:r,levels:o})]}const a=128,l=new Uint32Array(t.buffer,a,20/Uint32Array.BYTES_PER_ELEMENT),c=l[es],u=l[ts],h=l[ns],d=l[rs],f=os[c];if(void 0===f)throw new Error("DDSParser cannot parse texture data with DXGI format ".concat(c));if(4===h)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=148;if(1===d)p.push(new Uint8Array(e,m));else{const t=Ho[f];let n=0,s=i,a=r;for(let e=0;e<o;e++)n+=Math.max(1,s+3&-4)*Math.max(1,a+3&-4)*t,s>>>=1,a>>>=1;let l=m;for(let r=0;r<d;r++)p.push(new Uint8Array(e,l,n)),l+=n}return p.map((e=>new Xo(e,{format:f,width:i,height:r,levels:o})))}throw 64&a?new Error("DDSParser does not support uncompressed texture data."):512&a?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&a?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&a?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(await(await L.ADAPTER.fetch(e)).arrayBuffer()).map((r=>mo(new _t(r,{mipmap:A.OFF,alphaMode:T.NO_PREMULTIPLIED_ALPHA,resolution:ot(e),...t.data}),n,e)));return 1===r.length?r[0]:r},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};ct.add(Es);const As={extension:{type:st.LoadParser,priority:Zi.High},name:"loadKTX",test:e=>Xi(e,".ktx"),async load(e,t,n){const r=await(await L.ADAPTER.fetch(e)).arrayBuffer(),{compressed:i,uncompressed:o,kvData:s}=Ss(e,r),a=null!==i&&void 0!==i?i:o,l={mipmap:A.OFF,alphaMode:T.NO_PREMULTIPLIED_ALPHA,resolution:ot(e),...t.data},c=a.map((t=>{var r;a===o&&Object.assign(l,{type:t.type,format:t.format});const i=null!==(r=t.resource)&&void 0!==r?r:t,c=new _t(i,l);return c.ktxKeyValueData=s,mo(c,n,e)}));return 1===c.length?c[0]:c},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};ct.add(As);const Ts={extension:st.ResolveParser,test:e=>{const t=se.extname(e).slice(1);return["basis","ktx","dds"].includes(t)},parse:e=>{var t,n;const r=se.extname(e).slice(1);if("ktx"===r){var i,o;const t=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(t.some((t=>e.endsWith(t))))return{resolution:parseFloat(null!==(i=null===(o=L.RETINA_PREFIX.exec(e))||void 0===o?void 0:o[1])&&void 0!==i?i:"1"),format:t.find((t=>e.endsWith(t))),src:e}}return{resolution:parseFloat(null!==(t=null===(n=L.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:r,src:e}}};ct.add(Ts);const Cs=new Ft,Ps=class e{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=null===(e=this.renderer)||void 0===e?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(e,t,n,r){const i=new Image;return i.src=await this.base64(e,t,n,r),i}async base64(e,t,n,r){const i=this.canvas(e,r);if(void 0!==i.toBlob)return new Promise(((e,r)=>{i.toBlob((t=>{if(!t)return void r(new Error("ICanvas.toBlob failed!"));const n=new FileReader;n.onload=()=>e(n.result),n.onerror=r,n.readAsDataURL(t)}),t,n)}));if(void 0!==i.toDataURL)return i.toDataURL(t,n);if(void 0!==i.convertToBlob){const e=await i.convertToBlob({type:t,quality:n});return new Promise(((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,n){const{pixels:r,width:i,height:o,flipY:s,premultipliedAlpha:a}=this._rawPixels(t,n);s&&e._flipY(r,i,o),a&&e._unpremultiplyAlpha(r);const l=new tt(i,o,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,o);return l.context.putImageData(c,0,0),l.canvas}pixels(t,n){const{pixels:r,width:i,height:o,flipY:s,premultipliedAlpha:a}=this._rawPixels(t,n);return s&&e._flipY(r,i,o),a&&e._unpremultiplyAlpha(r),r}_rawPixels(e,t){var n;const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,o,s=!1,a=!1,l=!1;e&&(e instanceof Hn?o=e:(o=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),l=!0,t&&(Cs.width=t.width,Cs.height=t.height,t=Cs)));const c=r.gl;var u;if(o){if(i=o.baseTexture.resolution,t=null!==(u=t)&&void 0!==u?u:o.frame,s=!1,a=o.baseTexture.alphaMode>0&&o.baseTexture.format===b.RGBA,!l){r.renderTexture.bind(o);const e=o.framebuffer.glFramebuffers[r.CONTEXT_UID];e.blitFramebuffer&&r.framebuffer.bind(e.blitFramebuffer)}}else i=r.resolution,t||((t=Cs).width=r.width/i,t.height=r.height/i),s=!0,a=this._rendererPremultipliedAlpha,r.renderTexture.bind();const h=Math.max(Math.round(t.width*i),1),d=Math.max(Math.round(t.height*i),1),f=new Uint8Array(4*h*d);return c.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,d,c.RGBA,c.UNSIGNED_BYTE,f),l&&null!==(n=o)&&void 0!==n&&n.destroy(!0),{pixels:f,width:h,height:d,flipY:s,premultipliedAlpha:a}}destroy(){this.renderer=null}static _flipY(e,t,n){const r=t<<2,i=n>>1,o=new Uint8Array(r);for(let s=0;s<i;s++){const t=s*r,i=(n-s-1)*r;o.set(e.subarray(t,t+r)),e.copyWithin(t,i,i+r),e.set(o,i)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const t=e[n+3];if(0!==t){const r=255.001/t;e[n]=e[n]*r+.5,e[n+1]=e[n+1]*r+.5,e[n+2]=e[n+2]*r+.5}}}};Ps.extension={name:"extract",type:st.RendererSystem};let Rs=Ps;ct.add(Rs);const Is={build(e){const t=e.points;let n,r,i,o,s,a;if(e.type===Dt.CIRC){const t=e.shape;n=t.x,r=t.y,s=a=t.radius,i=o=0}else if(e.type===Dt.ELIP){const t=e.shape;n=t.x,r=t.y,s=t.width,a=t.height,i=o=0}else{const t=e.shape,l=t.width/2,c=t.height/2;n=t.x+l,r=t.y+c,s=a=Math.max(0,Math.min(t.radius,Math.min(l,c))),i=l-s,o=c-a}if(!(s>=0&&a>=0&&i>=0&&o>=0))return void(t.length=0);const l=Math.ceil(2.3*Math.sqrt(s+a)),c=8*l+(i?4:0)+(o?4:0);if(t.length=c,0===c)return;if(0===l)return t.length=8,t[0]=t[6]=n+i,t[1]=t[3]=r+o,t[2]=t[4]=n-i,void(t[5]=t[7]=r-o);let u=0,h=4*l+(i?2:0)+2,d=h,f=c;{const e=i+s,a=o,l=n+e,c=n-e,p=r+a;if(t[u++]=l,t[u++]=p,t[--h]=p,t[--h]=c,o){const e=r-a;t[d++]=c,t[d++]=e,t[--f]=e,t[--f]=l}}for(let p=1;p<l;p++){const e=Math.PI/2*(p/l),c=i+Math.cos(e)*s,m=o+Math.sin(e)*a,g=n+c,v=n-c,y=r+m,b=r-m;t[u++]=g,t[u++]=y,t[--h]=y,t[--h]=v,t[d++]=v,t[d++]=b,t[--f]=b,t[--f]=g}{const e=o+a,s=n+i,l=n-i,c=r+e,h=r-e;t[u++]=s,t[u++]=c,t[--f]=h,t[--f]=s,i&&(t[u++]=l,t[u++]=c,t[--f]=h,t[--f]=l)}},triangulate(e,t){const n=e.points,r=t.points,i=t.indices;if(0===n.length)return;let o=r.length/2;const s=o;let a,l;if(e.type!==Dt.RREC){const t=e.shape;a=t.x,l=t.y}else{const t=e.shape;a=t.x+t.width/2,l=t.y+t.height/2}const c=e.matrix;r.push(e.matrix?c.a*a+c.c*l+c.tx:a,e.matrix?c.b*a+c.d*l+c.ty:l),o++,r.push(n[0],n[1]);for(let u=2;u<n.length;u+=2)r.push(n[u],n[u+1]),i.push(o++,s,o);i.push(s+1,s,o)}};function Ms(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.length;if(n<6)return;let r=0;for(let i=0,o=e[n-2],s=e[n-1];i<n;i+=2){const t=e[i],n=e[i+1];r+=(t-o)*(n+s),o=t,s=n}if(!t&&r>0||t&&r<=0){const t=n/2;for(let r=t+t%2;r<n;r+=2){const t=n-r-2,i=n-r-1,o=r,s=r+1;[e[t],e[o]]=[e[o],e[t]],[e[i],e[s]]=[e[s],e[i]]}}}const Os={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let n=e.points;const r=e.holes,i=t.points,o=t.indices;if(n.length>=6){Ms(n,!1);const e=[];for(let i=0;i<r.length;i++){const t=r[i];Ms(t.points,!0),e.push(n.length/2),n=n.concat(t.points)}const t=te(n,e,2);if(!t)return;const s=i.length/2;for(let n=0;n<t.length;n+=3)o.push(t[n]+s),o.push(t[n+1]+s),o.push(t[n+2]+s);for(let r=0;r<n.length;r++)i.push(n[r])}}},ks={build(e){const t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,s=e.points;s.length=0,i>=0&&o>=0&&s.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate(e,t){const n=e.points,r=t.points;if(0===n.length)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Ls={build(e){Is.build(e)},triangulate(e,t){Is.triangulate(e,t)}};var Ds=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ds||{}),Ns=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Ns||{});const Bs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(!this.adaptive||!e||isNaN(e))return t;let n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class Fs{static curveTo(e,t,n,r,i,o){const s=o[o.length-2],a=o[o.length-1]-t,l=s-e,c=r-t,u=n-e,h=Math.abs(a*u-l*c);if(h<1e-8||0===i)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const d=a*a+l*l,f=c*c+u*u,p=a*c+l*u,m=i*Math.sqrt(d)/h,g=i*Math.sqrt(f)/h,v=m*p/d,y=g*p/f,b=m*u+g*l,x=m*c+g*a,_=l*(g+v),S=a*(g+v),w=u*(m+y),E=c*(m+y);return{cx:b+e,cy:x+t,radius:i,startAngle:Math.atan2(S-x,_-b),endAngle:Math.atan2(E-x,w-b),anticlockwise:l*c>u*a}}static arc(e,t,n,r,i,o,s,a,l){const c=s-o,u=Bs._segmentsCount(Math.abs(c)*i,40*Math.ceil(Math.abs(c)/Ot)),h=c/(2*u),d=2*h,f=Math.cos(h),p=Math.sin(h),m=u-1,g=m%1/m;for(let v=0;v<=m;++v){const e=h+o+d*(v+g*v),t=Math.cos(e),s=-Math.sin(e);l.push((f*t+p*s)*i+n,(f*-s+p*t)*i+r)}}}class Us{static curveLength(e,t,n,r,i,o,s,a){let l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,b=e,x=t;for(let _=1;_<=10;++_)c=_/10,u=c*c,h=u*c,d=1-c,f=d*d,p=f*d,m=p*e+3*f*c*n+3*d*u*i+h*s,g=p*t+3*f*c*r+3*d*u*o+h*a,v=b-m,y=x-g,b=m,x=g,l+=Math.sqrt(v*v+y*y);return l}static curveTo(e,t,n,r,i,o,s){const a=s[s.length-2],l=s[s.length-1];s.length-=2;const c=Bs._segmentsCount(Us.curveLength(a,l,e,t,n,r,i,o));let u=0,h=0,d=0,f=0,p=0;s.push(a,l);for(let m=1,g=0;m<=c;++m)g=m/c,u=1-g,h=u*u,d=h*u,f=g*g,p=f*g,s.push(d*a+3*h*g*e+3*u*f*n+p*i,d*l+3*h*g*t+3*u*f*r+p*o)}}function zs(e,t,n,r,i,o,s,a){let l,c;s?(l=r,c=-n):(l=-r,c=n);const u=e-n*i+l,h=t-r*i+c,d=e+n*o+l,f=t+r*o+c;return a.push(u,h,d,f),2}function Hs(e,t,n,r,i,o,s,a){const l=n-e,c=r-t;let u=Math.atan2(l,c),h=Math.atan2(i-e,o-t);a&&u<h?u+=2*Math.PI:!a&&u>h&&(h+=2*Math.PI);let d=u;const f=h-u,p=Math.abs(f),m=Math.sqrt(l*l+c*c),g=1+(15*p*Math.sqrt(m)/Math.PI>>0),v=f/g;if(d+=v,a){s.push(e,t,n,r);for(let n=1,r=d;n<g;n++,r+=v)s.push(e,t,e+Math.sin(r)*m,t+Math.cos(r)*m);s.push(e,t,i,o)}else{s.push(n,r,e,t);for(let n=1,r=d;n<g;n++,r+=v)s.push(e+Math.sin(r)*m,t+Math.cos(r)*m,e,t);s.push(i,o,e,t)}return 2*g}function js(e,t){e.lineStyle.native?function(e,t){let n=0;const r=e.shape,i=e.points||r.points,o=r.type!==Dt.POLY||r.closeStroke;if(0===i.length)return;const s=t.points,a=t.indices,l=i.length/2,c=s.length/2;let u=c;for(s.push(i[0],i[1]),n=1;n<l;n++)s.push(i[2*n],i[2*n+1]),a.push(u,u+1),u++;o&&a.push(u,c)}(e,t):function(e,t){const n=e.shape;let r=e.points||n.points.slice();const i=t.closePointEps;if(0===r.length)return;const o=e.lineStyle,s=new Nt(r[0],r[1]),a=new Nt(r[r.length-2],r[r.length-1]),l=n.type!==Dt.POLY||n.closeStroke,c=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const e=.5*(s.x+a.x),t=.5*(a.y+s.y);r.unshift(e,t),r.push(e,t)}const u=t.points,h=r.length/2;let d=r.length;const f=u.length/2,p=o.width/2,m=p*p,g=o.miterLimit*o.miterLimit;let v=r[0],y=r[1],b=r[2],x=r[3],_=0,S=0,w=-(y-x),E=v-b,A=0,T=0,C=Math.sqrt(w*w+E*E);w/=C,E/=C,w*=p,E*=p;const P=o.alignment,R=2*(1-P),I=2*P;l||(o.cap===Ns.ROUND?d+=Hs(v-w*(R-I)*.5,y-E*(R-I)*.5,v-w*R,y-E*R,v+w*I,y+E*I,u,!0)+2:o.cap===Ns.SQUARE&&(d+=zs(v,y,w,E,R,I,!0,u))),u.push(v-w*R,y-E*R,v+w*I,y+E*I);for(let k=1;k<h-1;++k){v=r[2*(k-1)],y=r[2*(k-1)+1],b=r[2*k],x=r[2*k+1],_=r[2*(k+1)],S=r[2*(k+1)+1],w=-(y-x),E=v-b,C=Math.sqrt(w*w+E*E),w/=C,E/=C,w*=p,E*=p,A=-(x-S),T=b-_,C=Math.sqrt(A*A+T*T),A/=C,T/=C,A*=p,T*=p;const e=b-v,t=y-x,n=b-_,i=S-x,s=e*n+t*i,a=t*n-i*e,l=a<0;if(Math.abs(a)<.001*Math.abs(s)){u.push(b-w*R,x-E*R,b+w*I,x+E*I),s>=0&&(o.join===Ds.ROUND?d+=Hs(b,x,b-w*R,x-E*R,b-A*R,x-T*R,u,!1)+4:d+=2,u.push(b-A*I,x-T*I,b+A*R,x+T*R));continue}const c=(-w+v)*(-E+x)-(-w+b)*(-E+y),h=(-A+_)*(-T+x)-(-A+b)*(-T+S),f=(e*h-n*c)/a,P=(i*c-t*h)/a,M=(f-b)*(f-b)+(P-x)*(P-x),O=b+(f-b)*R,L=x+(P-x)*R,D=b-(f-b)*I,N=x-(P-x)*I,B=l?R:I,F=M<=Math.min(e*e+t*t,n*n+i*i)+B*B*m;let U=o.join;if(U===Ds.MITER&&M/m>g&&(U=Ds.BEVEL),F)switch(U){case Ds.MITER:u.push(O,L,D,N);break;case Ds.BEVEL:l?u.push(O,L,b+w*I,x+E*I,O,L,b+A*I,x+T*I):u.push(b-w*R,x-E*R,D,N,b-A*R,x-T*R,D,N),d+=2;break;case Ds.ROUND:l?(u.push(O,L,b+w*I,x+E*I),d+=Hs(b,x,b+w*I,x+E*I,b+A*I,x+T*I,u,!0)+4,u.push(O,L,b+A*I,x+T*I)):(u.push(b-w*R,x-E*R,D,N),d+=Hs(b,x,b-w*R,x-E*R,b-A*R,x-T*R,u,!1)+4,u.push(b-A*R,x-T*R,D,N))}else{switch(u.push(b-w*R,x-E*R,b+w*I,x+E*I),U){case Ds.MITER:l?u.push(D,N,D,N):u.push(O,L,O,L),d+=2;break;case Ds.ROUND:d+=l?Hs(b,x,b+w*I,x+E*I,b+A*I,x+T*I,u,!0)+2:Hs(b,x,b-w*R,x-E*R,b-A*R,x-T*R,u,!1)+2}u.push(b-A*R,x-T*R,b+A*I,x+T*I),d+=2}}v=r[2*(h-2)],y=r[2*(h-2)+1],b=r[2*(h-1)],x=r[2*(h-1)+1],w=-(y-x),E=v-b,C=Math.sqrt(w*w+E*E),w/=C,E/=C,w*=p,E*=p,u.push(b-w*R,x-E*R,b+w*I,x+E*I),l||(o.cap===Ns.ROUND?d+=Hs(b-w*(R-I)*.5,x-E*(R-I)*.5,b-w*R,x-E*R,b+w*I,x+E*I,u,!1)+2:o.cap===Ns.SQUARE&&(d+=zs(b,x,w,E,R,I,!1,u)));const M=t.indices,O=Bs.epsilon*Bs.epsilon;for(let k=f;k<d+f-2;++k)v=u[2*k],y=u[2*k+1],b=u[2*(k+1)],x=u[2*(k+1)+1],_=u[2*(k+2)],S=u[2*(k+2)+1],!(Math.abs(v*(x-S)+b*(S-y)+_*(y-x))<O)&&M.push(k,k+1,k+2)}(e,t)}class Vs{static curveLength(e,t,n,r,i,o){const s=e-2*n+i,a=t-2*r+o,l=2*n-2*e,c=2*r-2*t,u=4*(s*s+a*a),h=4*(s*l+a*c),d=l*l+c*c,f=2*Math.sqrt(u+h+d),p=Math.sqrt(u),m=2*u*p,g=2*Math.sqrt(d),v=h/p;return(m*f+p*h*(f-g)+(4*d*u-h*h)*Math.log((2*p+v+f)/(v+g)))/(4*m)}static curveTo(e,t,n,r,i){const o=i[i.length-2],s=i[i.length-1],a=Bs._segmentsCount(Vs.curveLength(o,s,e,t,n,r));let l=0,c=0;for(let u=1;u<=a;++u){const h=u/a;l=o+(e-o)*h,c=s+(t-s)*h,i.push(l+(e+(n-e)*h-l)*h,c+(t+(r-t)*h-c)*h)}}}const Gs={[Dt.POLY]:Os,[Dt.CIRC]:Is,[Dt.ELIP]:Is,[Dt.RECT]:ks,[Dt.RREC]:Ls},Ws=[],qs=[];class Xs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type}clone(){return new Xs(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class Ys{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Ks=new Nt,$s=class e extends Mt{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ui,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),qs.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Ws.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e){const t=new Xs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return this.graphicsData.push(t),this.dirty++,this}drawHole(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.graphicsData.length)return null;const n=new Xs(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,Ks):Ks.copyFrom(e),r.shape.contains(Ks.x,Ks.y))){let e=!1;if(r.holes)for(let t=0;t<r.holes.length;t++)if(r.holes[t].shape.contains(Ks.x,Ks.y)){e=!0;break}if(!e)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const i=t[a],o=i.fillStyle,s=i.lineStyle;Gs[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix),(o.visible||s.visible)&&this.processHoles(i.holes);for(let t=0;t<2;t++){const a=0===t?o:s;if(!a.visible)continue;const l=a.texture.baseTexture,c=this.indices.length,u=this.points.length/2;l.wrapMode=E.REPEAT,0===t?this.processFill(i):this.processLine(i);const h=this.points.length/2-u;0!==h&&(n&&!this._compareStyles(r,a)&&(n.end(c,u),n=null),n||(n=Ws.pop()||new Ys,n.begin(a,c,u),this.batches.push(n),r=a),this.addUvs(this.points,e,a.texture,u,h,a.matrix))}}const i=this.indices.length,o=this.points.length/2;if(n&&n.end(i,o),0===this.batches.length)return void(this.batchable=!0);const s=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&s===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=s?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const t=this.graphicsData[e],n=t.fillStyle,r=t.lineStyle;if(n&&!n.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const n=e[t];for(let e=0;e<n.size;e++){const t=n.start+e;this.indicesUint16[t]=this.indicesUint16[t]-n.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE}buildDrawCalls(){let e=++_t._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),qs.push(this.drawCalls[u]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let r=qs.pop();r||(r=new St,r.texArray=new wn),r.texArray.count=0,r.start=0,r.size=0,r.type=y.TRIANGLES;let i=0,o=null,s=0,a=!1,l=y.TRIANGLES,c=0;this.drawCalls.push(r);for(let u=0;u<this.batches.length;u++){const h=this.batches[u],d=8,f=h.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?y.LINES:y.TRIANGLES,o=null,i=d,e++),o!==p&&(o=p,p._batchEnabled!==e&&(i===d&&(e++,i=0,r.size>0&&(r=qs.pop(),r||(r=new St,r.texArray=new wn),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=i,p.wrapMode=E.REPEAT,r.texArray.elements[r.texArray.count++]=p,i++)),r.size+=h.size,c+=h.size,s=p._batchLocation,this.addColors(t,f.color,f.alpha,h.attribSize,h.attribStart),this.addTextureIds(n,s,h.attribSize,h.attribStart)}_t._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),o=new Float32Array(i),s=new Uint32Array(i);let a=0;for(let l=0;l<e.length/2;l++)o[a++]=e[2*l],o[a++]=e[2*l+1],o[a++]=t[2*l],o[a++]=t[2*l+1],s[a++]=n[l],o[a++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Os.triangulate(e,this):Gs[e.type].triangulate(e,this)}processLine(e){js(e,this);for(let t=0;t<e.holes.length;t++)js(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];Gs[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}}addColors(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=Ue.shared.setValue(t).toLittleEndianNumber(),s=Ue.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,i+r);for(let a=0;a<r;a++)e[i+a]=s}addTextureIds(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.length=Math.max(e.length,r+n);for(let i=0;i<n;i++)e[r+i]=t}addUvs(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=0;const a=t.length,l=n.frame;for(;s<i;){let n=e[2*(r+s)],i=e[2*(r+s)+1];if(o){const e=o.a*n+o.c*i+o.tx;i=o.b*n+o.d*i+o.ty,n=e}s++,t.push(n/l.width,i/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(t,n,a,i)}adjustUvs(e,t,n,r){const i=t.baseTexture,o=1e-6,s=n+2*r,a=t.frame,l=a.width/i.width,c=a.height/i.height;let u=a.x/a.width,h=a.y/a.height,d=Math.floor(e[n]+o),f=Math.floor(e[n+1]+o);for(let p=n+2;p<s;p+=2)d=Math.min(d,Math.floor(e[p]+o)),f=Math.min(f,Math.floor(e[p+1]+o));u-=d,h-=f;for(let p=n;p<s;p+=2)e[p]=(e[p]+u)*l,e[p+1]=(e[p+1]+h)*c}};$s.BATCHABLE_SIZE=100;let Qs=$s;class Zs{constructor(){this.color=16777215,this.alpha=1,this.texture=zn.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Zs;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=zn.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Js extends Zs{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ns.BUTT,this.join=Ds.MITER,this.miterLimit=10}clone(){const e=new Js;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ns.BUTT,this.join=Ds.MITER,this.miterLimit=10}}const ea={},ta=class e extends gi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Zs,this._lineStyle=new Js,this._matrix=null,this._holeMode=!1,this.state=ft.for2d(),this._geometry=e||new Qs,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Ue(16777215),this.blendMode=v.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new e(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"number"==typeof e&&(e={width:e,color:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,alpha:arguments.length>2?arguments[2]:void 0,alignment:arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,native:arguments.length>4&&void 0!==arguments[4]&&arguments[4]}),this.lineTextureStyle(e)}lineTextureStyle(e){var t;const n={width:0,texture:zn.WHITE,color:null!==(t=e)&&void 0!==t&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ns.BUTT,join:Ds.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Ht,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Ht,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return(r!==e||i!==t)&&n.push(e,t),this}_initCurve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,r){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Vs.curveTo(e,t,n,r,i),this}bezierCurveTo(e,t,n,r,i,o){return this._initCurve(),Us.curveTo(e,t,n,r,i,o,this.currentPath.points),this}arcTo(e,t,n,r,i){this._initCurve(e,t);const o=this.currentPath.points,s=Fs.curveTo(e,t,n,r,i,o);if(s){const{cx:e,cy:t,radius:n,startAngle:r,endAngle:i,anticlockwise:o}=s;this.arc(e,t,n,r,i,o)}return this}arc(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;if(!o&&i<=r?i+=Ot:o&&r<=i&&(r+=Ot),i-r===0)return this;const s=e+Math.cos(r)*n,a=t+Math.sin(r)*n,l=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const e=Math.abs(c[c.length-2]-s),t=Math.abs(c[c.length-1]-a);e<l&&t<l||c.push(s,a)}else this.moveTo(s,a),c=this.currentPath.points;return Fs.arc(s,a,e,t,n,r,i,o,c),this}beginFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.beginTextureFill({texture:zn.WHITE,color:e,alpha:t})}normalizeColor(e){var t,n;const r=Ue.shared.setValue(null!==(t=e.color)&&void 0!==t?t:0);e.color=r.toNumber(),null!==(n=e.alpha)&&void 0!==n||(e.alpha=r.alpha)}beginTextureFill(e){const t={texture:zn.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,r){return this.drawShape(new Ft(e,t,n,r))}drawRoundedRect(e,t,n,r,i){return this.drawShape(new jt(e,t,n,r,i))}drawCircle(e,t,n){return this.drawShape(new Ut(e,t,n))}drawEllipse(e,t,n,r){return this.drawShape(new zt(e,t,n,r))}drawPolygon(){let e,t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r[0];o.points?(t=o.closeStroke,e=o.points):e=Array.isArray(r[0])?r[0]:r;const s=new Ht(e);return s.closeStroke=t,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===Dt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let r=0;r<n;r++){const n=e.batches[r],i=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),a={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*n.start,n.size),uvs:s,_batchRGB:Ue.shared.setValue(i).toRgbArray(),_tintRGB:i,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=a}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,r=this.worldAlpha,i=t.uniforms,o=n.drawCalls;i.translationMatrix=this.transform.worldTransform,Ue.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let s=0,a=o.length;s<a;s++)this._renderDrawCallDirect(e,n.drawCalls[s])}_renderDrawCallDirect(e,t){const{texArray:n,type:r,size:i,start:o}=t,s=n.count;for(let a=0;a<s;a++)e.texture.bind(n.elements[a],a);e.geometry.draw(r,i,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!ea[n]){const{maxTextures:t}=e.plugins[n],r=new Int32Array(t);for(let e=0;e<t;e++)r[e]=e;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Vt,default:xn.from({uSamplers:r},!0)},o=e.plugins[n]._shader.program;ea[n]=new _n(o,i)}t=ea[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:r,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,n,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Ue.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=this._geometry.points,c=this.vertexData;let u=0;for(let h=0;h<l.length;h+=2){const e=l[h],t=l[h+1];c[u++]=n*e+i*t+s,c[u++]=o*t+r*e+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};ta.curves=Bs,ta._TEMP_POINT=new Nt;let na=ta;class ra{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ia=new Nt,oa=new Ht,sa=class e extends gi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y.TRIANGLES;super(),this.geometry=e,this.shader=t,this.state=n||ft.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=L.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(t){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===y.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,c=r.ty,u=this.vertexData;for(let h=0;h<u.length/2;h++){const e=t[2*h],n=t[2*h+1];u[2*h]=i*e+s*n+l,u[2*h+1]=o*e+a*n+c}if(this._roundPixels){const e=L.RESOLUTION;for(let t=0;t<u.length;++t)u[t]=Math.round(u[t]*e)/e}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new ra(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ia);const t=this.geometry.getBuffer("aVertexPosition").data,n=oa.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1;for(let s=0;s+2<i;s+=o){const e=2*r[s],i=2*r[s+1],o=2*r[s+2];if(n[0]=t[e],n[1]=t[e+1],n[2]=t[i],n[3]=t[i+1],n[4]=t[o],n[5]=t[o+1],oa.contains(ia.x,ia.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};sa.BATCHABLE_SIZE=100;let aa=sa;class la extends It{constructor(e,t,n){super();const r=new Et(e),i=new Et(t,!0),o=new Et(n,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,_.FLOAT).addAttribute("aTextureCoord",i,2,!1,_.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class ca extends _n{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:Vt.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(n,t.uniforms),super(t.program||yn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n),this._colorDirty=!1,this.uvMatrix=new tr(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this._tintColor=new Ue(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Ue.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ua{constructor(e,t,n){this.geometry=new It,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let n=e[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||_.FLOAT,offset:n.offset},t[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new Et(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=6*e;if(t=t||new Uint16Array(n),t.length!==n)throw new Error("Out buffer length is incorrect, got ".concat(t.length," and expected ").concat(n));for(let r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const e=this.dynamicProperties[o];e.offset=t,t+=e.size,this.dynamicStride+=e.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Et(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const e=this.staticProperties[o];e.offset=r,r+=e.size,this.staticStride+=e.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new Et(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const t=this.dynamicProperties[o];e.addAttribute(t.attributeName,this.dynamicBuffer,0,t.type===_.UNSIGNED_BYTE,t.type,4*this.dynamicStride,4*t.offset)}for(let o=0;o<this.staticProperties.length;++o){const t=this.staticProperties[o];e.addAttribute(t.attributeName,this.staticBuffer,0,t.type===_.UNSIGNED_BYTE,t.type,4*this.staticStride,4*t.offset)}}uploadDynamic(e,t,n){for(let r=0;r<this.dynamicProperties.length;r++){const i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===_.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let r=0;r<this.staticProperties.length;r++){const i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===_.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class ha extends En{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Vt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:_.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=_n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=ft.for2d()}render(e){const t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer;let o=t.length;if(0===o)return;o>n&&!e.autoResize&&(o=n);let s=e._buffers;s||(s=e._buffers=this.generateBuffers(e));const a=t[0]._texture.baseTexture,l=a.alphaMode>0;this.state.blendMode=He(e.blendMode,l),i.state.set(this.state);const c=i.gl,u=e.worldTransform.copyTo(this.tempMatrix);u.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Ue.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);let h=!1;for(let d=0,f=0;d<o;d+=r,f+=1){let n=o-d;n>r&&(n=r),f>=s.length&&s.push(this._generateOneMoreBuffer(e));const a=s[f];a.uploadDynamic(t,d,n);const l=e._bufferUpdateIDs[f]||0;h=h||a._updateID<l,h&&(a._updateID=e._updateID,a.uploadStatic(t,d,n)),i.geometry.bind(a.geometry),c.drawElements(c.TRIANGLES,6*n,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,r=e._batchSize,i=e._properties;for(let o=0;o<n;o+=r)t.push(new ua(this.properties,i,r));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new ua(this.properties,n,t)}uploadVertices(e,t,n,r,i,o){let s=0,a=0,l=0,c=0;for(let u=0;u<n;++u){const n=e[t+u],h=n._texture,d=n.scale.x,f=n.scale.y,p=h.trim,m=h.orig;p?(a=p.x-n.anchor.x*m.width,s=a+p.width,c=p.y-n.anchor.y*m.height,l=c+p.height):(s=m.width*(1-n.anchor.x),a=m.width*-n.anchor.x,l=m.height*(1-n.anchor.y),c=m.height*-n.anchor.y),r[o]=a*d,r[o+1]=c*f,r[o+i]=s*d,r[o+i+1]=c*f,r[o+2*i]=s*d,r[o+2*i+1]=l*f,r[o+3*i]=a*d,r[o+3*i+1]=l*f,o+=4*i}}uploadPosition(e,t,n,r,i,o){for(let s=0;s<n;s++){const n=e[t+s].position;r[o]=n.x,r[o+1]=n.y,r[o+i]=n.x,r[o+i+1]=n.y,r[o+2*i]=n.x,r[o+2*i+1]=n.y,r[o+3*i]=n.x,r[o+3*i+1]=n.y,o+=4*i}}uploadRotation(e,t,n,r,i,o){for(let s=0;s<n;s++){const n=e[t+s].rotation;r[o]=n,r[o+i]=n,r[o+2*i]=n,r[o+3*i]=n,o+=4*i}}uploadUvs(e,t,n,r,i,o){for(let s=0;s<n;++s){const n=e[t+s]._texture._uvs;n?(r[o]=n.x0,r[o+1]=n.y0,r[o+i]=n.x1,r[o+i+1]=n.y1,r[o+2*i]=n.x2,r[o+2*i+1]=n.y2,r[o+3*i]=n.x3,r[o+3*i+1]=n.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}}uploadTint(e,t,n,r,i,o){for(let s=0;s<n;++s){const n=e[t+s],a=Ue.shared.setValue(n._tintRGB).toPremultiplied(n.alpha,n.texture.baseTexture.alphaMode>0);r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ha.extension={name:"particle",type:st.RendererPlugin},ct.add(ha);var da=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(da||{});const fa={willReadFrequently:!0},pa=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(void 0!==t){const n=L.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(e,t,n,r,i,o,s,a,l){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,n,r){var i;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=null!==(i=r)&&void 0!==i?i:n.wordWrap;const s=n.toFontString(),a=e.measureFont(s);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);const l=o.getContext("2d",fa);l.font=s;const c=(r?e.wordWrap(t,n,o):t).split(/(?:\r\n|\r|\n)/),u=new Array(c.length);let h=0;for(let m=0;m<c.length;m++){const t=e._measureText(c[m],n.letterSpacing,l);u[m]=t,h=Math.max(h,t)}let d=h+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);const f=n.lineHeight||a.fontSize+n.strokeThickness;let p=Math.max(f,a.fontSize+2*n.strokeThickness)+n.leading+(c.length-1)*(f+n.leading);return n.dropShadow&&(p+=n.dropShadowDistance),new e(t,n,d,p,c,u,f+n.leading,h,a)}static _measureText(t,n,r){let i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing="".concat(n,"px"),r.textLetterSpacing="".concat(n,"px"),i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let o=r.measureText(t).width;return o>0&&(i?o-=n:o+=(e.graphemeSegmenter(t).length-1)*n),o}static wordWrap(t,n){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d",fa);let i=0,o="",s="";const a=Object.create(null),{letterSpacing:l,whiteSpace:c}=n,u=e.collapseSpaces(c),h=e.collapseNewlines(c);let d=!u;const f=n.wordWrapWidth+l,p=e.tokenize(t);for(let m=0;m<p.length;m++){let t=p[m];if(e.isNewline(t)){if(!h){s+=e.addLine(o),d=!u,o="",i=0;continue}t=" "}if(u){const n=e.isBreakingSpace(t),r=e.isBreakingSpace(o[o.length-1]);if(n&&r)continue}const c=e.getFromCache(t,l,a,r);if(c>f)if(""!==o&&(s+=e.addLine(o),o="",i=0),e.canBreakWords(t,n.breakWords)){const c=e.wordWrapSplit(t);for(let u=0;u<c.length;u++){let h=c[u],p=h,m=1;for(;c[u+m];){const r=c[u+m];if(e.canBreakChars(p,r,t,u,n.breakWords))break;h+=r,p=r,m++}u+=m-1;const g=e.getFromCache(h,l,a,r);g+i>f&&(s+=e.addLine(o),d=!1,o="",i=0),o+=h,i+=g}}else{o.length>0&&(s+=e.addLine(o),o="",i=0);const n=m===p.length-1;s+=e.addLine(t,!n),d=!1,o="",i=0}else c+i>f&&(d=!1,s+=e.addLine(o),o="",i=0),(o.length>0||!e.isBreakingSpace(t)||d)&&(o+=t,i+=c)}return s+=e.addLine(o,!1),s}static addLine(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=n?"".concat(t,"\n"):t}static getFromCache(t,n,r,i){let o=r[t];return"number"!=typeof o&&(o=e._measureText(t,n,i)+n,r[t]=o),o}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(t){if("string"!=typeof t)return"";for(let n=t.length-1;n>=0;n--){const r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&e._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return"string"==typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const n=[];let r="";if("string"!=typeof t)return n;for(let i=0;i<t.length;i++){const o=t[i],s=t[i+1];e.isBreakingSpace(o,s)||e.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,r,i){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];const n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;const o=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width);let a=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width);const l=Math.ceil(e.HEIGHT_MULTIPLIER*a);if(a=a*e.BASELINE_MULTIPLIER|0,0===s||0===l)return e._fonts[t]=n,n;r.width=s,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);const c=i.getImageData(0,0,s,l).data,u=c.length,h=4*s;let d=0,f=0,p=!1;for(d=0;d<a;++d){for(let e=0;e<h;e+=4)if(255!==c[f+e]){p=!0;break}if(p)break;f+=h}for(n.ascent=a-d,f=u-h,p=!1,d=l;d>a;--d){for(let e=0;e<h;e+=4)if(255!==c[f+e]){p=!0;break}if(p)break;f-=h}return n.descent=d-a,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n}static clearMetrics(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let n;try{var t;const r=new OffscreenCanvas(0,0);if(null!==(t=r.getContext("2d",fa))&&void 0!==t&&t.measureText)return e.__canvas=r,r;n=L.ADAPTER.createCanvas()}catch{n=L.ADAPTER.createCanvas()}n.width=n.height=10,e.__canvas=n}return e.__canvas}static get _context(){return e.__context||(e.__context=e._canvas.getContext("2d",fa)),e.__context}};pa.METRICS_STRING="|\xc9q\xc5",pa.BASELINE_SYMBOL="M",pa.BASELINE_MULTIPLIER=1.4,pa.HEIGHT_MULTIPLIER=2,pa.graphemeSegmenter=(e=>{if("function"==typeof(null===(e=Intl)||void 0===e?void 0:e.Segmenter)){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map((e=>e.segment))}return e=>[...e]})(),pa.experimentalLetterSpacing=!1,pa._fonts={},pa._newlines=[10,13],pa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let ma=pa;const ga=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],va=class e{constructor(e){this.styleID=0,this.reset(),xa(this,e,e)}clone(){const t={};return xa(t,this,e.defaultStyle),new e(t)}reset(){xa(this,e.defaultStyle,e.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=ba(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=ba(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=ba(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?"".concat(this.fontSize,"px"):this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let e=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(e)&&!ga.includes(e)&&(e='"'.concat(e,'"')),t[n]=e}return"".concat(this.fontStyle," ").concat(this.fontVariant," ").concat(this.fontWeight," ").concat(e," ").concat(t.join(","))}};va.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:da.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ya=va;function ba(e){const t=Ue.shared,n=e=>{const n=t.setValue(e);return 1===n.alpha?n.toHex():n.toRgbaString()};return Array.isArray(e)?e.map(n):n(e)}function xa(e,t,n){for(const r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}const _a={texture:!0,children:!1,baseTexture:!0},Sa=class e extends bi{constructor(t,n,r){var i;let o=!1;r||(r=L.ADAPTER.createCanvas(),o=!0),r.width=3,r.height=3;const s=zn.from(r);s.orig=new Ft,s.trim=new Ft,super(s),this._ownCanvas=o,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=null!==(i=e.defaultResolution)&&void 0!==i?i:L.RESOLUTION,this._autoResolution=e.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return ma.experimentalLetterSpacing}static set experimentalLetterSpacing(e){re("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ma.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,r=ma.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,s=r.lines,a=r.lineHeight,l=r.lineWidths,c=r.maxLineWidth,u=r.fontProperties;let h,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+2*t.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const e=t.dropShadow&&0===p,i=e?Math.ceil(Math.max(1,o)+2*t.padding):0,f=i*this._resolution;if(e){n.fillStyle="black",n.strokeStyle="black";const e=t.dropShadowColor,r=t.dropShadowBlur*this._resolution,i=t.dropShadowDistance*this._resolution;n.shadowColor=Ue.shared.setValue(e).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=r,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*i,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*i+f}else n.fillStyle=this._generateFillStyle(t,s,r),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let m=(a-u.fontSize)/2;a-u.fontSize<0&&(m=0);for(let n=0;n<s.length;n++)h=t.strokeThickness/2,d=t.strokeThickness/2+n*a+u.ascent+m,"right"===t.align?h+=c-l[n]:"center"===t.align&&(h+=(c-l[n])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[n],h+t.padding,d+t.padding-i,!0),t.fill&&this.drawLetterSpacing(s[n],h+t.padding,d+t.padding-i)}this.updateTexture()}drawLetterSpacing(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=this._style.letterSpacing;let o=!1;if(ma.experimentalLetterSpacingSupported&&(ma.experimentalLetterSpacing?(this.context.letterSpacing="".concat(i,"px"),this.context.textLetterSpacing="".concat(i,"px"),o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===i||o)return void(r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n));let s=t;const a=ma.graphemeSegmenter(e);let l=this.context.measureText(e).width,c=0;for(let u=0;u<a.length;++u){const e=a[u];r?this.context.strokeText(e,s,n):this.context.fillText(e,s,n);let t="";for(let n=u+1;n<a.length;++n)t+=a[n];c=this.context.measureText(t).width,s+=l-c+i,l=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const t=it(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}const t=this._texture,n=this._style,r=n.trim?0:n.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-2*r,t.orig.height=t._frame.height-2*r,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const r=e.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];let i;const o=e.dropShadow?e.dropShadowDistance:0,s=e.padding||0,a=this.canvas.width/this._resolution-o-2*s,l=this.canvas.height/this._resolution-o-2*s,c=r.slice(),u=e.fillGradientStops.slice();if(!u.length){const e=c.length+1;for(let t=1;t<e;++t)u.push(t/e)}if(c.unshift(r[0]),u.unshift(0),c.push(r[r.length-1]),u.push(1),e.fillGradientType===da.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,s,a/2,l+s);const r=n.fontProperties.fontSize+e.strokeThickness;for(let e=0;e<t.length;e++){const o=n.lineHeight*(e-1)+r,s=n.lineHeight*e;let a=s;e>0&&o>s&&(a=(s+o)/2);const h=s+r,d=n.lineHeight*(e+1);let f=h;e+1<t.length&&d<h&&(f=(h+d)/2);const p=(f-a)/l;for(let e=0;e<c.length;e++){let t=0;t="number"==typeof u[e]?u[e]:e/c.length;let n=Math.min(1,Math.max(0,a/l+t*p));n=Number(n.toFixed(5)),i.addColorStop(n,c[e])}}}else{i=this.context.createLinearGradient(s,l/2,a+s,l/2);const e=c.length+1;let t=1;for(let n=0;n<c.length;n++){let r;r="number"==typeof u[n]?u[n]:t/e,i.addColorStop(r,c[n]),t++}}return i}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},_a,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Xe(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Xe(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof ya?e:new ya(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){var t;e=String(null!==(t=e)&&void 0!==t?t:""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Sa.defaultAutoResolution=!0;let wa=Sa;class Ea{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Aa(e,t){var n;let r=!1;if(null!==e&&void 0!==e&&null!==(n=e._textures)&&void 0!==n&&n.length)for(let i=0;i<e._textures.length;i++)if(e._textures[i]instanceof zn){const n=e._textures[i].baseTexture;t.includes(n)||(t.push(n),r=!0)}return r}function Ta(e,t){if(e.baseTexture instanceof _t){const n=e.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function Ca(e,t){if(e._texture&&e._texture instanceof zn){const n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function Pa(e,t){return t instanceof wa&&(t.updateText(!0),!0)}function Ra(e,t){if(t instanceof ya){const e=t.toFontString();return ma.measureFont(e),!0}return!1}function Ia(e,t){if(e instanceof wa){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function Ma(e,t){return e instanceof ya&&(t.includes(e)||t.push(e),!0)}const Oa=class e{constructor(t){this.limiter=new Ea(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Ia),this.registerFindHook(Ma),this.registerFindHook(Aa),this.registerFindHook(Ta),this.registerFindHook(Ca),this.registerUploadHook(Pa),this.registerUploadHook(Ra)}upload(e){return new Promise((t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,qr.system.addOnce(this.tick,this,Vr.UTILITY))):t()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)qr.system.addOnce(this.tick,this,Vr.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof gi)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&qr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Oa.uploadsPerFrame=4;let ka=Oa;function La(e,t){return t instanceof _t&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Da(e,t){if(!(t instanceof na))return!1;const{geometry:n}=t;t.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:t}=r[i].style;t&&La(e,t.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Na(e,t){return e instanceof na&&(t.push(e),!0)}Object.defineProperties(L,{UPLOADS_PER_FRAME:{get:()=>ka.uploadsPerFrame,set(e){re("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ka.uploadsPerFrame=e}}});class Ba extends ka{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Na),this.registerUploadHook(La),this.registerUploadHook(Da)}}Ba.extension={name:"prepare",type:st.RendererSystem},ct.add(Ba);new Nt;var Fa="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Ua=new Vt;class za extends En{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Gn,this.state=ft.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=_n.from(Fa,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?_n.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):_n.from(Fa,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,n=this.quad;let r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=n.uvs,r[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();const s=e._texture,a=s.baseTexture,l=a.alphaMode>0,c=e.tileTransform.localTransform,u=e.uvMatrix;let h=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;h&&(a._glTextures[t.CONTEXT_UID]?h=a.wrapMode!==E.CLAMP:a.wrapMode===E.CLAMP&&(a.wrapMode=E.REPEAT));const d=h?this.simpleShader:this.shader,f=s.width,p=s.height,m=e._width,g=e._height;Ua.set(c.a*f/m,c.b*f/g,c.c*p/m,c.d*p/g,c.tx/m,c.ty/g),Ua.invert(),h?Ua.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=Ua.toArray(!0),d.uniforms.uColor=Ue.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=s,t.shader.bind(d),t.geometry.bind(n),this.state.blendMode=He(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}za.extension={name:"tilingSprite",type:st.RendererPlugin},ct.add(za);const Ha=class e{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.linkedSheets=[],this._texture=e instanceof zn?e:null,this.baseTexture=e instanceof _t?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{scale:t}=this.data.meta;let n=ot(e,null);return null===n&&(n="number"==typeof t?t:parseFloat(null!==t&&void 0!==t?t:"1")),1!==n&&this.baseTexture.setResolution(n),n}parse(){return new Promise((t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(t){let n=t;const r=e.BATCH_SIZE;for(;n-t<r&&n<this._frameKeys.length;){const e=this._frameKeys[n],t=this._frames[e],r=t.frame;if(r){let n=null,i=null;const o=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,s=new Ft(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);n=t.rotated?new Ft(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new Ft(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(i=new Ft(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[e]=new zn(this.baseTexture,n,s,i,t.rotated?2:0,t.anchor,t.borders),zn.addToCache(this.textures[e],e.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const r=e[t][n];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null!==(e=this._texture)&&void 0!==e&&e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Ha.BATCH_SIZE=1e3;let ja=Ha;const Va=["jpg","png","jpeg","avif","webp"];function Ga(e,t,n){const r={};if(e.forEach((e=>{r[e]=t})),Object.keys(t.textures).forEach((e=>{r[e]=t.textures[e]})),!n){const n=se.dirname(e[0]);t.linkedSheets.forEach(((e,i)=>{const o=Ga(["".concat(n,"/").concat(t.data.meta.related_multi_packs[i])],e,!0);Object.assign(r,o)}))}return r}const Wa={extension:st.Asset,cache:{test:e=>e instanceof ja,getCacheableAssets:(e,t)=>Ga(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),n=t.pop(),r=t.pop();return"json"===n&&Va.includes(r)},parse:e=>{var t,n;const r=e.split(".");return{resolution:parseFloat(null!==(t=null===(n=L.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:r[r.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:st.LoadParser,priority:Zi.Normal},testParse:async(e,t)=>".json"===se.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,n){var r;let i=se.dirname(t.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let o=i+e.meta.image;o=Uo(o,t.src);const s=(await n.load([o]))[o],a=new ja(s.baseTexture,e,t.src);await a.parse();const l=null===e||void 0===e||null===(r=e.meta)||void 0===r?void 0:r.related_multi_packs;if(Array.isArray(l)){const e=[];for(const o of l){var c;if("string"!=typeof o)continue;let r=i+o;(null===(c=t.data)||void 0===c?void 0:c.ignoreMultiPack)||(r=Uo(r,t.src),e.push(n.load({src:r,data:{ignoreMultiPack:!0}})))}const r=await Promise.all(e);a.linkedSheets=r,r.forEach((e=>{e.linkedSheets=[a].concat(a.linkedSheets.filter((t=>t!==e)))}))}return a},unload(e){e.destroy(!0)}}};ct.add(Wa);class qa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Xa{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in t){const e=t[i].match(/^[a-z]+/gm)[0],r=t[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(const t in r){const e=r[t].split("="),n=e[0],i=e[1].replace(/"/gm,""),s=parseFloat(i),a=isNaN(s)?i:s;o[n]=a}n[e].push(o)}const r=new qa;return n.info.forEach((e=>r.info.push({face:e.face,size:parseInt(e.size,10)}))),n.common.forEach((e=>r.common.push({lineHeight:parseInt(e.lineHeight,10)}))),n.page.forEach((e=>r.page.push({id:parseInt(e.id,10),file:e.file}))),n.char.forEach((e=>r.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)}))),n.kerning.forEach((e=>r.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)}))),n.distanceField.forEach((e=>r.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType}))),r}}class Ya{static test(e){const t=e;return"string"!=typeof e&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new qa,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),s=e.getElementsByTagName("kerning"),a=e.getElementsByTagName("distanceField");for(let l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(let l=0;l<r.length;l++)t.common.push({lineHeight:parseInt(r[l].getAttribute("lineHeight"),10)});for(let l=0;l<i.length;l++)t.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(let l=0;l<o.length;l++){const e=o[l];t.char.push({id:parseInt(e.getAttribute("id"),10),page:parseInt(e.getAttribute("page"),10)||0,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10),xoffset:parseInt(e.getAttribute("xoffset"),10),yoffset:parseInt(e.getAttribute("yoffset"),10),xadvance:parseInt(e.getAttribute("xadvance"),10)})}for(let l=0;l<s.length;l++)t.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(let l=0;l<a.length;l++)t.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return t}}class Ka{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&Ya.test(L.ADAPTER.parseXML(e))}static parse(e){return Ya.parse(L.ADAPTER.parseXML(e))}}const $a=[Xa,Ya,Ka];function Qa(e,t,n,r,i,o,s){const a=n.text,l=n.fontProperties;t.translate(r,i),t.scale(o,o);const c=s.strokeThickness/2,u=-s.strokeThickness/2;if(t.font=s.toFontString(),t.lineWidth=s.strokeThickness,t.textBaseline=s.textBaseline,t.lineJoin=s.lineJoin,t.miterLimit=s.miterLimit,t.fillStyle=function(e,t,n,r,i,o){const s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=e.width/r-l-2*c,h=e.height/r-l-2*c,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length){const e=d.length+1;for(let t=1;t<e;++t)f.push(t/e)}if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===da.LINEAR_VERTICAL){a=t.createLinearGradient(u/2,c,u/2,h+c);let e=0;const r=(o.fontProperties.fontSize+n.strokeThickness)/h;for(let t=0;t<i.length;t++){const n=o.lineHeight*t;for(let t=0;t<d.length;t++){let i=0;i="number"==typeof f[t]?f[t]:t/d.length;const o=n/h+i*r;let s=Math.max(e,o);s=Math.min(s,1),a.addColorStop(s,d[t]),e=s}}}else{a=t.createLinearGradient(c,h/2,u+c,h/2);const e=d.length+1;let n=1;for(let t=0;t<d.length;t++){let r;r="number"==typeof f[t]?f[t]:n/e,a.addColorStop(r,d[t]),n++}}return a}(e,t,s,o,[a],n),t.strokeStyle=s.stroke,s.dropShadow){const e=s.dropShadowColor,n=s.dropShadowBlur*o,r=s.dropShadowDistance*o;t.shadowColor=Ue.shared.setValue(e).setAlpha(s.dropShadowAlpha).toRgbaString(),t.shadowBlur=n,t.shadowOffsetX=Math.cos(s.dropShadowAngle)*r,t.shadowOffsetY=Math.sin(s.dropShadowAngle)*r}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;s.stroke&&s.strokeThickness&&t.strokeText(a,c,u+n.lineHeight-l.descent),s.fill&&t.fillText(a,c,u+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Za(e){return Array.from?Array.from(e):e.split("")}function Ja(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}const el=class e{constructor(e,t,n){var r,i;const[o]=e.info,[s]=e.common,[a]=e.page,[l]=e.distanceField,c=ot(a.file),u={};this._ownsTextures=n,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/c,this.chars={},this.pageTextures=u;for(let h=0;h<e.page.length;h++){const{id:n,file:r}=e.page[h];u[n]=t instanceof Array?t[h]:t[r],(null===l||void 0===l?void 0:l.fieldType)&&"none"!==l.fieldType&&(u[n].baseTexture.alphaMode=T.NO_PREMULTIPLIED_ALPHA,u[n].baseTexture.mipmap=A.OFF)}for(let h=0;h<e.char.length;h++){const{id:t,page:n}=e.char[h];let{x:r,y:i,width:o,height:s,xoffset:a,yoffset:l,xadvance:d}=e.char[h];r/=c,i/=c,o/=c,s/=c,a/=c,l/=c,d/=c;const f=new Ft(r+u[n].frame.x/c,i+u[n].frame.y/c,o,s);this.chars[t]={xOffset:a,yOffset:l,xAdvance:d,kerning:{},texture:new zn(u[n].baseTexture,f),page:n}}for(let h=0;h<e.kerning.length;h++){let{first:t,second:n,amount:r}=e.kerning[h];t/=c,n/=c,r/=c,this.chars[n]&&(this.chars[n].kerning[t]=r)}this.distanceFieldRange=null===l||void 0===l?void 0:l.distanceRange,this.distanceFieldType=null!==(r=null===l||void 0===l||null===(i=l.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==r?r:"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(t,n,r){let i;if(t instanceof qa)i=t;else{const e=function(e){for(let t=0;t<$a.length;t++)if($a[t].test(e))return $a[t];return null}(t);if(!e)throw new Error("Unrecognized data format for font.");i=e.parse(t)}n instanceof zn&&(n=[n]);const o=new e(i,n,r);return e.available[o.font]=o,o}static uninstall(t){const n=e.available[t];if(!n)throw new Error("No font found named '".concat(t,"'"));n.destroy(),delete e.available[t]}static from(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:o,resolution:s,textureWidth:a,textureHeight:l,...c}=Object.assign({},e.defaultOptions,r),u=function(e){"string"==typeof e&&(e=[e]);const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];if(Array.isArray(r)){if(2!==r.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(r.length,"."));const e=r[0].charCodeAt(0),n=r[1].charCodeAt(0);if(n<e)throw new Error("[BitmapFont]: Invalid character range.");for(let r=e,i=n;r<=i;r++)t.push(String.fromCharCode(r))}else t.push(...Za(r))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(i),h=n instanceof ya?n:new ya(n),d=a,f=new qa;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};let p,m,g,v=0,y=0,b=0;const x=[],_=[];for(let e=0;e<u.length;e++){p||(p=L.ADAPTER.createCanvas(),p.width=a,p.height=l,m=p.getContext("2d"),g=new _t(p,{resolution:s,...c}),x.push(g),_.push(new zn(g)),f.page.push({id:_.length-1,file:""}));const t=u[e],n=ma.measureText(t,h,!1,p),r=n.width,i=Math.ceil(n.height),S=Math.ceil(("italic"===h.fontStyle?2:1)*r);if(y>=l-i*s){if(0===y)throw new Error("[BitmapFont] textureHeight ".concat(l,"px is too small (fontFamily: '").concat(h.fontFamily,"', fontSize: ").concat(h.fontSize,"px, char: '").concat(t,"')"));--e,p=null,m=null,g=null,y=0,v=0,b=0;continue}if(b=Math.max(i+n.fontProperties.descent,b),S*s+v>=d){if(0===v)throw new Error("[BitmapFont] textureWidth ".concat(a,"px is too small (fontFamily: '").concat(h.fontFamily,"', fontSize: ").concat(h.fontSize,"px, char: '").concat(t,"')"));--e,y+=b*s,y=Math.ceil(y),v=0,b=0;continue}Qa(p,m,n,v,y,s,h);const w=Ja(n.text);f.char.push({id:w,page:_.length-1,x:v/s,y:y/s,width:S,height:i,xoffset:0,yoffset:0,xadvance:r-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),v+=(S+2*o)*s,v=Math.ceil(v)}if(null===r||void 0===r||!r.skipKerning)for(let e=0,w=u.length;e<w;e++){const t=u[e];for(let e=0;e<w;e++){const n=u[e],r=m.measureText(t).width,i=m.measureText(n).width,o=m.measureText(t+n).width-(r+i);o&&f.kerning.push({first:Ja(t),second:Ja(n),amount:o})}}const S=new e(f,_,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=S,S}};el.ALPHA=[["a","z"],["A","Z"]," "],el.NUMERIC=[["0","9"]],el.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],el.ASCII=[[" ","~"]],el.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:el.ALPHANUMERIC},el.available={};let tl=el;const nl=[],rl=[],il=[],ol=class e extends gi{constructor(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super();const{align:r,tint:i,maxWidth:o,letterSpacing:s,fontName:a,fontSize:l}=Object.assign({},e.styleDefaults,n);if(!tl.available[a])throw new Error('Missing BitmapFont "'.concat(a,'"'));this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Ue(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Zt((()=>{this.dirty=!0}),this,0,0),this._roundPixels=L.ROUND_PIXELS,this.dirty=!0,this._resolution=L.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=tl.available[this._fontName],t=this.fontSize,n=t/e.size,r=new Nt,i=[],o=[],s=[],a=Za(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,c="none"===e.distanceFieldType?nl:rl;let u=null,h=0,d=0,f=0,p=-1,m=0,g=0,y=0,b=0;for(let v=0;v<a.length;v++){const t=a[v],n=Ja(t);if(/(?:\s)/.test(t)&&(p=v,m=h,b++),"\r"===t||"\n"===t){o.push(h),s.push(-1),d=Math.max(d,h),++f,++g,r.x=0,r.y+=e.lineHeight,u=null,b=0;continue}const c=e.chars[n];if(!c)continue;u&&c.kerning[u]&&(r.x+=c.kerning[u]);const x=il.pop()||{texture:zn.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Nt};x.texture=c.texture,x.line=f,x.charCode=n,x.position.x=Math.round(r.x+c.xOffset+this._letterSpacing/2),x.position.y=Math.round(r.y+c.yOffset),x.prevSpaces=b,i.push(x),h=x.position.x+Math.max(c.xAdvance-c.xOffset,c.texture.orig.width),r.x+=c.xAdvance+this._letterSpacing,y=Math.max(y,c.yOffset+c.texture.height),u=n,-1!==p&&l>0&&r.x>l&&(++g,qe(i,1+p-g,1+v-p),v=p,p=-1,o.push(m),s.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,m),f++,r.x=0,r.y+=e.lineHeight,u=null,b=0)}const x=a[a.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(h=m),o.push(h),d=Math.max(d,h),s.push(-1));const _=[];for(let v=0;v<=f;v++){let e=0;"right"===this._align?e=d-o[v]:"center"===this._align?e=(d-o[v])/2:"justify"===this._align&&(e=s[v]<0?0:(d-o[v])/s[v]),_.push(e)}const S=i.length,w={},E=[],A=this._activePagesMeshData;c.push(...A);for(let C=0;C<S;C++){const t=i[C].texture,n=t.baseTexture.uid;if(!w[n]){let r=c.pop();if(!r){const t=new la;let n,i;"none"===e.distanceFieldType?(n=new ca(zn.EMPTY),i=v.NORMAL):(n=new ca(zn.EMPTY,{program:yn.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),i=v.NORMAL_NPM);const o=new aa(t,n);o.blendMode=i,r={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:o,vertices:null,uvs:null,indices:null}}r.index=0,r.indexCount=0,r.vertexCount=0,r.uvsCount=0,r.total=0;const{_textureCache:i}=this;i[n]=i[n]||new zn(t.baseTexture),r.mesh.texture=i[n],r.mesh.tint=this._tintColor.value,E.push(r),w[n]=r}w[n].total++}for(let v=0;v<A.length;v++)E.includes(A[v])||this.removeChild(A[v].mesh);for(let v=0;v<E.length;v++)E[v].mesh.parent!==this&&this.addChild(E[v].mesh);this._activePagesMeshData=E;for(const v in w){var T;const e=w[v],t=e.total;if(!((null===(T=e.indices)||void 0===T?void 0:T.length)>6*t)||e.vertices.length<2*aa.BATCHABLE_SIZE)e.vertices=new Float32Array(8*t),e.uvs=new Float32Array(8*t),e.indices=new Uint16Array(6*t);else{const t=e.total,n=e.vertices;for(let e=4*t*2;e<n.length;e++)n[e]=0}e.mesh.size=6*t}for(let v=0;v<S;v++){const e=i[v];let t=e.position.x+_[e.line]*("justify"===this._align?e.prevSpaces:1);this._roundPixels&&(t=Math.round(t));const r=t*n,o=e.position.y*n,s=e.texture,a=w[s.baseTexture.uid],l=s.frame,c=s._uvs,u=a.index++;a.indices[6*u+0]=0+4*u,a.indices[6*u+1]=1+4*u,a.indices[6*u+2]=2+4*u,a.indices[6*u+3]=0+4*u,a.indices[6*u+4]=2+4*u,a.indices[6*u+5]=3+4*u,a.vertices[8*u+0]=r,a.vertices[8*u+1]=o,a.vertices[8*u+2]=r+l.width*n,a.vertices[8*u+3]=o,a.vertices[8*u+4]=r+l.width*n,a.vertices[8*u+5]=o+l.height*n,a.vertices[8*u+6]=r,a.vertices[8*u+7]=o+l.height*n,a.uvs[8*u+0]=c.x0,a.uvs[8*u+1]=c.y0,a.uvs[8*u+2]=c.x1,a.uvs[8*u+3]=c.y1,a.uvs[8*u+4]=c.x2,a.uvs[8*u+5]=c.y2,a.uvs[8*u+6]=c.x3,a.uvs[8*u+7]=c.y3}this._textWidth=d*n,this._textHeight=(r.y+e.lineHeight)*n;for(const v in w){const e=w[v];if(0!==this.anchor.x||0!==this.anchor.y){let t=0;const n=this._textWidth*this.anchor.x,r=this._textHeight*this.anchor.y;for(let i=0;i<e.total;i++)e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r,e.vertices[t++]-=n,e.vertices[t++]-=r}this._maxLineHeight=y*n;const t=e.mesh.geometry.getBuffer("aVertexPosition"),r=e.mesh.geometry.getBuffer("aTextureCoord"),i=e.mesh.geometry.getIndex();t.data=e.vertices,r.data=e.uvs,i.data=e.indices,t.update(),r.update(),i.update()}for(let v=0;v<i.length;v++)il.push(i[v]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:r}=tl.available[this._fontName];if("none"!==n){const{a:n,b:i,c:o,d:s}=this.worldTransform,a=Math.sqrt(n*n+i*i),l=Math.sqrt(o*o+s*s),c=(Math.abs(a)+Math.abs(l))/2,u=this.fontSize/r,h=e._view.resolution;for(const e of this._activePagesMeshData)e.mesh.shader.uniforms.uFWidth=c*t*u*h}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=tl.available[this._fontName];if(!e)throw new Error('Missing BitmapFont "'.concat(this._fontName,'"'));this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!tl.available[e])throw new Error('Missing BitmapFont "'.concat(e,'"'));this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){var e;return null!==(e=this._fontSize)&&void 0!==e?e:tl.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){var t;e=String(null!==(t=e)&&void 0!==t?t:""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n="none"===tl.available[this._fontName].distanceFieldType?nl:rl;n.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],n.filter((e=>t[e.mesh.texture.baseTexture.uid])).forEach((e=>{e.mesh.texture=zn.EMPTY}));for(const r in t)t[r].destroy(),delete t[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};ol.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const sl=[".xml",".fnt"],al={extension:{type:st.LoadParser,priority:Zi.Normal},name:"loadBitmapFont",test:e=>sl.includes(se.extname(e).toLowerCase()),testParse:async e=>Xa.test(e)||Ka.test(e),async parse(e,t,n){const r=Xa.test(e)?Xa.parse(e):Ka.parse(e),{src:i}=t,{page:o}=r,s=[];for(let c=0;c<o.length;++c){const e=o[c].file;let t=se.join(se.dirname(i),e);t=Uo(t,i),s.push(t)}const a=await n.load(s),l=s.map((e=>a[e]));return tl.install(r,l,!0)},load:async(e,t)=>(await L.ADAPTER.fetch(e)).text(),unload(e){e.destroy()}};ct.add(al);const ll=class e extends ya{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new e(Object.keys(e.defaultOptions).reduce(((e,n)=>({...e,[n]:t[n]})),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach((t=>{URL.revokeObjectURL(t.src),t.refs--,0===t.refs&&(t.fontFace&&document.fonts.delete(t.fontFace),delete e.availableFonts[t.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{availableFonts:r}=e;if(r[t]){const e=r[t];return this._fonts.push(e),e.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return L.ADAPTER.fetch(t).then((e=>e.blob())).then((async e=>new Promise(((t,n)=>{const r=URL.createObjectURL(e),i=new FileReader;i.onload=()=>t([r,i.result]),i.onerror=n,i.readAsDataURL(e)})))).then((async e=>{let[i,o]=e;const s=Object.assign({family:se.basename(t,se.extname(t)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:o,refs:1,originalUrl:t,fontFace:null},n);r[t]=s,this._fonts.push(s),this.styleID++;const a=new FontFace(s.family,"url(".concat(s.src,")"),{weight:s.weight,style:s.style,display:s.display});s.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.filter((e=>!this._overrides.includes(e)));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.filter((e=>this._overrides.includes(e)));r.length>0&&(this._overrides=this._overrides.filter((e=>!r.includes(e))),this.styleID++)}toCSS(e){return["transform: scale(".concat(e,")"),"transform-origin: top left","display: inline-block","color: ".concat(this.normalizeColor(this.fill)),"font-size: ".concat(this.fontSize,"px"),"font-family: ".concat(this.fontFamily),"font-weight: ".concat(this.fontWeight),"font-style: ".concat(this.fontStyle),"font-variant: ".concat(this.fontVariant),"letter-spacing: ".concat(this.letterSpacing,"px"),"text-align: ".concat(this.align),"padding: ".concat(this.padding,"px"),"white-space: ".concat(this.whiteSpace),...this.lineHeight?["line-height: ".concat(this.lineHeight,"px")]:[],...this.wordWrap?["word-wrap: ".concat(this.breakWords?"break-all":"break-word"),"max-width: ".concat(this.wordWrapWidth,"px")]:[],...this.strokeThickness?["-webkit-text-stroke-width: ".concat(this.strokeThickness,"px"),"-webkit-text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"text-stroke-width: ".concat(this.strokeThickness,"px"),"text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce(((e,t)=>"".concat(e,'\n            @font-face {\n                font-family: "').concat(t.family,"\";\n                src: url('").concat(t.dataSrc,"');\n                font-weight: ").concat(t.weight,";\n                font-style: ").concat(t.style,";\n                font-display: ").concat(t.display,";\n            }")),this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(n=e,re("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),e=Ue.shared.setValue(n).toNumber()),"number"==typeof e?(t=e,re("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Ue.shared.setValue(t).toHex()):e;var t,n}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));const i="".concat(n,"px ").concat(r,"px");return this.dropShadowBlur>0?"text-shadow: ".concat(i," ").concat(this.dropShadowBlur,"px ").concat(e):"text-shadow: ".concat(i," ").concat(e)}reset(){Object.assign(this,e.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise((e=>setTimeout(e,100))):Promise.resolve()}get isSafari(){const{userAgent:e}=L.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};ll.availableFonts={},ll.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let cl=ll;const ul=class e extends bi{constructor(){var t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(zn.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,o=zn.from(i,{scaleMode:L.SCALE_MODE,resourceOptions:{autoLoad:!1}});o.orig=new Ft,o.trim=new Ft,this.texture=o;const s="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",l=document.createElementNS(s,"svg"),c=document.createElementNS(s,"foreignObject"),u=document.createElementNS(a,"div"),h=document.createElementNS(a,"style");c.setAttribute("width","10000"),c.setAttribute("height","10000"),c.style.overflow="hidden",l.appendChild(c),this.maxWidth=e.defaultMaxWidth,this.maxHeight=e.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=l,this._foreignObject=c,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=e.defaultAutoResolution,this._resolution=null!==(t=e.defaultResolution)&&void 0!==t?t:L.RESOLUTION,this.text=n,this.style=r}measureText(e){var t,n;const{text:r,style:i,resolution:o}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:i.toCSS(o)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:a,height:l}=s;(a>this.maxWidth||l>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const c=Math.min(this.maxWidth,Math.ceil(a)),u=Math.min(this.maxHeight,Math.ceil(l));return this._svgRoot.setAttribute("width",c.toString()),this._svgRoot.setAttribute("height",u.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:null===(t=this._style)||void 0===t?void 0:t.toCSS(o)}),this._styleElement.textContent=null===(n=this._style)||void 0===n?void 0:n.toGlobalCSS()),{width:c+2*i.padding,height:u+2*i.padding}}async updateText(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{style:t,_image:n,_loadImage:r}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:i,height:o}=this.measureText();n.width=r.width=Math.ceil(Math.max(1,i)),n.height=r.height=Math.ceil(Math.max(1,o)),this._updateID++;const s=this._updateID;await new Promise((e=>{r.onload=async()=>{s<this._updateID||(await t.onBeforeDraw(),n.src=r.src,r.onload=null,r.src="",this.updateTexture()),e()};const i=(new XMLSerializer).serializeToString(this._svgRoot);r.src="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(i))}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:r}=this,{padding:i}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/r,t.trim.height=t._frame.height=n.height/r,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(n.width,n.height,r),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var n,r,i,o,s;"boolean"==typeof t&&(t={children:t}),t=Object.assign({},e.defaultDestroyOptions,t),super.destroy(t);const a=null;this.ownsStyle&&null!==(n=this._style)&&void 0!==n&&n.cleanFonts(),this._style=a,null!==(r=this._svgRoot)&&void 0!==r&&r.remove(),this._svgRoot=a,null!==(i=this._domElement)&&void 0!==i&&i.remove(),this._domElement=a,null!==(o=this._foreignObject)&&void 0!==o&&o.remove(),this._foreignObject=a,null!==(s=this._styleElement)&&void 0!==s&&s.remove(),this._styleElement=a,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=a,this._image.src="",this._image=a}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Xe(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Xe(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&((e=e||{})instanceof cl?(this.ownsStyle=!1,this._style=e):e instanceof ya?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=cl.from(e)):(this.ownsStyle=!0,this._style=new cl(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(""===e||null===e||void 0===e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ul.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ul.defaultMaxWidth=2024,ul.defaultMaxHeight=2024,ul.defaultAutoResolution=!0;var hl,dl=[],fl="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(hl||(hl={}));var pl,ml=function(e){return Object.freeze(e)},gl=function(e,t){this.inlineSize=e,this.blockSize=t,ml(this)},vl=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ml(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),yl=function(e){return e instanceof SVGElement&&"getBBox"in e},bl=function(e){if(yl(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},xl=function(e){var t;if(e instanceof Element)return!0;var n=null===(t=null===e||void 0===e?void 0:e.ownerDocument)||void 0===t?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},_l="undefined"!==typeof window?window:{},Sl=new WeakMap,wl=/auto|scroll/,El=/^tb|vertical/,Al=/msie|trident/i.test(_l.navigator&&_l.navigator.userAgent),Tl=function(e){return parseFloat(e||"0")},Cl=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new gl((n?t:e)||0,(n?e:t)||0)},Pl=ml({devicePixelContentBoxSize:Cl(),borderBoxSize:Cl(),contentBoxSize:Cl(),contentRect:new vl(0,0,0,0)}),Rl=function(e,t){if(void 0===t&&(t=!1),Sl.has(e)&&!t)return Sl.get(e);if(bl(e))return Sl.set(e,Pl),Pl;var n=getComputedStyle(e),r=yl(e)&&e.ownerSVGElement&&e.getBBox(),i=!Al&&"border-box"===n.boxSizing,o=El.test(n.writingMode||""),s=!r&&wl.test(n.overflowY||""),a=!r&&wl.test(n.overflowX||""),l=r?0:Tl(n.paddingTop),c=r?0:Tl(n.paddingRight),u=r?0:Tl(n.paddingBottom),h=r?0:Tl(n.paddingLeft),d=r?0:Tl(n.borderTopWidth),f=r?0:Tl(n.borderRightWidth),p=r?0:Tl(n.borderBottomWidth),m=h+c,g=l+u,v=(r?0:Tl(n.borderLeftWidth))+f,y=d+p,b=a?e.offsetHeight-y-e.clientHeight:0,x=s?e.offsetWidth-v-e.clientWidth:0,_=i?m+v:0,S=i?g+y:0,w=r?r.width:Tl(n.width)-_-x,E=r?r.height:Tl(n.height)-S-b,A=w+m+x+v,T=E+g+b+y,C=ml({devicePixelContentBoxSize:Cl(Math.round(w*devicePixelRatio),Math.round(E*devicePixelRatio),o),borderBoxSize:Cl(A,T,o),contentBoxSize:Cl(w,E,o),contentRect:new vl(h,l,w,E)});return Sl.set(e,C),C},Il=function(e,t,n){var r=Rl(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case hl.DEVICE_PIXEL_CONTENT_BOX:return s;case hl.BORDER_BOX:return i;default:return o}},Ml=function(e){var t=Rl(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=ml([t.borderBoxSize]),this.contentBoxSize=ml([t.contentBoxSize]),this.devicePixelContentBoxSize=ml([t.devicePixelContentBoxSize])},Ol=function(e){if(bl(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},kl=function(){var e=1/0,t=[];dl.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new Ml(t.target),i=Ol(t.target);r.push(n),t.lastReportedSize=Il(t.target,t.observedBox),i<e&&(e=i)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},Ll=function(e){dl.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(Ol(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},Dl=function(){var e=0;for(Ll(e);dl.some((function(e){return e.activeTargets.length>0}));)e=kl(),Ll(e);return dl.some((function(e){return e.skippedTargets.length>0}))&&function(){var e;"function"===typeof ErrorEvent?e=new ErrorEvent("error",{message:fl}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=fl),window.dispatchEvent(e)}(),e>0},Nl=[],Bl=function(e){if(!pl){var t=0,n=document.createTextNode("");new MutationObserver((function(){return Nl.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),pl=function(){n.textContent="".concat(t?t--:t++)}}Nl.push(e),pl()},Fl=0,Ul={attributes:!0,characterData:!0,childList:!0,subtree:!0},zl=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Hl=function(e){return void 0===e&&(e=0),Date.now()+e},jl=!1,Vl=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!jl){jl=!0;var n,r=Hl(e);n=function(){var n=!1;try{n=Dl()}finally{if(jl=!1,e=r-Hl(),!Fl)return;n?t.run(1e3):e>0?t.run(e):t.start()}},Bl((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,Ul)};document.body?t():_l.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),zl.forEach((function(t){return _l.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),zl.forEach((function(t){return _l.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Gl=function(e){!Fl&&e>0&&Vl.start(),!(Fl+=e)&&Vl.stop()},Wl=function(){function e(e,t){this.target=e,this.observedBox=t||hl.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=Il(this.target,this.observedBox,!0);return e=this.target,yl(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),ql=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},Xl=new WeakMap,Yl=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Kl=function(){function e(){}return e.connect=function(e,t){var n=new ql(e,t);Xl.set(e,n)},e.observe=function(e,t,n){var r=Xl.get(e),i=0===r.observationTargets.length;Yl(r.observationTargets,t)<0&&(i&&dl.push(r),r.observationTargets.push(new Wl(t,n&&n.box)),Gl(1),Vl.schedule())},e.unobserve=function(e,t){var n=Xl.get(e),r=Yl(n.observationTargets,t),i=1===n.observationTargets.length;r>=0&&(i&&dl.splice(dl.indexOf(n),1),n.observationTargets.splice(r,1),Gl(-1))},e.disconnect=function(e){var t=this,n=Xl.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),$l=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!==typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Kl.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!xl(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Kl.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!xl(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Kl.unobserve(this,e)},e.prototype.disconnect=function(){Kl.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();const Ql=e["undefined"!==typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"],Zl=t=>{const n=e.useRef(t);return e.useEffect((()=>{n.current=t})),n},Jl="undefined"!==typeof window&&"ResizeObserver"in window?window.ResizeObserver:$l;function ec(){}let tc;const nc=()=>tc||(tc=function(){let e=!1,t=[];const n=new Map,r=new Jl(((r,i)=>{t=t.concat(r),e||window.requestAnimationFrame((function(){const r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);const o=n.get(t[e].target);null===o||void 0===o||o.forEach((n=>n(t[e],i)))}t=[],e=!1})),e=!0}));return{observer:r,subscribe(e,t){var i;r.observe(e);const o=null!==(i=n.get(e))&&void 0!==i?i:[];o.push(t),n.set(e,o)},unsubscribe(e,t){var i;const o=null!==(i=n.get(e))&&void 0!==i?i:[];if(1===o.length)return r.unobserve(e),void n.delete(e);const s=o.indexOf(t);-1!==s&&o.splice(s,1),n.set(e,o)}}}()),rc=function(e,t){const n=nc(),r=Zl(t);return Ql((()=>{let t=!1;const i=e&&"current"in e?e.current:e;if(!i)return ec;function o(e,n){t||r.current(e,n)}return n.subscribe(i,o),()=>{t=!0,n.unsubscribe(i,o)}}),[e,n,r]),n.observer},ic=(t,n)=>{const[r,i]=e.useState((()=>{var e,r;const i=t&&"current"in t?t.current:t;return i?[i.offsetWidth,i.offsetHeight]:[null!==(e=null===n||void 0===n?void 0:n.initialWidth)&&void 0!==e?e:0,null!==(r=null===n||void 0===n?void 0:n.initialHeight)&&void 0!==r?r:0]}));return Ql((()=>{const e=t&&"current"in t?t.current:t;e&&i([e.offsetWidth,e.offsetHeight])}),[t]),rc(t,(e=>{const t=e.target;i([t.offsetWidth,t.offsetHeight])})),r};var oc=n(559);function sc(t){const{onSizeChanged:n,children:r,logId:i}=t,o=(0,e.useRef)(null),[s,a]=ic(o);return(0,e.useEffect)((()=>{n({width:s,height:a,getLiveLeft:()=>o.current?o.current.getBoundingClientRect().left:0,getLiveRight:()=>o.current?o.current.getBoundingClientRect().width+o.current.getBoundingClientRect().left:0,getLiveTop:()=>o.current?o.current.getBoundingClientRect().top:0})}),[n,s,a,i]),(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("div",{ref:o,className:"resize-sensor-holder"}),r]})}var ac=Symbol.for("immer-nothing"),lc=Symbol.for("immer-draftable"),cc=Symbol.for("immer-state");function uc(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var hc=Object.getPrototypeOf;function dc(e){return!!e&&!!e[cc]}function fc(e){var t;return!!e&&(mc(e)||Array.isArray(e)||!!e[lc]||!(null===(t=e.constructor)||void 0===t||!t[lc])||xc(e)||_c(e))}var pc=Object.prototype.constructor.toString();function mc(e){if(!e||"object"!==typeof e)return!1;const t=hc(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===pc}function gc(e,t){0===vc(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function vc(e){const t=e[cc];return t?t.type_:Array.isArray(e)?1:xc(e)?2:_c(e)?3:0}function yc(e,t){return 2===vc(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bc(e,t,n){const r=vc(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function xc(e){return e instanceof Map}function _c(e){return e instanceof Set}function Sc(e){return e.copy_||e.base_}function wc(e,t){if(xc(e))return new Map(e);if(_c(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&mc(e)){if(!hc(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[cc];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],o=n[t];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[t]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[t]})}return Object.create(hc(e),n)}function Ec(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Tc(e)||dc(e)||!fc(e)||(vc(e)>1&&(e.set=e.add=e.clear=e.delete=Ac),Object.freeze(e),t&&gc(e,((e,t)=>Ec(t,!0)))),e}function Ac(){uc(2)}function Tc(e){return Object.isFrozen(e)}var Cc,Pc={};function Rc(e){const t=Pc[e];return t||uc(0),t}function Ic(){return Cc}function Mc(e,t){t&&(Rc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Oc(e){kc(e),e.drafts_.forEach(Dc),e.drafts_=null}function kc(e){e===Cc&&(Cc=e.parent_)}function Lc(e){return Cc={drafts_:[],parent_:Cc,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Dc(e){const t=e[cc];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Nc(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[cc].modified_&&(Oc(t),uc(4)),fc(e)&&(e=Bc(t,e),t.parent_||Uc(t,e)),t.patches_&&Rc("Patches").generateReplacementPatches_(n[cc].base_,e,t.patches_,t.inversePatches_)):e=Bc(t,n,[]),Oc(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ac?e:void 0}function Bc(e,t,n){if(Tc(t))return t;const r=t[cc];if(!r)return gc(t,((i,o)=>Fc(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Uc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),gc(i,((i,s)=>Fc(e,r,t,i,s,n,o))),Uc(e,t,!1),n&&e.patches_&&Rc("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Fc(e,t,n,r,i,o,s){if(dc(i)){const s=Bc(e,i,o&&t&&3!==t.type_&&!yc(t.assigned_,r)?o.concat(r):void 0);if(bc(n,r,s),!dc(s))return;e.canAutoFreeze_=!1}else s&&n.add(i);if(fc(i)&&!Tc(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Bc(e,i),t&&t.scope_.parent_||Uc(e,i)}}function Uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ec(t,n)}var zc={get(e,t){if(t===cc)return e;const n=Sc(e);if(!yc(n,t))return function(e,t,n){var r;const i=Vc(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!fc(r)?r:r===jc(e.base_,t)?(Wc(e),e.copy_[t]=qc(r,e)):r},has:(e,t)=>t in Sc(e),ownKeys:e=>Reflect.ownKeys(Sc(e)),set(e,t,n){const r=Vc(Sc(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=jc(Sc(e),t),i=null===r||void 0===r?void 0:r[cc];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||yc(e.base_,t)))return!0;Wc(e),Gc(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==jc(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Wc(e),Gc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Sc(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){uc(11)},getPrototypeOf:e=>hc(e.base_),setPrototypeOf(){uc(12)}},Hc={};function jc(e,t){const n=e[cc];return(n?Sc(n):e)[t]}function Vc(e,t){if(!(t in e))return;let n=hc(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=hc(n)}}function Gc(e){e.modified_||(e.modified_=!0,e.parent_&&Gc(e.parent_))}function Wc(e){e.copy_||(e.copy_=wc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}gc(zc,((e,t)=>{Hc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Hc.deleteProperty=function(e,t){return Hc.set.call(this,e,t,void 0)},Hc.set=function(e,t,n){return zc.set.call(this,e[0],t,n,e[0])};function qc(e,t){const n=xc(e)?Rc("MapSet").proxyMap_(e,t):_c(e)?Rc("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ic(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=zc;n&&(i=[r],o=Hc);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}(e,t);return(t?t.scope_:Ic()).drafts_.push(n),n}function Xc(e){return dc(e)||uc(10),Yc(e)}function Yc(e){if(!fc(e)||Tc(e))return e;const t=e[cc];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=wc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=wc(e,!0);return gc(n,((e,t)=>{bc(n,e,Yc(t))})),t&&(t.finalized_=!1),n}var Kc=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!==typeof t&&uc(6),void 0!==n&&"function"!==typeof n&&uc(7),fc(e)){const i=Lc(this),o=qc(e,void 0);let s=!0;try{r=t(o),s=!1}finally{s?Oc(i):kc(i)}return Mc(i,n),Nc(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===ac&&(r=void 0),this.autoFreeze_&&Ec(r,!0),n){const t=[],i=[];Rc("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}uc(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const o=this.produce(e,n,((e,t)=>{r=e,i=t}));return[o,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){fc(e)||uc(8),dc(e)&&(e=Xc(e));const t=Lc(this),n=qc(e,void 0);return n[cc].isManual_=!0,kc(t),n}finishDraft(e,t){const n=e&&e[cc];n&&n.isManual_||uc(9);const{scope_:r}=n;return Mc(r,t),Nc(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Rc("Patches").applyPatches_;return dc(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},$c=Kc.produce;Kc.produceWithPatches.bind(Kc),Kc.setAutoFreeze.bind(Kc),Kc.setUseStrictShallowCopy.bind(Kc),Kc.applyPatches.bind(Kc),Kc.createDraft.bind(Kc),Kc.finishDraft.bind(Kc);function Qc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Zc=e=>Array.isArray(e)?e:[e];function Jc(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var eu="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},tu=0,nu=1;function ru(){return{s:tu,v:void 0,o:null,p:null}}function iu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ru();const{resultEqualityCheck:r}=t;let i,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=ru(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=ru(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===nu?l=t.v:(l=e.apply(null,arguments),o++),a.s=nu,r){var c,u;const e=null!==(c=null===(u=i)||void 0===u?void 0:u.deref())&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==o&&o--);i="object"===typeof l&&null!==l||"function"===typeof l?new eu(l):l}return a.v=l,l}return s.clearCache=()=>{n=ru(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function ou(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o=0,s=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),Qc(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=iu,argsMemoizeOptions:f=[],devModeChecks:p={}}=c,m=Zc(h),g=Zc(f),v=Jc(t),y=u((function(){return o++,l.apply(null,arguments)}),...m);const b=d((function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r}),...g);return Object.assign(b,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:u,argsMemoize:d})}}function su(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var au=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),lu=()=>Math.random().toString(36).substring(7).split("").join("."),cu={INIT:"@@redux/INIT".concat(lu()),REPLACE:"@@redux/REPLACE".concat(lu()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(lu())};function uu(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hu(e,t,n){if("function"!==typeof e)throw new Error(su(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(su(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(su(1));return n(hu)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,l=!1;function c(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function u(){if(l)throw new Error(su(3));return i}function h(e){if("function"!==typeof e)throw new Error(su(4));if(l)throw new Error(su(5));let t=!0;c();const n=a++;return s.set(n,e),function(){if(t){if(l)throw new Error(su(6));t=!1,c(),s.delete(n),o=null}}}function d(e){if(!uu(e))throw new Error(su(7));if("undefined"===typeof e.type)throw new Error(su(8));if("string"!==typeof e.type)throw new Error(su(17));if(l)throw new Error(su(9));try{l=!0,i=r(i,e)}finally{l=!1}return(o=s).forEach((e=>{e()})),e}d({type:cu.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(su(10));r=e,d({type:cu.REPLACE})},[au]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(su(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[au](){return this}}}}}function du(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:cu.INIT}))throw new Error(su(12));if("undefined"===typeof n(void 0,{type:cu.PROBE_UNKNOWN_ACTION()}))throw new Error(su(13))}))}(n)}catch(o){i=o}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let o=!1;const s={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(su(14))}s[a]=u,o=o||u!==c}return o=o||r.length!==Object.keys(e).length,o?s:e}}function fu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function pu(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var mu=pu(),gu=pu,vu=(function(){const e=ou(...arguments)}(iu),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?fu:fu.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function yu(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Bu(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return uu(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var bu=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function xu(e){return fc(e)?$c(e,(()=>{})):e}function _u(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Bu(10));const r=n.insert(t,e);return e.set(t,r),r}var Su="RTK_autoBatch",wu=e=>t=>{setTimeout(t,e)},Eu="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:wu(10),Au=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new bu(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,o=!1;const s=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Eu:"callback"===e.type?e.queueNotification:wu(e.timeout),l=()=>{o=!1,i&&(i=!1,s.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Su]),i=!r,i&&(o||(o=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Tu(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Bu(28));if(r in t)throw new Error(Bu(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Cu=Symbol.for("rtk-slice-createasyncthunk");function Pu(e,t){return"".concat(e,"/").concat(t)}function Ru(e,t,n,r){function i(i){let o=n.call(e,i);"undefined"===typeof o&&r&&(o=e.getInitialState());for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return t(o,...a)}return i.unwrapped=t,i}var Iu=function(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Cu];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Bu(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Bu(12));if(n in s.sliceCaseReducersByType)throw new Error(Bu(13));return s.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(s.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Tu(e.extraReducers):[e.extraReducers],i={...t,...s.sliceCaseReducersByType};return function(e,t){let n,[r,i,o]=Tu(t);if(function(e){return"function"===typeof e}(e))n=()=>xu(e());else{const t=xu(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===s.filter((e=>!!e)).length&&(s=[o]),s.reduce(((e,n)=>{if(n){if(dc(e)){const r=n(e,t);return void 0===r?e:r}if(fc(e))return $c(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Bu(9))}return r}}return e}),e)}return s.getInitialState=n,s}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=i[r],s={reducerName:r,type:Pu(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,i,{type:o,reducerName:s,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Bu(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(s,r).exposeAction(s,i?yu(o,i):yu(o))}(s,o,a):function(e,t,n,r){let{type:i,reducerName:o}=e;if(!r)throw new Error(Bu(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:c,settled:u,options:h}=t,d=r(i,s,h);n.exposeAction(o,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(o,{fulfilled:a||Mu,pending:l||Mu,rejected:c||Mu,settled:u||Mu})}(s,o,a,n)}));const c=e=>e,u=new WeakMap;let h;const d={name:t,reducerPath:r,reducer:(e,t)=>(h||(h=l()),h(e,t)),actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:()=>(h||(h=l()),h.getInitialState()),getSelectors(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const n=_u(u,this,{insert:()=>new WeakMap});return _u(n,t,{insert:()=>{const n={};for(const[i,o]of Object.entries(null!==(r=e.selectors)&&void 0!==r?r:{})){var r;n[i]=Ru(this,o,t,this!==d)}return n}})},selectSlice(e){let t=e[this.reducerPath];return"undefined"===typeof t&&this!==d&&(t=this.getInitialState()),t},get selectors(){return this.getSelectors(this.selectSlice)},injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=null!==t&&void 0!==t?t:this.reducerPath;return e.inject({reducerPath:r,reducer:this.reducer},n),{...this,reducerPath:r}}};return d}}();function Mu(){}var Ou="listener",ku="completed",Lu="cancelled";"task-".concat(Lu),"task-".concat(ku),"".concat(Ou,"-").concat(Lu),"".concat(Ou,"-").concat(ku);var{assign:Du}=Object,Nu="listenerMiddleware";yu("".concat(Nu,"/add")),yu("".concat(Nu,"/removeAll")),yu("".concat(Nu,"/remove"));Symbol.for("rtk-state-proxy-original");function Bu(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const Fu=e=>{const{cellCount:t,cellSizePx:n,containerSizePx:r,worldOffsetPx:i}=e,o={worldOffsetPx:i,worldRenderSizePx:t*n,firstIdxToRender:0,lastIdxToRender:t-1,numIdxsToRender:t,offsetForRenderingIdxsOnly:0,subsetRenderSizePx:t*n};if(o.worldRenderSizePx>r){const e=i%n!==0,s=(i+r)%n!==0;let a=Math.ceil(i/n),l=Math.floor(r/n);e&&a-1>=0&&(l+=1,a-=1),s&&a+l+1<t&&(l+=1),l=l<1&&t>0?1:l,o.offsetForRenderingIdxsOnly=-i%n,o.subsetRenderSizePx=n*l,o.firstIdxToRender=a,o.lastIdxToRender=a+l-1,o.numIdxsToRender=l}return o},Uu=e=>{const{cellCount:t,cellSizePx:n,containerSizePx:r,worldOffsetPx:i}=e;let o=t*n-r;o=o>=0?o:0,e.worldOffsetPx=i<0?0:i>o?o:i;const s=Fu(e);e.worldOffsetPx=s.worldOffsetPx,e.worldRenderSizePx=s.worldRenderSizePx,e.firstIdxToRender=s.firstIdxToRender,e.lastIdxToRender=s.lastIdxToRender,e.numIdxsToRender=s.numIdxsToRender,e.offsetForRenderingIdxsOnly=s.offsetForRenderingIdxsOnly,e.subsetRenderSizePx=s.subsetRenderSizePx},zu=Iu({name:"alignment-virtualization",initialState:{},reducers:{initializeNewVirtualization:(e,t)=>{const{virtualizationId:n,virtualization:r}=t.payload,i={...r,...Fu(r)};e[n]=i},setCellCount:(e,t)=>{const{virtualizationId:n,cellCount:r}=t.payload;e[n].cellCount!==r&&(e[n].cellCount=r,Uu(e[n]))},setCellSize:(e,t)=>{const{cellSizePx:n,virtualizationId:r}=t.payload;e[r].cellSizePx!==n&&(e[r].worldOffsetPx=e[r].worldOffsetPx/e[r].cellSizePx*n,e[r].cellSizePx=n,Uu(e[r]))},setContainerSize:(e,t)=>{const{virtualizationId:n,containerSizePx:r}=t.payload;e[n].containerSizePx!==r&&(e[n].containerSizePx=r,Uu(e[n]))},setWorldOffset:(e,t)=>{const{virtualizationId:n,worldOffsetPx:r}=t.payload;e[n].worldOffsetPx!==r&&(e[n].worldOffsetPx=r,Uu(e[n]))},setHoveredOffset:(e,t)=>{const{virtualizationId:n,mouseContainerOffsetPx:r}=t.payload;if(void 0===r)e[n].hoveredEvent=void 0;else{const{offsetForRenderingIdxsOnly:t,firstIdxToRender:i,lastIdxToRender:o,cellSizePx:s,hoveredEvent:a}=e[n],l=r-t,c=Math.floor(l/s),u=i+c;if(u>o)void 0!==a&&(e[n].hoveredEvent=void 0);else if(!a||a.cellIdx!==u){const r=c*s+t;e[n].hoveredEvent={cellIdx:u,containerOffsetCellStartPx:r,containerOffsetCellMiddlePx:r+s/2,containerOffsetCellEndPx:r+s}}}}}}),{initializeNewVirtualization:Hu,setCellCount:ju,setCellSize:Vu,setContainerSize:Gu,setWorldOffset:Wu,setHoveredOffset:qu}=zu.actions;var Xu=n(343),Yu=e,Ku=Symbol.for("react-redux-context"),$u="undefined"!==typeof globalThis?globalThis:{};function Qu(){var e;if(!Yu.createContext)return{};const t=null!==(e=$u[Ku])&&void 0!==e?e:$u[Ku]=new Map;let n=t.get(Yu.createContext);return n||(n=Yu.createContext(null),t.set(Yu.createContext,n)),n}var Zu=Qu(),Ju=()=>{throw new Error("uSES not initialized!")};function eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zu;return function(){return Yu.useContext(e)}}var th=eh(),nh=Ju,rh=(e,t)=>e===t;function ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zu;const t=e===Zu?th:eh(e);return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=rh,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:s,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(Yu.useRef(!0),Yu.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=nh(s.addNestedSub,o.getState,a||o.getState,u,r);return Yu.useDebugValue(h),h}}var oh=ih();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function sh(e){e()}var ah={notify(){},get:()=>[]};function lh(e,t){let n,r=ah,i=0,o=!1;function s(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sh((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=ah)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return c}var ch=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?Yu.useLayoutEffect:Yu.useEffect;function uh(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function hh(e,t){if(uh(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!uh(e[n[i]],t[n[i]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var dh=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:s="once"}=e;const a=Yu.useMemo((()=>{const e=lh(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:s}}),[t,i,o,s]),l=Yu.useMemo((()=>t.getState()),[t]);ch((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||Zu;return Yu.createElement(c.Provider,{value:a},r)};function fh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zu;const t=e===Zu?th:eh(e);return function(){const{store:e}=t();return e}}var ph=fh();function mh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zu;const t=e===Zu?ph:fh(e);return function(){return t().dispatch}}var gh,vh=mh();gh=Xu.useSyncExternalStoreWithSelector,nh=gh,(e=>{e})(e.useSyncExternalStore);const yh=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let o=new bu;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(mu):o.push(gu(t.extraArgument))),o},{reducer:n,middleware:r,devTools:i=!0,preloadedState:o,enhancers:s}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!uu(n))throw new Error(Bu(1));a=du(n)}l="function"===typeof r?r(t):t();let c=fu;i&&(c=vu({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(su(15))};const s={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},a=t.map((e=>e(s)));return o=fu(...a)(i.dispatch),{...i,dispatch:o}}}(...l),h=Au(u);let d="function"===typeof s?s(h):h();return hu(a,o,c(...d))}({reducer:{virtualizations:zu.reducer}}),bh=()=>vh(),xh=oh;function _h(t,n,r){const i=xh((e=>null!==t&&void 0!==t&&t.virtualizationId?e.virtualizations[t.virtualizationId]:void 0)),o=(null===t||void 0===t?void 0:t.role)===d.Controller,s=bh();(0,e.useEffect)((()=>{o&&void 0!==r&&(i&&i.controllerContainerId!==n&&console.warn('Development possibly misconfigured - attempt to initialize multiple \n        "controller" virtualizations. There must only be a single controller for each\n        virtualization. Updating to the last created controller, but this may be an\n        error.'),i&&i.controllerContainerId===n||s(Hu({virtualizationId:null===t||void 0===t?void 0:t.virtualizationId,virtualization:{cellCount:t.cellCount,controllerContainerId:n,containerSizePx:r,cellSizePx:t.cellSizePx,worldOffsetPx:0}})))}),[r,n,s,o,null===t||void 0===t?void 0:t.virtualizationId,null===t||void 0===t?void 0:t.cellCount,null===t||void 0===t?void 0:t.cellSizePx,i]);const a=(0,e.useCallback)((e=>{null!==t&&void 0!==t&&t.virtualizationId&&s(Wu({virtualizationId:t.virtualizationId,worldOffsetPx:e}))}),[s,null===t||void 0===t?void 0:t.virtualizationId]),l=(0,e.useCallback)((e=>{null!==t&&void 0!==t&&t.virtualizationId&&s(qu({virtualizationId:t.virtualizationId,mouseContainerOffsetPx:e}))}),[s,null===t||void 0===t?void 0:t.virtualizationId]),c=(0,e.useCallback)((e=>{null!==t&&void 0!==t&&t.virtualizationId&&s(Gu({virtualizationId:t.virtualizationId,containerSizePx:e}))}),[s,null===t||void 0===t?void 0:t.virtualizationId]),u=(0,e.useCallback)((e=>{null!==t&&void 0!==t&&t.virtualizationId&&s(Vu({virtualizationId:t.virtualizationId,cellSizePx:e}))}),[s,null===t||void 0===t?void 0:t.virtualizationId]),h=(0,e.useCallback)((e=>{null!==t&&void 0!==t&&t.virtualizationId&&s(ju({virtualizationId:t.virtualizationId,cellCount:e}))}),[s,null===t||void 0===t?void 0:t.virtualizationId]);return i?o?{...i,setWorldOffsetPx:a,setHoveredOffsetPx:l,updateContainerSizePx:c,updateCellSizePx:u,updateCellCount:h}:{...i,setWorldOffsetPx:a,setHoveredOffsetPx:l,updateContainerSizePx:void 0,updateCellSizePx:void 0,updateCellCount:void 0}:void 0}function Sh(t){var n,r;const{visible:i,direction:o,draggerFixedDimSize:s=10,draggerVarDimMinSize:a=20,oppositeScrollbarFixedDimSize:l,scrollbarMoved:c,worldSize:u,worldOffset:h}=t,d=(0,e.useRef)(null),[f,p]=ic(d),m="horizontal"===o?f:p,[g,v]=(0,e.useState)(!1),[y,b]=(0,e.useState)(-1),[x,_]=(0,e.useState)(-1),S="horizontal"===o?null===(n=d.current)||void 0===n?void 0:n.getBoundingClientRect().left:null===(r=d.current)||void 0===r?void 0:r.getBoundingClientRect().top,w=(0,e.useMemo)((()=>void 0===S?{draggerHolderSize:0,draggerHolderStart:0}:{draggerHolderSize:m-l,draggerHolderStart:S}),[S,m,l]),E=(0,e.useMemo)((()=>{const e=Math.max(a,w.draggerHolderSize*(w.draggerHolderSize/u)),t=w.draggerHolderSize-e,n=(u-(w.draggerHolderSize+l))/t;return{draggerSizePx:e,draggerOffsetPx:h/n,worldToScrollablePixelsRatio:n,numScrollablePx:t}}),[a,w.draggerHolderSize,l,h,u]),A=(0,e.useCallback)((e=>e*E.worldToScrollablePixelsRatio),[E.worldToScrollablePixelsRatio]),T=(0,e.useCallback)((e=>{if(g&&-1!==y){e.stopPropagation(),e.preventDefault();const t=("horizontal"===o?e.pageX:e.pageY)-y+x;c(t<=0?0:t>=E.numScrollablePx?A(E.numScrollablePx):A(t))}}),[o,g,y,x,A,c,E.numScrollablePx]),C=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),v(!0),b("horizontal"===o?e.pageX:e.pageY),_(e.currentTarget.getBoundingClientRect()["horizontal"===o?"left":"top"]-w.draggerHolderStart)}),[o,w.draggerHolderStart]),P=(0,e.useCallback)((e=>{g&&(e.stopPropagation(),e.preventDefault(),v(!1),b(-1),_(-1))}),[g]),R=(0,e.useMemo)((()=>(0,oc.jsx)("div",{className:"".concat(o,"-scrollbar-fullpage-drag"),style:{display:g?"block":"none"},onMouseDown:P,onMouseUp:P,onMouseOut:P,onMouseMove:T})),[o,g,P,T]),I=(0,e.useMemo)((()=>(0,oc.jsx)("div",{className:"".concat(o,"-scrollbar"),style:"horizontal"===o?{left:E.draggerOffsetPx,width:E.draggerSizePx,height:s}:{top:E.draggerOffsetPx,height:E.draggerSizePx,width:s},onMouseDown:C})),[o,s,E.draggerOffsetPx,E.draggerSizePx,C]),M=(0,e.useCallback)((e=>{const t=e.currentTarget.getBoundingClientRect(),n="horizontal"===o?e.clientX-t.left:e.clientY-t.top,r=A(n-E.draggerSizePx/2);c(r)}),[o,A,c,E.draggerSizePx]);return(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("div",{ref:d,className:"".concat(o,"-scrollbar-holder"),style:{..."horizontal"===o?{height:s}:{width:s}},onMouseDown:M,children:i?I:void 0}),R]})}function wh(e){return Th({getContent:e.getContentForRows,params:{verticalParams:e.verticalParams}})}function Eh(e){return Th({getContent:e.getContentForColumns,params:{horizontalParams:e.horizontalParams}})}function Ah(e){return Th({getContent:e.getMatrixContent,params:{horizontalParams:e.horizontalParams,verticalParams:e.verticalParams}})}function Th(t){const{getContent:n}=t,{horizontalParams:r,verticalParams:i}=t.params,o=(0,e.useRef)(null),[a,l]=(0,e.useState)(!1),[c,d]=(0,e.useState)(void 0),[p]=(0,e.useState)(s()),m=_h(r,p,null===c||void 0===c?void 0:c.width),g=_h(i,p,null===c||void 0===c?void 0:c.height),v=null===m||void 0===m?void 0:m.updateContainerSizePx,y=null===g||void 0===g?void 0:g.updateContainerSizePx,b=null===r||void 0===r?void 0:r.containerBoundsUpdated,x=null===i||void 0===i?void 0:i.containerBoundsUpdated,_=(0,e.useCallback)((e=>{d(e),v&&v(e.width),y&&y(e.height),b&&b(e),x&&x(e)}),[b,x,v,y]);(0,e.useEffect)((()=>{L.RENDER_OPTIONS.hello=!1,_t.defaultOptions.scaleMode=w.NEAREST}),[]);const S=null===m||void 0===m?void 0:m.updateCellSizePx,E=null===g||void 0===g?void 0:g.updateCellSizePx;(0,e.useEffect)((()=>{void 0!==(null===r||void 0===r?void 0:r.cellSizePx)&&S&&S(r.cellSizePx),void 0!==(null===i||void 0===i?void 0:i.cellSizePx)&&E&&E(null===i||void 0===i?void 0:i.cellSizePx)}),[S,E,null===r||void 0===r?void 0:r.cellSizePx,null===i||void 0===i?void 0:i.cellSizePx]);const A=null===m||void 0===m?void 0:m.updateCellCount,T=null===g||void 0===g?void 0:g.updateCellCount;(0,e.useEffect)((()=>{void 0!==A&&null!==r&&void 0!==r&&r.cellCount&&A(r.cellCount),void 0!==T&&null!==i&&void 0!==i&&i.cellCount&&T(i.cellCount)}),[A,T,null===r||void 0===r?void 0:r.cellCount,null===i||void 0===i?void 0:i.cellCount]);const C=!g||(null===i||void 0===i?void 0:i.scrollbar)===h.NeverOn||g.containerSizePx>=g.worldRenderSizePx,P=!m||(null===r||void 0===r?void 0:r.scrollbar)===h.NeverOn||m.containerSizePx>=m.worldRenderSizePx,R=(!i||i&&g)&&(!r||r&&m),I=(0,e.useMemo)((()=>{const e=void 0===(null===m||void 0===m?void 0:m.firstIdxToRender)?void 0:{firstColIdxToRender:m.firstIdxToRender,lastColIdxToRender:m.lastIdxToRender,renderWidthPx:m.subsetRenderSizePx,renderShiftLeftPx:m.offsetForRenderingIdxsOnly,worldWidthPx:m.worldRenderSizePx,worldShiftLeftPx:m.worldOffsetPx},t=void 0===(null===g||void 0===g?void 0:g.firstIdxToRender)?void 0:{firstRowIdxToRender:g.firstIdxToRender,lastRowIdxToRender:g.lastIdxToRender,renderHeightPx:g.subsetRenderSizePx,renderShiftTopPx:g.offsetForRenderingIdxsOnly,worldHeightPx:g.worldRenderSizePx,worldShiftTopPx:g.worldOffsetPx};return e&&t?n({...e,...t}):e?n(e):t?n(t):(0,oc.jsx)("div",{children:"uninitialized?"})}),[n,null===m||void 0===m?void 0:m.firstIdxToRender,null===m||void 0===m?void 0:m.lastIdxToRender,null===m||void 0===m?void 0:m.subsetRenderSizePx,null===m||void 0===m?void 0:m.offsetForRenderingIdxsOnly,null===m||void 0===m?void 0:m.worldRenderSizePx,null===m||void 0===m?void 0:m.worldOffsetPx,null===g||void 0===g?void 0:g.firstIdxToRender,null===g||void 0===g?void 0:g.lastIdxToRender,null===g||void 0===g?void 0:g.subsetRenderSizePx,null===g||void 0===g?void 0:g.offsetForRenderingIdxsOnly,null===g||void 0===g?void 0:g.worldRenderSizePx,null===g||void 0===g?void 0:g.worldOffsetPx]),M=null===g||void 0===g?void 0:g.setWorldOffsetPx,O=(0,e.useMemo)((()=>C||!M?void 0:(0,oc.jsx)(Sh,{direction:"vertical",visible:(null===i||void 0===i?void 0:i.scrollbar)===h.AlwaysOnWhenOverflowed||(null===i||void 0===i?void 0:i.scrollbar)===h.OnHoverWhenOverflowed&&a,oppositeScrollbarFixedDimSize:P?0:12,draggerFixedDimSize:12,draggerVarDimMinSize:25,worldSize:g.worldRenderSizePx,worldOffset:g.worldOffsetPx,scrollbarMoved:e=>{M(e)}})),[P,C,a,null===i||void 0===i?void 0:i.scrollbar,M,null===g||void 0===g?void 0:g.worldRenderSizePx,null===g||void 0===g?void 0:g.worldOffsetPx]),k=null===m||void 0===m?void 0:m.setWorldOffsetPx,D=(0,e.useMemo)((()=>P||!k?void 0:(0,oc.jsx)(Sh,{direction:"horizontal",visible:(null===r||void 0===r?void 0:r.scrollbar)===h.AlwaysOnWhenOverflowed||(null===r||void 0===r?void 0:r.scrollbar)===h.OnHoverWhenOverflowed&&a,oppositeScrollbarFixedDimSize:C?0:12,draggerFixedDimSize:12,draggerVarDimMinSize:25,worldSize:m.worldRenderSizePx,worldOffset:m.worldOffsetPx,scrollbarMoved:e=>{k(e)}})),[P,C,a,null===r||void 0===r?void 0:r.scrollbar,k,null===m||void 0===m?void 0:m.worldRenderSizePx,null===m||void 0===m?void 0:m.worldOffsetPx]),N=(0,e.useCallback)((e=>{0!==e.deltaX&&k&&k(m.worldOffsetPx+e.deltaX),0!==e.deltaY&&M&&M(g.worldOffsetPx+e.deltaY)}),[k,M,null===m||void 0===m?void 0:m.worldOffsetPx,null===g||void 0===g?void 0:g.worldOffsetPx]),B=null===m||void 0===m?void 0:m.setHoveredOffsetPx,F=null===g||void 0===g?void 0:g.setHoveredOffsetPx,U=(0,e.useCallback)((e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left<0?0:e.clientX-t.left,r=e.clientY-t.top<0?0:e.clientY-t.top;B&&B(n),F&&F(r)}),[B,F]),z=(0,e.useCallback)((()=>{B&&B(void 0),F&&F(void 0)}),[B,F]),H=(0,e.useMemo)((()=>{if(!c)return;const t=+f.hoverTrackerSize,n=(null===g||void 0===g?void 0:g.hoveredEvent)&&("start"===(null===i||void 0===i?void 0:i.hoverTracker)||"both"===(null===i||void 0===i?void 0:i.hoverTracker)),o=(null===g||void 0===g?void 0:g.hoveredEvent)&&("end"===(null===i||void 0===i?void 0:i.hoverTracker)||"both"===(null===i||void 0===i?void 0:i.hoverTracker)),s=(null===m||void 0===m?void 0:m.hoveredEvent)&&("start"===(null===r||void 0===r?void 0:r.hoverTracker)||"both"===(null===r||void 0===r?void 0:r.hoverTracker)),a=(null===m||void 0===m?void 0:m.hoveredEvent)&&("end"===(null===r||void 0===r?void 0:r.hoverTracker)||"both"===(null===r||void 0===r?void 0:r.hoverTracker));return(0,oc.jsxs)(oc.Fragment,{children:[null!==i&&void 0!==i&&i.hoverTracker?(0,oc.jsxs)(e.Fragment,{children:[(0,oc.jsx)("div",{className:"hover-tracker-y triangle-right",style:{left:c.getLiveLeft()-t,top:c.getLiveTop()+(null!==g&&void 0!==g&&g.hoveredEvent?g.hoveredEvent.containerOffsetCellMiddlePx:0)-t/2,display:n?"block":"none"}}),(0,oc.jsx)("div",{className:"hover-tracker-y triangle-left",style:{left:c.getLiveLeft()+c.width,top:c.getLiveTop()+(null!==g&&void 0!==g&&g.hoveredEvent?g.hoveredEvent.containerOffsetCellMiddlePx:0)-t/2,display:o?"block":"none"}})]},"vert"):void 0,null!==r&&void 0!==r&&r.hoverTracker?(0,oc.jsxs)(e.Fragment,{children:[(0,oc.jsx)("div",{className:"hover-tracker-x triangle-down",style:{top:c.getLiveTop()-t,left:c.getLiveLeft()+(null!==m&&void 0!==m&&m.hoveredEvent?m.hoveredEvent.containerOffsetCellMiddlePx:0)-t/2,display:s?"block":"none"}}),(0,oc.jsx)("div",{className:"hover-tracker-x triangle-up",style:{top:c.getLiveTop()+c.height,left:c.getLiveLeft()+(null!==m&&void 0!==m&&m.hoveredEvent?m.hoveredEvent.containerOffsetCellMiddlePx:0)-t/2,display:a?"block":"none"}})]},"horiz"):void 0]})}),[c,null===r||void 0===r?void 0:r.hoverTracker,null===m||void 0===m?void 0:m.hoveredEvent,null===i||void 0===i?void 0:i.hoverTracker,null===g||void 0===g?void 0:g.hoveredEvent]),[j,V,G,W]=(0,e.useMemo)((()=>[null!==m&&void 0!==m&&m.worldOffsetPx?"17px 0 16px -16px rgba(0, 0, 0, 0.4) inset":void 0,null!==g&&void 0!==g&&g.worldOffsetPx?"0 17px 16px -16px rgba(0, 0, 0, 0.4) inset":void 0,null===g||void 0===g||!g.worldRenderSizePx||g.worldRenderSizePx<=g.worldOffsetPx+g.containerSizePx?void 0:"0 -17px 16px -16px rgba(0, 0, 0, 0.4) inset",null===m||void 0===m||!m.worldRenderSizePx||m.worldRenderSizePx<=m.worldOffsetPx+m.containerSizePx?void 0:"-17px 0 16px -16px rgba(0, 0, 0, 0.4) inset"]),[null===m||void 0===m?void 0:m.worldOffsetPx,null===m||void 0===m?void 0:m.worldRenderSizePx,null===m||void 0===m?void 0:m.containerSizePx,null===g||void 0===g?void 0:g.worldOffsetPx,null===g||void 0===g?void 0:g.worldRenderSizePx,null===g||void 0===g?void 0:g.containerSizePx]),q=(0,e.useMemo)((()=>(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsxs)("div",{className:"av2-virtualized-matrix",ref:o,style:{overflowX:null!==r&&void 0!==r&&r.overflowVisible?"visible":"clip",overflowY:null!==i&&void 0!==i&&i.overflowVisible?"visible":"clip"},children:[j?(0,oc.jsx)("div",{className:"scrolled-indicator left",style:{boxShadow:j,...null===r||void 0===r?void 0:r.startScrolledIndicatorStyleAttr}}):void 0,W?(0,oc.jsx)("div",{className:"scrolled-indicator right",style:{boxShadow:W,...null===r||void 0===r?void 0:r.endScrolledIndicatorStyleAttr}}):void 0,V?(0,oc.jsx)("div",{className:"scrolled-indicator top",style:{boxShadow:V,...null===i||void 0===i?void 0:i.startScrolledIndicatorStyleAttr}}):void 0,G?(0,oc.jsx)("div",{className:"scrolled-indicator bottom",style:{boxShadow:G,...null===i||void 0===i?void 0:i.endScrolledIndicatorStyleAttr}}):void 0,R&&o?(0,oc.jsxs)("div",{className:"av2-wheel-scroller",onMouseOut:z,onMouseMove:U,onWheel:N,children:[H,(0,oc.jsx)("div",{className:"av2-data",style:{top:void 0!==(null===g||void 0===g?void 0:g.worldOffsetPx)?(null===i||void 0===i?void 0:i.virtualizationStrategy)===u.ShiftOnlyFullyRendered?-g.worldOffsetPx:(null===i||void 0===i?void 0:i.virtualizationStrategy)===u.Virtualize?g.offsetForRenderingIdxsOnly:void 0:void 0,left:void 0!==(null===m||void 0===m?void 0:m.worldOffsetPx)?(null===r||void 0===r?void 0:r.virtualizationStrategy)===u.ShiftOnlyFullyRendered?-m.worldOffsetPx:(null===r||void 0===r?void 0:r.virtualizationStrategy)===u.Virtualize?m.offsetForRenderingIdxsOnly:void 0:void 0},children:I})]}):void 0]}),O,D]})),[I,U,z,N,null===m||void 0===m?void 0:m.offsetForRenderingIdxsOnly,null===m||void 0===m?void 0:m.worldOffsetPx,null===r||void 0===r?void 0:r.overflowVisible,null===r||void 0===r?void 0:r.virtualizationStrategy,D,R,H,O,null===i||void 0===i?void 0:i.overflowVisible,null===i||void 0===i?void 0:i.virtualizationStrategy,null===g||void 0===g?void 0:g.offsetForRenderingIdxsOnly,null===g||void 0===g?void 0:g.worldOffsetPx,j,V,G,W,null===r||void 0===r?void 0:r.startScrolledIndicatorStyleAttr,null===r||void 0===r?void 0:r.endScrolledIndicatorStyleAttr,null===i||void 0===i?void 0:i.startScrolledIndicatorStyleAttr,null===i||void 0===i?void 0:i.endScrolledIndicatorStyleAttr]);return(0,oc.jsxs)("div",{className:"virtualized-matrix-viewer",onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[(0,oc.jsx)(sc,{onSizeChanged:_,logId:"virtualized-matrix"}),q]})}const Ch=window.getComputedStyle(document.body).getPropertyValue("font-family"),Ph='Monaco, Menlo, "Ubuntu Mono", Consolas, source-code-pro, monospace';let Rh;const Ih=new Map,Mh=new Map;function Oh(e,t){if(t&&!Ih.has(e)||!t&&!Mh.has(e)){Rh||(Rh=document.createElement("div"),document.body.appendChild(Rh),Rh.style.position="absolute",Rh.style.left="-1000px",Rh.style.top="-1000px",Rh.innerHTML="X"),Rh.style.fontSize=e+"px",Rh.style.fontFamily=t?Ph:"";const n=Rh.getBoundingClientRect();(t?Ih:Mh).set(e,{width:n.width,height:n.height})}return t?Ih.get(e):Mh.get(e)}const kh=new OffscreenCanvas(1,1).getContext("2d");function Lh(e){const{fontSize:t,maxWidthAllowed:n,stringsToMeasure:r,fontFamily:i=Ch,fontWeight:o="normal"}=e;kh.font="".concat(t,"px ").concat(o," ").concat(i);for(var s=0,a=0;a<r.length;a++){const e=kh.measureText(r[a]).width;if(s=s<e?e:s,n&&s>=n)return n}return Math.ceil(s)}const Dh=e=>{let t="";for(let n=1;n<=e;n++){const e=n%10===0;if(t+=e?"|":!e&&n%5===0?":":".",!e)continue;const r=""+n,i=t.length-r.length-1;i<0||(t=t.substring(0,i)+r+"|")}return t};function Nh(t){const{alignmentUUID:n,fontSize:r,positions:i,residueWidth:o,hoverTracker:a="end"}=t,l=Math.max(...i)+1,c=(0,e.useState)(s()),f=(0,e.useMemo)((()=>"None"===t.horizVirtualization?void 0:"Automatic"===t.horizVirtualization?{virtualizationId:"x_auto_generated_positionalaxis_virtualization_".concat(n,"_").concat(c),role:d.Controller,cellCount:l,cellSizePx:o}:t.horizVirtualization),[n,c,l,t.horizVirtualization,o]),p=(0,e.useMemo)((()=>Dh(l).split("").map(((e,t)=>(0,oc.jsx)("span",{children:e},t)))),[l]),m=(0,e.useMemo)((()=>(0,oc.jsx)("div",{className:"av2-positional-axis",style:{fontSize:r,fontFamily:Ph},children:p})),[p,r]),g=(0,e.useCallback)((()=>m),[m]);return f?(0,oc.jsx)(Eh,{horizontalParams:{...f,scrollbar:h.NeverOn,virtualizationStrategy:u.ShiftOnlyFullyRendered,hoverTracker:a},getContentForColumns:g}):void 0}let Bh=function(e){return e.ID="@@id",e.ACTUAL_ID="@@actualId",e.DESCRIPTION="@@description",e.BEGIN="@@begin",e.END="@@end",e.LINK="@@link",e.REAL_LENGTH="@@realLength",e.ALIGNED_LENGTH="@@alignedLength",e.LEFT_GAP_COUNT="@@leftGapCount",e.INTERNAL_GAP_COUNT="@@internalGapCount",e.RIGHT_GAP_COUNT="@@rightGapCount",e}({});const Fh=[{name:"UniProt",pattern:/^sp\|([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})\|([A-Z0-9]{1,5}_[A-Z0-9]{1,5})$/,toUrl:(e,t)=>"https://www.uniprot.org/uniprotkb?query=".concat(t[1]),parseAnnotations:Gh},{name:"UniProt",pattern:/^tr\|([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})\|\1_[A-Z0-9]{1,5}$/,toUrl:(e,t)=>"https://www.uniprot.org/uniprotkb?query=".concat(t[1]),parseAnnotations:Gh},{name:"UniProt",pattern:/^([OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2})(?:\.(\d+))?$/,toUrl:(e,t)=>"https://www.uniprot.org/uniprotkb?query=".concat(t[1]),parseAnnotations:Gh},{name:"UniRef",pattern:/^(UniRef(?:100|90|50)_(?:[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9](?:[A-Z][A-Z0-9]{2}[0-9]){1,2}|UPI[A-Z0-9]+))(?:\.(\d+))?$/,toUrl:(e,t)=>"https://www.uniprot.org/uniref?query=".concat(t[1]),parseAnnotations:Gh},{name:"UniProt",pattern:/^([A-Z0-9]{1,5}_[A-Z0-9]{1,5})(?:\.(\d+))?$/,toUrl:(e,t)=>"https://www.uniprot.org/uniprotkb?query=".concat(t[1]),parseAnnotations:Gh},{name:"UniParc",pattern:/^(UPI[A-Z0-9]+)(?:\.(\d+))?$/,toUrl:(e,t)=>"https://www.uniprot.org/uniparc?query=".concat(t[1]),parseAnnotations:zh},{name:"MGnify",pattern:/^(MGYS\d+)(?:\.(\d+))?$/,toUrl:(e,t)=>"https://www.ebi.ac.uk/metagenomics/studies/".concat(t[1]),parseAnnotations:zh}];function Uh(e){let t=e.replace(/@/g,"").trim();return t=t.charAt(0).toUpperCase()+t.slice(1),t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/([A-Z])([A-Z][a-z])/g,"$1 $2"),t}function zh(e,t){const n={};return t&&(n[Bh.DESCRIPTION]=t),n}function Hh(e,t){const n={},r=Array.from(t.matchAll(/(\S+)=(.+?)(?=\s+\S+=|$)/g));let i=t;r.length>0&&(i=t.substring(0,r[0].index)),i&&(n[Bh.DESCRIPTION]=i);for(const o of r)n[o[1]]=o[2];return n}const jh={OS:"Organism",OX:"Organism ID",GN:"Gene",PE:"Evidence",SV:"Ver",n:"Members",Tax:"Taxon",TaxID:"Taxon ID",RepID:"Representative",status:"Status"},Vh={1:"Protein",2:"Transcript",3:"Homology",4:"Predicted",5:"Uncertain"};function Gh(e,t){const n=Hh(0,t);for(const r of Object.keys(n))"PE"===r&&void 0!==n.PE&&n.PE in Vh&&(n.PE=Vh[n.PE]),r in jh&&(n[jh[r]]=n[r],delete n[r]);return n}function Wh(e,t,n){const{realLength:r,alignedLength:i,leftGapCount:o,internalGapCount:s,rightGapCount:a}=function(e){let t=0,n=0,r=0,i=0,o=0,s=!1;for(let l=0;l<e.length;++l)"-"===(a=e[l])||"."===a?++n:(++t,s?n>0&&(i+=n,n=0):(s=!0,r=n,n=0));var a;return o=n,{realLength:t,alignedLength:e.length-r-o,leftGapCount:r,internalGapCount:i,rightGapCount:o}}(t);let l=e,c=1,u=r;const h=e.match(/^([^/]*)\/(\d+)-(\d+)$/);h&&(l=h[1],c=Number(h[2]),u=Number(h[3]));const d={[Bh.ID]:e,[Bh.ACTUAL_ID]:l,[Bh.BEGIN]:c,[Bh.END]:u,[Bh.LINK]:void 0,[Bh.REAL_LENGTH]:r,[Bh.ALIGNED_LENGTH]:i,[Bh.LEFT_GAP_COUNT]:o,[Bh.INTERNAL_GAP_COUNT]:s,[Bh.RIGHT_GAP_COUNT]:a};let f=!1;for(const p of Fh){const e=l.match(p.pattern);if(e&&(f=!0,d[Bh.LINK]=p.toUrl(l,e),n)){const e=p.parseAnnotations(l,n);Object.assign(d,e)}}if(!f&&n){const e=Hh(0,n);Object.assign(d,e)}return d}function qh(e){return{list:e,serialize:t=>{var n;return null===(n=e.find((e=>e===t)))||void 0===n?void 0:n.key},deserialize:t=>e.find((e=>e.key===t))}}const Xh={resiPrefix:"resi_",queryClass:"q",consensusClass:"c",residueParentClass:"resi_line",darkHueClass:"dark-residues",lightHueClass:"light-residues",lettersOnlyHueClass:"letters-only-residues",aaAlignTypeClass:"alignment-aa",ntAlignTypeClass:"alignment-nt",styPosAllClass:"alignment-positions-tostyle-all",styPosQueryClass:"alignment-positions-tostyle-query",styPosQueryDiffClass:"alignment-positions-tostyle-query-diff",styPosConsensusClass:"alignment-positions-tostyle-consensus",styPosConsensusDiffClass:"alignment-positions-tostyle-consensus-diff",aaStyClass_Default:"aa-alignment-style-default",aaStyDesc_Default:"Default",aaStyDefaultLetterColor_Default:"#ccc",aaStyBackgroundAlpha_Default:".25",aaStyColorOrder_Default:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V",aaStyColors_Default:"#3c0,#c00,#60c,#03f,#ff0,#60c,#03f,#3c0,#090,#3c0,#3c0,#c00,#3c0,#090,#3c0,#09f,#09f,#090,#090,#3c0",aaStyBackgroundColorsLightTheme_Default:"#ccf2bf,#f2bfbf,#d9bff2,#bfccff,#ffffbf,#d9bff2,#bfccff,#ccf2bf,#bfe6bf,#ccf2bf,#ccf2bf,#f2bfbf,#ccf2bf,#bfe6bf,#ccf2bf,#bfe6ff,#bfe6ff,#bfe6bf,#bfe6bf,#ccf2bf",aaStyLetterColorsDarkTheme_Default:"#000,#fff,#fff,#fff,#000,#fff,#fff,#000,#fff,#000,#000,#fff,#000,#fff,#000,#fff,#fff,#fff,#fff,#000",aaStyClass_Buried:"aa-alignment-style-buried",aaStyDesc_Buried:"Buried Index",aaStyDefaultLetterColor_Buried:"#ccc",aaStyBackgroundAlpha_Buried:".25",aaStyColorOrder_Buried:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Buried:"#00a35c,#00fc03,#00eb14,#00eb14,blue,#00f10e,#00f10e,#009d62,#00d52a,#0054ab,#007b84,lime,#009768,#008778,#00e01f,#00d52a,#00db24,#00a857,#00e619,#005fa0,#00eb14,#00f10e",aaStyBackgroundColorsLightTheme_Buried:"#bfe8d6,#bffec0,#bffac4,#bffac4,#bfbfff,#bffcc3,#bffcc3,#bfe7d8,#bff5ca,#bfd4ea,#bfdee0,#bfffbf,#bfe5d9,#bfe1dd,#bff7c7,#bff5ca,#bff6c8,#bfe9d5,#bff9c6,#bfd7e7,#bffac4,#bffcc3",aaStyLetterColorsDarkTheme_Buried:"#fff,#000,#000,#000,#fff,#000,#000,#fff,#000,#fff,#fff,#000,#fff,#fff,#000,#000,#000,#fff,#000,#fff,#000,#000",aaStyClass_Cinema:"aa-alignment-style-cinema",aaStyDesc_Cinema:"Cinema",aaStyDefaultLetterColor_Cinema:"#ccc",aaStyBackgroundAlpha_Cinema:".25",aaStyColorOrder_Cinema:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,Y,Z",aaStyColors_Cinema:"#bbb,gray,#ff0,red,red,#f0f,brown,aqua,#bbb,#fff,aqua,#bbb,#bbb,green,#fff,brown,green,aqua,green,green,#fff,#bbb,#f0f,#f0f,gray",aaStyBackgroundColorsLightTheme_Cinema:"#eee,#dfdfdf,#ffffbf,#ffbfbf,#ffbfbf,#ffbfff,#e9caca,#bfffff,#eee,#fff,#bfffff,#eee,#eee,#bfdfbf,#fff,#e9caca,#bfdfbf,#bfffff,#bfdfbf,#bfdfbf,#fff,#eee,#ffbfff,#ffbfff,#dfdfdf",aaStyLetterColorsDarkTheme_Cinema:"#000,#000,#000,#fff,#fff,#fff,#fff,#000,#000,#000,#000,#000,#000,#fff,#000,#fff,#fff,#000,#fff,#fff,#000,#000,#fff,#fff,#000",aaStyClass_Clustal:"aa-alignment-style-clustal",aaStyDesc_Clustal:"Clustal",aaStyDefaultLetterColor_Clustal:"#ccc",aaStyBackgroundAlpha_Clustal:".25",aaStyColorOrder_Clustal:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Clustal:"#80a0f0,#f01505,lime,#c048c0,#f08080,lime,#c048c0,#f09048,#15a4a4,#80a0f0,#80a0f0,#f01505,#80a0f0,#80a0f0,#ff0,lime,lime,#80a0f0,#15a4a4,#80a0f0,#fff,#fff",aaStyBackgroundColorsLightTheme_Clustal:"#dfe7fb,#fbc5c1,#bfffbf,#efd1ef,#fbdfdf,#bfffbf,#efd1ef,#fbe3d1,#c5e8e8,#dfe7fb,#dfe7fb,#fbc5c1,#dfe7fb,#dfe7fb,#ffffbf,#bfffbf,#bfffbf,#dfe7fb,#c5e8e8,#dfe7fb,#fff,#fff",aaStyLetterColorsDarkTheme_Clustal:"#000,#fff,#000,#fff,#000,#000,#fff,#000,#fff,#000,#000,#fff,#000,#000,#000,#000,#000,#000,#fff,#000,#000,#000",aaStyClass_Helix:"aa-alignment-style-helix",aaStyDesc_Helix:"Helix Propensity",aaStyDefaultLetterColor_Helix:"#ccc",aaStyBackgroundAlpha_Helix:".25",aaStyColorOrder_Helix:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Helix:"#e718e7,#6f906f,#1be41b,#787,#23dc23,#926d92,#f0f,lime,#758a75,#8a758a,#ae51ae,#a05fa0,#ef10ef,#986798,lime,#36c936,#47b847,#8a758a,#21de21,#857a85,#49b649,#c936c9",aaStyBackgroundColorsLightTheme_Helix:"#f9c5f9,#dbe3db,#c6f8c6,#dde1dd,#c8f6c8,#e4dbe4,#ffbfff,#bfffbf,#dde2dd,#e2dde2,#ebd4eb,#e7d7e7,#fbc3fb,#e5d9e5,#bfffbf,#cdf2cd,#d1edd1,#e2dde2,#c8f7c8,#e1dee1,#d2edd2,#f2cdf2",aaStyLetterColorsDarkTheme_Helix:"#fff,#000,#000,#000,#000,#fff,#fff,#000,#000,#000,#fff,#fff,#fff,#fff,#000,#000,#000,#000,#000,#000,#000,#fff",aaStyClass_Hydrophobicity:"aa-alignment-style-hydrophobicity",aaStyDesc_Hydrophobicity:"Hydrophobicity",aaStyDefaultLetterColor_Hydrophobicity:"#ccc",aaStyBackgroundAlpha_Hydrophobicity:".25",aaStyColorOrder_Hydrophobicity:"F,I,W,L,V,M,Y,C,A,T,H,G,S,Q,R,K,N,E,P,D",aaStyColors_Hydrophobicity:"red,red,#ff0606,#ff0606,#ff4c4c,#ff5252,#f77,#ffa5a5,#ffc0c0,#e1e1ff,#d0d0ff,#b6b6ff,#a5a5ff,#9595ff,#8787ff,#6969ff,#5959ff,#4f4fff,#1d1dff,blue",aaStyBackgroundColorsLightTheme_Hydrophobicity:"#ffbfbf,#ffbfbf,#ffc1c1,#ffc1c1,#ffd2d2,#ffd4d4,#fdd,#ffe9e9,#ffefef,#f8f8ff,#f3f3ff,#ededff,#e9e9ff,#e5e5ff,#e1e1ff,#dadaff,#d6d6ff,#d3d3ff,#c7c7ff,#bfbfff",aaStyLetterColorsDarkTheme_Hydrophobicity:"#fff,#fff,#fff,#fff,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#fff,#fff,#fff,#fff,#fff",aaStyClass_Lesk:"aa-alignment-style-lesk",aaStyDesc_Lesk:"Lesk",aaStyDefaultLetterColor_Lesk:"#ccc",aaStyBackgroundAlpha_Lesk:".25",aaStyColorOrder_Lesk:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,Y,Z",aaStyColors_Lesk:"orange,#fff,green,red,red,green,orange,#f0f,green,#fff,red,green,green,#f0f,#fff,green,#f0f,red,orange,orange,#fff,green,green,green,#fff",aaStyBackgroundColorsLightTheme_Lesk:"#ffe9bf,#fff,#bfdfbf,#ffbfbf,#ffbfbf,#bfdfbf,#ffe9bf,#ffbfff,#bfdfbf,#fff,#ffbfbf,#bfdfbf,#bfdfbf,#ffbfff,#fff,#bfdfbf,#ffbfff,#ffbfbf,#ffe9bf,#ffe9bf,#fff,#bfdfbf,#bfdfbf,#bfdfbf,#fff",aaStyLetterColorsDarkTheme_Lesk:"#000,#000,#fff,#fff,#fff,#fff,#000,#fff,#fff,#000,#fff,#fff,#fff,#fff,#000,#fff,#fff,#fff,#000,#000,#000,#fff,#fff,#fff,#000",aaStyClass_MAE:"aa-alignment-style-mae",aaStyDesc_MAE:"MAE",aaStyDefaultLetterColor_MAE:"#ccc",aaStyBackgroundAlpha_MAE:".25",aaStyColorOrder_MAE:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,Y,Z",aaStyColors_MAE:"#7d8,#fff,#9e6,#5b3,#5b3,#99f,#7d8,#55f,#6bf,#fff,#fc7,#6bf,#6bf,#5b3,#fff,#eaa,#5b3,#fc7,#f45,#f45,#fff,#6bf,#99f,#99f,#fff",aaStyBackgroundColorsLightTheme_MAE:"#ddf7e1,#fff,#e6fbd9,#d5eecc,#d5eecc,#e6e6ff,#ddf7e1,#d5d5ff,#d9eeff,#fff,#fff2dd,#d9eeff,#d9eeff,#d5eecc,#fff,#fbeaea,#d5eecc,#fff2dd,#ffd0d5,#ffd0d5,#fff,#d9eeff,#e6e6ff,#e6e6ff,#fff",aaStyLetterColorsDarkTheme_MAE:"#000,#000,#000,#000,#000,#000,#000,#fff,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000,#000",aaStyClass_Strand:"aa-alignment-style-strand",aaStyDesc_Strand:"Strand Propensity",aaStyDefaultLetterColor_Strand:"#ccc",aaStyBackgroundAlpha_Strand:".25",aaStyColorOrder_Strand:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Strand:"#5858a7,#6b6b94,#64649b,#2121de,#9d9d62,#8c8c73,blue,#4949b6,#60609f,#ecec13,#b2b24d,#4747b8,#82827d,#c2c23d,#2323dc,#4949b6,#9d9d62,#c0c03f,#d3d32c,#ff0,#4343bc,#4747b8",aaStyBackgroundColorsLightTheme_Strand:"#d5d5e9,#dadae4,#d8d8e6,#c8c8f7,#e7e7d8,#e2e2dc,#bfbfff,#d2d2ed,#d7d7e7,#fafac4,#ececd3,#d1d1ed,#e0e0df,#f0f0cf,#c8c8f6,#d2d2ed,#e7e7d8,#efefcf,#f4f4ca,#ffffbf,#d0d0ee,#d1d1ed",aaStyLetterColorsDarkTheme_Strand:"#fff,#fff,#fff,#fff,#000,#000,#fff,#fff,#fff,#000,#000,#fff,#000,#000,#fff,#fff,#000,#000,#000,#000,#fff,#fff",aaStyClass_Taylor:"aa-alignment-style-taylor",aaStyDesc_Taylor:"Taylor",aaStyDefaultLetterColor_Taylor:"#ccc",aaStyBackgroundAlpha_Taylor:".25",aaStyColorOrder_Taylor:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Taylor:"#cf0,blue,#c0f,red,#ff0,#f0c,#f06,#f90,#06f,#6f0,#3f0,#60f,lime,#0f6,#fc0,#f30,#f60,#0cf,#0fc,#9f0,#fff,#fff",aaStyBackgroundColorsLightTheme_Taylor:"#f2ffbf,#bfbfff,#f2bfff,#ffbfbf,#ffffbf,#ffbff2,#ffbfd9,#ffe6bf,#bfd9ff,#d9ffbf,#ccffbf,#d9bfff,#bfffbf,#bfffd9,#fff2bf,#ffccbf,#ffd9bf,#bff2ff,#bffff2,#e6ffbf,#fff,#fff",aaStyLetterColorsDarkTheme_Taylor:"#000,#fff,#fff,#fff,#000,#fff,#fff,#000,#fff,#000,#000,#fff,#000,#000,#000,#fff,#000,#000,#000,#000,#000,#000",aaStyClass_Turn:"aa-alignment-style-turn",aaStyDesc_Turn:"Turn Propensity",aaStyDefaultLetterColor_Turn:"#ccc",aaStyBackgroundAlpha_Turn:".25",aaStyColorOrder_Turn:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Turn:"#2cd3d3,#708f8f,red,#e81717,#a85757,#3fc0c0,#788,red,#708f8f,aqua,#1ce3e3,#7e8181,#1ee1e1,#1ee1e1,#f60909,#e11e1e,#738c8c,#738c8c,#9d6262,#07f8f8,#f30c0c,#5ba4a4",aaStyBackgroundColorsLightTheme_Turn:"#caf4f4,#dbe3e3,#ffbfbf,#f9c5c5,#e9d5d5,#cfefef,#dde1e1,#ffbfbf,#dbe3e3,#bfffff,#c6f8f8,#dfe0e0,#c7f8f8,#c7f8f8,#fdc2c2,#f8c7c7,#dce2e2,#dce2e2,#e7d8d8,#c1fdfd,#fcc2c2,#d6e8e8",aaStyLetterColorsDarkTheme_Turn:"#000,#000,#fff,#fff,#fff,#000,#000,#fff,#000,#000,#000,#000,#000,#000,#fff,#fff,#000,#000,#fff,#000,#fff,#000",aaStyClass_Zappo:"aa-alignment-style-zappo",aaStyDesc_Zappo:"Zappo",aaStyDefaultLetterColor_Zappo:"#ccc",aaStyBackgroundAlpha_Zappo:".25",aaStyColorOrder_Zappo:"A,R,N,D,C,Q,E,G,H,I,L,K,M,F,P,S,T,W,Y,V,B,Z",aaStyColors_Zappo:"#ffafaf,#6464ff,lime,red,#ff0,lime,red,#f0f,#6464ff,#ffafaf,#ffafaf,#6464ff,#ffafaf,#ffc800,#f0f,lime,lime,#ffc800,#ffc800,#ffafaf,#fff,#fff",aaStyBackgroundColorsLightTheme_Zappo:"#ffebeb,#d8d8ff,#bfffbf,#ffbfbf,#ffffbf,#bfffbf,#ffbfbf,#ffbfff,#d8d8ff,#ffebeb,#ffebeb,#d8d8ff,#ffebeb,#fff1bf,#ffbfff,#bfffbf,#bfffbf,#fff1bf,#fff1bf,#ffebeb,#fff,#fff",aaStyLetterColorsDarkTheme_Zappo:"#000,#fff,#000,#fff,#000,#000,#fff,#fff,#fff,#000,#000,#fff,#000,#000,#fff,#000,#000,#000,#000,#000,#000,#000",ntStyClass_Default:"nt-alignment-style-default",ntStyDesc_Default:"Default",ntStyDefaultLetterColor_Default:"#ccc",ntStyBackgroundAlpha_Default:".25",ntStyColorOrder_Default:"A,C,G,T,U,R,Y",ntStyColors_Default:"#5050ff,#e00000,#00c000,#e6e600,#c90,#2e8b57,#ff8c00",ntStyBackgroundColorsLightTheme_Default:"#d3d3ff,#f7bfbf,#bfefbf,#f9f9bf,#f2e6bf,#cbe2d5,#ffe2bf",ntStyLetterColorsDarkTheme_Default:"#fff,#fff,#fff,#000,#000,#fff,#000",ntStyClass_Nucleotide:"nt-alignment-style-nucleotide",ntStyDesc_Nucleotide:"Nucleotide",ntStyDefaultLetterColor_Nucleotide:"#ccc",ntStyBackgroundAlpha_Nucleotide:".25",ntStyColorOrder_Nucleotide:"A,C,G,T,U",ntStyColors_Nucleotide:"#64f73f,#ffb340,#eb413c,#3c88ee,#3c88ee",ntStyBackgroundColorsLightTheme_Nucleotide:"#d8fdcf,#ffeccf,#fad0ce,#cee1fb,#cee1fb",ntStyLetterColorsDarkTheme_Nucleotide:"#000,#000,#fff,#fff,#fff",ntStyClass_Purine:"nt-alignment-style-purine",ntStyDesc_Purine:"Purine/Pyrimidine",ntStyDefaultLetterColor_Purine:"#ccc",ntStyBackgroundAlpha_Purine:".25",ntStyColorOrder_Purine:"A,C,G,R,T,U,Y",ntStyColors_Purine:"#ff83fa,#40e0d0,#ff83fa,#ff83fa,#40e0d0,#40e0d0,#40e0d0",ntStyBackgroundColorsLightTheme_Purine:"#ffe0fe,#cff7f3,#ffe0fe,#ffe0fe,#cff7f3,#cff7f3,#cff7f3",ntStyLetterColorsDarkTheme_Purine:"#000,#000,#000,#000,#000,#000,#000"};function Yh(e){const t=Object.keys(Xh).reduce(((t,n)=>{if(-1!==n.indexOf(e+"StyClass_")){const r=n.split(e+"StyClass_")[1],i=Xh[e+"StyColorOrder_"+r].replace(/ /g,"").split(","),o=Xh[e+"StyColors_"+r].replace(/ /g,"").split(","),s=Xh[e+"StyBackgroundColorsLightTheme_"+r].replace(/ /g,"").split(","),a=Xh[e+"StyLetterColorsDarkTheme_"+r].replace(/ /g,"").split(","),l=Xh[e+"StyDesc_"+r];t[r]={key:r,description:l,commonName:r,forAlignmentType:"aa"===e?"aminoacid":"nucleotide",className:Xh[n],backgroundAlpha:parseFloat(Xh[e+"StyBackgroundAlpha_"+r]),defaultLetterColor:Xh[e+"StyDefaultLetterColor_"+r],colors:Object.fromEntries(i.map(((e,t)=>[i[t],o[t]]))),backgroundColorsLightTheme:Object.fromEntries(i.map(((e,t)=>[i[t],s[t]]))),letterColorsDarkTheme:Object.fromEntries(i.map(((e,t)=>[i[t],a[t]])))}}return t}),{});return{...t,...qh(Object.values(t))}}const Kh=Yh("aa"),$h=Yh("nt"),Qh=(()=>{const e={AMINOACID:{key:"aminoacid-alignment",description:"Amino Acid Sequences",className:Xh.aaAlignTypeClass},NUCLEOTIDE:{key:"nucleotide-alignment",description:"Nucleotide Sequences",className:Xh.ntAlignTypeClass}};return{...e,...qh(Object.values(e))}})(),Zh=(()=>{const e={ALL:{key:"all",description:"All",className:Xh.styPosAllClass},QUERY:{key:"query",description:"Same as Query",className:Xh.styPosQueryClass,shortClassname:Xh.queryClass},QUERY_DIFF:{key:"query-diff",description:"Different from Query",className:Xh.styPosQueryDiffClass},CONSENSUS:{key:"consensus",description:"Same as Consensus",className:Xh.styPosConsensusClass,shortClassname:Xh.consensusClass},CONSENSUS_DIFF:{key:"consensus-diff",description:"Different from Consensus",className:Xh.styPosConsensusDiffClass}};return{...e,SEARCH_RESULTS_ONLY:{key:"search-results",description:"Search Results",className:Xh.styPosAllClass},...qh(Object.values(e))}})(),Jh=(()=>{const e={LIGHT:{key:"light",description:"Light",className:Xh.lightHueClass},DARK:{key:"dark",description:"Dark",className:Xh.darkHueClass},NO_BACKGROUND:{key:"lettersonly",description:"Letters Only",className:Xh.lettersOnlyHueClass}};return{...e,...qh(Object.values(e))}})(),ed=Xh.resiPrefix;Xh.darkHueClass,Xh.lightHueClass,Xh.residueParentClass;const td=function(){let e="";for(var t=32;t<=126;t++)e+=String.fromCharCode(t);return e.split("").reduce(((e,t)=>{const n=ed+("."===t?"dot":t);return e.set(t,new Map([[!0,new Map([[!0,n+" "+Xh.consensusClass+" "+Xh.queryClass],[!1,n+" "+Xh.consensusClass]])],[!1,new Map([[!0,n+" "+Xh.queryClass],[!1,n]])]])),e}),new Map)}();function nd(e,t,n){return td.get(e).get(t).get(n)}var rd,id;class od{static list(){return od.canonicalAminoAcids}static fromSingleLetterCode(e){return e in this.bySingleLetterCode?this.bySingleLetterCode[e]:od.UNKNOWN}static fromThreeLetterCode(e){return e in this.byThreeLetterCode?od.byThreeLetterCode[e]:od.UNKNOWN}constructor(e,t,n){this.singleLetterCode=e,this.threeLetterCode=t,this.fullName=n,this.colors=void 0,this.singleLetterCode=e,this.threeLetterCode=t,this.fullName=n,this.colors=Kh.list.reduce(((t,n)=>{const r=new Map;return r.set(Jh.LIGHT,{letterColor:o(n.colors[e]?n.colors[e]:n.defaultLetterColor),backgroundColor:o(n.backgroundColorsLightTheme[e]?n.backgroundColorsLightTheme[e]:"#ffffff")}),r.set(Jh.DARK,{letterColor:o(n.letterColorsDarkTheme[e]?n.letterColorsDarkTheme[e]:n.defaultLetterColor),backgroundColor:o(n.colors[e]?n.colors[e]:"#ffffff")}),r.set(Jh.NO_BACKGROUND,{letterColor:o(n.colors[e]?n.colors[e]:n.defaultLetterColor),backgroundColor:o("#ffffff")}),t.set(n,r),t}),new Map)}}rd=od,od.canonicalAminoAcids=[new rd("A","ALA","Alanine"),new rd("R","ARG","Arginine"),new rd("N","ASN","Asparagine"),new rd("D","ASP","Aspartic Acid"),new rd("C","CYS","Cysteine"),new rd("Q","GLU","Glutamine"),new rd("E","GLN","Glutamic Acid"),new rd("G","GLY","Glycine"),new rd("H","HIS","Histidine"),new rd("I","ILE","Isoleucine"),new rd("L","LEU","Leucine"),new rd("K","LYS","Lysine"),new rd("M","MET","Methionine"),new rd("F","PHE","Phenylalanine"),new rd("P","PRO","Proline"),new rd("S","SER","Serine"),new rd("T","THR","Threonine"),new rd("W","TRP","Tryptophan"),new rd("Y","TYR","Tyrosine"),new rd("V","VAL","Valine"),new rd("X","UKN","Unknown")],od.bySingleLetterCode=rd.canonicalAminoAcids.reduce(((e,t)=>(e[t.singleLetterCode]=t,e)),{}),od.byThreeLetterCode=rd.canonicalAminoAcids.reduce(((e,t)=>(e[t.threeLetterCode]=t,e)),{}),od.UNKNOWN=rd.bySingleLetterCode.X;class sd{static list(){return sd.allNucleotides}static fromSingleLetterCode(e){return e in this.bySingleLetterCode?this.bySingleLetterCode[e]:sd.UNKNOWN}constructor(e,t){this.singleLetterCode=e,this.fullName=t,this.colors=void 0,this.singleLetterCode=e,this.fullName=t,this.colors=$h.list.reduce(((t,n)=>{const r=new Map;return r.set(Jh.LIGHT,{letterColor:o(n.colors[e]?n.colors[e]:n.defaultLetterColor),backgroundColor:o(n.backgroundColorsLightTheme[e]?n.backgroundColorsLightTheme[e]:"#ffffff")}),r.set(Jh.DARK,{letterColor:o(n.letterColorsDarkTheme[e]?n.letterColorsDarkTheme[e]:n.defaultLetterColor),backgroundColor:o(n.colors[e]?n.colors[e]:"#ffffff")}),r.set(Jh.NO_BACKGROUND,{letterColor:o(n.colors[e]?n.colors[e]:n.defaultLetterColor),backgroundColor:o("#ffffff")}),t.set(n,r),t}),new Map)}}id=sd,sd.allNucleotides=[new id("A","Adenine"),new id("C","Cytosine"),new id("G","Guanine"),new id("T","Thymidine"),new id("U","Uracil"),new id("R","Purine"),new id("Y","Pyrimidine"),new id("X","Unknown")],sd.bySingleLetterCode=id.allNucleotides.reduce(((e,t)=>(e[t.singleLetterCode]=t,e)),{}),sd.UNKNOWN=id.bySingleLetterCode.X;const ad="posaxis";const ld=e=>{const{numPos:t,posHeight:n,posWidth:o,width:s=t*o,height:a=n}=e,l=Dh(e.numPos),c=(0,oc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(t*o," ").concat(n),width:s,height:a,children:l.split("").map(((e,t)=>(0,oc.jsx)("text",{className:ad,dx:t*o,children:e},t)))}),u=document.createElement("div"),h=(0,r.s)(u);(0,i.flushSync)((()=>{h.render(c)}));const d=u.innerHTML;return h.unmount(),d},cd=e=>{const{svgElement:t,positionalAxis:n,width:r=n.numPos*n.posWidth,height:i=100}=e,{numPos:o,posWidth:s,posHeight:a,spaceBtwBarplotAndPositionalAxis:l}=n;t.setAttribute("y","0"),t.setAttribute("x","0"),t.setAttribute("width","".concat(o*s)),t.setAttribute("height","".concat(i-a-l));const c=ld({...n,width:o*s,height:a});return['<svg width="'.concat(r,'" height="').concat(i,'" xmlns="http://www.w3.org/2000/svg">'),t.outerHTML,'<g transform="translate('.concat(0,", ",i-a,')">'),c,"</g>","</svg>"].join("\n")},ud=e=>{const{svgId:t,width:n,height:r,positionalAxis:i}=e,o=document.getElementById(t);if(!o)return void console.error("ERROR: no barplot (no elements with '".concat(t,"' found on the page)"));const s=o.cloneNode(!0),a=s.getElementsByClassName("interaction-placeholder");for(var l=a.length-1;l>=0;--l)a[l].remove();return["g","rect"].forEach((e=>{const t=s.getElementsByTagName(e);for(var n=t.length-1;n>=0;--n)t[n].removeAttribute("class")})),s.removeAttribute("style"),s.removeAttribute("x"),s.removeAttribute("y"),i?cd({svgElement:s,positionalAxis:i,width:n,height:r}):(void 0!==n&&s.setAttribute("width","".concat(n)),void 0!==r&&s.setAttribute("height","".concat(r)),s.outerHTML)},hd=e=>{var t,n;const{svgId:r,alignmentType:i,aaColorScheme:o=Kh.list[0],ntColorScheme:s=$h.list[0],positionsToStyle:a,width:l,height:c,positionalAxis:u}=e,h=i===Qh.AMINOACID?o:s,d=document.getElementById(r);if(!d)return void console.error("ERROR: no logo (no elements id '".concat(r,"' found on the page)"));const f=d.cloneNode(!0);f.removeAttribute("style");const p=f.getElementsByClassName("interaction-placeholder");for(var m=p.length-1;m>=0;--m)p[m].remove();const g=null===(t=(i===Qh.AMINOACID?od:sd).UNKNOWN.colors.get(h))||void 0===t||null===(n=t.get(Jh.NO_BACKGROUND))||void 0===n?void 0:n.letterColor.hexString;return Array.from(f.getElementsByTagName("g")).forEach((e=>{Array.from(e.getElementsByTagName("path")).forEach((e=>{var t;const n=null===(t=e.getAttribute("class"))||void 0===t?void 0:t.split(" "),r=n.find((e=>e.startsWith(ed))).slice(-1),i=n.includes(Zh.QUERY.shortClassname),o=n.includes(Zh.CONSENSUS.shortClassname),s=h.colors[r]?h.colors[r]:g,l=a===Zh.ALL||a===Zh.QUERY&&i?s:a!==Zh.QUERY_DIFF||i?a===Zh.CONSENSUS&&o?s:g:s;e.setAttribute("style","fill:".concat(l,";"))}))})),void 0!==l&&f.setAttribute("width","".concat(l)),void 0!==c&&f.setAttribute("height","".concat(c)),u?cd({svgElement:f,positionalAxis:u,width:l,height:c}).replaceAll(ed,"r"):f.outerHTML.replaceAll(ed,"r")},dd=(e,t,n)=>['<text class="title" x="'.concat(t,'" y="').concat(n,'">').concat(e,":</text>")].join(" "),fd=e=>{const{alignment:t,sortBy:n,alignmentType:r,aaColorScheme:i=Kh.list[0],ntColorScheme:o=$h.list[0],positionsToStyle:s,residueColoring:a,logoSvgId:l,barplots:u=[],includePositionAxis:h=!0,includeMetadata:d=!0,includeConsensus:f=!0,includeQuery:p=!0,endSeqIdx:m,startSeqIdx:g=0,moleculeWidth:v=7,moleculeHeight:y=10,logoHeight:b=10*y,barplotHeights:x=10*y,gapBetweenPlots:_=5}=e,S=r===Qh.AMINOACID?i:o,w=g,E=void 0!==m?m:t.getSequenceCount()>100?99:t.getSequenceCount()-1,A=t.getSequences(n),T=c(w,E).map((e=>A[e])),C=T.reduce(((e,t)=>e>t.annotations[Bh.ID].length?e:t.annotations[Bh.ID].length),-1)*v,P=u.length<1?0:u.length*(x+_),R=l?b+_:0,I=f?y+_:0,M=p?y+_:0,O=d?C:0,k={barplots:{y:0,x:O},logo:{y:P,x:O},consensus:{y:P+R,x:O},query:{y:P+R+I,x:O},position_axis:{y:P+R+I+M,x:O},msa:{y:P+R+I+M+(h?y+_:0),x:O},metadata_and_titles:{x:O-v}},L=r===Qh.AMINOACID?od:sd,D=[...p?[t.getQuery()]:[],...f?[t.getConsensus()]:[],...T],N=[...new Set([L.UNKNOWN.singleLetterCode,...D.map((e=>e.sequence.split(""))).join("")])],B=new Map;for(let c=0;c<D[0].sequence.length;c++)B.set(c,[...new Set(D.reduce(((e,t)=>(e.push(t.sequence[c]),e)),[]))]);const F=N.reduce(((e,t)=>{const n=L.fromSingleLetterCode(t).colors.get(S).get(a);return e[t]={letter:t,backgroundColor:n.backgroundColor.hexString,letterColor:n.letterColor.hexString},e}),{}),U=(e,t)=>{const n="."===e?"dot":"-"===e?"dash":e;return void 0!==t&&s!==Zh.ALL?"".concat(n).concat(t):n},z=u.map(((e,n)=>{const r=k.barplots.x,i=k.barplots.y+n*(x+_);return[d?dd(e.title,k.metadata_and_titles.x,i+x/2):"",'<g transform="translate('.concat(r,", ").concat(i,')">'),ud({svgId:e.svgId,height:x,width:t.getSequenceLength()*v}),"</g>"].join("")})).join("\n"),H=l?[d?dd("Logo",k.metadata_and_titles.x,k.logo.y+b/2):"",'<g transform="translate('.concat(k.logo.x,", ").concat(k.logo.y,')">'),hd({svgId:l,alignment:t,alignmentType:r,aaColorScheme:i,ntColorScheme:o,positionsToStyle:s,height:b,width:t.getSequenceLength()*v}),"</g>"].join(""):"",j=[d?dd("Position",k.metadata_and_titles.x,k.position_axis.y+y/2):"",'<g transform="translate('.concat(k.position_axis.x,",").concat(k.position_axis.y,')">'),ld({numPos:t.getSequenceLength(),posHeight:y,posWidth:v}),"</g>"].join(""),V=T.map(((e,t)=>['<g transform="translate('.concat(k.metadata_and_titles.x,", ").concat(k.msa.y+t*y,')">'),'<text class="geneid">'.concat(e.annotations[Bh.ID],"</text>"),"</g>"].join(""))),G=(e,t,n,r)=>{const i=['<text class="'.concat("msa",'"'),'x="'.concat(v/2,'"'),'fill="'.concat(r,'">').concat(t,"</text>")].join(" "),o=["<rect",'width="'.concat(v,'px"'),'height="'.concat(y,'px"'),'fill="'.concat(n,'"/>')].join(" ");return'<g id="'.concat(e,'">').concat(o).concat(i,"</g>")},W=s===Zh.ALL?N.map((e=>{const t=F[e];return G(U(e),e,t.backgroundColor,t.letterColor)})):Array.from(B).map((e=>{let[n,r]=e;const i=t.getQuery().sequence,o=t.getConsensus().sequence;return r.reduce(((e,t)=>{const r=F[t];return s===Zh.QUERY&&t===i[n]||s===Zh.QUERY_DIFF&&t!==i[n]||s===Zh.CONSENSUS&&t===o[n]||s===Zh.CONSENSUS_DIFF&&t!==o[n]?e.push(r):e.push({...F[L.UNKNOWN.singleLetterCode],letter:t}),e}),[]).map((e=>G(U(e.letter,n),e.letter,e.backgroundColor,e.letterColor))).join("\n")})),q=[d?dd("Consensus",k.metadata_and_titles.x,k.consensus.y+y/2):"",'<g transform="translate('.concat(k.consensus.x,", ").concat(k.consensus.y,')">'),...t.getConsensus().sequence.split("").map(((e,t)=>'<use xlink:href="#'.concat(U(e,t),'" x="').concat(t*v,'"/>'))),"</g>"].join("\n"),X=[d?dd("Query",k.metadata_and_titles.x,k.query.y+y/2):"",'<g transform="translate('.concat(k.query.x,", ").concat(k.query.y,')">'),...t.getQuery().sequence.split("").map(((e,t)=>'<use xlink:href="#'.concat(U(e,t),'" x="').concat(t*v,'"/>'))),"</g>"].join("\n"),Y=T.map(((e,t)=>['<g transform="translate('.concat(k.msa.x,", ").concat(k.msa.y+t*y,')">'),...e.sequence.split("").map(((e,t)=>'<use xlink:href="#'.concat(U(e,t),'" x="').concat(t*v,'"/>'))),"</g>"].join("\n"))),K=k.msa.x+t.getSequenceLength()*v,$=k.msa.y+(E-w+1)*y;return['<?xml version="1.0" encoding="utf-8"?>','<svg viewBox="0 0 '.concat(K," ").concat($,'" \n          xmlns="http://www.w3.org/2000/svg" \n          xmlns:xlink="http://www.w3.org/1999/xlink">'),['<style type="text/css">',["text.geneid{","text-anchor: end;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),["text.".concat(ad,"{"),"text-anchor: start;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),["text.".concat("msa","{"),"text-anchor: middle;","font-family: monospace;","font-size: 10px;","dominant-baseline: hanging;","}"].join(""),["text.title{","text-anchor: end;","font-family: monospace;","font-size: 12px;","font-weight: bold;","dominant-baseline: middle;","}"].join(""),"</style>"].join("\n"),"<defs>",...W,"</defs>",z,H,f?q:"",p?X:"",h?j:"",...d?V:[],...Y,"</svg>"].join("\n")},pd=Math.min,md=Math.max,gd=Math.round,vd=Math.floor,yd=e=>({x:e,y:e}),bd={left:"right",right:"left",bottom:"top",top:"bottom"},xd={start:"end",end:"start"};function _d(e,t,n){return md(e,pd(t,n))}function Sd(e,t){return"function"===typeof e?e(t):e}function wd(e){return e.split("-")[0]}function Ed(e){return e.split("-")[1]}function Ad(e){return"x"===e?"y":"x"}function Td(e){return"y"===e?"height":"width"}function Cd(e){return["top","bottom"].includes(wd(e))?"y":"x"}function Pd(e){return Ad(Cd(e))}function Rd(e){return e.replace(/start|end/g,(e=>xd[e]))}function Id(e){return e.replace(/left|right|bottom|top/g,(e=>bd[e]))}function Md(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Od(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function kd(e,t,n){let{reference:r,floating:i}=e;const o=Cd(t),s=Pd(t),a=Td(s),l=wd(t),c="y"===o,u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-i.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Ed(t)){case"start":f[s]-=d*(n&&c?-1:1);break;case"end":f[s]+=d*(n&&c?-1:1)}return f}async function Ld(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=Sd(t,e),p=Md(f),m=a[d?"floating"===h?"reference":"floating":h],g=Od(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===h?{...s.floating,x:r,y:i}:s.reference,y=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),b=await(null==o.isElement?void 0:o.isElement(y))&&await(null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},x=Od(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}const Dd=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Sd(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=wd(i),y=wd(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=d||(y||!m?[Id(a)]:function(e){const t=Id(e);return[Rd(e),t,Rd(t)]}(a));d||"none"===p||x.push(...function(e,t,n,r){const i=Ed(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(wd(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(Rd)))),o}(a,m,p,b));const _=[a,...x],S=await Ld(t,g),w=[];let E=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&w.push(S[v]),h){const e=function(e,t,n){void 0===n&&(n=!1);const r=Ed(e),i=Pd(e),o=Td(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Id(s)),[s,Id(s)]}(i,s,b);w.push(S[e[0]],S[e[1]])}if(E=[...E,{placement:i,overflows:w}],!w.every((e=>e<=0))){var A,T;const e=((null==(A=o.flip)?void 0:A.index)||0)+1,t=_[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let n=null==(T=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:T.placement;if(!n)switch(f){case"bestFit":{var C;const e=null==(C=E.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:C[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}};const Nd=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=wd(n),a=Ed(n),l="y"===Cd(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,h=Sd(t,e);let{mainAxis:d,crossAxis:f,alignmentAxis:p}="number"===typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"===typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}(t,e);return s===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},Bd=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Sd(e,t),c={x:n,y:r},u=await Ld(t,l),h=Cd(wd(i)),d=Ad(h);let f=c[d],p=c[h];if(o){const e="y"===d?"bottom":"right";f=_d(f+u["y"===d?"top":"left"],f,f-u[e])}if(s){const e="y"===h?"bottom":"right";p=_d(p+u["y"===h?"top":"left"],p,p-u[e])}const m=a.fn({...t,[d]:f,[h]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function Fd(e){return Hd(e)?(e.nodeName||"").toLowerCase():"#document"}function Ud(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function zd(e){var t;return null==(t=(Hd(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Hd(e){return e instanceof Node||e instanceof Ud(e).Node}function jd(e){return e instanceof Element||e instanceof Ud(e).Element}function Vd(e){return e instanceof HTMLElement||e instanceof Ud(e).HTMLElement}function Gd(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Ud(e).ShadowRoot)}function Wd(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=$d(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function qd(e){return["table","td","th"].includes(Fd(e))}function Xd(e){const t=Yd(),n=$d(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Yd(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Kd(e){return["html","body","#document"].includes(Fd(e))}function $d(e){return Ud(e).getComputedStyle(e)}function Qd(e){return jd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Zd(e){if("html"===Fd(e))return e;const t=e.assignedSlot||e.parentNode||Gd(e)&&e.host||zd(e);return Gd(t)?t.host:t}function Jd(e){const t=Zd(e);return Kd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Vd(t)&&Wd(t)?t:Jd(t)}function ef(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Jd(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=Ud(i);return o?t.concat(s,s.visualViewport||[],Wd(i)?i:[],s.frameElement&&n?ef(s.frameElement):[]):t.concat(i,ef(i,[],n))}function tf(e){const t=$d(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Vd(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=gd(n)!==o||gd(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function nf(e){return jd(e)?e:e.contextElement}function rf(e){const t=nf(e);if(!Vd(t))return yd(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=tf(t);let s=(o?gd(n.width):n.width)/r,a=(o?gd(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const of=yd(0);function sf(e){const t=Ud(e);return Yd()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:of}function af(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=nf(e);let s=yd(1);t&&(r?jd(r)&&(s=rf(r)):s=rf(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==Ud(e))&&t}(o,n,r)?sf(o):yd(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,h=i.height/s.y;if(o){const e=Ud(o),t=r&&jd(r)?Ud(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=rf(n),t=n.getBoundingClientRect(),r=$d(n),i=t.left+(n.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(n.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,h*=e.y,l+=i,c+=o,n=Ud(n).frameElement}}return Od({width:u,height:h,x:l,y:c})}function lf(e){return af(zd(e)).left+Qd(e).scrollLeft}function cf(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=Ud(e),r=zd(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=Yd();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=zd(e),n=Qd(e),r=e.ownerDocument.body,i=md(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=md(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+lf(e);const a=-n.scrollTop;return"rtl"===$d(r).direction&&(s+=md(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(zd(e));else if(jd(t))r=function(e,t){const n=af(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Vd(e)?rf(e):yd(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=sf(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return Od(r)}function uf(e,t){const n=Zd(e);return!(n===t||!jd(n)||Kd(n))&&("fixed"===$d(n).position||uf(n,t))}function hf(e,t,n){const r=Vd(t),i=zd(t),o="fixed"===n,s=af(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=yd(0);if(r||!r&&!o)if(("body"!==Fd(t)||Wd(i))&&(a=Qd(t)),r){const e=af(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=lf(i));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function df(e,t){return Vd(e)&&"fixed"!==$d(e).position?t?t(e):e.offsetParent:null}function ff(e,t){const n=Ud(e);if(!Vd(e))return n;let r=df(e,t);for(;r&&qd(r)&&"static"===$d(r).position;)r=df(r,t);return r&&("html"===Fd(r)||"body"===Fd(r)&&"static"===$d(r).position&&!Xd(r))?n:r||function(e){let t=Zd(e);for(;Vd(t)&&!Kd(t);){if(Xd(t))return t;t=Zd(t)}return null}(e)||n}const pf={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Vd(n),o=zd(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},a=yd(1);const l=yd(0);if((i||!i&&"fixed"!==r)&&(("body"!==Fd(n)||Wd(o))&&(s=Qd(n)),Vd(n))){const e=af(n);a=rf(n),l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+l.x,y:t.y*a.y-s.scrollTop*a.y+l.y}},getDocumentElement:zd,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=ef(e,[],!1).filter((e=>jd(e)&&"body"!==Fd(e))),i=null;const o="fixed"===$d(e).position;let s=o?Zd(e):e;for(;jd(s)&&!Kd(s);){const t=$d(s),n=Xd(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||Wd(s)&&!n&&uf(e,s))?r=r.filter((e=>e!==s)):i=t,s=Zd(s)}return t.set(e,r),r}(t,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce(((e,n)=>{const r=cf(t,n,i);return e.top=md(r.top,e.top),e.right=pd(r.right,e.right),e.bottom=pd(r.bottom,e.bottom),e.left=md(r.left,e.left),e}),cf(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:ff,getElementRects:async function(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||ff,o=this.getDimensions;return{reference:hf(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return tf(e)},getScale:rf,isElement:jd,isRTL:function(e){return"rtl"===$d(e).direction}};function mf(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=nf(e),u=i||o?[...c?ef(c):[],...ef(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const h=c&&a?function(e,t){let n,r=null;const i=zd(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const{left:c,top:u,width:h,height:d}=e.getBoundingClientRect();if(a||t(),!h||!d)return;const f={rootMargin:-vd(u)+"px "+-vd(i.clientWidth-(c+h))+"px "+-vd(i.clientHeight-(u+d))+"px "+-vd(c)+"px",threshold:md(0,pd(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}p=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(g){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),o}(c,n):null;let d,f=-1,p=null;s&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{p&&p.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?af(e):null;return l&&function t(){const r=af(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),h&&h(),p&&p.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const gf=(e,t,n)=>{const r=new Map,i={platform:pf,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=kd(c,r,l),d=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:o}=a[m],{x:g,y:v,data:y,reset:b}=await o({x:u,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,h=null!=v?v:h,f={...f,[n]:{...f[n],...y}},b&&p<=50&&(p++,"object"===typeof b&&(b.placement&&(d=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:h}=kd(c,d,l))),m=-1)}return{x:u,y:h,placement:d,strategy:i,middlewareData:f}})(e,t,{...i,platform:o})};var vf=n(715);const yf="react-tooltip-core-styles",bf="react-tooltip-base-styles",xf={core:!1,base:!1};function _f(e){let{css:t,id:n=bf,type:r="base",ref:i}=e;var o,s;if(!t||"undefined"==typeof document||xf[r])return;if("core"===r&&"undefined"!=typeof process&&(null===(o=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===o?void 0:o.REACT_TOOLTIP_DISABLE_CORE_STYLES))return;if("base"!==r&&"undefined"!=typeof process&&(null===(s=null===process||void 0===process?void 0:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===s?void 0:s.REACT_TOOLTIP_DISABLE_BASE_STYLES))return;"core"===r&&(n=yf),i||(i={});const{insertAt:a}=i;if(document.getElementById(n))return void console.warn("[react-tooltip] Element with id '".concat(n,"' already exists. Call `removeStyle()` first"));const l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.id=n,c.type="text/css","top"===a&&l.firstChild?l.insertBefore(c,l.firstChild):l.appendChild(c),c.styleSheet?c.styleSheet.cssText=t:c.appendChild(document.createTextNode(t)),xf[r]=!0}const Sf=(e,t,n)=>{let r=null;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=()=>{r=null,n||e.apply(this,o)};n&&!r&&(e.apply(this,o),r=setTimeout(a,t)),n||(r&&clearTimeout(r),r=setTimeout(a,t))}},wf="DEFAULT_TOOLTIP_ID",Ef={anchorRefs:new Set,activeAnchor:{current:null},attach:()=>{},detach:()=>{},setActiveAnchor:()=>{}},Af=(0,e.createContext)({getTooltipData:()=>Ef});function Tf(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wf;return(0,e.useContext)(Af).getTooltipData(t)}const Cf="undefined"!=typeof window?e.useLayoutEffect:e.useEffect,Pf=e=>{if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;const t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((e=>{const n=t.getPropertyValue(e);return"auto"===n||"scroll"===n}))},Rf=e=>{if(!e)return null;let t=e.parentElement;for(;t;){if(Pf(t))return t;t=t.parentElement}return document.scrollingElement||document.documentElement},If=async e=>{let{elementReference:t=null,tooltipReference:n=null,tooltipArrowReference:r=null,place:i="top",offset:o=10,strategy:s="absolute",middlewares:a=[Nd(Number(o)),Dd({fallbackAxisSideDirection:"start"}),Bd({padding:5})],border:l}=e;if(!t)return{tooltipStyles:{},tooltipArrowStyles:{},place:i};if(null===n)return{tooltipStyles:{},tooltipArrowStyles:{},place:i};const c=a;return r?(c.push((e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Sd(e,t)||{};if(null==c)return{};const h=Md(u),d={x:n,y:r},f=Pd(i),p=Td(f),m=await s.getDimensions(c),g="y"===f,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=o.reference[p]+o.reference[f]-d[f]-o.floating[p],_=d[f]-o.reference[f],S=await(null==s.getOffsetParent?void 0:s.getOffsetParent(c));let w=S?S[b]:0;w&&await(null==s.isElement?void 0:s.isElement(S))||(w=a.floating[b]||o.floating[p]);const E=x/2-_/2,A=w/2-m[p]/2-1,T=pd(h[v],A),C=pd(h[y],A),P=T,R=w-m[p]-C,I=w/2-m[p]/2+E,M=_d(P,I,R),O=!l.arrow&&null!=Ed(i)&&I!=M&&o.reference[p]/2-(I<P?T:C)-m[p]/2<0,k=O?I<P?I-P:I-R:0;return{[f]:d[f]+k,data:{[f]:M,centerOffset:I-M-k,...O&&{alignmentOffset:k}},reset:O}}}))({element:r,padding:5})),gf(t,n,{placement:i,strategy:s,middleware:c}).then((e=>{let{x:t,y:n,placement:r,middlewareData:i}=e;var o,s;const a={left:"".concat(t,"px"),top:"".concat(n,"px"),border:l},{x:c,y:u}=null!==(o=i.arrow)&&void 0!==o?o:{x:0,y:0},h=null!==(s={top:"bottom",right:"left",bottom:"top",left:"right"}[r.split("-")[0]])&&void 0!==s?s:"bottom",d=l&&{borderBottom:l,borderRight:l};let f=0;if(l){const e="".concat(l).match(/(\d+)px/);f=(null==e?void 0:e[1])?Number(e[1]):1}return{tooltipStyles:a,tooltipArrowStyles:{left:null!=c?"".concat(c,"px"):"",top:null!=u?"".concat(u,"px"):"",right:"",bottom:"",...d,[h]:"-".concat(4+f,"px")},place:r}}))):gf(t,n,{placement:"bottom",strategy:s,middleware:c}).then((e=>{let{x:t,y:n,placement:r}=e;return{tooltipStyles:{left:"".concat(t,"px"),top:"".concat(n,"px")},tooltipArrowStyles:{},place:r}}))};var Mf={tooltip:"core-styles-module_tooltip__3vRRp",fixed:"core-styles-module_fixed__pcSol",arrow:"core-styles-module_arrow__cvMwQ",noArrow:"core-styles-module_noArrow__xock6",clickable:"core-styles-module_clickable__ZuTTB",show:"core-styles-module_show__Nt9eE",closing:"core-styles-module_closing__sGnxF"},Of={tooltip:"styles-module_tooltip__mnnfp",arrow:"styles-module_arrow__K0L3T",dark:"styles-module_dark__xNqje",light:"styles-module_light__Z6W-X",success:"styles-module_success__A2AKt",warning:"styles-module_warning__SCK0X",error:"styles-module_error__JvumD",info:"styles-module_info__BWdHW"};const kf=t=>{let{forwardRef:n,id:r,className:i,classNameArrow:o,variant:s="dark",anchorId:a,anchorSelect:l,place:c="top",offset:u=10,events:h=["hover"],openOnClick:d=!1,positionStrategy:f="absolute",middlewares:p,wrapper:m,delayShow:g=0,delayHide:v=0,float:y=!1,hidden:b=!1,noArrow:x=!1,clickable:_=!1,closeOnEsc:S=!1,closeOnScroll:w=!1,closeOnResize:E=!1,openEvents:A,closeEvents:T,globalCloseEvents:C,imperativeModeOnly:P,style:R,position:I,afterShow:M,afterHide:O,content:k,contentWrapperRef:L,isOpen:D,setIsOpen:N,activeAnchor:B,setActiveAnchor:F,border:U,opacity:z,arrowColor:H,role:j="tooltip"}=t;var V;const G=(0,e.useRef)(null),W=(0,e.useRef)(null),q=(0,e.useRef)(null),X=(0,e.useRef)(null),Y=(0,e.useRef)(null),[K,$]=(0,e.useState)(c),[Q,Z]=(0,e.useState)({}),[J,ee]=(0,e.useState)({}),[te,ne]=(0,e.useState)(!1),[re,ie]=(0,e.useState)(!1),[oe,se]=(0,e.useState)(null),ae=(0,e.useRef)(!1),le=(0,e.useRef)(null),{anchorRefs:ce,setActiveAnchor:ue}=Tf(r),he=(0,e.useRef)(!1),[de,fe]=(0,e.useState)([]),pe=(0,e.useRef)(!1),me=d||h.includes("click"),ge=me||(null==A?void 0:A.click)||(null==A?void 0:A.dblclick)||(null==A?void 0:A.mousedown),ve=A?{...A}:{mouseenter:!0,focus:!0,click:!1,dblclick:!1,mousedown:!1};!A&&me&&Object.assign(ve,{mouseenter:!1,focus:!1,click:!0});const ye=T?{...T}:{mouseleave:!0,blur:!0,click:!1,dblclick:!1,mouseup:!1};!T&&me&&Object.assign(ye,{mouseleave:!1,blur:!1});const be=C?{...C}:{escape:S||!1,scroll:w||!1,resize:E||!1,clickOutsideAnchor:ge||!1};P&&(Object.assign(ve,{mouseenter:!1,focus:!1,click:!1,dblclick:!1,mousedown:!1}),Object.assign(ye,{mouseleave:!1,blur:!1,click:!1,dblclick:!1,mouseup:!1}),Object.assign(be,{escape:!1,scroll:!1,resize:!1,clickOutsideAnchor:!1})),Cf((()=>(pe.current=!0,()=>{pe.current=!1})),[]);const xe=e=>{pe.current&&(e&&ie(!0),setTimeout((()=>{pe.current&&(null==N||N(e),void 0===D&&ne(e))}),10))};(0,e.useEffect)((()=>{if(void 0===D)return()=>null;D&&ie(!0);const e=setTimeout((()=>{ne(D)}),10);return()=>{clearTimeout(e)}}),[D]),(0,e.useEffect)((()=>{if(te!==ae.current)if(Y.current&&clearTimeout(Y.current),ae.current=te,te)null==M||M();else{const e=(e=>{const t=getComputedStyle(document.body).getPropertyValue("--rt-transition-show-delay").match(/^([\d.]+)(m?s?)$/);if(!t)return 0;const[,n,r]=t;return"s"!==r&&"ms"!==r?0:Number(n)*("ms"===r?1:1e3)})();Y.current=setTimeout((()=>{ie(!1),se(null),null==O||O()}),e+25)}}),[te]);const _e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;q.current&&clearTimeout(q.current),q.current=setTimeout((()=>{xe(!0)}),e)},Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;X.current&&clearTimeout(X.current),X.current=setTimeout((()=>{he.current||xe(!1)}),e)},we=e=>{var t;if(!e)return;const n=null!==(t=e.currentTarget)&&void 0!==t?t:e.target;if(!(null==n?void 0:n.isConnected))return F(null),void ue({current:null});g?_e():xe(!0),F(n),ue({current:n}),X.current&&clearTimeout(X.current)},Ee=()=>{_?Se(v||100):v?Se():xe(!1),q.current&&clearTimeout(q.current)},Ae=e=>{let{x:t,y:n}=e;var r;const i={getBoundingClientRect:()=>({x:t,y:n,width:0,height:0,top:n,left:t,right:t,bottom:n})};If({place:null!==(r=null==oe?void 0:oe.place)&&void 0!==r?r:c,offset:u,elementReference:i,tooltipReference:G.current,tooltipArrowReference:W.current,strategy:f,middlewares:p,border:U}).then((e=>{Object.keys(e.tooltipStyles).length&&Z(e.tooltipStyles),Object.keys(e.tooltipArrowStyles).length&&ee(e.tooltipArrowStyles),$(e.place)}))},Te=e=>{if(!e)return;const t=e,n={x:t.clientX,y:t.clientY};Ae(n),le.current=n},Ce=e=>{var t;if(!te)return;const n=e.target;(null===(t=G.current)||void 0===t?void 0:t.contains(n))||[document.querySelector("[id='".concat(a,"']")),...de].some((e=>null==e?void 0:e.contains(n)))||(xe(!1),q.current&&clearTimeout(q.current))},Pe=Sf(we,50,!0),Re=Sf(Ee,50,!0),Ie=(0,e.useCallback)((()=>{var e,t;const n=null!==(e=null==oe?void 0:oe.position)&&void 0!==e?e:I;n?Ae(n):y?le.current&&Ae(le.current):(null==B?void 0:B.isConnected)&&If({place:null!==(t=null==oe?void 0:oe.place)&&void 0!==t?t:c,offset:u,elementReference:B,tooltipReference:G.current,tooltipArrowReference:W.current,strategy:f,middlewares:p,border:U}).then((e=>{pe.current&&(Object.keys(e.tooltipStyles).length&&Z(e.tooltipStyles),Object.keys(e.tooltipArrowStyles).length&&ee(e.tooltipArrowStyles),$(e.place))}))}),[te,B,k,R,c,null==oe?void 0:oe.place,u,f,I,null==oe?void 0:oe.position,y]);(0,e.useEffect)((()=>{var e,t;const n=new Set(ce);de.forEach((e=>{n.add({current:e})}));const r=document.querySelector("[id='".concat(a,"']"));r&&n.add({current:r});const i=()=>{xe(!1)},o=Rf(B),s=Rf(G.current);be.scroll&&(window.addEventListener("scroll",i),null==o||o.addEventListener("scroll",i),null==s||s.addEventListener("scroll",i));let l=null;be.resize?window.addEventListener("resize",i):B&&G.current&&(l=mf(B,G.current,Ie,{ancestorResize:!0,elementResize:!0,layoutShift:!0}));const c=e=>{"Escape"===e.key&&xe(!1)};be.escape&&window.addEventListener("keydown",c),be.clickOutsideAnchor&&window.addEventListener("click",Ce);const u=[],h=e=>{te&&(null==e?void 0:e.target)===B||we(e)},d=e=>{te&&(null==e?void 0:e.target)===B&&Ee()},f=["mouseenter","mouseleave","focus","blur"],p=["click","dblclick","mousedown","mouseup"];Object.entries(ve).forEach((e=>{let[t,n]=e;n&&(f.includes(t)?u.push({event:t,listener:Pe}):p.includes(t)&&u.push({event:t,listener:h}))})),Object.entries(ye).forEach((e=>{let[t,n]=e;n&&(f.includes(t)?u.push({event:t,listener:Re}):p.includes(t)&&u.push({event:t,listener:d}))})),y&&u.push({event:"mousemove",listener:Te});const m=()=>{he.current=!0},g=()=>{he.current=!1,Ee()};return _&&!ge&&(null===(e=G.current)||void 0===e||e.addEventListener("mouseenter",m),null===(t=G.current)||void 0===t||t.addEventListener("mouseleave",g)),u.forEach((e=>{let{event:t,listener:r}=e;n.forEach((e=>{var n;null===(n=e.current)||void 0===n||n.addEventListener(t,r)}))})),()=>{var e,t;be.scroll&&(window.removeEventListener("scroll",i),null==o||o.removeEventListener("scroll",i),null==s||s.removeEventListener("scroll",i)),be.resize?window.removeEventListener("resize",i):null==l||l(),be.clickOutsideAnchor&&window.removeEventListener("click",Ce),be.escape&&window.removeEventListener("keydown",c),_&&!ge&&(null===(e=G.current)||void 0===e||e.removeEventListener("mouseenter",m),null===(t=G.current)||void 0===t||t.removeEventListener("mouseleave",g)),u.forEach((e=>{let{event:t,listener:r}=e;n.forEach((e=>{var n;null===(n=e.current)||void 0===n||n.removeEventListener(t,r)}))}))}}),[B,Ie,re,ce,de,A,T,C,me]),(0,e.useEffect)((()=>{var e,t;let n=null!==(t=null!==(e=null==oe?void 0:oe.anchorSelect)&&void 0!==e?e:l)&&void 0!==t?t:"";!n&&r&&(n="[data-tooltip-id='".concat(r,"']"));const i=new MutationObserver((e=>{const t=[],i=[];e.forEach((e=>{if("attributes"===e.type&&"data-tooltip-id"===e.attributeName&&e.target.getAttribute("data-tooltip-id")===r&&t.push(e.target),"childList"===e.type){if(B){const t=[...e.removedNodes].filter((e=>1===e.nodeType));if(n)try{i.push(...t.filter((e=>e.matches(n)))),i.push(...t.flatMap((e=>[...e.querySelectorAll(n)])))}catch(e){}t.some((e=>{var t;return!!(null===(t=null==e?void 0:e.contains)||void 0===t?void 0:t.call(e,B))&&(ie(!1),xe(!1),F(null),q.current&&clearTimeout(q.current),X.current&&clearTimeout(X.current),!0)}))}if(n)try{const r=[...e.addedNodes].filter((e=>1===e.nodeType));t.push(...r.filter((e=>e.matches(n)))),t.push(...r.flatMap((e=>[...e.querySelectorAll(n)])))}catch(e){}}})),(t.length||i.length)&&fe((e=>[...e.filter((e=>!i.includes(e))),...t]))}));return i.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tooltip-id"]}),()=>{i.disconnect()}}),[r,l,null==oe?void 0:oe.anchorSelect,B]),(0,e.useEffect)((()=>{Ie()}),[Ie]),(0,e.useEffect)((()=>{if(!(null==L?void 0:L.current))return()=>null;const e=new ResizeObserver((()=>{setTimeout((()=>Ie()))}));return e.observe(L.current),()=>{e.disconnect()}}),[k,null==L?void 0:L.current]),(0,e.useEffect)((()=>{var e;const t=document.querySelector("[id='".concat(a,"']")),n=[...de,t];B&&n.includes(B)||F(null!==(e=de[0])&&void 0!==e?e:t)}),[a,de,B]),(0,e.useEffect)((()=>()=>{q.current&&clearTimeout(q.current),X.current&&clearTimeout(X.current)}),[]),(0,e.useEffect)((()=>{var e;let t=null!==(e=null==oe?void 0:oe.anchorSelect)&&void 0!==e?e:l;if(!t&&r&&(t="[data-tooltip-id='".concat(r,"']")),t)try{const e=Array.from(document.querySelectorAll(t));fe(e)}catch(e){fe([])}}),[r,l,null==oe?void 0:oe.anchorSelect]);const Me=null!==(V=null==oe?void 0:oe.content)&&void 0!==V?V:k,Oe=te&&Object.keys(Q).length>0;return(0,e.useImperativeHandle)(n,(()=>({open:e=>{if(null==e?void 0:e.anchorSelect)try{document.querySelector(e.anchorSelect)}catch(n){return void console.warn('[react-tooltip] "'.concat(e.anchorSelect,'" is not a valid CSS selector'))}se(null!=e?e:null),(null==e?void 0:e.delay)?_e(e.delay):xe(!0)},close:e=>{(null==e?void 0:e.delay)?Se(e.delay):xe(!1)},activeAnchor:B,place:K,isOpen:Boolean(re&&!b&&Me&&Oe)}))),re&&!b&&Me?e.createElement(m,{id:r,role:j,className:vf("react-tooltip",Mf.tooltip,Of.tooltip,Of[s],i,"react-tooltip__place-".concat(K),Mf[Oe?"show":"closing"],Oe?"react-tooltip__show":"react-tooltip__closing","fixed"===f&&Mf.fixed,_&&Mf.clickable),onTransitionEnd:e=>{Y.current&&clearTimeout(Y.current),te||"opacity"!==e.propertyName||(ie(!1),se(null),null==O||O())},style:{...R,...Q,opacity:void 0!==z&&Oe?z:void 0},ref:G},Me,e.createElement(m,{className:vf("react-tooltip-arrow",Mf.arrow,Of.arrow,o,x&&Mf.noArrow),style:{...J,background:H?"linear-gradient(to right bottom, transparent 50%, ".concat(H," 50%)"):void 0},ref:W})):null},Lf=t=>{let{content:n}=t;return e.createElement("span",{dangerouslySetInnerHTML:{__html:n}})},Df=(e,t)=>!("CSS"in window&&"supports"in window.CSS)||window.CSS.supports(e,t),Nf=e.forwardRef(((t,n)=>{let{id:r,anchorId:i,anchorSelect:o,content:s,html:a,render:l,className:c,classNameArrow:u,variant:h="dark",place:d="top",offset:f=10,wrapper:p="div",children:m=null,events:g=["hover"],openOnClick:v=!1,positionStrategy:y="absolute",middlewares:b,delayShow:x=0,delayHide:_=0,float:S=!1,hidden:w=!1,noArrow:E=!1,clickable:A=!1,closeOnEsc:T=!1,closeOnScroll:C=!1,closeOnResize:P=!1,openEvents:R,closeEvents:I,globalCloseEvents:M,imperativeModeOnly:O=!1,style:k,position:L,isOpen:D,disableStyleInjection:N=!1,border:B,opacity:F,arrowColor:U,setIsOpen:z,afterShow:H,afterHide:j,role:V="tooltip"}=t;const[G,W]=(0,e.useState)(s),[q,X]=(0,e.useState)(a),[Y,K]=(0,e.useState)(d),[$,Q]=(0,e.useState)(h),[Z,J]=(0,e.useState)(f),[ee,te]=(0,e.useState)(x),[ne,re]=(0,e.useState)(_),[ie,oe]=(0,e.useState)(S),[se,ae]=(0,e.useState)(w),[le,ce]=(0,e.useState)(p),[ue,he]=(0,e.useState)(g),[de,fe]=(0,e.useState)(y),[pe,me]=(0,e.useState)(null),[ge,ve]=(0,e.useState)(null),ye=(0,e.useRef)(N),{anchorRefs:be,activeAnchor:xe}=Tf(r),_e=e=>null==e?void 0:e.getAttributeNames().reduce(((t,n)=>{var r;return n.startsWith("data-tooltip-")&&(t[n.replace(/^data-tooltip-/,"")]=null!==(r=null==e?void 0:e.getAttribute(n))&&void 0!==r?r:null),t}),{}),Se=e=>{const t={place:e=>{var t;K(null!==(t=e)&&void 0!==t?t:d)},content:e=>{W(null!=e?e:s)},html:e=>{X(null!=e?e:a)},variant:e=>{var t;Q(null!==(t=e)&&void 0!==t?t:h)},offset:e=>{J(null===e?f:Number(e))},wrapper:e=>{var t;ce(null!==(t=e)&&void 0!==t?t:p)},events:e=>{const t=null==e?void 0:e.split(" ");he(null!=t?t:g)},"position-strategy":e=>{var t;fe(null!==(t=e)&&void 0!==t?t:y)},"delay-show":e=>{te(null===e?x:Number(e))},"delay-hide":e=>{re(null===e?_:Number(e))},float:e=>{oe(null===e?S:"true"===e)},hidden:e=>{ae(null===e?w:"true"===e)},"class-name":e=>{me(e)}};Object.values(t).forEach((e=>e(null))),Object.entries(e).forEach((e=>{let[n,r]=e;var i;null===(i=t[n])||void 0===i||i.call(t,r)}))};(0,e.useEffect)((()=>{W(s)}),[s]),(0,e.useEffect)((()=>{X(a)}),[a]),(0,e.useEffect)((()=>{K(d)}),[d]),(0,e.useEffect)((()=>{Q(h)}),[h]),(0,e.useEffect)((()=>{J(f)}),[f]),(0,e.useEffect)((()=>{te(x)}),[x]),(0,e.useEffect)((()=>{re(_)}),[_]),(0,e.useEffect)((()=>{oe(S)}),[S]),(0,e.useEffect)((()=>{ae(w)}),[w]),(0,e.useEffect)((()=>{fe(y)}),[y]),(0,e.useEffect)((()=>{ye.current!==N&&console.warn("[react-tooltip] Do not change `disableStyleInjection` dynamically.")}),[N]),(0,e.useEffect)((()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("react-tooltip-inject-styles",{detail:{disableCore:"core"===N,disableBase:N}}))}),[]),(0,e.useEffect)((()=>{var e;const t=new Set(be);let n=o;if(!n&&r&&(n="[data-tooltip-id='".concat(r,"']")),n)try{document.querySelectorAll(n).forEach((e=>{t.add({current:e})}))}catch(e){console.warn('[react-tooltip] "'.concat(n,'" is not a valid CSS selector'))}const s=document.querySelector("[id='".concat(i,"']"));if(s&&t.add({current:s}),!t.size)return()=>null;const a=null!==(e=null!=ge?ge:s)&&void 0!==e?e:xe.current,l=new MutationObserver((e=>{e.forEach((e=>{var t;if(!a||"attributes"!==e.type||!(null===(t=e.attributeName)||void 0===t?void 0:t.startsWith("data-tooltip-")))return;const n=_e(a);Se(n)}))})),c={attributes:!0,childList:!1,subtree:!1};if(a){const e=_e(a);Se(e),l.observe(a,c)}return()=>{l.disconnect()}}),[be,xe,ge,i,o]),(0,e.useEffect)((()=>{(null==k?void 0:k.border)&&console.warn("[react-tooltip] Do not set `style.border`. Use `border` prop instead."),B&&!Df("border","".concat(B))&&console.warn('[react-tooltip] "'.concat(B,'" is not a valid `border`.')),(null==k?void 0:k.opacity)&&console.warn("[react-tooltip] Do not set `style.opacity`. Use `opacity` prop instead."),F&&!Df("opacity","".concat(F))&&console.warn('[react-tooltip] "'.concat(F,'" is not a valid `opacity`.'))}),[]);let we=m;const Ee=(0,e.useRef)(null);if(l){const t=l({content:null!=G?G:null,activeAnchor:ge});we=t?e.createElement("div",{ref:Ee,className:"react-tooltip-content-wrapper"},t):null}else G&&(we=G);q&&(we=e.createElement(Lf,{content:q}));const Ae={forwardRef:n,id:r,anchorId:i,anchorSelect:o,className:vf(c,pe),classNameArrow:u,content:we,contentWrapperRef:Ee,place:Y,variant:$,offset:Z,wrapper:le,events:ue,openOnClick:v,positionStrategy:de,middlewares:b,delayShow:ee,delayHide:ne,float:ie,hidden:se,noArrow:E,clickable:A,closeOnEsc:T,closeOnScroll:C,closeOnResize:P,openEvents:R,closeEvents:I,globalCloseEvents:M,imperativeModeOnly:O,style:k,position:L,isOpen:D,border:B,opacity:F,arrowColor:U,setIsOpen:z,afterShow:H,afterHide:j,activeAnchor:ge,setActiveAnchor:e=>ve(e),role:V};return e.createElement(kf,{...Ae})}));var Bf;"undefined"!=typeof window&&window.addEventListener("react-tooltip-inject-styles",(e=>{e.detail.disableCore||_f({css:":root{--rt-color-white:#fff;--rt-color-dark:#222;--rt-color-success:#8dc572;--rt-color-error:#be6464;--rt-color-warning:#f0ad4e;--rt-color-info:#337ab7;--rt-opacity:0.9;--rt-transition-show-delay:0.15s;--rt-transition-closing-delay:0.15s}.core-styles-module_tooltip__3vRRp{position:absolute;top:0;left:0;pointer-events:none;opacity:0;will-change:opacity}.core-styles-module_fixed__pcSol{position:fixed}.core-styles-module_arrow__cvMwQ{position:absolute;background:inherit}.core-styles-module_noArrow__xock6{display:none}.core-styles-module_clickable__ZuTTB{pointer-events:auto}.core-styles-module_show__Nt9eE{opacity:var(--rt-opacity);transition:opacity var(--rt-transition-show-delay)ease-out}.core-styles-module_closing__sGnxF{opacity:0;transition:opacity var(--rt-transition-closing-delay)ease-in}",type:"core"}),e.detail.disableBase||_f({css:"\n.styles-module_tooltip__mnnfp{padding:8px 16px;border-radius:3px;font-size:90%;width:max-content}.styles-module_arrow__K0L3T{width:8px;height:8px}[class*='react-tooltip__place-top']>.styles-module_arrow__K0L3T{transform:rotate(45deg)}[class*='react-tooltip__place-right']>.styles-module_arrow__K0L3T{transform:rotate(135deg)}[class*='react-tooltip__place-bottom']>.styles-module_arrow__K0L3T{transform:rotate(225deg)}[class*='react-tooltip__place-left']>.styles-module_arrow__K0L3T{transform:rotate(315deg)}.styles-module_dark__xNqje{background:var(--rt-color-dark);color:var(--rt-color-white)}.styles-module_light__Z6W-X{background-color:var(--rt-color-white);color:var(--rt-color-dark)}.styles-module_success__A2AKt{background-color:var(--rt-color-success);color:var(--rt-color-white)}.styles-module_warning__SCK0X{background-color:var(--rt-color-warning);color:var(--rt-color-white)}.styles-module_error__JvumD{background-color:var(--rt-color-error);color:var(--rt-color-white)}.styles-module_info__BWdHW{background-color:var(--rt-color-info);color:var(--rt-color-white)}",type:"base"})}));class Ff{static fromKey(e){return Ff.list.find((t=>t.key===e))}constructor(e,t){this.key=e,this.description=t}}Bf=Ff,Ff.HELVETICA=new Bf("HELVETICA","Helvetica"),Ff.HELVETICA_BOLD=new Bf("HELVETICA_BOLD","Helvetica Bold"),Ff.ROBOTO_MONO_MEDIUM=new Bf("ROBOTO_MONO_MEDIUM","Roboto Mono Medium"),Ff.DEFAULT=Bf.HELVETICA_BOLD,Ff.list=[Bf.HELVETICA,Bf.HELVETICA_BOLD,Bf.ROBOTO_MONO_MEDIUM];class Uf{constructor(){this.fontToGlyphGetters=[...Uf.GLYPH_PATH_D].reduce(((e,t)=>{let[n,r]=t;return e.set(n,Object.entries(r).reduce(((e,t)=>{let[n,r]=t;return e[n]=e=>(0,oc.jsx)("path",{...e,d:r}),e}),{})),e}),new Map)}static glyphFromChar(e,t){Uf.singleton||(Uf.singleton=new Uf);let n=Uf.singleton.fontToGlyphGetters.get(t);return n||(console.warn('WARNING: Glyph font "'.concat(t.key,'" not implemented. Reverting\n         to default font (').concat(Ff.DEFAULT.key,")")),n=Uf.singleton.fontToGlyphGetters.get(Ff.DEFAULT)),n[e]}}Uf.singleton=void 0,Uf.GLYPH_PATH_D=new Map([[Ff.HELVETICA,{A:"M43,0h15.4l36.3,100H79.8L69.7,70H30.1l-10.8,30H5.4L43,0z M65.3,59L50.1,14.8L34,59H65.3z",B:"M11.2,0h43.2c11.8,0,20.2,3.5,25.1,10.5c2.9,4.1,4.4,8.9,4.4,14.3c0,6.3-1.8,11.5-5.4,15.5\n           c-1.9,2.1-4.5,4.1-8,5.9c5.1,2,9,4.2,11.5,6.6c4.5,4.4,6.7,10.4,6.7,18c0,6.4-2,12.3-6.1,17.5C76.6,96.1,67,100,53.7,100H11.2V0z\n            M49.4,42.3c5.8,0,10.3-0.8,13.5-2.4c5-2.5,7.6-7,7.6-13.5c0-6.5-2.7-10.9-8-13.2c-3-1.3-7.5-1.9-13.5-1.9H24.5v31H49.4z M54,88.4\n           c8.4,0,14.4-2.4,17.9-7.2c2.2-3,3.4-6.7,3.4-11c0-7.3-3.3-12.2-9.8-14.8c-3.5-1.4-8.1-2.1-13.8-2.1H24.5v35.2H54z",C:"M79.8,9.5C86.3,15.8,90,23,90.7,31.1H78.2c-1.4-6.1-4.2-11-8.3-14.5c-4.2-3.6-10-5.4-17.5-5.4\n            c-9.2,0-16.6,3.3-22.2,9.9c-5.6,6.6-8.5,16.6-8.5,30.2c0,11.1,2.5,20.1,7.6,27.1c5.1,6.9,12.7,10.4,22.8,10.4\n            c9.3,0,16.4-3.6,21.3-10.9c2.6-3.8,4.5-8.9,5.8-15.1h12.5c-1.1,10-4.8,18.4-11,25.1C73.2,95.9,63.1,100,50.5,100\n            c-10.9,0-20.1-3.3-27.5-10C13.3,81.1,8.4,67.5,8.4,49.1c0-14,3.7-25.5,11-34.5C27.3,4.9,38.2,0,52.1,0C64,0,73.2,3.2,79.8,9.5z",D:"M9.2,0h40c13.6,0,24.1,4.9,31.6,14.6c6.7,8.8,10,20.1,10,33.8c0,10.6-2,20.2-5.9,28.8\n           C77.9,92.4,66,100,49.1,100H9.2V0z M46.5,88.4c4.5,0,8.2-0.5,11.1-1.4c5.1-1.8,9.4-5.2,12.6-10.2c2.6-4,4.5-9.2,5.7-15.5\n           c0.7-3.8,1-7.3,1-10.5c0-12.4-2.4-22-7.2-28.9c-4.8-6.9-12.6-10.3-23.3-10.3H22.9v76.8H46.5z",E:"M13.2,0h72.6v12.3H26.4v30.4h54.9v11.6H26.4v33.9h60.4V100H13.2V0z",F:"M15.3,0h69.4v12.3H28.9v30.4h49.1v11.9H28.9V100H15.3V0z",G:"M74.1,5.2c9.3,5,15,13.6,17.1,26.1H78.5c-1.5-6.9-4.7-12-9.4-15.2c-4.8-3.2-10.8-4.8-18.1-4.8\n            c-8.6,0-15.9,3.3-21.8,9.9c-5.9,6.6-8.8,16.4-8.8,29.5c0,11.3,2.4,20.5,7.3,27.6c4.9,7.1,12.8,10.6,23.8,10.6\n            c8.4,0,15.4-2.5,20.9-7.5c5.5-5,8.3-13,8.5-24.2H51.1V46.6h41.7v50.8h-8.3l-3.1-12.2c-4.3,4.8-8.1,8.1-11.4,10\n            c-5.6,3.2-12.6,4.8-21.2,4.8c-11.1,0-20.6-3.6-28.6-10.9c-8.7-9.1-13-21.7-13-37.6c0-15.9,4.2-28.6,12.7-38C28,4.5,38.5,0,51.3,0\n            C60.1,0,67.7,1.7,74.1,5.2z",H:"M10.6,0h13.7v41.3h51.4V0h13.7v100H75.7V53.2H24.3V100H10.6V0z",I:"M43.2,0h13.7v100H43.2V0z",J:"M94.6,68.4c0,8.2-1.9,14.6-5.8,19.2C81.6,95.8,67.9,100,47.7,100C36,100,26,98,17.8,94.1\n            c-8.3-4-12.4-11-12.4-21.1v-7h19.8v7c0,5.3,1.9,9.3,5.7,12c3.8,2.7,9.7,4,17.7,4c11.2,0,18.6-2.4,22.1-7.2c2.1-3,3.2-8.6,3.2-16.8V0\n            h20.9V68.4z",K:"M8.5,0h13.2v48.9L71.7,0h18.9L47.9,40.4L91.5,100H73.8L38,49.8L21.7,65.1V100H8.5V0z",L:"M18.1,0h13.5v88.1h50.2V100H18.1V0z",M:"M2,0h19.4l28.8,84.5L78.7,0H98v100H85.1V41c0-2,0-5.4,0.1-10.1c0.1-4.7,0.1-9.8,0.1-15.2L56.8,100H43.4\n            L14.5,15.7v3.1c0,2.5,0.1,6.2,0.2,11.2c0.1,5,0.2,8.7,0.2,11.1v59H2V0z",N:"M10.6,0h16l49.9,80.8V0h12.9v100H74.2L23.6,19.3V100H10.6V0z",O:"M86.7,16.1c6.3,8.4,9.4,19.1,9.4,32.2c0,14.1-3.6,25.9-10.8,35.2c-8.4,11-20.4,16.5-36,16.5\n            c-14.6,0-26-4.8-34.3-14.4c-7.4-9.3-11.1-21-11.1-35.2c0-12.8,3.2-23.8,9.5-32.9C21.6,5.8,33.6,0,49.6,0C66.3,0,78.7,5.4,86.7,16.1z\n            M75.4,76.4c5-8.1,7.6-17.4,7.6-28c0-11.1-2.9-20.1-8.7-26.9c-5.8-6.8-13.8-10.2-23.9-10.2c-9.8,0-17.8,3.4-24,10.1\n            s-9.3,16.6-9.3,29.8c0,10.5,2.7,19.3,8,26.5C30.4,85,39,88.6,50.9,88.6C62.2,88.6,70.4,84.5,75.4,76.4z",P:"M12.8,0h44.7c8.8,0,16,2.5,21.4,7.5c5.4,5,8.2,12.1,8.2,21.1c0,7.8-2.4,14.6-7.3,20.4\n            c-4.9,5.8-12.3,8.7-22.3,8.7H26.4V100H12.8V0z M65.4,13.8c-3-1.4-7.1-2.1-12.2-2.1H26.4v34.6h26.8c6,0,10.9-1.3,14.7-3.9\n            c3.8-2.6,5.6-7.1,5.6-13.7C73.5,21.4,70.8,16.4,65.4,13.8z",Q:"M93.2,92.6l-6.1,7.4l-14-10.6c-3.4,1.8-7,3.3-10.9,4.4s-8.2,1.7-12.8,1.7c-14,0-25-4.6-33-13.8\n            c-7-8.9-10.5-20.1-10.5-33.6c0-12.2,3-22.7,9.1-31.4C22.8,5.5,34.3,0,49.7,0c16,0,27.8,5.1,35.4,15.4c6,8,9,18.2,9,30.7\n            c0,5.8-0.7,11.4-2.2,16.8c-2.2,8.2-5.8,14.9-11,20L93.2,92.6z M58.1,84.1c2.2-0.4,4.1-1,5.8-2.1l-10-7.7l6.1-7.6l11.8,9.2\n            c3.7-4.3,6.3-9.1,7.6-14.3c1.3-5.3,2-10.4,2-15.2c0-10.6-2.8-19.2-8.3-25.7C67.4,14.2,59.8,11,50.3,11c-9.8,0-17.5,3.1-23.2,9.3\n            c-5.7,6.2-8.6,15.8-8.6,28.7c0,10.9,2.7,19.5,8.2,26c5.5,6.4,13.5,9.7,24.1,9.7C53.4,84.6,55.8,84.4,58.1,84.1z",R:"M9.2,0h45.5c7.5,0,13.7,1.1,18.5,3.3C82.4,7.6,87,15.4,87,26.9c0,6-1.2,10.9-3.7,14.7\n            c-2.5,3.8-5.9,6.9-10.4,9.2c3.9,1.6,6.8,3.7,8.8,6.3c2,2.6,3.1,6.8,3.3,12.6l0.5,13.4c0.1,3.8,0.5,6.6,1,8.5\n            c0.8,3.2,2.3,5.2,4.4,6.1v2.2H74.2c-0.5-0.9-0.8-2-1.1-3.3c-0.3-1.4-0.5-4-0.7-7.9L71.6,72c-0.3-6.5-2.7-10.9-7.1-13.1\n            c-2.5-1.2-6.5-1.8-11.8-1.8h-30V100H9.2L9.2,0L9.2,0z M53.2,45.8c6.2,0,11.1-1.3,14.7-3.8s5.4-7.1,5.4-13.8c0-7.1-2.5-12-7.5-14.6\n            c-2.7-1.4-6.3-2-10.8-2H22.8v34.2L53.2,45.8L53.2,45.8z",S:"M25.2,66.6c0.3,5.4,1.5,9.7,3.7,13.1c4.1,6.3,11.3,9.4,21.7,9.4c4.6,0,8.9-0.7,12.7-2.1\n            c7.4-2.7,11.1-7.4,11.1-14.3c0-5.2-1.6-8.8-4.7-11c-3.2-2.2-8.1-4-14.9-5.6l-12.4-2.9c-8.1-1.9-13.9-4-17.3-6.3\n            c-5.8-4-8.8-9.9-8.8-17.8c0-8.5,2.9-15.5,8.6-21C30.6,2.7,38.8,0,49.3,0C59,0,67.2,2.4,73.9,7.2c6.8,4.8,10.1,12.5,10.1,23H72\n            c-0.6-5.1-1.9-9-4-11.7c-3.8-4.9-10.1-7.4-19.1-7.4c-7.3,0-12.5,1.6-15.7,4.8c-3.2,3.2-4.8,6.9-4.8,11.1c0,4.6,1.9,8,5.6,10.2\n            c2.5,1.4,8,3.1,16.7,5.2l12.9,3c6.2,1.5,11,3.5,14.4,6c5.8,4.4,8.8,10.9,8.8,19.3c0,10.5-3.7,18-11.2,22.5c-7.5,4.5-16.1,6.8-26,6.8\n            c-11.5,0-20.5-3-27-9c-6.5-6-9.7-14.1-9.6-24.3H25.2z",T:"M90.5,0v11.9H56.8V100H43.2V11.9H9.5V0H90.5z",U:"M24.8,0v60.2c0,7.1,1.3,13,4,17.6c4,7.1,10.6,10.6,20.1,10.6c11.3,0,18.9-3.8,23-11.5c2.2-4.2,3.3-9.7,3.3-16.8\n            V0h13.3v54.7c0,12-1.6,21.2-4.9,27.7C77.7,94.1,66.5,100,50,100c-16.5,0-27.7-5.9-33.6-17.6c-3.2-6.5-4.9-15.7-4.9-27.7V0H24.8z",V:"M21.3,0l28.7,85.2L78.5,0h15.2L57.1,100H42.8L6.4,0H21.3z",W:"M11.6,0l14.8,81.2L44.2,0h11.5l17.8,81.4L88.3,0H100L79.3,100H68.2L50,17.1L31.8,100H20.5L0,0H11.6z",X:"M22.7,100H6.5l35.4-51.3L8.7,0h16.9l25.2,38.3L75.8,0h16.1L58.7,48.7L93.5,100H76.8L50.1,58.9L22.7,100z",Y:"M5.4,0h15.8l28.7,48.1L78.7,0h15.9L56.7,59.7V100H43.2V59.7L5.4,0z",Z:"M10.5,88.8L72,11.9H15V0h74.5v11.6L27.6,88.1h61.9V100h-79V88.8z"}],[Ff.ROBOTO_MONO_MEDIUM,{A:"M65.8,76.8H34.5L27.6,100h-17L43.1,0h14.5l31.9,100h-17L65.8,76.8z M38.7,62.7h22.9L50.3,23.5L38.7,62.7z",B:"M15.6,100V0h31.9c4.8,0,9.3,0.6,13.5,1.6s7.9,2.7,11,4.9s5.6,5,7.4,8.4S82.1,22.4,82,27c0,4.9-1.4,9.2-4.1,12.7\n            s-6.3,6.2-10.9,8.1c2.8,0.8,5.3,1.9,7.5,3.3s4,3.2,5.5,5.2s2.6,4.2,3.4,6.7c0.8,2.4,1.2,5,1.2,7.8c0,4.8-0.9,9-2.6,12.6\n            s-4.2,6.6-7.2,9.1c-3.1,2.4-6.8,4.3-11,5.5c-4.2,1.3-8.8,1.9-13.7,2H15.6z M32.2,42.1H48c2.5,0,4.8-0.4,6.9-1\n            c2.1-0.6,4-1.5,5.5-2.7s2.8-2.7,3.7-4.5c0.9-1.8,1.4-3.8,1.4-6.1c0-2.5-0.4-4.7-1.3-6.5c-0.9-1.8-2.1-3.3-3.7-4.4\n            c-1.6-1.1-3.4-2-5.6-2.5c-2.2-0.5-4.5-0.8-7.1-0.9H32.2V42.1z M32.2,54.7v31.9h18c2.6,0,5-0.4,7.1-1.2s4-1.8,5.6-3.1\n            c1.6-1.3,2.8-3,3.7-4.9c0.9-1.9,1.3-4.1,1.3-6.5c0-2.5-0.4-4.8-1.2-6.8c-0.8-2-1.9-3.7-3.4-5c-1.5-1.3-3.3-2.4-5.4-3.2\n            c-2.1-0.8-4.5-1.2-7.1-1.2C50.8,54.7,32.2,54.7,32.2,54.7z",C:"M84.8,68.8c-0.4,4.7-1.6,8.9-3.3,12.8c-1.8,3.8-4.1,7.1-7.1,9.9c-2.9,2.7-6.4,4.9-10.4,6.3s-8.4,2.2-13.3,2.2\n            c-5.9,0-11.1-1.1-15.5-3.4s-8.1-5.4-11-9.3s-5.1-8.5-6.6-13.8c-1.5-5.3-2.3-10.9-2.3-16.8V43.4c0-5.9,0.8-11.5,2.3-16.8\n            s3.8-9.9,6.7-13.8s6.6-7.1,11-9.3S44.8,0,50.7,0c5.1,0,9.7,0.8,13.7,2.3s7.4,3.6,10.3,6.4c2.8,2.8,5.1,6.1,6.8,10.1\n            c1.7,4,2.8,8.4,3.3,13.2h-16c-0.3-2.8-0.8-5.4-1.6-7.8s-1.9-4.3-3.4-6s-3.2-2.9-5.4-3.8c-2.2-0.9-4.7-1.3-7.6-1.3\n            c-3.6,0-6.6,0.8-9.1,2.5s-4.4,3.9-5.9,6.6s-2.6,6-3.2,9.6c-0.6,3.6-1,7.5-1,11.5v13.4c0,4.2,0.3,8.1,1,11.8\n            c0.6,3.7,1.7,6.9,3.2,9.6c1.5,2.8,3.4,4.9,5.9,6.5s5.5,2.4,9.1,2.4c5.6,0,9.9-1.6,12.8-4.8c2.9-3.2,4.7-7.7,5.2-13.5L84.8,68.8\n            L84.8,68.8z",D:"M15.5,100V0H40c6.9,0,13,1.2,18.5,3.4s10.1,5.4,13.9,9.5s6.8,8.9,8.8,14.6c2.1,5.7,3.1,11.9,3.2,18.8v7.6\n            c0,6.9-1.1,13.1-3.2,18.8c-2.1,5.7-5,10.5-8.8,14.6s-8.4,7.2-13.8,9.4c-5.4,2.2-11.5,3.4-18.2,3.4L15.5,100L15.5,100z M32.3,13.3\n            v73.4h8.2c4.5,0,8.5-0.9,11.9-2.4c3.4-1.6,6.2-3.8,8.5-6.7c2.3-2.9,4-6.3,5.1-10.3c1.1-4,1.7-8.5,1.8-13.5v-7.7\n            c0-4.8-0.6-9.2-1.8-13.2c-1.2-4-2.8-7.4-5.1-10.3s-5.2-5.2-8.6-6.8s-7.5-2.5-12.2-2.5C40.2,13.3,32.3,13.3,32.3,13.3z",E:"M75.4,55.2H34.2v31.4h48.1V100H17.7V0h64.2v13.6H34.2v28.2h41.1C75.3,41.8,75.3,55.2,75.4,55.2z",F:"M76.2,57.4h-42V100H17.6V0h64.8v13.6H34.2v30.3h42V57.4z",G:"M84.6,86.5c-1.6,2-3.6,3.8-5.8,5.4s-4.7,3.1-7.5,4.3c-2.8,1.2-5.8,2.1-9,2.8c-3.2,0.7-6.7,1-10.3,1c-5.8,0-11-1.1-15.5-3.4\n            s-8.3-5.4-11.4-9.3s-5.5-8.6-7.1-13.9c-1.6-5.4-2.5-11.2-2.5-17.3v-12c0-6.1,0.8-11.9,2.4-17.2s3.9-10,6.9-14s6.7-7.2,11.1-9.5\n            S45.2,0,50.9,0c5,0,9.5,0.7,13.5,2.1s7.4,3.4,10.2,6c2.9,2.6,5.1,5.8,6.8,9.5s2.7,7.9,3.2,12.6H68.8c-0.4-2.6-1-5-1.9-7.1\n            s-2-3.9-3.4-5.3s-3.2-2.6-5.2-3.4c-2-0.8-4.4-1.2-7.2-1.2c-3.4,0-6.3,0.8-8.7,2.5s-4.4,3.9-6,6.8c-1.6,2.8-2.8,6.1-3.5,9.8\n            s-1.2,7.6-1.2,11.7v12.2c0,4.1,0.5,7.9,1.2,11.6s2,7,3.7,9.8s3.8,5.1,6.5,6.8s5.8,2.6,9.5,2.6c1.5,0,3.1-0.1,4.7-0.3\n            c1.6-0.2,3.1-0.5,4.6-1s2.8-1,4-1.7c1.2-0.7,2.2-1.5,2.9-2.6l0.1-19.5H51.2V49.4h33.3L84.6,86.5z",H:"M83.1,100H66.9V55.4H33V100H17V0h16v41.8h34V0h16.1V100z",I:"M20.2,0h59.5v13.7H58v72.7h21.6V100H20.2V86.4h21.2V13.7H20.2V0z",J:"M66.4,0h16.5l0.1,68.5c-0.1,4.6-1,8.8-2.7,12.7c-1.7,3.9-4,7.2-7,10s-6.4,4.9-10.4,6.5S54.7,100,50,100\n            c-4.8,0-9.2-0.7-13.1-2s-7.3-3.3-10.2-5.8c-2.9-2.5-5.1-5.7-6.8-9.5s-2.6-8-2.8-12.9h16.4c0.2,5.3,1.7,9.5,4.5,12.4\n            c2.8,3,6.8,4.4,12,4.4c2.5,0,4.7-0.5,6.8-1.4s3.8-2.3,5.2-3.9c1.4-1.7,2.5-3.6,3.3-5.8s1.2-4.6,1.2-7.1V0H66.4z",K:"M40.4,56.5l-10.7,12V100H13V0h16.7v46.8L38.8,35L65.1,0h20.1l-34,43.9L87,100H67.2L40.4,56.5z",L:"M34.5,86.5h47.7V100H18V0h16.5V86.5z",M:"M37,0l12.4,43.2L63,0h20.5v100H68.1V65.7l1-43.8L53.7,69.8H45L31.1,23.5l1,42.2V100H16.5V0H37z",N:"M82.9,100H66.3L33.8,31.2L33.8,100H17V0h16.7l32.4,68.6L66.2,0h16.7V100z",O:"M84.9,56.3c0,5.7-0.7,11.3-2.2,16.5c-1.5,5.3-3.7,9.9-6.6,14c-2.9,4-6.6,7.2-11,9.6c-4.4,2.4-9.5,3.6-15.4,3.6\n            c-5.8,0-10.9-1.2-15.2-3.6s-7.9-5.6-10.8-9.7c-2.9-4-5-8.7-6.5-13.9C15.7,67.5,15,62,15,56.3V43.9c0-3.8,0.3-7.6,1-11.2\n            c0.7-3.6,1.6-7.1,2.9-10.3c1.3-3.2,2.9-6.2,4.7-9s4.1-5.1,6.7-7.1s5.5-3.5,8.7-4.6S45.8,0,49.6,0c5.9,0,11,1.2,15.4,3.6\n            c4.4,2.4,8.1,5.6,11,9.7c2.9,4.1,5.1,8.7,6.6,14s2.2,10.8,2.2,16.6v12.4H84.9z M68.8,43.7c0-3.7-0.4-7.3-1-10.9s-1.7-6.8-3.1-9.7\n            c-1.4-2.9-3.4-5.1-5.8-6.9s-5.5-2.6-9.1-2.6c-3.6,0-6.6,0.9-9,2.6s-4.3,4.1-5.7,6.9s-2.4,6.1-2.9,9.7c-0.5,3.6-0.9,7.2-0.9,10.9\n            v12.6c0,3.7,0.4,7.3,0.9,10.9c0.6,3.6,1.6,6.8,3,9.7c1.4,2.9,3.3,5.2,5.7,7s5.4,2.7,9,2.7c3.7,0,6.7-0.9,9.1-2.7s4.4-4.1,5.8-7\n            c1.4-2.9,2.5-6.1,3.1-9.7s0.9-7.2,1-10.9L68.8,43.7L68.8,43.7z",P:"M32.5,61.7V100H16V0h33.4c5,0,9.6,0.8,13.8,2.2s7.9,3.5,11,6.2c3.1,2.7,5.5,5.9,7.2,9.8C83.1,22,84,26.3,84,31.1\n            c0,4.7-0.9,8.9-2.6,12.6c-1.7,3.8-4.1,7-7.2,9.6c-3.1,2.7-6.7,4.7-11,6.1c-4.2,1.4-8.8,2.2-13.8,2.2L32.5,61.7L32.5,61.7z\n            M32.5,48.4h17c2.8,0,5.3-0.4,7.5-1.3c2.2-0.8,4.1-2,5.6-3.5c1.6-1.5,2.7-3.3,3.6-5.4c0.8-2.1,1.2-4.4,1.2-6.9c0-2.6-0.4-5-1.2-7.2\n            s-2-4.1-3.6-5.7s-3.4-2.8-5.6-3.7c-2.2-0.9-4.7-1.3-7.5-1.4h-17V48.4z",Q:"M79.2,49.4c0,2.9-0.3,5.7-0.8,8.5s-1.2,5.5-2.2,8c-0.9,2.6-2.1,5-3.6,7.3c-1.4,2.3-3.1,4.3-5,6.1l14.4,12.3l-9.2,8.4\n            L56.4,85.6c-1.2,0.3-2.5,0.6-3.9,0.8c-1.3,0.2-2.7,0.3-4.2,0.3c-5.1,0-9.6-1.1-13.4-3.2c-3.8-2.1-7-5-9.5-8.5\n            c-2.4-3.5-4.3-7.5-5.5-11.9c-1.2-4.4-1.9-9-1.9-13.7V38.7c0-3.4,0.3-6.6,0.9-9.9s1.4-6.3,2.5-9.1s2.5-5.5,4.2-7.9\n            c1.7-2.4,3.6-4.5,5.8-6.2s4.8-3.1,7.6-4.1S45,0,48.3,0c5.2,0,9.7,1.1,13.5,3.2c3.8,2.1,7.1,5,9.6,8.5s4.5,7.7,5.7,12.4\n            c1.3,4.7,1.9,9.5,2,14.6L79.2,49.4L79.2,49.4z M65.2,38.6c0-3.3-0.3-6.5-0.8-9.7c-0.5-3.2-1.4-6.1-2.7-8.6s-3-4.5-5.2-6.1\n            s-4.9-2.3-8.2-2.3s-6,0.8-8.1,2.3c-2.1,1.5-3.8,3.6-5,6.1c-1.2,2.5-2.1,5.4-2.6,8.6s-0.7,6.4-0.7,9.7v10.9c0,2.9,0.2,5.8,0.7,8.8\n            s1.3,5.7,2.6,8.2c1.2,2.5,2.9,4.5,5,6.1c2.1,1.6,4.8,2.4,8.1,2.4s6.1-0.8,8.2-2.4c2.2-1.6,3.9-3.6,5.2-6.1s2.2-5.2,2.7-8.2\n            c0.5-3,0.8-5.9,0.8-8.8V38.6z",R:"M48.3,61H31.6v39H15.1V0h31.6c5.1,0,9.9,0.7,14.2,2s8,3.1,11.2,5.6s5.6,5.6,7.3,9.4c1.7,3.8,2.6,8.2,2.6,13.2\n            c0,3.4-0.4,6.5-1.3,9.2s-2.1,5.3-3.7,7.5c-1.6,2.2-3.5,4.2-5.8,5.9c-2.2,1.7-4.7,3.1-7.4,4.3l21.2,42v0.8H67.4L48.3,61z M31.6,47.7\n            h15.2c2.7,0,5.3-0.4,7.6-1.2s4.3-1.9,5.9-3.3c1.7-1.4,3-3.2,3.9-5.3c0.9-2.1,1.4-4.5,1.4-7.2c0-2.8-0.4-5.3-1.3-7.4\n            c-0.9-2.1-2.1-4-3.7-5.4c-1.6-1.5-3.6-2.6-5.9-3.3c-2.3-0.8-4.9-1.2-7.8-1.2H31.6V47.7z",S:"M68.8,73.6c0-2.3-0.5-4.4-1.4-6.1c-0.9-1.7-2.3-3.3-4.1-4.6c-1.8-1.3-3.9-2.5-6.3-3.5s-5.1-1.9-7.9-2.8\n            c-3.8-1.1-7.6-2.5-11.3-4.1s-7-3.7-10-6.1s-5.3-5.2-7.1-8.4c-1.9-3.2-2.8-6.9-2.8-11s0.9-8,2.8-11.3c1.9-3.3,4.2-6.1,7.3-8.5\n            s6.6-4.1,10.6-5.4S46.7,0,51.1,0c4.7,0,9.1,0.7,13.1,2.2s7.6,3.5,10.7,6.1c3.1,2.6,5.5,5.7,7.3,9.4c1.8,3.6,2.7,7.7,2.7,12.1H68.8\n            c-0.2-2.5-0.7-4.7-1.6-6.7c-0.8-2-2-3.8-3.5-5.3c-1.5-1.5-3.3-2.6-5.5-3.4c-2.1-0.8-4.6-1.2-7.4-1.2c-2.4,0-4.6,0.3-6.7,0.9\n            c-2.1,0.6-3.8,1.5-5.3,2.7s-2.7,2.7-3.5,4.3c-0.8,1.7-1.3,3.6-1.3,5.8c0,2.3,0.6,4.2,1.7,5.9c1.2,1.7,2.7,3.1,4.5,4.4\n            s4,2.3,6.5,3.2s5,1.8,7.6,2.5c4.1,1.2,7.9,2.7,11.6,4.4c3.7,1.8,7,3.9,9.8,6.4c2.8,2.5,5,5.3,6.7,8.6c1.6,3.3,2.5,7,2.5,11.2\n            c0,4.3-0.9,8.1-2.7,11.4S78,91,74.9,93.2s-6.6,3.9-10.7,5.1c-4.1,1.2-8.3,1.7-12.7,1.7c-3,0-6-0.3-8.9-0.9\n            c-2.9-0.6-5.8-1.4-8.5-2.6s-5.2-2.6-7.5-4.3s-4.3-3.7-6.1-6s-3.1-4.8-4-7.6c-1-2.8-1.5-5.9-1.5-9.2h16.1c0.2,2.9,0.9,5.5,1.9,7.7\n            c1.1,2.2,2.5,4,4.3,5.5c1.8,1.4,3.9,2.5,6.3,3.3s5,1.1,7.9,1.1c2.4,0,4.7-0.3,6.8-0.9s3.9-1.4,5.5-2.6c1.6-1.1,2.8-2.5,3.7-4.2\n            S68.8,75.8,68.8,73.6z",T:"M88.8,13.6H58.1V100H41.7V13.6H11.2V0h77.6V13.6z",U:"M82.6,0l0.1,66.1c0,5.1-0.9,9.7-2.4,13.9c-1.6,4.2-3.8,7.8-6.6,10.7c-2.8,3-6.3,5.3-10.3,6.9s-8.6,2.4-13.6,2.4\n            c-4.9,0-9.3-0.8-13.3-2.4s-7.4-3.9-10.2-6.9c-2.9-3-5.1-6.5-6.7-10.7s-2.4-8.8-2.4-13.9L17.3,0h16l0.1,66.1c0,3,0.4,5.8,1.2,8.3\n            s1.8,4.7,3.1,6.5c1.4,1.8,3,3.3,5,4.3s4.3,1.5,7,1.5c2.7,0,5.1-0.5,7.2-1.5c2.1-1,3.8-2.4,5.2-4.3s2.5-4,3.2-6.5s1.1-5.3,1.2-8.3\n            L66.7,0H82.6z",V:"M50,74.9L70.8,0h18L57.8,100H42L11.2,0h18L50,74.9z",W:"M66.8,65.6L74,0h15.4L76.6,100H60.8L49.9,33.5L39.1,100H23.4L10.6,0H26l7.1,65.2L43.4,0h12.9L66.8,65.6z",X:"M49.8,37.2L69,0h19.4L60,49.6L89.2,100H69.9L50.1,62.2L30.3,100H10.8L40,49.6L11.6,0h19.3L49.8,37.2z",Y:"M50,47.8L70.8,0h18.4L58.1,64.1L57.9,100h-16l-0.1-36.3L10.8,0h18.4L50,47.8z",Z:"M34.4,86.5h50.5V100H15.1L15,88.9L64,13.6H15.4V0h67.9l0.1,10.9L34.4,86.5z"}],[Ff.HELVETICA_BOLD,{A:"M68.2,79.4H31.4L24.5,100H2.6L38.3,0h23.6l35.4,100H74.7L68.2,79.4z M62.4,62.2L49.9,22.9L37,62.2H62.4z",B:"M54.1,100H8.8V0h48.6c12.3,0.2,20.9,3.7,26.1,10.7C86.5,14.9,88,20,88,25.9c0,6.1-1.5,11-4.6,14.7c-1.7,2.1-4.3,4-7.6,5.7\n          c5.1,1.9,9,4.8,11.6,8.8c2.6,4,3.9,8.9,3.9,14.7c0,5.9-1.5,11.2-4.5,15.9c-1.9,3.1-4.3,5.7-7.1,7.9c-3.2,2.4-7,4.1-11.4,5\n          C63.9,99.5,59.2,100,54.1,100z M64,36.9c2.7-1.6,4.1-4.5,4.1-8.8c0-4.7-1.8-7.7-5.4-9.2c-3.1-1-7.1-1.6-11.9-1.6h-22v22h24.6\n          C57.6,39.4,61.2,38.6,64,36.9z M53.6,56H28.7v26.7h24.6c4.4,0,7.8-0.6,10.2-1.8c4.4-2.2,6.6-6.3,6.6-12.5c0-5.2-2.1-8.8-6.4-10.7\n          C61.3,56.6,57.9,56,53.6,56z",C:"M79.1,90.2c-7.1,6.5-16.2,9.8-27.3,9.8c-13.7,0-24.5-4.4-32.4-13.2c-7.9-8.9-11.8-21-11.8-36.4c0-16.7,4.5-29.5,13.4-38.6\n          C28.7,3.9,38.6,0,50.6,0c16.1,0,27.8,5.3,35.3,15.8c4.1,5.9,6.3,11.9,6.6,17.8h-20c-1.3-4.6-3-8-5-10.4c-3.6-4.1-9-6.2-16.1-6.2\n          c-7.3,0-13,2.9-17.2,8.8C30,31.7,27.9,40,27.9,50.7c0,10.7,2.2,18.7,6.6,24.1c4.4,5.3,10.1,8,16.9,8c7,0,12.3-2.3,16-6.9\n          c2-2.5,3.7-6.2,5.1-11.1h19.8C90.6,75.2,86.2,83.7,79.1,90.2z",D:"M50.8,100H7.7V0h43.1C57,0.1,62.1,0.8,66.2,2.2c7,2.3,12.7,6.5,17,12.7c3.5,5,5.9,10.4,7.1,16.1c1.3,5.8,1.9,11.3,1.9,16.6\n          c0,13.3-2.7,24.6-8,33.8C77.1,93.8,65.9,100,50.8,100z M66.3,25.5c-3.2-5.4-9.6-8.1-19.1-8.1H28v65.3h19.3\n          c9.9,0,16.7-4.9,20.6-14.6c2.1-5.3,3.2-11.7,3.2-19.1C71.1,38.8,69.5,31,66.3,25.5z",E:"M81.1,56.3H32.5V82h55.4v18H12.1V0h73.3v17.7H32.5v21.2h48.6V56.3z",F:"M85.5,17.6H35.3v23h44V58h-44v42H14.5V0h71V17.6z",G:"M68.7,95.2C63.5,98.4,57,100,49.4,100c-12.6,0-22.9-4.4-30.9-13.1C10,78.1,5.8,66.2,5.8,50.9c0-15.4,4.2-27.7,12.7-37\n          C27,4.6,38.2,0,52.1,0c12.1,0,21.8,3.1,29.1,9.2c7.3,6.1,11.5,13.8,12.6,22.9H74.3c-1.5-6.5-5.2-11-11-13.6\n          c-3.3-1.4-6.9-2.1-10.9-2.1c-7.7,0-13.9,2.9-18.9,8.7c-4.9,5.8-7.4,14.5-7.4,26.1c0,11.7,2.7,20,8,24.8c5.3,4.9,11.4,7.3,18.2,7.3\n          c6.7,0,12.1-1.9,16.4-5.8c4.3-3.8,6.9-8.9,7.9-15.1h-22V46.5h39.6v51H81l-2-11.9C75.2,90.1,71.7,93.3,68.7,95.2z",H:"M69.5,100V55.4H30.4V100H9.7V0h20.7v38.1h39.1V0h20.8v100H69.5z",I:"M39.6,0h20.8v100H39.6V0z",J:"M60.9,68.3V0h20.4v67.9c0,8.3-1.4,14.9-4.3,19.7C72.1,95.9,63.4,100,50.7,100c-12.7,0-21.2-3.3-25.5-10\n          c-4.3-6.6-6.5-15.7-6.5-27.2v-2.3H38v2.3c0.2,7.6,1,12.9,2.5,15.9c1.5,3.1,4.6,4.6,9.5,4.6c4.8,0,8-1.7,9.5-5\n          C60.4,76.4,60.9,73,60.9,68.3z",K:"M94.1,100H67.3L36.4,56.3l-10,10.2V100H5.9V0h20.6v41.2L65,0h27l-41,41.2L94.1,100z",L:"M14.8,0h20.9v82h49.5v18H14.8V0z",M:"M21.1,100H1.7V0h30.4l18.2,78.6L68.3,0h30.1v100H78.9V32.4c0-1.9,0-4.7,0.1-8.2c0-3.5,0.1-6.2,0.1-8.1L60.1,100H39.8\n          L21,16.1c0,1.9,0,4.6,0.1,8.1c0,3.5,0.1,6.2,0.1,8.2V100z",N:"M90.6,100H69.7L28.9,29v71H9.4V0h21.9l39.8,69.8V0h19.5V100z",O:"M50,100c-13.5,0-23.8-3.7-31-11C9.5,80,4.7,67,4.7,50c0-17.3,4.8-30.3,14.4-39C26.2,3.7,36.5,0,50,0c13.5,0,23.8,3.7,31,11\n          c9.5,8.7,14.3,21.7,14.3,39c0,17-4.8,30-14.3,39C73.9,96.3,63.5,100,50,100z M68.7,74.6c4.6-5.8,6.9-14,6.9-24.6\n          c0-10.6-2.3-18.8-6.9-24.6c-4.6-5.8-10.8-8.7-18.6-8.7S36,19.6,31.3,25.4c-4.7,5.8-7,14-7,24.6s2.3,18.8,7,24.6\n          c4.7,5.8,10.9,8.7,18.7,8.7S64.1,80.4,68.7,74.6z",P:"M53.7,64H32.5v36H11.7V0h43.6c10,0,18,2.6,24,7.7c6,5.2,9,13.1,9,23.9c0,11.8-3,20.1-9,25C73.3,61.6,64.8,64,53.7,64z\n          M63.5,43.2c2.7-2.4,4.1-6.2,4.1-11.4c0-5.2-1.4-8.9-4.1-11.1c-2.7-2.2-6.6-3.3-11.5-3.3H32.5v29.4H52\n          C56.9,46.8,60.7,45.6,63.5,43.2z",Q:"M64.2,93.9c-4.1,1.4-8.9,2-14.6,2c-11.8,0-21.6-3.5-29.3-10.6c-9.3-8.5-14-21-14-37.4c0-16.6,4.8-29.1,14.4-37.6\n          C28.6,3.5,38.3,0,49.9,0c11.7,0,21.6,3.7,29.5,11c9.2,8.5,13.8,20.4,13.8,35.6c0,8.1-1,14.8-3,20.3c-1.6,5.2-4,9.5-7.1,13l10.5,9.8\n          L83.8,100L72.8,89.7C69.5,91.7,66.6,93.1,64.2,93.9z M60.1,77.6L51,68.8l9.8-10.2l9.2,8.7c1.4-3,2.4-5.5,3-7.7\n          c0.9-3.3,1.4-7.2,1.4-11.6c0-10.2-2.1-18-6.2-23.6c-4.2-5.6-10.2-8.3-18.2-8.3c-7.5,0-13.5,2.7-18,8c-4.5,5.3-6.7,13.3-6.7,23.9\n          c0,12.4,3.2,21.3,9.6,26.7c4.1,3.5,9.1,5.2,14.9,5.2c2.2,0,4.3-0.3,6.3-0.8C57,78.8,58.4,78.3,60.1,77.6z",R:"M50.3,60.8H28.7V100H8.3V0h49c7,0.1,12.4,1,16.2,2.6c3.8,1.6,7,3.9,9.6,7c2.2,2.5,3.9,5.3,5.2,8.4\n          c1.3,3.1,1.9,6.6,1.9,10.5c0,4.7-1.2,9.4-3.6,14c-2.4,4.6-6.4,7.8-11.9,9.7c4.6,1.9,7.9,4.5,9.8,7.9c1.9,3.4,2.9,8.6,2.9,15.6v6.7\n          c0,4.6,0.2,7.7,0.5,9.3c0.5,2.6,1.8,4.5,3.8,5.7v2.5h-23c-0.6-2.2-1.1-4-1.4-5.4c-0.5-2.8-0.8-5.7-0.9-8.6l-0.1-9.3\n          c-0.1-6.4-1.3-10.6-3.5-12.8C60.6,61.8,56.4,60.8,50.3,60.8z M63,42.6c4.2-1.9,6.2-5.7,6.2-11.3c0-6.1-2-10.1-6-12.2\n          c-2.3-1.2-5.7-1.8-10.2-1.8H28.7v26.9h23.7C57.1,44.2,60.6,43.7,63,42.6z",S:"M50.1,83.9c4.7,0,8.5-0.5,11.4-1.5c5.5-2,8.3-5.6,8.3-11c0-3.1-1.4-5.6-4.1-7.3c-2.7-1.7-7.1-3.2-12.9-4.4l-10-2.3\n          c-9.9-2.2-16.7-4.7-20.5-7.3c-6.4-4.4-9.6-11.2-9.6-20.5c0-8.5,3.1-15.5,9.3-21.2C28.1,2.8,37.2,0,49.1,0c10,0,18.5,2.6,25.6,7.9\n          c7.1,5.3,10.7,13,11.1,23.1h-19c-0.3-5.7-2.8-9.8-7.5-12.2c-3.1-1.6-6.9-2.4-11.5-2.4c-5.1,0-9.2,1-12.2,3.1\n          c-3,2.1-4.6,4.9-4.6,8.6c0,3.4,1.5,5.9,4.5,7.6c1.9,1.1,6,2.4,12.3,3.9l16.3,3.9c7.2,1.7,12.6,4,16.2,6.9\n          c5.7,4.5,8.5,10.9,8.5,19.4c0,8.7-3.3,15.9-9.9,21.6c-6.6,5.7-16,8.6-28.1,8.6c-12.3,0-22.1-2.8-29.1-8.5\n          c-7.1-5.6-10.6-13.4-10.6-23.2H30c0.6,4.3,1.8,7.6,3.5,9.7C36.8,81.9,42.3,83.9,50.1,83.9z",T:"M90.5,0v17.7H60.6V100h-21V17.7H9.5V0H90.5z",U:"M68.5,59.9V0h20.7v59.9c0,10.4-1.6,18.4-4.8,24.2C78.4,94.7,66.9,100,50,100c-16.9,0-28.4-5.3-34.4-15.9\n          c-3.2-5.8-4.8-13.8-4.8-24.2V0h20.7v59.9c0,6.7,0.8,11.6,2.4,14.7c2.5,5.5,7.8,8.2,16.1,8.2c8.2,0,13.6-2.7,16.1-8.2\n          C67.7,71.5,68.5,66.6,68.5,59.9z",V:"M6.2,0h22.3l21.7,75.9L72.1,0h21.7L59.7,100H40L6.2,0z",W:"M83.3,0H100L77.8,100H62.1l-9.5-58.5l-2.8-19.3l-2.8,19.3L37.6,100H22.3L0,0h17.5l10.4,57.3l2.2,15.9l2.3-15.6L41.3,0h17.4\n          L68,57.3l2.4,15.9l2.4-15.3L83.3,0z",X:"M94.4,100H69L50,65.9L29.9,100H5.6l32.2-50.9L7.2,0h25L50,32.5L68.3,0h24.2L61.9,48.2L94.4,100z",Y:"M94.5,0L61,62.4V100H40.1V62.4L5.5,0h24.6l20.8,43.6L70.8,0H94.5z",Z:"M88.9,100H11.1V82.4l51.6-64.7H12.4V0h76.4v16.8L36.5,82.4h52.4V100z"}]]);const zf=(()=>{const e={LETTERS:{key:"letter-stack",description:"Letter Stack"},BARS:{key:"stacked-bars",description:"Stacked Bar Plot"}};return{...e,...qh(Object.values(e))}})();function Hf(t){const{svgId:n,alignment:r,glyphWidth:i,alignmentType:o,aaColorScheme:s=Kh.list[0],ntColorScheme:a=$h.list[0],positionsToStyle:l,tooltipPlacement:c="left-start",tooltipOffset:f=8,logoType:p=zf.LETTERS,font:m=Ff.DEFAULT,horizontalVirtualization:g,hoverTracker:v="end"}=t,y=o===Qh.AMINOACID?s:a,b=(0,e.useRef)(null),x=(0,e.useRef)(),[_,S]=(0,e.useState)(0),[w,E]=(0,e.useState)(0),A=(0,e.useMemo)((()=>{const e=r.getSequenceCount(),t=r.getAllUpperAlphaLettersInAlignmentSorted(),n=o===Qh.AMINOACID?od:sd,i=r.getPositionalLetterCounts(!1,t);return Array.from(i).map((t=>{let[i,o]=t;const s=r.getQuery().sequence[i.valueOf()],a=r.getConsensus().sequence[i.valueOf()];return Object.entries(o).map((t=>{let[r,i]=t;return{count:i,frequency:i/e,letter:{letter:r,classNames:nd(r,r===a,r===s)},residue:n.fromSingleLetterCode(r)}})).filter((e=>0!==e.frequency)).sort(((e,t)=>e.frequency>t.frequency?1:-1))}))}),[r,o]),T=(0,e.useCallback)(((e,t)=>{let n=100;return e.map(((e,t)=>{n-=100*e.frequency;if(p===zf.BARS)return(0,oc.jsx)("rect",{width:"100",height:"100",transform:"translate(0, ".concat(n,") scale(").concat(.009,",").concat(e.frequency,")"),className:e.letter.classNames},"idxrect_".concat(t));return Uf.glyphFromChar(e.letter.letter,m)({className:e.letter.classNames,transform:"translate(0, ".concat(n,") scale(").concat(.009,",").concat(e.frequency,")"),key:"idxglyph_".concat(t)})}))}),[p,m]),C=(0,e.useMemo)((()=>A?(0,oc.jsx)(Nf,{ref:b,className:"sequence-logo-tooltip-container",border:"solid black 1px",positionStrategy:"fixed",variant:"light",imperativeModeOnly:!0,place:c,offset:_}):null),[_,A,c]),P=(0,e.useCallback)((()=>{clearTimeout(x.current)}),[]),R=(0,e.useCallback)((()=>{x.current=setTimeout((()=>{var e;null===(e=b.current)||void 0===e||e.close()}),500)}),[]),I=(0,e.useCallback)((e=>{if(!e||!A||!A[parseInt(e)])return null;const t=parseInt(e)+1,n=A[parseInt(e)];return 0===n.length?null:(0,oc.jsxs)("div",{className:"logo-tooltip",onMouseEnter:P,onMouseLeave:R,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,oc.jsxs)("h1",{children:["Position: ",t]}),(0,oc.jsxs)("div",{className:"row",children:[(0,oc.jsx)("div",{className:"col legend-square"}),(0,oc.jsx)("div",{className:"col header name",children:"Residue"}),(0,oc.jsx)("div",{className:"col header frequency",children:"Frequency"}),(0,oc.jsx)("div",{className:"col header count",children:"Count"})]}),n.slice().reverse().map(((e,t)=>(0,oc.jsxs)("div",{className:"row",children:[(0,oc.jsx)("div",{className:"col legend-square ".concat(e.letter.classNames)}),(0,oc.jsx)("div",{className:"col name",children:"".concat(e.residue.fullName," [").concat(e.letter.letter,"]")}),(0,oc.jsxs)("div",{className:"col frequency",children:[+(100*e.frequency).toFixed(2),"%"]}),(0,oc.jsx)("div",{className:"col count",children:e.count})]},t)))]})}),[A,R,P]),M=(0,e.useCallback)((e=>{clearTimeout(x.current);const t=e.target.getAttribute("data-tooltip-id"),n=e.target.getAttribute("data-tooltip-content"),r=e.target.getBoundingClientRect(),i=I(n);var o;i&&(S(f+(["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(c)?r.height/2:r.width/2)),null===(o=b.current)||void 0===o||o.open({anchorSelect:t,content:i,position:{x:r.x+r.width/2,y:r.y+r.height/2}}))}),[I,c,f]),O=(0,e.useMemo)((()=>{const e=r.getSequenceLength(),t=[];for(let n=0;n<e;n++){const e=A[n];e.length>0&&t.push((0,oc.jsxs)("g",{transform:"translate(".concat(n,",0)"),children:[T(e,A.length),(0,oc.jsx)("rect",{className:"interaction-placeholder",width:"1",height:"100","data-tooltip-id":"logo".concat(n),"data-tooltip-content":n,onMouseEnter:M,onMouseLeave:R})]},"p_"+n))}return(0,oc.jsx)(oc.Fragment,{children:t})}),[r,A,T,M,R]),k=(0,e.useMemo)((()=>{var e,t;const s=r.getSequenceLength(),a=s*i,l=null===(e=(o===Qh.AMINOACID?od:sd).UNKNOWN.colors.get(y))||void 0===e||null===(t=e.get(Jh.NO_BACKGROUND))||void 0===t?void 0:t.letterColor.hexString;return(0,oc.jsxs)("svg",{id:n,className:"av2-sequence-logo",preserveAspectRatio:"none",viewBox:"0 0 ".concat(s," 100"),width:"".concat(a,"px"),height:"".concat(w,"px"),style:{width:a,height:w},xmlns:"http://www.w3.org/2000/svg",children:[l?(0,oc.jsx)("style",{type:"text/css",children:"\n            .av2-sequence-logo path{\n              color: ".concat(l,";\n              fill: ").concat(l,";\n            }\n            .av2-sequence-logo rect{\n              color: ").concat(l,";\n              fill: ").concat(l,";\n            }\n          ")}):void 0,O]})}),[r,i,w,O,o,y,n]),L=(0,e.useMemo)((()=>{const e=["sequence-logo-holder",o.className,y.className,l.className];return(0,oc.jsxs)("div",{className:e.join(" "),style:{width:r.getSequenceLength()*i},children:[k,C]})}),[r,i,l,k,C,o.className,y.className]),D=(0,e.useCallback)((e=>{E(e.height)}),[]),N=(0,e.useCallback)((()=>L),[L]),B=(0,e.useMemo)((()=>({...g||{virtualizationId:"logo-".concat(r.getUUID()),role:d.Controller,cellCount:r.getSequenceLength(),cellSizePx:i},virtualizationStrategy:u.ShiftOnlyFullyRendered,scrollbar:h.NeverOn,hoverTracker:v,containerBoundsUpdated:D})),[r,D,i,g,v]);return(0,oc.jsx)(Eh,{getContentForColumns:N,horizontalParams:B})}const jf=[{letterA:"W",letterB:"F",score:1},{letterA:"L",letterB:"R",score:-2},{letterA:"S",letterB:"P",score:-1},{letterA:"V",letterB:"T",score:0},{letterA:"Q",letterB:"Q",score:5},{letterA:"N",letterB:"A",score:-2},{letterA:"Z",letterB:"Y",score:-2},{letterA:"W",letterB:"R",score:-3},{letterA:"Q",letterB:"A",score:-1},{letterA:"S",letterB:"D",score:0},{letterA:"H",letterB:"H",score:8},{letterA:"S",letterB:"H",score:-1},{letterA:"H",letterB:"D",score:-1},{letterA:"L",letterB:"N",score:-3},{letterA:"W",letterB:"A",score:-3},{letterA:"Y",letterB:"M",score:-1},{letterA:"G",letterB:"R",score:-2},{letterA:"Y",letterB:"I",score:-1},{letterA:"Y",letterB:"E",score:-2},{letterA:"B",letterB:"Y",score:-3},{letterA:"Y",letterB:"A",score:-2},{letterA:"V",letterB:"D",score:-3},{letterA:"B",letterB:"S",score:0},{letterA:"Y",letterB:"Y",score:7},{letterA:"G",letterB:"N",score:0},{letterA:"E",letterB:"C",score:-4},{letterA:"Y",letterB:"Q",score:-1},{letterA:"Z",letterB:"Z",score:4},{letterA:"V",letterB:"A",score:0},{letterA:"C",letterB:"C",score:9},{letterA:"M",letterB:"R",score:-1},{letterA:"V",letterB:"E",score:-2},{letterA:"T",letterB:"N",score:0},{letterA:"P",letterB:"P",score:7},{letterA:"V",letterB:"I",score:3},{letterA:"V",letterB:"S",score:-2},{letterA:"Z",letterB:"P",score:-1},{letterA:"V",letterB:"M",score:1},{letterA:"T",letterB:"F",score:-2},{letterA:"V",letterB:"Q",score:-2},{letterA:"K",letterB:"K",score:5},{letterA:"P",letterB:"D",score:-1},{letterA:"I",letterB:"H",score:-3},{letterA:"I",letterB:"D",score:-3},{letterA:"T",letterB:"R",score:-1},{letterA:"P",letterB:"L",score:-3},{letterA:"K",letterB:"G",score:-2},{letterA:"M",letterB:"N",score:-2},{letterA:"P",letterB:"H",score:-2},{letterA:"F",letterB:"Q",score:-3},{letterA:"Z",letterB:"G",score:-2},{letterA:"X",letterB:"L",score:-1},{letterA:"T",letterB:"M",score:-1},{letterA:"Z",letterB:"C",score:-3},{letterA:"X",letterB:"H",score:-1},{letterA:"D",letterB:"R",score:-2},{letterA:"B",letterB:"W",score:-4},{letterA:"X",letterB:"D",score:-1},{letterA:"Z",letterB:"K",score:1},{letterA:"F",letterB:"A",score:-2},{letterA:"Z",letterB:"W",score:-3},{letterA:"F",letterB:"E",score:-3},{letterA:"D",letterB:"N",score:1},{letterA:"B",letterB:"K",score:0},{letterA:"X",letterB:"X",score:-1},{letterA:"F",letterB:"I",score:0},{letterA:"B",letterB:"G",score:-1},{letterA:"X",letterB:"T",score:0},{letterA:"F",letterB:"M",score:0},{letterA:"B",letterB:"C",score:-3},{letterA:"Z",letterB:"I",score:-3},{letterA:"Z",letterB:"V",score:-2},{letterA:"S",letterB:"S",score:4},{letterA:"L",letterB:"Q",score:-2},{letterA:"W",letterB:"E",score:-3},{letterA:"Q",letterB:"R",score:1},{letterA:"N",letterB:"N",score:6},{letterA:"W",letterB:"M",score:-1},{letterA:"Q",letterB:"C",score:-3},{letterA:"W",letterB:"I",score:-3},{letterA:"S",letterB:"C",score:-1},{letterA:"L",letterB:"A",score:-1},{letterA:"S",letterB:"G",score:0},{letterA:"L",letterB:"E",score:-3},{letterA:"W",letterB:"Q",score:-2},{letterA:"H",letterB:"G",score:-2},{letterA:"S",letterB:"K",score:0},{letterA:"Q",letterB:"N",score:0},{letterA:"N",letterB:"R",score:0},{letterA:"H",letterB:"C",score:-3},{letterA:"Y",letterB:"N",score:-2},{letterA:"G",letterB:"Q",score:-2},{letterA:"Y",letterB:"F",score:3},{letterA:"C",letterB:"A",score:0},{letterA:"V",letterB:"L",score:1},{letterA:"G",letterB:"E",score:-2},{letterA:"G",letterB:"A",score:0},{letterA:"K",letterB:"R",score:2},{letterA:"E",letterB:"D",score:2},{letterA:"Y",letterB:"R",score:-2},{letterA:"M",letterB:"Q",score:0},{letterA:"T",letterB:"I",score:-1},{letterA:"C",letterB:"D",score:-3},{letterA:"V",letterB:"F",score:-1},{letterA:"T",letterB:"A",score:0},{letterA:"T",letterB:"P",score:-1},{letterA:"B",letterB:"P",score:-2},{letterA:"T",letterB:"E",score:-1},{letterA:"V",letterB:"N",score:-3},{letterA:"P",letterB:"G",score:-2},{letterA:"M",letterB:"A",score:-1},{letterA:"K",letterB:"H",score:-1},{letterA:"V",letterB:"R",score:-3},{letterA:"P",letterB:"C",score:-3},{letterA:"M",letterB:"E",score:-2},{letterA:"K",letterB:"L",score:-2},{letterA:"V",letterB:"V",score:4},{letterA:"M",letterB:"I",score:1},{letterA:"T",letterB:"Q",score:-1},{letterA:"I",letterB:"G",score:-4},{letterA:"P",letterB:"K",score:-1},{letterA:"M",letterB:"M",score:5},{letterA:"K",letterB:"D",score:-1},{letterA:"I",letterB:"C",score:-1},{letterA:"Z",letterB:"D",score:1},{letterA:"F",letterB:"R",score:-3},{letterA:"X",letterB:"K",score:-1},{letterA:"Q",letterB:"D",score:0},{letterA:"X",letterB:"G",score:-1},{letterA:"Z",letterB:"L",score:-3},{letterA:"X",letterB:"C",score:-2},{letterA:"Z",letterB:"H",score:0},{letterA:"B",letterB:"L",score:-4},{letterA:"B",letterB:"H",score:0},{letterA:"F",letterB:"F",score:6},{letterA:"X",letterB:"W",score:-2},{letterA:"B",letterB:"D",score:4},{letterA:"D",letterB:"A",score:-2},{letterA:"S",letterB:"L",score:-2},{letterA:"X",letterB:"S",score:0},{letterA:"F",letterB:"N",score:-3},{letterA:"S",letterB:"R",score:-1},{letterA:"W",letterB:"D",score:-4},{letterA:"V",letterB:"Y",score:-1},{letterA:"W",letterB:"L",score:-2},{letterA:"H",letterB:"R",score:0},{letterA:"W",letterB:"H",score:-2},{letterA:"H",letterB:"N",score:1},{letterA:"W",letterB:"T",score:-2},{letterA:"T",letterB:"T",score:5},{letterA:"S",letterB:"F",score:-2},{letterA:"W",letterB:"P",score:-4},{letterA:"L",letterB:"D",score:-4},{letterA:"B",letterB:"I",score:-3},{letterA:"L",letterB:"H",score:-3},{letterA:"S",letterB:"N",score:1},{letterA:"B",letterB:"T",score:-1},{letterA:"L",letterB:"L",score:4},{letterA:"Y",letterB:"K",score:-2},{letterA:"E",letterB:"Q",score:2},{letterA:"Y",letterB:"G",score:-3},{letterA:"Z",letterB:"S",score:0},{letterA:"Y",letterB:"C",score:-2},{letterA:"G",letterB:"D",score:-1},{letterA:"B",letterB:"V",score:-3},{letterA:"E",letterB:"A",score:-1},{letterA:"Y",letterB:"W",score:2},{letterA:"E",letterB:"E",score:5},{letterA:"Y",letterB:"S",score:-2},{letterA:"C",letterB:"N",score:-3},{letterA:"V",letterB:"C",score:-1},{letterA:"T",letterB:"H",score:-2},{letterA:"P",letterB:"R",score:-2},{letterA:"V",letterB:"G",score:-3},{letterA:"T",letterB:"L",score:-1},{letterA:"V",letterB:"K",score:-2},{letterA:"K",letterB:"Q",score:1},{letterA:"R",letterB:"A",score:-1},{letterA:"I",letterB:"R",score:-3},{letterA:"T",letterB:"D",score:-1},{letterA:"P",letterB:"F",score:-4},{letterA:"I",letterB:"N",score:-3},{letterA:"K",letterB:"I",score:-3},{letterA:"M",letterB:"D",score:-3},{letterA:"V",letterB:"W",score:-3},{letterA:"W",letterB:"W",score:11},{letterA:"M",letterB:"H",score:-2},{letterA:"P",letterB:"N",score:-2},{letterA:"K",letterB:"A",score:-1},{letterA:"M",letterB:"L",score:2},{letterA:"K",letterB:"E",score:1},{letterA:"Z",letterB:"E",score:4},{letterA:"X",letterB:"N",score:-1},{letterA:"Z",letterB:"A",score:-1},{letterA:"Z",letterB:"M",score:-1},{letterA:"X",letterB:"F",score:-1},{letterA:"K",letterB:"C",score:-3},{letterA:"B",letterB:"Q",score:0},{letterA:"X",letterB:"B",score:-1},{letterA:"B",letterB:"M",score:-3},{letterA:"F",letterB:"C",score:-2},{letterA:"Z",letterB:"Q",score:3},{letterA:"X",letterB:"Z",score:-1},{letterA:"F",letterB:"G",score:-3},{letterA:"B",letterB:"E",score:1},{letterA:"X",letterB:"V",score:-1},{letterA:"F",letterB:"K",score:-3},{letterA:"B",letterB:"A",score:-2},{letterA:"X",letterB:"R",score:-1},{letterA:"D",letterB:"D",score:6},{letterA:"W",letterB:"G",score:-2},{letterA:"Z",letterB:"F",score:-3},{letterA:"S",letterB:"Q",score:0},{letterA:"W",letterB:"C",score:-2},{letterA:"W",letterB:"K",score:-3},{letterA:"H",letterB:"Q",score:0},{letterA:"L",letterB:"C",score:-1},{letterA:"W",letterB:"N",score:-4},{letterA:"S",letterB:"A",score:1},{letterA:"L",letterB:"G",score:-4},{letterA:"W",letterB:"S",score:-3},{letterA:"S",letterB:"E",score:0},{letterA:"H",letterB:"E",score:0},{letterA:"S",letterB:"I",score:-2},{letterA:"H",letterB:"A",score:-2},{letterA:"S",letterB:"M",score:-1},{letterA:"Y",letterB:"L",score:-1},{letterA:"Y",letterB:"H",score:2},{letterA:"Y",letterB:"D",score:-3},{letterA:"E",letterB:"R",score:0},{letterA:"X",letterB:"P",score:-2},{letterA:"G",letterB:"G",score:6},{letterA:"G",letterB:"C",score:-3},{letterA:"E",letterB:"N",score:0},{letterA:"Y",letterB:"T",score:-2},{letterA:"Y",letterB:"P",score:-3},{letterA:"T",letterB:"K",score:-1},{letterA:"A",letterB:"A",score:4},{letterA:"P",letterB:"Q",score:-1},{letterA:"T",letterB:"C",score:-1},{letterA:"V",letterB:"H",score:-3},{letterA:"T",letterB:"G",score:-2},{letterA:"I",letterB:"Q",score:-3},{letterA:"Z",letterB:"T",score:-1},{letterA:"C",letterB:"R",score:-3},{letterA:"V",letterB:"P",score:-2},{letterA:"P",letterB:"E",score:-1},{letterA:"M",letterB:"C",score:-1},{letterA:"K",letterB:"N",score:0},{letterA:"I",letterB:"I",score:4},{letterA:"P",letterB:"A",score:-1},{letterA:"M",letterB:"G",score:-3},{letterA:"T",letterB:"S",score:1},{letterA:"I",letterB:"E",score:-3},{letterA:"P",letterB:"M",score:-2},{letterA:"M",letterB:"K",score:-1},{letterA:"I",letterB:"A",score:-1},{letterA:"P",letterB:"I",score:-3},{letterA:"R",letterB:"R",score:5},{letterA:"X",letterB:"M",score:-1},{letterA:"L",letterB:"I",score:2},{letterA:"X",letterB:"I",score:-1},{letterA:"Z",letterB:"B",score:1},{letterA:"X",letterB:"E",score:-1},{letterA:"Z",letterB:"N",score:0},{letterA:"X",letterB:"A",score:0},{letterA:"B",letterB:"R",score:-1},{letterA:"B",letterB:"N",score:3},{letterA:"F",letterB:"D",score:-3},{letterA:"X",letterB:"Y",score:-1},{letterA:"Z",letterB:"R",score:0},{letterA:"F",letterB:"H",score:-1},{letterA:"B",letterB:"F",score:-3},{letterA:"F",letterB:"L",score:0},{letterA:"X",letterB:"Q",score:-1},{letterA:"B",letterB:"B",score:4}].reduce(((e,t)=>(e.has(t.letterA)||e.set(t.letterA,new Map),e.has(t.letterB)||e.set(t.letterB,new Map),e.get(t.letterA).set(t.letterB,t.score),e.get(t.letterB).set(t.letterA,t.score),e)),new Map);const Vf=(()=>{function e(e,t){const n=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length;let r=Math.abs(e.sequence.length-t.sequence.length);for(var i=0;i<n;i++)e.sequence[i]!==t.sequence[i]&&(r+=1);return r}function t(e,t){const n=e.sequence.length<t.sequence.length?e.sequence.length:t.sequence.length;let r=0;for(var i=0;i<n;i++)jf.has(e.sequence[i])&&jf.get(e.sequence[i]).has(t.sequence[i])&&(r+=jf.get(e.sequence[i]).get(t.sequence[i]));return r}const n={INPUT:{key:"as-input",description:"As input",targetAlignmentType:"both",sortFn:(e,t)=>e},HAMMING_DIST_QUERY:{key:"hamming-dist-to-query",description:"Hamming distance to query sequence",targetAlignmentType:"both",sortFn:(t,n)=>{const r=n.getQuery();return t.map((e=>e)).sort(((t,n)=>e(r,t)-e(r,n)))}},HAMMING_DIST_CONSENSUS:{key:"hamming-dist-to-consensus",description:"Hamming distance to consensus sequence",targetAlignmentType:"both",sortFn:(t,n)=>{const r=n.getConsensus();return t.map((e=>e)).sort(((t,n)=>e(r,t)-e(r,n)))}},BLOSUM62_SCORE_QUERY:{key:"blosum-score-to-query",description:"BLOSUM62 score to query sequence",targetAlignmentType:"aminoacid",sortFn:(e,n)=>{const r=n.getQuery();return e.map((e=>e)).sort(((e,n)=>{const i=t(r,e);return t(r,n)-i}))}},BLOSUM62_SCORE_CONSENSUS:{key:"blosum-score-to-consensus",description:"BLOSUM62 score to consensus sequence",targetAlignmentType:"aminoacid",sortFn:(e,n)=>{const r=n.getConsensus();return e.map((e=>e)).sort(((e,n)=>{const i=t(r,e);return t(r,n)-i}))}}},r=qh(Object.values(n));return{ALL_AMINO_ACID_SORTERS:r.list.reduce(((e,t)=>("aminoacid"!==t.targetAlignmentType&&"both"!==t.targetAlignmentType||e.push(t),e)),[]),ALL_NUCLEOTIDE_SORTERS:r.list.reduce(((e,t)=>("nucleotide"!==t.targetAlignmentType&&"both"!==t.targetAlignmentType||e.push(t),e)),[]),...n,...qh(Object.values(n))}})();class Gf{static normalizeLetterCounts(e,t){const n=Object.keys(e).reduce(((n,r)=>(t&&!t.includes(r)||(n+=e[r]),n)),0);return Object.keys(e).reduce(((r,i)=>(t&&!t.includes(i)||(r[i]=e[i]/n),r)),{})}constructor(e){this.uuid=void 0,this.name=void 0,this.predictedNT=void 0,this.numberDuplicateSequencesInAlignment=void 0,this.numberRemovedDuplicateSequences=void 0,this.sortedSequencesCache=void 0,this.maxSequenceLength=void 0,this.querySequence=void 0,this.positionalLetterCounts=void 0,this.globalAlphaLetterCounts=void 0,this.allUpperAlphaLettersInAlignmentSorted=void 0,this.consensus=void 0,this.allRepresentedCharacters=void 0,this.annotationFields=void 0;const{name:t,sequencesAsInput:n,removeDuplicateSequences:r=!1,supressParseTime:i,overrideQuery:o}=e;this.uuid=s(),this.name=t,this.sortedSequencesCache=new Map;let a=new Date,l=0;const c=Array.from(n.reduce(((e,t,n)=>(e.has(t.sequence)?l+=1:e.set(t.sequence,t),e)),new Map).values());r?(this.numberDuplicateSequencesInAlignment=0,this.numberRemovedDuplicateSequences=l,this.sortedSequencesCache.set(Vf.INPUT,c)):(this.numberDuplicateSequencesInAlignment=l,this.numberRemovedDuplicateSequences=0,this.sortedSequencesCache.set(Vf.INPUT,n));const u=this.sortedSequencesCache.get(Vf.INPUT);this.querySequence=o||(u[0]?{...u[0]}:{sequence:"",annotations:{[Bh.ID]:"query",[Bh.ACTUAL_ID]:"query"}}),this.predictedNT=!0,a=new Date;let h={};for(let s=0,m=u.length;s<m;s++){h[u[s].sequence.length]=!0}if(Object.keys(h).length>1)throw Error("Alignment sequences must all be the same length, but multiple sequence lengths were observed: "+Object.keys(h).join(", "));this.maxSequenceLength=parseInt(Object.keys(h)[0]),this.maxSequenceLength=this.maxSequenceLength?this.maxSequenceLength:0;const{allUniqueChars:d,globalCharCodeCounts:f,positionalCharCodeCounts:p}=((e,t)=>{let n={};for(let s=0,a=e.length;s<a;s++){const t=e[s];for(let e=0,r=t.length;e<r;e++)n[t.charCodeAt(e)]=!0}const r=Object.keys(n).map((e=>String.fromCharCode(parseInt(e)))),i=new Map;for(let s=0;s<t;s++)i.set(s,Object.keys(n).reduce(((e,t)=>(e[t]=0,e)),{}));const o={};Object.keys(n).forEach((e=>{o[e]=0}));for(let s=0,a=e.length;s<a;s++){const t=e[s];for(let e=0,n=t.length;e<n;e++){const n=t.charCodeAt(e);o[n]+=1,i.get(e)[n]+=1}}return{allUniqueChars:r,globalCharCodeCounts:o,positionalCharCodeCounts:i}})(u.map((e=>e.sequence)),this.maxSequenceLength);this.allRepresentedCharacters=o?o.sequence.split("").reduce(((e,t)=>(-1===e.indexOf(t)&&(e+=t),e)),d.join("")).split(""):d,this.positionalLetterCounts=Array.from(p).reduce(((e,t)=>{let[n,r]=t;return e.set(n,Object.keys(r).reduce(((e,t)=>{if(r[t]){e[String.fromCharCode(parseInt(t))]=r[t]}return e}),{})),e}),new Map),this.globalAlphaLetterCounts=Object.keys(f).reduce(((e,t)=>{if(f[t]){e[String.fromCharCode(parseInt(t))]=f[t]}return e}),{}),this.predictedNT=!d.find((e=>{const t=e.match(/[a-z]/);return!(!e.match(/[A-Z]/)&&!t)&&sd.fromSingleLetterCode(e)===sd.UNKNOWN})),this.allUpperAlphaLettersInAlignmentSorted=d.reduce(((e,t)=>(t.match(/[A-Z]/)&&e.push(t),e)),[]).sort(),this.consensus={annotations:{[Bh.ID]:"consensus",[Bh.ACTUAL_ID]:"consensus"},sequence:Array.from(this.positionalLetterCounts).map((e=>{let[t,n]=e;return Object.entries(n).sort(((e,t)=>{const n=!!e[0].match(/[a-z]/),r=!!e[0].match(/[A-Z]/),i=!!t[0].match(/[a-z]/),o=!!t[0].match(/[A-Z]/);return n===i&&r===o?t[1]-e[1]:r?-1:o?1:n?-1:i?1:0})).map((e=>e[0]))[0]})).join("")},this.annotationFields={};for(const s of u)for(const e of Object.keys(s.annotations))e in this.annotationFields||(this.annotationFields[e]={key:e,name:Uh(e)});i||console.log("done parsing alignment. took "+((new Date).getTime()-a.getTime())+"ms")}getAllRepresentedCharacters(){return this.allRepresentedCharacters}getNumberDuplicateSequencesInAlignment(){return this.numberDuplicateSequencesInAlignment}getNumberRemovedDuplicateSequences(){return this.numberRemovedDuplicateSequences}getPredictedType(){return this.predictedNT?Qh.NUCLEOTIDE:Qh.AMINOACID}getDefaultColorScheme(){return this.predictedNT?$h.list[0]:Kh.list[0]}getUUID(){return this.uuid}getName(){return this.name}getConsensus(){return this.consensus}getGapsPerColumn(){return Array.from(this.positionalLetterCounts).map((e=>{let[t,n]=e;return isNaN(n["-"])?0:n["-"]}))}getGapCountAtColumn(e){const t=this.positionalLetterCounts.get(e);return t&&t["-"]?t["-"]:0}getGlobalAlphaLetterCounts(e,t){return e?Gf.normalizeLetterCounts(this.globalAlphaLetterCounts,t):t?Object.keys(this.globalAlphaLetterCounts).reduce(((e,n)=>(t.includes(n)&&(e[n]=this.globalAlphaLetterCounts[n]),e)),{}):this.globalAlphaLetterCounts}getSequenceLength(){return this.maxSequenceLength}getSequenceCount(){return this.sortedSequencesCache.get(Vf.INPUT).length}getPositionalLetterCounts(e,t){return e||t?Array.from(this.positionalLetterCounts).reduce(((n,r)=>{let[i,o]=r;return n.set(i,e?Gf.normalizeLetterCounts(o,t):Object.keys(o).reduce(((e,n)=>(t.includes(n)&&(e[n]=o[n]),e)),{})),n}),new Map):this.positionalLetterCounts}getSequences(e,t){return t=t||!1,(e=e||Vf.INPUT)===Vf.INPUT||this.sortedSequencesCache.has(e)&&!t||this.sortedSequencesCache.set(e,e.sortFn(this.sortedSequencesCache.get(Vf.INPUT),this)),this.sortedSequencesCache.get(e)}getAnnotationFields(){return this.annotationFields}getAllUpperAlphaLettersInAlignmentSorted(){return this.allUpperAlphaLettersInAlignmentSorted}getQuery(){return this.querySequence}}Gf.getPositionalLetterColors=e=>{const{allPossibleChars:t,sequences:n,querySequence:r,consensusSequence:i,alignmentType:o,positionsToStyle:s,residueColoring:a,aaColorScheme:l=Kh.list[0],ntColorScheme:c=$h.list[0]}=e,u=o===Qh.AMINOACID?l:c;if(n.length<1)return{};const h=o===Qh.AMINOACID?od:sd,d=h.UNKNOWN.colors.get(u).get(a),f={};for(var p=0,m=n[0].length;p<m;p++){const e={};for(var g=0,v=t.length;g<v;g++){const n=t[g],o=h.fromSingleLetterCode(n).colors.get(u).get(a),l=s===Zh.ALL||s===Zh.QUERY&&r[p]===n||s===Zh.QUERY_DIFF&&r[p]!==n||s===Zh.CONSENSUS&&i[p]===n||s===Zh.CONSENSUS_DIFF&&i[p]!==n?o:d;e[n]={letter:n,...l}}f[p]=e}return f};const Wf=t=>{const{canvasGenerator:n,sequenceSet:r,isMinimap:i=!1,showLoadingIndicator:o=!1,sequences:s,consensusSequence:a,querySequence:l,allCharsInAlignment:c,sortByKey:u,alignmentType:h,positionsToStyle:d,highlightPositionalMatches:f,aaColorScheme:p=Kh.list[0],ntColorScheme:m=$h.list[0],residueColoring:g,width:v,height:y,scaleX:b,scaleY:x,positionX:_,positionY:S}=t,w=g,[E,A]=(0,e.useState)(!0),[T,C]=(0,e.useState)(),[P,R]=(0,e.useState)(),I=(0,e.useMemo)((()=>[s.length,s.length>0?s[0].length:0,l,a,h.key,d.key,w.key,h===Qh.AMINOACID?p.commonName:m.commonName,u,null!==f&&void 0!==f&&f.searchString?[f.searchString,f.highlightColor.red,f.highlightColor.green,f.highlightColor.blue].join(""):""].join("")),[h,a,null===f||void 0===f?void 0:f.searchString,null===f||void 0===f?void 0:f.highlightColor.red,null===f||void 0===f?void 0:f.highlightColor.green,null===f||void 0===f?void 0:f.highlightColor.blue,d.key,l,w.key,u,s,p.commonName,m.commonName]),[M,O]=(0,e.useState)(n.updateObserver.get());(0,e.useEffect)((()=>n.updateObserver.subscribe(O)),[n]);const k="synced-webgl"===M.datatype&&i?M.getMinimapBlocksWebglApp():"webgl"===M.datatype||"synced-webgl"===M.datatype?M.getMSABlocksWebglApp():void 0,L="canvas"===M.datatype?M.getCanvasImageData():void 0;(0,e.useEffect)((()=>{M.loaded&&T&&k&&(T.appendChild(k.view),k.resizeTo=T)}),[k,M.loaded,T]);const D=(0,e.useMemo)((()=>Gf.getPositionalLetterColors({allPossibleChars:c,sequences:s,querySequence:l,consensusSequence:a,alignmentType:h,positionsToStyle:d,residueColoring:w,aaColorScheme:p,ntColorScheme:m})),[c,h,a,p,m,d,l,w,s]);(0,e.useEffect)((()=>{const e={extraPosSeqCount:1,tileSize:"canvas"===M.datatype?1e6:1024,positionalLetterColors:D,sequences:s,highlightPositionalMatches:f};A(!0),k&&(k.stage.removeChildren(),k.render()),n.updateMSA(e,I)}),[n,n.updateMSA,P,T,I,f,D,r,s,k,M.datatype]),(0,e.useEffect)((()=>{if(k&&M.loaded&&T)k.resizeTo=T,k.stage.scale.set(b,x),k.stage.position.set(_,S),k.render(),M.cachePropsKey===I&&A(!1);else if(L&&M.loaded&&T&&P){const e=L.tiles[0].image,t=T.getBoundingClientRect(),n=P.getContext("2d");n&&(n.imageSmoothingEnabled=!1,n.clearRect(0,0,t.width,t.height),n.drawImage(e,-_/b,-S/x,t.width/b,t.height/x,0,0,t.width,t.height)),M.cachePropsKey===I&&A(!1)}}),[L,n,T,P,I,_,S,b,x,k,v,y,M]);const N=["av2-blocks","canvas-holder"];return g===Jh.NO_BACKGROUND&&N.push("hidden"),g===Jh.LIGHT&&N.push("light"),N.push(g.key),(0,oc.jsxs)("div",{className:N.join(" "),ref:e=>{C(e)},children:[o&&E?(0,oc.jsx)("div",{className:"loader-holder",children:(0,oc.jsx)("div",{className:"loader"})}):void 0,L?(0,oc.jsx)("canvas",{ref:e=>{R(e)},width:null===T||void 0===T?void 0:T.getBoundingClientRect().width,height:null===T||void 0===T?void 0:T.getBoundingClientRect().height,style:{display:E?"none":"block",position:"absolute"}}):void 0]})};function qf(t){const{canvasGenerator:n,highlightPositionalMatches:r,alignment:i,sortBy:o,alignmentType:a,aaColorScheme:l=Kh.list[0],ntColorScheme:c=$h.list[0],positionsToStyle:h,syncWithVerticalVirtualization:f}=t,[p]=(0,e.useState)(s()),[m,g]=(0,e.useState)(void 0),v=!f,y=m?m.canvasWidthPx/i.getSequenceLength():void 0,b=_h((0,e.useMemo)((()=>({...f||{virtualizationId:"minimap-".concat(i.getUUID()),role:d.Controller,cellCount:i.getSequenceCount(),cellSizePx:1},virtualizationStrategy:u.Manual})),[i,f]),p,m?m.canvasHeightPx*y:void 0),x=(0,e.useCallback)((e=>{m&&m.canvasWidthPx===e.width&&m.canvasHeightPx===e.height||g({canvasWidthPx:e.width,canvasHeightPx:e.height,getYPx:e.getLiveTop})}),[m]),_=null===b||void 0===b?void 0:b.setWorldOffsetPx,S=!!b&&(null===b||void 0===b?void 0:b.cellCount)<=b.numIdxsToRender,E=(0,e.useCallback)((e=>{const{fixedWorldHeightPx:t,fixedContainerHeightPx:n,fixedWorldTopOffsetPx:r,targetWorldHeightPx:i,targetContainerHeightPx:o}=e;if(o>=i)return 0;return r/(t-n)*(i-o)}),[]),A=(0,e.useMemo)((()=>{if(null===m||void 0===m||!m.canvasWidthPx||null===b||void 0===b||!b.numIdxsToRender||void 0===y)return;const e=b.subsetRenderSizePx,t=b.worldRenderSizePx,n=b.worldOffsetPx,r=y*i.getSequenceCount(),o=E({fixedWorldHeightPx:t,fixedContainerHeightPx:e,fixedWorldTopOffsetPx:n,targetWorldHeightPx:r,targetContainerHeightPx:m.canvasHeightPx}),s=m.canvasHeightPx<r?m.canvasHeightPx:r,a=y*b.numIdxsToRender,l=E({fixedWorldHeightPx:t,fixedContainerHeightPx:e,fixedWorldTopOffsetPx:n,targetWorldHeightPx:s,targetContainerHeightPx:a}),c=i.getSequenceCount()-Math.floor((o+m.canvasHeightPx)/y);return{mmWorldHeightPx:r,mmWorldOffsetPx:o,mmNumSeqsAbove:Math.floor(o/y),mmNumSeqsBelow:c<0?0:c,draggerOffsetPx:l,draggerHeightPx:a,draggerWorldHeightPx:s}}),[i,null===m||void 0===m?void 0:m.canvasWidthPx,null===m||void 0===m?void 0:m.canvasHeightPx,null===b||void 0===b?void 0:b.numIdxsToRender,null===b||void 0===b?void 0:b.subsetRenderSizePx,null===b||void 0===b?void 0:b.worldOffsetPx,null===b||void 0===b?void 0:b.worldRenderSizePx,E,y]);(0,e.useEffect)((()=>{L.RENDER_OPTIONS.hello=!1,_t.defaultOptions.scaleMode=w.NEAREST}),[]);const T=(0,e.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),null!==A&&void 0!==A&&A.draggerHeightPx&&_&&y){const t=e.pageY-e.currentTarget.getBoundingClientRect().top;_((t+A.mmWorldOffsetPx-A.draggerHeightPx/2)/y*b.cellSizePx)}}),[null===A||void 0===A?void 0:A.draggerHeightPx,null===A||void 0===A?void 0:A.mmWorldOffsetPx,y,_,null===b||void 0===b?void 0:b.cellSizePx]),C=(0,e.useCallback)((e=>{y&&_&&0!==e.deltaY&&void 0!==(null===A||void 0===A?void 0:A.draggerWorldHeightPx)&&_(b.worldOffsetPx+e.deltaY/A.draggerWorldHeightPx*b.worldRenderSizePx/10)}),[y,_,null===A||void 0===A?void 0:A.draggerWorldHeightPx,null===b||void 0===b?void 0:b.worldOffsetPx,null===b||void 0===b?void 0:b.worldRenderSizePx]),P=(0,e.useCallback)((e=>{_&&null!==A&&void 0!==A&&A.draggerHeightPx&&null!==m&&void 0!==m&&m.canvasHeightPx&&_(E({fixedWorldHeightPx:A.draggerWorldHeightPx,fixedContainerHeightPx:A.draggerHeightPx,fixedWorldTopOffsetPx:e,targetWorldHeightPx:b.worldRenderSizePx,targetContainerHeightPx:b.containerSizePx}))}),[E,null===m||void 0===m?void 0:m.canvasHeightPx,null===A||void 0===A?void 0:A.draggerHeightPx,null===A||void 0===A?void 0:A.draggerWorldHeightPx,_,null===b||void 0===b?void 0:b.containerSizePx,null===b||void 0===b?void 0:b.worldRenderSizePx]),R=(0,e.useMemo)((()=>[void 0===(null===A||void 0===A?void 0:A.mmNumSeqsAbove)?void 0:(0,oc.jsx)("div",{className:"minimap-header",children:"".concat(A.mmNumSeqsAbove.toLocaleString()," hidden")}),void 0===(null===A||void 0===A?void 0:A.mmNumSeqsBelow)?void 0:(0,oc.jsx)("div",{className:"minimap-footer",children:"".concat(A.mmNumSeqsBelow.toLocaleString()," hidden")})]),[null===A||void 0===A?void 0:A.mmNumSeqsAbove,null===A||void 0===A?void 0:A.mmNumSeqsBelow]),I=(0,e.useMemo)((()=>i.getSequences(o).map((e=>e.sequence))),[i,o]),M=(0,e.useMemo)((()=>void 0!==(null===A||void 0===A?void 0:A.mmWorldOffsetPx)&&y?(0,oc.jsx)("div",{className:"minimap-canvas-holder",children:(0,oc.jsx)(Wf,{canvasGenerator:n,showLoadingIndicator:!0,isMinimap:!0,sequenceSet:"alignment",sequences:I,sortByKey:o.key,querySequence:i.getQuery().sequence,consensusSequence:i.getConsensus().sequence,allCharsInAlignment:i.getAllRepresentedCharacters(),alignmentType:a,aaColorScheme:l,ntColorScheme:c,residueColoring:Jh.DARK,highlightPositionalMatches:r,positionsToStyle:h,width:y*i.getSequenceLength(),height:y*i.getSequenceCount(),scaleX:y,scaleY:y,positionX:0,positionY:-A.mmWorldOffsetPx})}):void 0),[i,a,n,l,c,h,r,null===A||void 0===A?void 0:A.mmWorldOffsetPx,y,I,o.key]),O=(0,e.useMemo)((()=>(0,oc.jsx)("div",{className:"minimap-interaction",onClick:T,onWheel:C})),[T,C]),k=null===m||void 0===m?void 0:m.getYPx(),D=(0,e.useMemo)((()=>S||null===A||void 0===A||!A.draggerHeightPx||void 0===k?void 0:(0,oc.jsx)(Xf,{fillColor:"#000000",baselineOpacity:.4,mouseoverOpacity:.3,draggingOpacity:.2,onWheel:C,highlighterHeightPx:A.draggerHeightPx,highlighterYPx:A.draggerOffsetPx,highlighterMoved:P,mainMinimapContainerY:k})),[P,C,null===A||void 0===A?void 0:A.draggerHeightPx,null===A||void 0===A?void 0:A.draggerOffsetPx,S,k]),N=(0,e.useMemo)((()=>(0,oc.jsxs)("div",{className:"minimap",children:[R[0],(0,oc.jsx)("div",{className:"minimap-app-holder",children:(0,oc.jsxs)(sc,{onSizeChanged:x,logId:"minimap",children:[M,O,D]})}),R[1]]})),[O,R,M,D,x]),B=null===b||void 0===b?void 0:b.updateCellSizePx,F=null===b||void 0===b?void 0:b.updateContainerSizePx;return(0,e.useEffect)((()=>{v&&F&&B&&null!==m&&void 0!==m&&m.canvasHeightPx&&null!==A&&void 0!==A&&A.mmWorldHeightPx&&y&&(B(y),F(m.canvasHeightPx/(y*i.getSequenceCount())*m.canvasHeightPx))}),[i,v,null===m||void 0===m?void 0:m.canvasHeightPx,null===A||void 0===A?void 0:A.mmWorldHeightPx,y,B,F,_]),N}function Xf(t){const{highlighterHeightPx:n,highlighterYPx:r,highlighterMoved:i,mainMinimapContainerY:o,fillColor:s,baselineOpacity:a,mouseoverOpacity:l,draggingOpacity:c,onWheel:u}=t,[h,d]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)(0),v=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),h&&i(e.pageY-o-n*m)}),[h,m,n,i,o]),y=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault();let t=e.currentTarget.getBoundingClientRect(),n=e.clientY-t.top;d(!0),g(n/t.height)}),[]),b=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),d(!1)}),[]);return(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("div",{className:"minimap-dragger",style:{top:r,height:n,opacity:h?c:f?l:a,backgroundColor:s},onWheel:e=>{u(e)},onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},onMouseDown:y}),h?(0,oc.jsx)("div",{className:"minimap-full-page-drag-detector",onMouseMove:v,onMouseUp:b,onMouseOut:b,onMouseLeave:b}):void 0]})}const Yf=(()=>{const e={key:"entropy",description:"Entropy",cssClass:"barplot-shannon-entropy",color:"#000000",plotOptions:{fixYMax:e=>{const t=e.getAllUpperAlphaLettersInAlignmentSorted(),n=1/t.length;return-1*t.reduce((e=>e+n*Math.log2(n)),0)}},getBars:e=>{const t=[],n=e.getPositionalLetterCounts(!0,e.getAllUpperAlphaLettersInAlignmentSorted()),r=e.getSequenceLength();for(let i=0;i<r;i++){const e=n.get(i);e&&0!==Object.keys(e).length?t.push({height:-1*Object.values(e).reduce(((e,t)=>e+t*Math.log2(t)),0)}):t.push({height:void 0})}return t}},t={ShannonEntropy:e,Conservation:{key:"conservation",description:"Conservation",cssClass:"barplot-conservation",color:"#414141",plotOptions:{fixYMax:t=>e.plotOptions.fixYMax(t)},getBars:t=>{const n=e.plotOptions.fixYMax(t);return e.getBars(t).map((e=>({...e,height:void 0===e.height?void 0:n-e.height})))}},KullbacLeiblerDivergence:{key:"kullback-leibler-divergence",description:"KL Divergence",cssClass:"barplot-kullback-leibler-divergence",color:"darkred",getBars:e=>{const t=e.getAllUpperAlphaLettersInAlignmentSorted(),n=e.getPositionalLetterCounts(!0,t),r=e.getGlobalAlphaLetterCounts(!0,t),i=[],o=e.getSequenceLength();for(let s=0;s<o;s++){const e=n.get(s);e&&0!==Object.keys(e).length?i.push({height:t.reduce(((t,n)=>(n in e&&(t+=e[n]*Math.log(e[n]/r[n])),t)),0)}):i.push({height:void 0})}return i}},Gaps:{key:"gaps",description:"Gaps",cssClass:"barplot-gaps",color:"#b7b7b7",plotOptions:{fixYMax:e=>e.getSequenceCount()},getBars:e=>{const t=[],n=e.getSequenceLength();for(let r=0;r<n;r++){const n=e.getGapCountAtColumn(r);t.push({height:n,tooltipValueText:"".concat((n/e.getSequenceCount()*100).toFixed(1),"% (").concat(n,")")})}return t}}};return{...t,...qh(Object.values(t))}})();function Kf(t){const{svgId:n,alignment:r,searchDetails:i,positionWidth:o,dataSeriesSet:l,tooltipPlacement:c="top",tooltipOffset:f=8,horizontalVirtualization:p,hoverTracker:m="end"}=t,g=100,v=(0,e.useRef)(null),y=(0,e.useRef)(),[b]=(0,e.useState)(s()),[x,_]=(0,e.useState)(0),[S,w]=(0,e.useState)(0),E=(0,e.useCallback)((e=>{const t=e.reduce(((e,t)=>(void 0!==t.height&&e.push(t.height),e)),[]),n=Math.min(...t),i=Math.max(...t);return e.map((e=>{const t=n,o=e.dataSeriesSet.plotOptions&&e.dataSeriesSet.plotOptions.fixYMax?e.dataSeriesSet.plotOptions.fixYMax(r):i,s=void 0===e.height?NaN:(e.height-t)/(o-t)*g;return{...e,normalizedHeight:isNaN(s)?void 0:s}}))}),[r]),A=(0,e.useMemo)((()=>{let e=[];l.forEach((t=>{e=e.concat(t.getBars(r,i).map(((e,n)=>({...e,position:n,dataSeriesSet:t,normalizedHeight:-1}))))}));const t=Object.values(e.reduce(((e,t)=>(e[t.dataSeriesSet.key]=e[t.dataSeriesSet.key]?[...e[t.dataSeriesSet.key],t]:[t],e)),{})).map((e=>E(e))).flat(),o=a(t,(e=>e.position)),s=a(t,(e=>e.dataSeriesSet));return{svgId:n,normaliedBars:t,barsGroupedByPosition:o,barsGroupedByDataseries:s}}),[r,l,E,i,n]),T=(0,e.useCallback)((()=>{clearTimeout(y.current)}),[]),C=(0,e.useCallback)((()=>{y.current=setTimeout((()=>{var e;null===(e=v.current)||void 0===e||e.close()}),500)}),[]),P=(0,e.useCallback)((e=>{if(!e||!A.barsGroupedByPosition.get(parseInt(e)))return null;const t=parseInt(e)+1,n=A.barsGroupedByPosition.get(parseInt(e));return(n?n.reduce(((e,t)=>e+(void 0!==t.height?1:0)),0):0)<1?void 0:(0,oc.jsxs)("div",{className:"bar-position-textblock",onMouseEnter:T,onMouseLeave:C,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,oc.jsxs)("h1",{children:["Position: ",t]}),n.map((e=>(0,oc.jsxs)("div",{className:"dataseries-line ".concat(e.dataSeriesSet.cssClass),children:[(0,oc.jsx)("span",{className:"legend-square",style:{backgroundColor:e.dataSeriesSet.color?e.dataSeriesSet.color:void 0}}),(0,oc.jsxs)("span",{className:"legend-text",children:[e.dataSeriesSet.description,":"," ",e.tooltipValueText?e.tooltipValueText:void 0!==e.height?+e.height.toFixed(1):"undefined"]})]},e.dataSeriesSet.key)))]})}),[A,C,T]),R=(0,e.useCallback)((e=>{clearTimeout(y.current);const t=e.target.getAttribute("data-tooltip-id"),n=e.target.getAttribute("data-tooltip-content"),r=e.target.getBoundingClientRect(),i=P(n);var o;i&&(_(f+(["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(c)?r.height/2:r.width/2)),null===(o=v.current)||void 0===o||o.open({anchorSelect:t,content:i,position:{x:r.x+r.width/2,y:r.y+r.height/2}}))}),[P,f,c]),I=(0,e.useMemo)((()=>(0,oc.jsx)(Nf,{ref:v,className:"barplot-tooltip-holder",border:"solid black 1px",positionStrategy:"fixed",variant:"light",imperativeModeOnly:!0,place:c,offset:x})),[x,c]),M=(0,e.useMemo)((()=>{const e=r.getSequenceLength(),t=o*e;return(0,oc.jsx)("svg",{id:n,preserveAspectRatio:"none",width:"".concat(t,"px"),height:"".concat(S,"px"),viewBox:"0 0 ".concat(1*e," ").concat(g),style:{width:t,height:S},xmlns:"http://www.w3.org/2000/svg",children:Array.from(A.barsGroupedByPosition.entries()).map((e=>{let[t,n]=e;const r=n.reduce(((e,t)=>(void 0!==t.normalizedHeight&&e.push(t.normalizedHeight),e)),[]),i=r.length<1?0:Math.max(...r),o=A.barsGroupedByDataseries.size,s=1*(1===o?.9:1/o),a=1*(1===o?t+.05:t);return r.length<1?null:(0,oc.jsxs)("g",{transform:"translate(".concat(a,",0)"),className:"position-container pos"+t,children:[n.reduce(((e,t,r)=>(void 0!==t.normalizedHeight&&e.push((0,oc.jsx)("rect",{className:t.dataSeriesSet.cssClass,style:{fill:t.dataSeriesSet.color?t.dataSeriesSet.color:void 0,color:t.dataSeriesSet.color?t.dataSeriesSet.color:void 0},transform:"translate(".concat(1*r/n.length*1,",").concat(g-t.normalizedHeight,")"),width:s,height:t.normalizedHeight},"".concat(t.position,"_").concat(t.dataSeriesSet.key))),e)),new Array),(0,oc.jsx)("rect",{className:"interaction-placeholder",transform:"translate(0,".concat(g-i,")"),width:1,height:i,"data-tooltip-id":"bp".concat(t).concat(b),"data-tooltip-content":t,onMouseEnter:R,onMouseLeave:C})]},t)}))})}),[r,A,C,S,b,R,o,n]),O=(0,e.useCallback)((e=>{w(e.height)}),[]),k=(0,e.useCallback)((()=>M),[M]),L=(0,e.useMemo)((()=>{const e=l.map((e=>e.key)).join("-");return{...p||{virtualizationId:"bp-".concat(e,"-").concat(r.getUUID()),role:d.Controller,cellCount:r.getSequenceLength(),cellSizePx:o},virtualizationStrategy:u.ShiftOnlyFullyRendered,scrollbar:h.NeverOn,hoverTracker:m,containerBoundsUpdated:O}}),[r,O,l,p,m,o]);return r?(0,oc.jsxs)("div",{className:"barplot",children:[(0,oc.jsx)(Eh,{getContentForColumns:k,horizontalParams:L}),I]}):void 0}function $f(t){const{resizeSeparatorGridAreaNames:n,resizeDirection:r,draggerMoved:i,keys:o,zIndex:s,resizerDoubleClicked:a}=t,[l,c]=(0,e.useState)(!1),[u,h]=(0,e.useState)(),[d,f]=(0,e.useState)(),p=["".concat(r,"-resizer")],m=(0,e.useCallback)((e=>{e.preventDefault(),c(!0)}),[]),g=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),c(!1),h(void 0)}),[]),v=(0,e.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),l&&i("horizontal"===r?e.clientX:e.clientY,u)}),[u,l,r,i]),y=(0,e.useRef)();return{draggerFullScreenElement:(0,oc.jsx)("div",{className:"full-screen-resize-dragger ".concat(r),style:{display:l?"block":"none"},onMouseMove:v,onMouseUp:g,onMouseOut:g,onMouseLeave:g},n.join("")),resizeSeparators:n.reduce(((e,t,n)=>{const r=l&&o[n]===u?" resizing":"",i=o[n]===d?" hovered":"";return e[o[n]]=(0,oc.jsx)("div",{className:p.join(" ")+r+i,style:{gridArea:t,zIndex:s},onMouseDown:e=>{clearTimeout(y.current),y.current=setTimeout((()=>{h(o[n]),m(e)}),150)},onMouseUp:()=>{clearTimeout(y.current)},onMouseOver:()=>{f(o[n])},onMouseOut:()=>{f(void 0)},onDoubleClick:a?()=>{clearTimeout(y.current),a(o[n])}:void 0},o[n]),e}),{})}}const Qf={barplots:[],showMetadata:!0,gapBetweenColumnsAndRowsPx:4,gapViewportTopPx:0,gapViewportBottomPx:6,gapViewportLeftPx:6,gapViewportRightPx:6,resizeBarSizePx:4,metadataSizing:{type:"adjustable-width",startingWidth:150,minWidth:100,maxWidth:400},minimapSizing:{type:"adjustable-width",startingWidth:100,minWidth:100,maxWidth:300},barplotSizing:{type:"adjustable-height",startingHeight:60,minHeight:25,maxHeight:200},logoSizing:{type:"adjustable-height",startingHeight:100,minHeight:50,maxHeight:300}};function Zf(t){const{barplots:n,logoPlot:r,alignmentDetails:i,consensus:o,query:s,positionalAxis:a,minimapPlot:l,showConsensus:c,showQuery:u,showPositionalAxis:h,showLogoPlot:d,showMinimap:f,showMetadata:p,metadataSizing:m,minimapSizing:g,barplotSizing:v,logoSizing:y,resizeBarSizePx:b,gapBetweenColumnsAndRowsPx:x,gapViewportTopPx:_,gapViewportBottomPx:S,gapViewportLeftPx:w,gapViewportRightPx:E,titleFontSize:A}={...Qf,...t},T=p?"fixed-width"===m.type?m.width:m.startingWidth:100,C=f?"fixed-width"===g.type?g.width:g.startingWidth:100,P="fixed-height"===v.type?v.height:v.startingHeight,R="fixed-height"===y.type?y.height:y.startingHeight,[I,M]=(0,e.useState)(),O=(0,e.useRef)(null),[k,L]=(0,e.useState)(T),[D,N]=(0,e.useState)(C),[B,F]=(0,e.useState)(R),[U,z]=(0,e.useState)(n.reduce(((e,t)=>(e[t.contentKey]=P,e)),{}));(0,e.useEffect)((()=>{n.forEach((e=>{U[e.contentKey]||(U[e.contentKey]=P)}))}),[n,U,P]);const H=(0,e.useCallback)((e=>{M(e)}),[]),j=(0,e.useCallback)((t=>{const{key:n,metadataAndContent:r,metadataGridArea:i,contentGridArea:o,forceHide:s=!1,metadataClassname:a="metadata-title",contentClassname:l="content"}=t;return r?(0,oc.jsxs)(e.Fragment,{children:[(0,oc.jsx)("div",{className:a,style:{gridArea:i,fontSize:A,display:!p||s?"none":void 0},children:"string"===typeof r.metadata?"".concat(r.metadata,":"):r.metadata}),(0,oc.jsx)("div",{className:l,style:{gridArea:o,display:s?"none":void 0},children:r.content})]},n):void 0}),[p,A]),V=(0,e.useCallback)(((e,t)=>{if("fixed-height"===v.type||!O.current)return;const n=O.current.getElementsByClassName("".concat(t));if(1!==n.length)return void console.error('Internal error: unable to find class "'.concat(t,'" during resize.'));const r=n[0].getBoundingClientRect(),i=e-b/2-x-r.y,o=i>v.maxHeight?v.maxHeight:i<v.minHeight?v.minHeight:i;z({...U,[t]:o})}),[U,v,x,b]),G=(0,e.useMemo)((()=>({gridAreas:n.map((e=>"barplot-".concat(e.contentKey,"-resizer"))),keys:n.map((e=>e.contentKey))})),[n]),W=$f({resizeSeparatorGridAreaNames:G.gridAreas,resizeDirection:"vertical",draggerMoved:V,keys:G.keys}),q=$f({resizeSeparatorGridAreaNames:["logo-resizer"],keys:["logo-resizer"],resizeDirection:"vertical",draggerMoved:(0,e.useCallback)((e=>{if("fixed-height"===y.type||!O.current)return;const t=O.current.getElementsByClassName("logoplot");if(1!==t.length)return void console.error('Internal error: unable to find class "logoplot" during resize.');const n=t[0].getBoundingClientRect(),r=e-b/2-x-n.y;F(r>y.maxHeight?y.maxHeight:r<y.minHeight?y.minHeight:r)}),[y,x,b])}),X=$f({resizeSeparatorGridAreaNames:["metadata-resizer"],keys:["metadata-resizer"],resizeDirection:"horizontal",draggerMoved:(0,e.useCallback)((e=>{if("fixed-width"===m.type||!I)return;const t=e-b/2-x-I.getLiveLeft()-w;L(t>m.maxWidth?m.maxWidth:t<m.minWidth?m.minWidth:t)}),[I,m,b,x,w]),zIndex:1799}),Y=$f({resizeSeparatorGridAreaNames:["minimap-resizer"],keys:["minimap-resizer"],resizeDirection:"horizontal",draggerMoved:(0,e.useCallback)((e=>{if("fixed-width"===g.type||!I)return;const t=I.getLiveRight()-e-b/2-x-E;N(t>g.maxWidth?g.maxWidth:t<g.minWidth?g.minWidth:t)}),[I,g,b,x,E])}),K=(0,e.useMemo)((()=>{const e=(e,t,n)=>{const r=p?"adjustable-width"===m.type?"".concat(e," metadata-resizer"):e:"",i=f?"adjustable-width"===g.type?"minimap-resizer minimap":"minimap":"";return'"'.concat(r," ").concat(t," ").concat(i,'"')+(n?'\n"'.concat(r.replaceAll(e,e+"-resizer")," ").concat(t,"-resizer ").concat(i,'"'):"")};return[...n.map((t=>e("barplot-".concat(t.contentKey,"-metadata"),"barplot-".concat(t.contentKey),"adjustable-height"===v.type))),...d?[e("logo-metadata","logo","adjustable-height"===y.type)]:[],...c?[e("consensus-metadata","consensus")]:[],...u?[e("query-metadata","query")]:[],...h?[e("position-axis-metadata","position-axis")]:[],e("ids-and-annotations","main-viewport")].join("\n")}),[y.type,v.type,m.type,g.type,p,f,n,c,d,h,u]),$=(0,e.useMemo)((()=>{const e=p?"adjustable-width"===m.type?"".concat(k,"px ").concat(b,"px"):"".concat(k,"px"):"",t=f?"adjustable-width"===g.type?"".concat(b,"px ").concat(D,"px"):"".concat(D,"px"):"";return"".concat(e," auto ").concat(t)}),[b,m.type,g.type,p,f,k,D]);return(0,oc.jsxs)(oc.Fragment,{children:[p?X.draggerFullScreenElement:void 0,f?Y.draggerFullScreenElement:void 0,d?q.draggerFullScreenElement:void 0,W.draggerFullScreenElement,(0,oc.jsx)(sc,{onSizeChanged:H,logId:"alignment-viewer-layout",children:(0,oc.jsxs)("div",{className:"alignment-viewer-2",ref:O,style:{top:"".concat(_,"px"),bottom:"".concat(S,"px"),left:"".concat(w,"px"),right:"".concat(E,"px"),gap:"".concat(x,"px"),gridTemplateColumns:$,gridTemplateRows:"\n            ".concat(n.map((e=>{const t=["".concat(U[e.contentKey],"px")];return"adjustable-height"===v.type&&t.push("".concat(b,"px")),t.join("\n")})).join("\n"),"\n            ").concat(d&&r?"".concat(B,"px"):""," \n            ").concat(d&&r&&"adjustable-height"===y.type?"".concat(b,"px"):"","\n            ").concat(c&&o?"".concat(o.heightPx,"px"):""," \n            ").concat(u&&s?"".concat(s.heightPx,"px"):""," \n            ").concat(h&&a?"".concat(a.heightPx,"px"):"","\n            auto\n          "),gridTemplateAreas:K},children:[n.map((t=>{const n="barplot-".concat(t.contentKey,"-metadata"),r="barplot-".concat(t.contentKey);return(0,oc.jsxs)(e.Fragment,{children:[j({key:"bp-".concat(t.contentKey),metadataAndContent:t,metadataGridArea:n,contentGridArea:r,contentClassname:"content ".concat(t.contentKey)}),"adjustable-height"!==v.type?(0,oc.jsx)(oc.Fragment,{}):W.resizeSeparators[t.contentKey]]},t.contentKey)})),(0,oc.jsxs)(oc.Fragment,{children:[j({key:"logo",metadataAndContent:r,metadataGridArea:"logo-metadata",contentGridArea:"logo",forceHide:!d,contentClassname:"content logoplot"}),"adjustable-height"===y.type&&d?q.resizeSeparators["logo-resizer"]:(0,oc.jsx)(oc.Fragment,{})]}),j({key:"c",metadataAndContent:o,metadataGridArea:"consensus-metadata",contentGridArea:"consensus",forceHide:!c}),j({key:"q",metadataAndContent:s,metadataGridArea:"query-metadata",contentGridArea:"query",forceHide:!u}),j({key:"ruler",metadataAndContent:a,metadataGridArea:"position-axis-metadata",contentGridArea:"position-axis",forceHide:!h}),j({key:"main",metadataAndContent:i,metadataGridArea:"ids-and-annotations",contentGridArea:"main-viewport",metadataClassname:"content"}),(0,oc.jsx)("div",{className:"minimap-content",style:{gridArea:"minimap",display:f?void 0:"none"},children:l}),f&&"adjustable-width"===g.type?Y.resizeSeparators["minimap-resizer"]:void 0,p&&"adjustable-width"===m.type?X.resizeSeparators["metadata-resizer"]:void 0]})})]})}function Jf(){self.onmessage=e=>{const t=(e=>{const{extraPosSeqCount:t,tileSize:n,positionalLetterColors:r,sequences:i,highlightPositionalMatches:o}=e,s=(i.length>0?i[0].length:0)+t,a=i.length+t,l=(e,t,n,s,a,l)=>{const c=new OffscreenCanvas(n,s);c.height=s,c.width=n;const u={seqY:t*l,letterX:e*a},h=c.getContext("2d"),d=null===h||void 0===h?void 0:h.getImageData(0,0,c.width,c.height);return d&&h&&(((e,t,n,s)=>{let a=0;const l=o?51:255,[c,u]=o?[o.posidxsMatchedPerSequence,o.highlightColor]:[{},{red:255,green:0,blue:0}];for(let o=0;o<n;o++){const n=i[o+s.seqY],h=c[n]?c[n]:[];for(let i=0;i<t;i++){const t=i+s.letterX;if(n&&n[t]){const i=n[t],o=r[t][i].backgroundColor.rgb;-1!==h.indexOf(t)?(e[a]=u.red,e[a+1]=u.green,e[a+2]=u.blue,e[a+3]=255):(e[a]=o.red,e[a+1]=o.green,e[a+2]=o.blue,e[a+3]=l),a+=4}else a+=4}}})(d.data,n,s,u),h.putImageData(d,0,0)),{tileX:e,tileY:t,pixelX:u.letterX,pixelY:u.seqY,width:c.width,height:c.height,image:c.transferToImageBitmap()}};return(()=>{const e=n,t=n,r={targetTileWidth:e,targetTileHeight:t,lastTileWidth:s%e!==0?s%e:e,lastTileHeight:a%t!==0?a%t:t,numXTiles:s%e!==0?Math.floor(s/e)+1:Math.floor(s/e),numYTiles:a%t!==0?Math.floor(a/t)+1:Math.floor(a/t),tiles:[]};for(let n=0;n<r.numYTiles;n++)for(let i=0;i<r.numXTiles;i++){const o=l(i,n,i===r.numXTiles-1?r.lastTileWidth:e,n===r.numYTiles-1?r.lastTileHeight:t,e,t);r.tiles.push(o)}return r})()})({extraPosSeqCount:e.data.extraPosSeqCount,tileSize:e.data.tileSize,positionalLetterColors:e.data.positionalLetterColors,sequences:e.data.sequences,highlightPositionalMatches:e.data.highlightPositionalMatches});postMessage(t)}}class ep extends Worker{constructor(e){const t=e.toString(),n=new Blob(["(".concat(t,")()")]);super(URL.createObjectURL(n))}}class tp{constructor(e){this.value=e,this.subscribers=new Set}get(){return this.value}set(e){this.value!==e&&(this.value=e,this.subscribers.forEach((e=>e(this.value))))}subscribe(e){return this.subscribers.add(e),()=>this.unsubscribe(e)}unsubscribe(e){this.subscribers.delete(e)}}const np=()=>{const e=new Vi({antialias:!0,resolution:window.devicePixelRatio,autoDensity:!0,backgroundAlpha:0,view:document.createElement("canvas")});return e.ticker.autoStart=!1,e.ticker.stop(),e},rp=()=>({primaryViewportApp:ap("webgl"),minimapApp:ap("webgl"),consensusApp:ap("canvas"),queryApp:ap("canvas")});let ip,op;function sp(e){return"primary"===e?(ip||(ip=rp()),ip):(op||(op=rp()),op)}function ap(e){const t={};let n,r,i,o=new ep(Jf);const s="synced-webgl"===e?new tp({datatype:"synced-webgl",loaded:!1,getMSABlocksWebglApp:()=>(t.webglApp1||(t.webglApp1=np(),n&&a(n,!0)),t.webglApp1),getMinimapBlocksWebglApp:()=>(t.webglApp2||(t.webglApp2=np(),n&&a(n,!0)),t.webglApp2)}):"webgl"===e?new tp({datatype:"webgl",loaded:!1,getMSABlocksWebglApp:()=>(t.webglApp1||(t.webglApp1=np()),t.webglApp1)}):"canvas"===e?new tp({datatype:"canvas",loaded:!1,getCanvasImageData:()=>t.canvasApp}):void 0;if(!s)throw Error('Invalid datatype "'.concat(e,'" provided to createMSABlockGenerator'));const a=(o,a)=>{if(n=o,a||(r=i,i=void 0),"webgl"===e||"synced-webgl"===e){function l(e){if(e){e.stage.removeChildren(),e.stage.position.set(0,0),e.stage.scale.set(1,1);for(var t=0;t<o.tiles.length;t++){const n=o.tiles[t],r=bi.from(n.image,{scaleMode:w.NEAREST});r.interactiveChildren=!1,r.x=n.pixelX,r.y=n.pixelY,r.scale={x:1,y:1},r.roundPixels=!1,r.cacheAsBitmap=!0,e.stage.addChild(r)}}}l(t.webglApp1),l(t.webglApp2)}else t.canvasApp=o;s.set({...s.get(),loaded:!0,cachePropsKey:r})},l=e=>{a(e.data,!1)};return o.onmessage=l,{updateMSA:(e,t)=>{t!==r?t!==i&&(i&&(o.terminate(),o=new ep(Jf),o.onmessage=l),i=t,o.postMessage(e)):a(n,!0)},updateObserver:s}}function lp(t){const{searchVisible:n=!0,closePressed:r,mainAlignmentQuerySequence:i,sortedSequences:o,sortedSequenceAnnotations:s,alignmentType:a,aaColorScheme:l=Kh.list[0],ntColorScheme:c=$h.list[0],positionsToStyle:u,residueColoring:h}=t,d=a===Qh.AMINOACID?l:c,[f,p]=(0,e.useState)("all"),[m,g]=(0,e.useState)(),v=(0,e.useRef)(void 0),[y,b]=(0,e.useState)(6),x=(0,e.useRef)(null),_=(0,e.useMemo)((()=>({red:255,green:0,blue:0})),[]);(0,e.useEffect)((()=>{var e;n&&(null===(e=x.current)||void 0===e||e.focus())}),[n]);const S=(0,e.useMemo)((()=>o.map((e=>e.toLowerCase()))),[o]),w=(0,e.useCallback)((e=>{const t=null!==e&&void 0!==e&&e.target.value?null===e||void 0===e?void 0:e.target.value:v.current&&v.current.length>=3?v.current:"";v.current=t;const n=t.length,r=t.toLowerCase(),a=[],l={searchString:t,posidxsMatchedPerSequence:{},highlightColor:_};if(t.length>=3)for(var c=0;c<S.length;c++){const e=S[c];for(var u,h=0,d={};(u=e.indexOf(r,h))>-1;){for(var f=u;f<u+n;f++)d[f]=f;h=u+1}const t=Object.values(d);t.length>0&&(a.push({annotations:s[c],sequence:o[c]}),l.posidxsMatchedPerSequence[o[c]]=t)}const p=new Gf({name:"search results alignment",sequencesAsInput:a.sort((function(e,t){return l.posidxsMatchedPerSequence[t.sequence].length-l.posidxsMatchedPerSequence[e.sequence].length})),removeDuplicateSequences:!1,supressParseTime:!0,overrideQuery:a.length>0?i:void 0});g({alignment:p,matchDetails:l})}),[_,S,i,s,o]);(0,e.useEffect)((()=>{w()}),[a,d,w,o,s,u,h]);const E=(0,e.useMemo)((()=>[{svgId:"search-matches",dataSeriesSet:[cp("rgb(".concat(_.red,",").concat(_.green,",").concat(_.blue,")"))],tooltipPlacement:void 0},{svgId:"search-conservation",dataSeriesSet:[Yf.Conservation],tooltipPlacement:void 0}]),[_]),A=(0,e.useMemo)((()=>({type:"adjustable-width",startingWidth:100,minWidth:75,maxWidth:300})),[]),T=null!==m&&void 0!==m&&m.alignment.getSequenceCount()?null===m||void 0===m?void 0:m.alignment.getSequenceCount():0;return(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("div",{className:"background-behind-search-box",onClick:e=>{e.currentTarget===e.target&&r()}}),(0,oc.jsx)("div",{className:"search-box-grid",children:(0,oc.jsxs)("form",{className:"search-box-contents",children:[(0,oc.jsxs)("div",{className:"search-bar",children:[(0,oc.jsx)("label",{htmlFor:"search-input",children:(0,oc.jsx)("strong",{children:"Search:"})}),(0,oc.jsx)("input",{type:"text",id:"search-input",ref:x,onChange:w,autoFocus:!0}),m?(0,oc.jsx)("span",{className:"search-results-count",children:v.current&&v.current.length>2?"".concat(T.toLocaleString()," matches (of \n                  ").concat(o.length.toLocaleString(),")"):"enter ".concat(3,"+ characters search")}):void 0]}),(0,oc.jsxs)("div",{className:"search-options-bar",children:[(0,oc.jsx)("label",{children:(0,oc.jsx)("strong",{children:"Sizing:"})}),(0,oc.jsxs)("div",{className:"stepper",children:[(0,oc.jsx)("button",{className:"minus",disabled:y<5,onClick:e=>{b(y-1),e.preventDefault()},children:"\uff0d"}),(0,oc.jsx)("span",{children:y}),(0,oc.jsx)("button",{className:"plus",disabled:y>16,onClick:e=>{b(y+1),e.preventDefault()},children:"\uff0b"})]}),(0,oc.jsx)("label",{children:(0,oc.jsx)("strong",{children:"Positions to style:"})}),(0,oc.jsxs)("select",{name:"backgroundStyle",value:f,onChange:e=>{p(e.target.value)},children:[(0,oc.jsx)("option",{value:"none",children:"none"}),(0,oc.jsx)("option",{value:"as-primary-viewport",children:"same as primary viewport"}),(0,oc.jsx)("option",{value:"all",children:"all"})]})]}),(0,oc.jsx)("div",{className:"search-bar-results-separator"}),(0,oc.jsx)("div",{className:"search-results",children:(0,oc.jsx)("div",{style:{display:!m||T<1?"none":void 0},children:m?(0,oc.jsx)(gp,{alignment:m.alignment,canvasGenerators:sp("search"),alignmentType:a,aaColorScheme:l,ntColorScheme:c,positionsToStyle:"as-primary-viewport"===f?u:"all"===f?Zh.ALL:Zh.SEARCH_RESULTS_ONLY,highlightPositionalMatches:m.matchDetails,residueColoring:h,barplots:E,disableSearch:!0,zoomLevel:y,showQuery:!0,showConsensus:!0,showAnnotations:!0,showMinimap:!0,metadataSizing:A}):void 0})}),(0,oc.jsx)("button",{className:"button-link close",onClick:e=>{e.preventDefault(),r()},children:(0,oc.jsx)("img",{alt:"Close Search Box",width:"16",height:"16",src:"".concat("","/close.svg")})})]})})]})}const cp=e=>({id:"search-results",name:"Search matches",description:"Search matches",cssClass:"barplot-search-results",color:e,getBars:(e,t)=>{if(!t)return console.error("Unable to render barplot - no search details passed to the barplot 'SearchResultsCount'. "),[];const n=[],r=[].concat(...Object.values(t.posidxsMatchedPerSequence)).reduce(((e,t)=>(e[t]=e[t]?e[t]+1:1,e)),{}),i=e.getSequenceCount(),o=e.getSequenceLength();for(let s=0;s<o;s++){const e=r[s]?r[s]:0,t=e/i*100,o=t>=1?0:t<=.1?2:1;n.push({height:e,tooltipValueText:"n=".concat(e," (").concat(t.toFixed(o),"%)")})}return n}});function up(t){const{allCharactersInAlignment:n,sequencesInViewport:r,slicedSequences:i,consensusSequence:o,querySequence:s,alignmentType:a,aaColorScheme:l,ntColorScheme:c,positionsToStyle:u,residueColoring:h,fontSize:d,lineHeight:f,verticalOffset:p,horizontalOffset:m,horizontalWorldOffset:g}=t,v=(0,e.useMemo)((()=>{const e=Gf.getPositionalLetterColors({allPossibleChars:n,sequences:i,querySequence:s,consensusSequence:o,alignmentType:a,positionsToStyle:u,residueColoring:h,aaColorScheme:l,ntColorScheme:c}),t={};for(let n=0,r=i.length;n<r;n++){const r=i[n];for(let i=0,o=r.length;i<o;i++){const o=r[i],s=e[i][o];t[s.letterColor.hexString]||(t[s.letterColor.hexString]={}),t[s.letterColor.hexString][n]||(t[s.letterColor.hexString][n]=[]),t[s.letterColor.hexString][n].push(i)}}return t}),[n,i,a,l,c,u,h,o,s]),y=(0,e.useMemo)((()=>Object.entries(v).map((t=>{let[n,r]=t;const o=i.map(((e,t)=>e.split("").map(((e,n)=>t in r&&r[t].indexOf(n)>=0?e:"\xa0")).join("")));return(0,oc.jsx)("div",{className:"letters-with-specific-color",style:{color:n},children:o.map(((t,n)=>(0,oc.jsxs)(e.Fragment,{children:[t,(0,oc.jsx)("br",{})]},n+t)))},"".concat(n,"_").concat(o.join("")))}))),[v,i]);return(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("div",{className:"av2-letters sequence-text-holder",style:{top:p,left:m,fontFamily:Ph},children:(0,oc.jsx)("div",{className:"letters-viewport",style:{fontSize:d,lineHeight:f+"px"},children:y})}),(0,oc.jsx)("div",{className:"hidden-residues-for-copy-paste",style:{top:p,left:g?-1*g:void 0,fontSize:d,fontFamily:Ph,lineHeight:f+"px"},children:r.map(((t,n)=>(0,oc.jsxs)(e.Fragment,{children:[t," ",(0,oc.jsx)("br",{})]},n+t)))})]})}function hp(t){const{canvasGenerator:n,sequenceSet:r,alignment:i,alignmentType:o,aaColorScheme:a=Kh.list[0],ntColorScheme:l=$h.list[0],highlightPositionalMatches:f,positionsToStyle:p,residueColoring:m,sortBy:g,residueHeight:v,residueWidth:y,fontSize:b,verticalScrollbar:x=h.OnHoverWhenOverflowed,horizontalScrollbar:_=h.OnHoverWhenOverflowed,verticalHoverTracker:S="both",horizontalHoverTracker:w="end",matrixRendered:E}=t,A=(0,e.useState)(s()),T=(0,e.useMemo)((()=>"None"===t.horizVirtualization?void 0:"Automatic"===t.horizVirtualization?{virtualizationId:"x_auto_generated_alignmentdetails_virtualization_".concat(i.getUUID(),"_").concat(A),role:d.Controller,cellCount:i.getSequenceLength(),cellSizePx:y}:t.horizVirtualization),[i,A,t.horizVirtualization,y]),C=(0,e.useMemo)((()=>"None"===t.vertVirtualization?void 0:"Automatic"===t.vertVirtualization?{virtualizationId:"y_auto_generated_alignmentdetails_virtualization_".concat(i.getUUID(),"_").concat(A),role:d.Controller,cellCount:i.getSequenceCount(),cellSizePx:v}:t.vertVirtualization),[i,A,t.vertVirtualization,v]),P=(0,e.useCallback)(((e,t,n,r,i)=>{const o=[];for(let s=t;s<=n;s++){const t=e[s],n=[];for(let e=r;e<=i;e++)n.push(t[e]);o.push(n.join(""))}return o}),[]),R=(0,e.useMemo)((()=>"alignment"===r?i.getSequences(g).map((e=>e.sequence)):"consensus"===r?[i.getConsensus().sequence]:[i.getQuery().sequence]),[i,r,g]),I=(0,e.useCallback)((e=>{let{firstColIdxToRender:t,lastColIdxToRender:s,renderWidthPx:u,renderShiftLeftPx:h,worldWidthPx:d,worldShiftLeftPx:x,firstRowIdxToRender:_,lastRowIdxToRender:S,renderHeightPx:w,renderShiftTopPx:A,worldHeightPx:T,worldShiftTopPx:C}=e;t=t||0,s=s||0,_=_||0,S=S||0,A=A||0,E&&setTimeout((()=>{E({seqIdxStart:_,seqIdxEnd:S,posIdxStart:t,posIdxEnd:s})}));const I=P(R,_,S,t,s),M=P([i.getQuery().sequence],0,0,t,s)[0],O=P([i.getConsensus().sequence],0,0,t,s)[0],k=c(_,S).map((e=>R[e]),[]);return(0,oc.jsxs)("div",{className:"av2-blocksandletters",children:[(0,oc.jsx)(Wf,{canvasGenerator:n,sequenceSet:r,allCharsInAlignment:i.getAllRepresentedCharacters(),sequences:R,querySequence:i.getQuery().sequence,consensusSequence:i.getConsensus().sequence,sortByKey:g.key,alignmentType:o,aaColorScheme:a,ntColorScheme:l,residueColoring:m,positionsToStyle:p,highlightPositionalMatches:f,width:u,height:w,scaleX:y,scaleY:v,positionX:x?-x:0,positionY:C?-C:0}),(0,oc.jsx)(up,{allCharactersInAlignment:i.getAllRepresentedCharacters(),sequencesInViewport:k,slicedSequences:I,consensusSequence:O,querySequence:M,alignmentType:o,aaColorScheme:a,ntColorScheme:l,positionsToStyle:p,residueColoring:m,fontSize:b,lineHeight:v,verticalOffset:A,horizontalOffset:h,horizontalWorldOffset:x})]})}),[n,f,r,i,o,a,l,R,b,E,p,m,v,y,g,P]),M=(0,e.useMemo)((()=>T?{...T,virtualizationStrategy:u.Manual,scrollbar:_,hoverTracker:w}:void 0),[T,_,w]),O=(0,e.useMemo)((()=>C?{...C,virtualizationStrategy:u.Manual,scrollbar:x,hoverTracker:S}:void 0),[C,x,S]);return T&&C?(0,oc.jsx)(Ah,{horizontalParams:M,verticalParams:O,getMatrixContent:I}):T&&!C?(0,oc.jsx)(Eh,{horizontalParams:M,getContentForColumns:I}):!T&&C?(0,oc.jsx)(wh,{verticalParams:O,getContentForRows:I}):(0,oc.jsx)("div",{children:"initializing..."})}function dp(t){const{alignmentUUID:n,className:r,columns:i,columnKeys:o,columnWidths:a,columnWidthUpdateRequested:l,fullActualWidth:f,leftRightMarginInTableCells:p,rowHeight:m,resizeBarSizePx:g,showHeader:v,vertVirtualization:y,vertScrollbar:b=h.OnHoverWhenOverflowed,horizScrollbar:x=h.OnHoverWhenOverflowed}=t,_=m>20?m:20,S=(0,e.useRef)(null),w=(0,e.useMemo)(s,[]),E=(0,e.useMemo)((()=>{const e={virtualizationStrategy:u.Virtualize,scrollbar:x,hoverTracker:void 0,startScrolledIndicatorStyleAttr:{top:"-".concat(_,"px")},endScrolledIndicatorStyleAttr:{top:"-".concat(_,"}px")}};return{virtualizationId:"x_auto_generated_spreadsheet_virtualization_".concat(n,"_").concat(w),role:d.Controller,cellCount:1,cellSizePx:f,...e}}),[n,w,f,x,_]),A=(0,e.useMemo)((()=>{const e={virtualizationStrategy:u.Manual,scrollbar:b,hoverTracker:"both",overflowVisible:!0};return{...y,...e}}),[y,b]),T=(0,e.useMemo)((()=>o.map((e=>e.replaceAll(/\W/g,"")))),[o]),C=(0,e.useCallback)(((e,t)=>{var n;const r=T.indexOf(t),i=null===(n=S.current)||void 0===n?void 0:n.getElementsByClassName("column-header");if(!i||i.length<r)return void console.error('Unable to resize - resizableElement does not exist for "'.concat(t,'"'));const s=i[r].getBoundingClientRect(),a=e-g/2-s.x;l(o[r],a)}),[g,o,T,l]),P=(0,e.useCallback)((e=>{l(o[T.indexOf(e)])}),[l,o,T]),R=$f({resizeSeparatorGridAreaNames:(0,e.useMemo)((()=>T.map(((e,t)=>"".concat(e,"-resizer")))),[T]),keys:T,resizeDirection:"horizontal",draggerMoved:C,resizerDoubleClicked:P});return(0,oc.jsxs)(oc.Fragment,{children:[R.draggerFullScreenElement,(0,oc.jsx)(Ah,{getMatrixContent:t=>{const n=c(t.firstRowIdxToRender,t.lastRowIdxToRender),s=o.map(((t,n)=>{const r=T[n];return(0,oc.jsxs)(e.Fragment,{children:[(0,oc.jsx)("div",{className:"column-header",style:{gridArea:r,padding:"0 ".concat(p,"px")},children:i[t].initialColumnName?i[t].initialColumnName:"\xa0"}),R.resizeSeparators[r]]},n)})),l=o.map(((t,r)=>{const o=i[t].rawData,s=T[r];let a="table-column";return"rownum"===i[t].key&&(a+=" rownum"),(0,oc.jsxs)(e.Fragment,{children:[(0,oc.jsx)("div",{className:a,style:{gridArea:s,gridAutoRows:"".concat(m,"px")},children:n.map((e=>(0,oc.jsx)("div",{style:{padding:"0 ".concat(p,"px")},children:(0,oc.jsx)("span",{children:o[e]})},e)))}),R.resizeSeparators[s]]},r)})),u=a.map((e=>"".concat(e,"px ").concat(g,"px"))).join(" "),h='"'+T.map((e=>"".concat(e," ").concat(e,"-resizer"))).join(" ")+'"';return(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsxs)("div",{className:"".concat(r," header"),ref:S,style:{top:"-".concat(_,"px"),height:"".concat(_,"px"),lineHeight:"".concat(_,"px"),gridTemplateColumns:u,gridTemplateAreas:h},children:["  ",s," "]}),(0,oc.jsx)("div",{className:"content-holder",children:(0,oc.jsxs)("div",{className:"".concat(r," content"),style:{top:"".concat(t.renderShiftTopPx,"px"),gridTemplateColumns:u,gridTemplateAreas:h},children:[" ",l," "]})})]})},horizontalParams:E,verticalParams:A})]})}const fp={defaultColumnWidth:{type:"adjustable-width",startingWidth:75,minWidth:30,maxWidth:400},maxPinnedTableWidth:700,maxUnpinnedTableWidth:700,horizScrollbars:h.OnHoverWhenOverflowed};function pp(t){const{rowHeight:n,fontSize:r,columnWidthParams:i=fp.defaultColumnWidth,maxPinnedTableWidth:o=fp.maxPinnedTableWidth,maxUnpinnedTableWidth:a=fp.maxUnpinnedTableWidth,horizScrollbars:l=fp.horizScrollbars}=t,c=Math.ceil(n/3),{maxWidth:u,minWidth:f,startingWidth:p}=i,[m,g]=(0,e.useState)(),v=(0,e.useMemo)(s,[]),[y,b]=(0,e.useState)(!1),[x,_]=(0,e.useState)(""),[S,w]=(0,e.useState)({}),[E,A]=(0,e.useState)({}),[T,C]=(0,e.useState)({}),[P,R]=(0,e.useState)([]),[I,M]=(0,e.useState)([]),O=(0,e.useCallback)((()=>{b(!0)}),[]),k=(0,e.useCallback)((()=>{b(!1)}),[]),L=(0,e.useCallback)((e=>{g(e)}),[]),D=(0,e.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=E[e.key]?E[e.key]:e.initialColumnName,i=Lh({fontSize:r,fontWeight:"bold",stringsToMeasure:[n],maxWidthAllowed:u})+2*c+5;if(i>=u)return u;let o=e.rawData;if(t){let t="",n=0;for(const r of e.rawData.slice(0,100)){const e="".concat(r);e.length>n&&(t=e,n=e.length)}o=[t]}const s=Lh({fontSize:r,stringsToMeasure:o,maxWidthAllowed:u})+2*c+5;return i>s?i>u?u:i:s>u?u:s}),[c,E,u,r]);t.columns!==S&&(t.alignmentUUID!==x?(_(t.alignmentUUID),A(Object.keys(t.columns).reduce(((e,n)=>(e[n]=t.columns[n].initialColumnName,e)),{})),C(Object.keys(t.columns).reduce(((e,n)=>(e[n]=D(t.columns[n],!0),e)),{})),R(Object.keys(t.columns).reduce(((e,n)=>(t.columns[n].initiallyPinned&&e.push(n),e)),[])),M(Object.keys(t.columns).reduce(((e,n)=>(t.columns[n].initiallyPinned||e.push(n),e)),[]))):(A(Object.keys(t.columns).reduce(((e,n)=>(e[n]=E[n]?E[n]:t.columns[n].initialColumnName,e)),{})),C(Object.keys(t.columns).reduce(((e,n)=>{let r=T[n];return r||(r=D(t.columns[n],!0)),e[n]=r,e}),{})),R(Object.keys(t.columns).reduce(((e,n)=>(!(n in S)&&t.columns[n].initiallyPinned&&e.push(n),e)),[])),M(Object.keys(t.columns).reduce(((e,n)=>(n in S||t.columns[n].initiallyPinned||e.push(n),e)),[]))),w(t.columns));const[N,B,F]=(0,e.useMemo)((()=>{var e,r;const i=h.OnHoverWhenOverflowed,o=null===(e=t.verticalVirtualization)||void 0===e?void 0:e.virtualization,s=null!==(r=t.verticalVirtualization)&&void 0!==r&&r.scrollbar?t.verticalVirtualization.scrollbar:i;if(void 0!==o)return o.role===d.Responder?[s,o,o]:[s,{virtualizationId:o.virtualizationId,role:d.Responder},o];const a="y_auto_generated_metadata_virtualization_".concat(x,"_").concat(v);return[s,{virtualizationId:a,role:d.Responder},{virtualizationId:a,role:d.Controller,cellCount:Object.keys(S).length<1?0:S[Object.keys(S)[0]].rawData.length,cellSizePx:n}]}),[x,v,t.verticalVirtualization,S,n]),U=(0,e.useCallback)(((e,t)=>e.reduce(((e,n)=>{const r=t[n];return e.push(r),e}),[])),[]),[z,H]=(0,e.useMemo)((()=>[U(P,T),U(I,T)]),[U,P,I,T]),j=(0,e.useCallback)(((e,t)=>{const n=e?o:a,r=t.reduce(((e,t)=>e+t+1),0)+(e?2:0);return[r,r<n?r:n]}),[o,a]),[V,G]=(0,e.useMemo)((()=>j(!0,z)),[j,z]),[W,q]=(0,e.useMemo)((()=>j(!1,H)),[j,H]),X=(0,e.useCallback)(((e,t)=>{if(t){const n=t>f?t:f;C({...T,[e]:n})}else C({...T,[e]:D(S[e])})}),[S,T,f,D]),Y=V>0?"minmax(100px, ".concat(V,"px)"):"",K=W>0?"minmax(100px, ".concat(W,"px)"):" 0px",$='"'.concat(V>0?"pinned-table ":"",'unpinned-table"');return(0,oc.jsx)(oc.Fragment,{children:(0,oc.jsx)(sc,{onSizeChanged:L,logId:"alignment-viewer-layout",children:(0,oc.jsxs)("div",{className:"av2-spreadsheet",onMouseEnter:O,onMouseLeave:k,style:{overflowX:"clip",fontSize:r,gridTemplateAreas:$,gridTemplateColumns:"".concat(Y," ").concat(K)},children:[V<=0?void 0:(0,oc.jsx)("div",{className:"pinned-table-holder",children:(0,oc.jsx)(dp,{alignmentUUID:x,columns:S,columnKeys:P,columnWidths:z,fullActualWidth:V,rowHeight:n,className:"pinned-table",leftRightMarginInTableCells:c,resizeBarSizePx:1,columnWidthUpdateRequested:X,vertVirtualization:B,vertScrollbar:N,horizScrollbar:l,showHeader:y})}),(0,oc.jsx)("div",{className:"unpinned-table-holder",children:(0,oc.jsx)(dp,{alignmentUUID:x,columns:S,columnKeys:I,columnWidths:H,fullActualWidth:W,rowHeight:n,className:"unpinned-table",leftRightMarginInTableCells:c,resizeBarSizePx:1,columnWidthUpdateRequested:X,vertVirtualization:F,vertScrollbar:N,horizScrollbar:l,showHeader:y})})]})})})}const mp={positionsToStyle:Zh.ALL,residueColoring:Jh.LIGHT,disableSearch:!1,disableSearchKeyboardShortcut:!1,canvasGenerators:sp("primary"),zoomLevel:13,sortBy:Vf.INPUT,aaColorScheme:Kh.list[0],ntColorScheme:$h.list[0],showAnnotations:!0,showConsensus:!0,showLogo:!0,showMinimap:!1,showQuery:!0,showRuler:!0,metadataSizing:{type:"adjustable-width",startingWidth:150,minWidth:50,maxWidth:600},minimapSizing:{type:"adjustable-width",startingWidth:100,minWidth:75,maxWidth:600},barplotSizing:{type:"adjustable-height",startingHeight:60,minHeight:25,maxHeight:200},logoSizing:{type:"adjustable-height",startingHeight:100,minHeight:50,maxHeight:300},logoOptions:{logoType:zf.LETTERS},barplots:[{svgId:"shannon-entropy-plus-gaps-".concat(s()),dataSeriesSet:[Yf.ShannonEntropy,Yf.Gaps],tooltipPlacement:void 0}]};function gp(t){const{canvasGenerators:n,highlightPositionalMatches:r,alignment:i,aaColorScheme:o,ntColorScheme:s,barplots:a,logoOptions:l,disableSearch:c,disableSearchKeyboardShortcut:u,triggerShowSearch:f,mainViewportVisibleChanged:p,metadataSizing:m,minimapSizing:g,logoSizing:v,barplotSizing:y,positionsToStyle:b,residueColoring:x,showAnnotations:_,showConsensus:S,showLogo:w,showMinimap:E,showQuery:A,showRuler:T,zoomLevel:C}={...mp,...t},{alignmentType:P=i.getPredictedType()}=t;let{sortBy:R}={...mp,...t};(P===Qh.AMINOACID&&!Vf.ALL_AMINO_ACID_SORTERS.includes(R)||P===Qh.NUCLEOTIDE&&!Vf.ALL_NUCLEOTIDE_SORTERS.includes(R))&&(console.error("Misconfiguration - invalid sortBy (".concat(R.description,') passed to AlignmentViewer for\n       alignmentType "').concat(P.description,'". Setting to input sort order.')),R=Vf.INPUT);const I=C,M=C+3,O=Oh(I,!0),k=Oh(I,!1),L=O.width,D=O.height>k.height?O.height:k.height,N=D,[B,F]=(0,e.useState)(!1),U=(0,e.useCallback)((()=>{F(!0)}),[]);(0,e.useEffect)((()=>{f&&(f.current=U)}),[U,f]),function(t){const{disableSearch:n,searchDialogRequested:r}=t,[i,o]=(0,e.useState)(!1),s=(0,e.useCallback)((e=>{e&&((e.ctrlKey||i)&&"f"===e.key&&(e.preventDefault(),r(),o(!1)),"Meta"===e.key&&(e.preventDefault(),o(!0)))}),[i,r]),a=(0,e.useCallback)((e=>{e&&"Meta"===e.key&&(e.preventDefault(),o(!1))}),[]);(0,e.useEffect)((()=>(window.removeEventListener("keydown",s),window.removeEventListener("keyup",a),n||(window.addEventListener("keydown",s),window.addEventListener("keyup",a)),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",a)})),[n,s,a])}({disableSearch:u,searchDialogRequested:U});const z=i.getUUID(),[H,j]=(0,e.useMemo)((()=>{const e={virtualizationId:"x_viewport_virtualization_".concat(z),role:d.Responder};return[e,{...e,role:d.Controller,cellCount:i.getSequenceLength(),cellSizePx:L}]}),[i,z,L]),[V,G]=(0,e.useMemo)((()=>{const e={virtualizationId:"y_viewport_virtualization_".concat(z),role:d.Responder};return[e,{...e,role:d.Controller,cellCount:i.getSequenceCount(),cellSizePx:D}]}),[i,z,D]),[W,q]=(0,e.useState)(!1),[X,Y]=(0,e.useState)(!1),K=(0,e.useCallback)((()=>{q(!0)}),[]),$=(0,e.useCallback)((()=>{q(!1)}),[]),Q=(0,e.useCallback)((()=>{Y(!0)}),[]),Z=(0,e.useCallback)((()=>{Y(!1)}),[]),J=(0,e.useMemo)((()=>i.getSequences(R||mp.sortBy).map((e=>e.sequence))),[i,R]),ee=(0,e.useMemo)((()=>i.getSequences(R||mp.sortBy).map((e=>e.annotations))),[i,R]),te=(0,e.useCallback)((e=>(0,oc.jsx)("div",{className:e.className,onMouseEnter:()=>{e.horizContent&&K(),e.vertContent&&Q()},onMouseLeave:()=>{e.horizContent&&$(),e.vertContent&&Z()},children:e.content})),[K,Q,$,Z]),ne=(0,e.useMemo)((()=>te({horizContent:!0,content:(0,oc.jsx)(Hf,{svgId:l.svgId,alignment:i,alignmentType:P,aaColorScheme:o,ntColorScheme:s,positionsToStyle:b,glyphWidth:L,logoType:l.logoType,tooltipPlacement:l.tooltipPlacement,horizontalVirtualization:H})})),[i,l,b,L,H,P,o,s,te]),re=(0,e.useCallback)((e=>te({horizContent:!0,content:(0,oc.jsx)(Kf,{svgId:e.svgId,alignment:i,searchDetails:r,tooltipPlacement:e.tooltipPlacement,dataSeriesSet:e.dataSeriesSet,positionWidth:L,horizontalVirtualization:H})})),[i,te,r,L,H]),ie=(0,e.useMemo)((()=>te({horizContent:!0,className:"position-box",content:(0,oc.jsx)(Nh,{alignmentUUID:i.getUUID(),horizVirtualization:H,positions:[...Array(i.getSequenceLength()).keys()],fontSize:I,residueWidth:L})})),[te,i,I,L,H]),oe=(0,e.useCallback)((e=>te({horizContent:!0,content:(0,oc.jsx)(hp,{canvasGenerator:"consensus"===e?n.consensusApp:n.queryApp,sequenceSet:e,alignment:i,sortBy:R,horizVirtualization:H,vertVirtualization:"None",highlightPositionalMatches:r,alignmentType:P,aaColorScheme:o,ntColorScheme:s,positionsToStyle:b,residueColoring:x,fontSize:I,residueHeight:D,residueWidth:L,horizontalScrollbar:h.NeverOn})})),[i,te,n.consensusApp,n.queryApp,R,I,r,b,x,D,L,P,o,s,H]),se=(0,e.useMemo)((()=>S?{metadata:"Consensus",content:oe("consensus"),heightPx:N}:void 0),[oe,S,N]),ae=(0,e.useMemo)((()=>A?{metadata:"Query",content:oe("query"),heightPx:N}:void 0),[oe,A,N]),le=(0,e.useMemo)((()=>E?(0,oc.jsx)(qf,{canvasGenerator:n.minimapApp,alignment:i,alignmentType:P,aaColorScheme:o,ntColorScheme:s,positionsToStyle:b,highlightPositionalMatches:r,sortBy:R,syncWithVerticalVirtualization:V}):void 0),[i,n.minimapApp,r,P,o,s,b,E,R,V]),ce=(0,e.useCallback)((()=>{F(!1)}),[]),ue=(0,e.useMemo)((()=>{const e={rownum:{key:"rownum",initialColumnName:"",initiallyPinned:!0,rawData:Array(i.getSequenceCount()).fill(0).map(((e,t)=>t+1))}},t=i.getAnnotationFields(),n=i.getSequences(R);for(const r of Object.keys(t))e[r]={key:r,initialColumnName:t[r].name,initiallyPinned:r===Bh.ID,rawData:Array(i.getSequenceCount()).fill(0).map(((e,t)=>{var i;return null!==(i=n[t].annotations[r])&&void 0!==i?i:""}))};return e}),[i,R]);return(0,oc.jsxs)(dh,{store:yh,children:[!i||c?void 0:(0,oc.jsx)("div",{style:{display:B?void 0:"none"},children:(0,oc.jsx)(lp,{searchVisible:B,closePressed:ce,mainAlignmentQuerySequence:i.getQuery(),sortedSequences:J,sortedSequenceAnnotations:ee,alignmentType:P,aaColorScheme:o,ntColorScheme:s,residueColoring:x,positionsToStyle:b})}),(0,oc.jsx)(Zf,{showMetadata:_,showPositionalAxis:T,showLogoPlot:w,showQuery:A,showConsensus:S,showMinimap:E,metadataSizing:m,minimapSizing:g,logoSizing:v,barplotSizing:y,titleFontSize:M,alignmentDetails:{metadata:te({vertContent:!0,content:(0,oc.jsx)(pp,{alignmentUUID:z,rowHeight:D,fontSize:I,verticalVirtualization:{virtualization:V,scrollbar:h.NeverOn},columns:ue})}),content:te({horizContent:!0,vertContent:!0,content:(0,oc.jsx)(hp,{canvasGenerator:n.primaryViewportApp,sequenceSet:"alignment",alignment:i,sortBy:R,vertVirtualization:G,horizVirtualization:j,highlightPositionalMatches:r,alignmentType:P,aaColorScheme:o,ntColorScheme:s,positionsToStyle:b,residueColoring:x,fontSize:I,residueHeight:D,residueWidth:L,verticalScrollbar:X?h.AlwaysOnWhenOverflowed:h.OnHoverWhenOverflowed,horizontalScrollbar:W?h.AlwaysOnWhenOverflowed:h.OnHoverWhenOverflowed,matrixRendered:e=>{p&&p(e)}})})},consensus:se,query:ae,positionalAxis:{metadata:"Position",content:ie,heightPx:N},barplots:!a||a.length<1?[]:a.map((e=>({metadata:e.dataSeriesSet.map((e=>e.description)).join(" / "),content:re(e),contentKey:e.svgId}))),logoPlot:{metadata:"Logo",content:ne},minimapPlot:le})]})}class vp extends Gf{static fromFileContents(e,t,n){const r=t.trim();if(r.length<1||">"!==r[0])throw l("Fasta","File needs to begin with '>'");const i=r.split(">");for(var o=[],s=0;s<i.length;s++){const e=i[s].split(/\r?\n/);if(e.length>1){var a;const t=null===(a=e[0].match(/^\s*(?<id>\S+)(?:\s+(?<description>.+\S+)\s*)?$/))||void 0===a?void 0:a.groups,n=e.slice(1).join("");t&&o.push({sequence:n,annotations:Wh(t.id,n,t.description)})}}try{return new vp({name:e,sequencesAsInput:o,removeDuplicateSequences:n})}catch(c){throw l("Fasta",c.message)}}}class yp extends Gf{constructor(e){super(e),this.metadata=void 0,this.metadata=e.metadata}static fromFileContents(e,t,n){const r=t.trim().split(/\r?\n/);if(r.length<3)throw l("Stockholm","The file length is less than 3 rows");if(!1===r[0].startsWith("# STOCKHOLM 1.0"))throw l("Stockholm","The first line must be '# STOCKHOLM 1.0'");if("//"!==r[r.length-1])throw l("Stockholm","The last line must be '//'");const i={GF:{},GS:{},GR:{},GC:{}},o=[];r.slice(1,r.length-1).forEach(((e,t)=>{if((e=e.trim())&&!e.startsWith("#")){const t=e.match(/^(\S+)\s(.*)/).slice(1),n=t[0].trim();o.push({annotations:{[Bh.ID]:n,[Bh.ACTUAL_ID]:n},sequence:t[1].trim()})}else if(e.startsWith("#"))if(e.length<8||!1===["GF","GS","GR","GC"].includes(e.substr(2,2)))console.warn("Unexpected metadata line in Stockholm alignment: "+e);else{const t=e.substr(2,2),n=e.substr(5).trim().match(/^(\S+)\s(.*)/).slice(1);if(n[1]=n[1].trim(),"GF"===t)n[0]in i.GF===!1?i.GF[n[0]]=n[1]:i.GF[n[0]]+=" "+n[1];else if("GS"===t){const e=n[0],t=n[1].trim().match(/^(\S+)\s(.*)/).slice(1);e in i.GS===!1&&(i.GS[e]={}),t[0]in i.GS[e]===!1&&(i.GS[e][t[0]]=[]),i.GS[e][t[0]].push(t[1])}else if("GR"===t){const e=n[0],t=n[1].trim().match(/^(\S+)\s(.*)/).slice(1);e in i.GR===!1&&(i.GR[e]={}),i.GR[e][t[0]]=t[1]}else"GC"===t&&(i.GC[n[0]]=n[1])}}));for(const l of o){const e=l.annotations[Bh.ID];if(i.GS[e]){var s;const t=null===(s=i.GS[e].DE)||void 0===s?void 0:s.join("");Object.assign(l.annotations,Wh(e,l.sequence,t));for(const n of Object.keys(i.GS[e]))"DE"!==n&&(l.annotations[n]=i.GS[e][n].join(" "))}}try{return new yp({name:e,sequencesAsInput:o,metadata:i,removeDuplicateSequences:n})}catch(a){throw l("Stockholm",a.message)}}getMetadata(){return this.metadata}}class bp extends Error{constructor(e,t,n){super(e),this.errors=void 0,this.possibleResolution=void 0,this.errors=t,this.possibleResolution=n}}class xp{static async loadAlignmentFromURL(e,t,n,r,i){let o;try{o=new File([await(await fetch("".concat(e))).blob()],i||e.substring(e.lastIndexOf("/")+1))}catch(s){console.error("Unable to load alignment by URL '"+e+"'",s);return void r(new bp("Unable to fetch alignment in URL",[{name:"Browser-reported error message",message:s.message}],"Possible causes: (1) The alignment is not sent using SSL or (2) the server that hosts the alignment has not enabled CORS. To be assessible to Alignment Viewer 2, the alignment must be served by HTTPS and the server must enable CORS."))}try{xp.loadAlignmentFromFile(o,t,n,r)}catch(s){r(s)}}static async loadAlignmentFromFile(e,t,n,r){var i=new FileReader;i.onload=o=>{try{n(xp.loadAlignmentFromText(e.name,i.result,t))}catch(o){r(o)}},i.readAsText(e)}static loadAlignmentFromText(e,t,n){const r=new bp("Alignment Format Error",[]);for(let o=0;o<xp.AlignmentFileTypes.length;o++)try{return xp.AlignmentFileTypes[o].fromFileContents(e,t,n)}catch(i){r.errors.push(i)}throw r}}function _p(e){return _p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(e)}function Sp(e){var t=function(e,t){if("object"!=_p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_p(t)?t:String(t)}function wp(e,t,n){return(t=Sp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ep(Object(n),!0).forEach((function(t){wp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cp(e,t){if(e){if("string"===typeof e)return Tp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tp(e,t):void 0}}function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||Cp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rp(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}xp.AlignmentFileTypes=[yp,vp];var Ip=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function Mp(){return Mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(this,arguments)}function Op(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sp(r.key),r)}}function kp(e,t){return kp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kp(e,t)}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lp(e)}function Dp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dp=function(){return!!e})()}function Np(e,t){if(t&&("object"===_p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Bp(e){return function(e){if(Array.isArray(e))return Tp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fp=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Up=Math.abs,zp=String.fromCharCode,Hp=Object.assign;function jp(e){return e.trim()}function Vp(e,t,n){return e.replace(t,n)}function Gp(e,t){return e.indexOf(t)}function Wp(e,t){return 0|e.charCodeAt(t)}function qp(e,t,n){return e.slice(t,n)}function Xp(e){return e.length}function Yp(e){return e.length}function Kp(e,t){return t.push(e),e}var $p=1,Qp=1,Zp=0,Jp=0,em=0,tm="";function nm(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:$p,column:Qp,length:s,return:""}}function rm(e,t){return Hp(nm("",null,null,"",null,null,0),e,{length:-e.length},t)}function im(){return em=Jp>0?Wp(tm,--Jp):0,Qp--,10===em&&(Qp=1,$p--),em}function om(){return em=Jp<Zp?Wp(tm,Jp++):0,Qp++,10===em&&(Qp=1,$p++),em}function sm(){return Wp(tm,Jp)}function am(){return Jp}function lm(e,t){return qp(tm,e,t)}function cm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function um(e){return $p=Qp=1,Zp=Xp(tm=e),Jp=0,[]}function hm(e){return tm="",e}function dm(e){return jp(lm(Jp-1,mm(91===e?e+2:40===e?e+1:e)))}function fm(e){for(;(em=sm())&&em<33;)om();return cm(e)>2||cm(em)>3?"":" "}function pm(e,t){for(;--t&&om()&&!(em<48||em>102||em>57&&em<65||em>70&&em<97););return lm(e,am()+(t<6&&32==sm()&&32==om()))}function mm(e){for(;om();)switch(em){case e:return Jp;case 34:case 39:34!==e&&39!==e&&mm(em);break;case 40:41===e&&mm(e);break;case 92:om()}return Jp}function gm(e,t){for(;om()&&e+em!==57&&(e+em!==84||47!==sm()););return"/*"+lm(t,Jp-1)+"*"+zp(47===e?e:om())}function vm(e){for(;!cm(sm());)om();return lm(e,Jp)}var ym="-ms-",bm="-moz-",xm="-webkit-",_m="comm",Sm="rule",wm="decl",Em="@keyframes";function Am(e,t){for(var n="",r=Yp(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Tm(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case wm:return e.return=e.return||e.value;case _m:return"";case Em:return e.return=e.value+"{"+Am(e.children,r)+"}";case Sm:e.value=e.props.join(",")}return Xp(n=Am(e.children,r))?e.return=e.value+"{"+n+"}":""}function Cm(e){return hm(Pm("",null,null,null,[""],e=um(e),0,[0],e))}function Pm(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,h=s,d=0,f=0,p=0,m=1,g=1,v=1,y=0,b="",x=i,_=o,S=r,w=b;g;)switch(p=y,y=om()){case 40:if(108!=p&&58==Wp(w,h-1)){-1!=Gp(w+=Vp(dm(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:w+=dm(y);break;case 9:case 10:case 13:case 32:w+=fm(p);break;case 92:w+=pm(am()-1,7);continue;case 47:switch(sm()){case 42:case 47:Kp(Im(gm(om(),am()),t,n),l);break;default:w+="/"}break;case 123*m:a[c++]=Xp(w)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(w=Vp(w,/\f/g,"")),f>0&&Xp(w)-h&&Kp(f>32?Mm(w+";",r,n,h-1):Mm(Vp(w," ","")+";",r,n,h-2),l);break;case 59:w+=";";default:if(Kp(S=Rm(w,t,n,c,u,i,a,b,x=[],_=[],h),o),123===y)if(0===u)Pm(w,t,S,S,x,o,h,a,_);else switch(99===d&&110===Wp(w,3)?100:d){case 100:case 108:case 109:case 115:Pm(e,S,S,r&&Kp(Rm(e,S,S,0,0,i,a,b,i,x=[],h),_),i,_,h,a,r?x:_);break;default:Pm(w,S,S,S,[""],_,0,a,_)}}c=u=f=0,m=v=1,b=w="",h=s;break;case 58:h=1+Xp(w),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==im())continue;switch(w+=zp(y),y*m){case 38:v=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(Xp(w)-1)*v,v=1;break;case 64:45===sm()&&(w+=dm(om())),d=sm(),u=h=Xp(b=w+=vm(am())),y++;break;case 45:45===p&&2==Xp(w)&&(m=0)}}return o}function Rm(e,t,n,r,i,o,s,a,l,c,u){for(var h=i-1,d=0===i?o:[""],f=Yp(d),p=0,m=0,g=0;p<r;++p)for(var v=0,y=qp(e,h+1,h=Up(m=s[p])),b=e;v<f;++v)(b=jp(m>0?d[v]+" "+y:Vp(y,/&\f/g,d[v])))&&(l[g++]=b);return nm(e,t,n,0===i?Sm:a,l,c,u)}function Im(e,t,n){return nm(e,t,n,_m,zp(em),qp(e,2,-2),0)}function Mm(e,t,n,r){return nm(e,t,n,wm,qp(e,0,r),qp(e,r+1,-1),r)}var Om=function(e,t,n){for(var r=0,i=0;r=i,i=sm(),38===r&&12===i&&(t[n]=1),!cm(i);)om();return lm(e,Jp)},km=function(e,t){return hm(function(e,t){var n=-1,r=44;do{switch(cm(r)){case 0:38===r&&12===sm()&&(t[n]=1),e[n]+=Om(Jp-1,t,n);break;case 2:e[n]+=dm(r);break;case 4:if(44===r){e[++n]=58===sm()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=zp(r)}}while(r=om());return e}(um(e),t))},Lm=new WeakMap,Dm=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Lm.get(n))&&!r){Lm.set(e,!0);for(var i=[],o=km(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},Nm=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Bm(e,t){switch(function(e,t){return 45^Wp(e,0)?(((t<<2^Wp(e,0))<<2^Wp(e,1))<<2^Wp(e,2))<<2^Wp(e,3):0}(e,t)){case 5103:return xm+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return xm+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return xm+e+bm+e+ym+e+e;case 6828:case 4268:return xm+e+ym+e+e;case 6165:return xm+e+ym+"flex-"+e+e;case 5187:return xm+e+Vp(e,/(\w+).+(:[^]+)/,xm+"box-$1$2"+ym+"flex-$1$2")+e;case 5443:return xm+e+ym+"flex-item-"+Vp(e,/flex-|-self/,"")+e;case 4675:return xm+e+ym+"flex-line-pack"+Vp(e,/align-content|flex-|-self/,"")+e;case 5548:return xm+e+ym+Vp(e,"shrink","negative")+e;case 5292:return xm+e+ym+Vp(e,"basis","preferred-size")+e;case 6060:return xm+"box-"+Vp(e,"-grow","")+xm+e+ym+Vp(e,"grow","positive")+e;case 4554:return xm+Vp(e,/([^-])(transform)/g,"$1"+xm+"$2")+e;case 6187:return Vp(Vp(Vp(e,/(zoom-|grab)/,xm+"$1"),/(image-set)/,xm+"$1"),e,"")+e;case 5495:case 3959:return Vp(e,/(image-set\([^]*)/,xm+"$1$`$1");case 4968:return Vp(Vp(e,/(.+:)(flex-)?(.*)/,xm+"box-pack:$3"+ym+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+xm+e+e;case 4095:case 3583:case 4068:case 2532:return Vp(e,/(.+)-inline(.+)/,xm+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xp(e)-1-t>6)switch(Wp(e,t+1)){case 109:if(45!==Wp(e,t+4))break;case 102:return Vp(e,/(.+:)(.+)-([^]+)/,"$1"+xm+"$2-$3$1"+bm+(108==Wp(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Gp(e,"stretch")?Bm(Vp(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Wp(e,t+1))break;case 6444:switch(Wp(e,Xp(e)-3-(~Gp(e,"!important")&&10))){case 107:return Vp(e,":",":"+xm)+e;case 101:return Vp(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+xm+(45===Wp(e,14)?"inline-":"")+"box$3$1"+xm+"$2$3$1"+ym+"$2box$3")+e}break;case 5936:switch(Wp(e,t+11)){case 114:return xm+e+ym+Vp(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return xm+e+ym+Vp(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return xm+e+ym+Vp(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return xm+e+ym+e+e}return e}var Fm=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case wm:e.return=Bm(e.value,e.length);break;case Em:return Am([rm(e,{value:Vp(e.value,"@","@"+xm)})],r);case Sm:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Am([rm(e,{props:[Vp(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Am([rm(e,{props:[Vp(t,/:(plac\w+)/,":"+xm+"input-$1")]}),rm(e,{props:[Vp(t,/:(plac\w+)/,":-moz-$1")]}),rm(e,{props:[Vp(t,/:(plac\w+)/,ym+"input-$1")]})],r)}return""}))}}],Um=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Fm;var i,o,s={},a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var l,c,u=[Tm,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=Yp(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([Dm,Nm].concat(r,u));o=function(e,t,n,r){l=n,Am(Cm(e?e+"{"+t.styles+"}":t.styles),h),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Fp({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return d.sheet.hydrate(a),d};var zm=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var Hm={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function jm(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Vm=/[A-Z]|^ms/g,Gm=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wm=function(e){return 45===e.charCodeAt(1)},qm=function(e){return null!=e&&"boolean"!==typeof e},Xm=jm((function(e){return Wm(e)?e:e.replace(Vm,"-$&").toLowerCase()})),Ym=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Gm,(function(e,t,n){return $m={name:t,styles:n,next:$m},t}))}return 1===Hm[e]||Wm(e)||"number"!==typeof t||0===t?t:t+"px"};function Km(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return $m={name:n.name,styles:n.styles,next:$m},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)$m={name:r.name,styles:r.styles,next:$m},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Km(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":qm(s)&&(r+=Xm(o)+":"+Ym(o,s)+";");else if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=Km(e,t,s);switch(o){case"animation":case"animationName":r+=Xm(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)qm(s[l])&&(r+=Xm(o)+":"+Ym(o,s[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=$m,o=n(e);return $m=i,Km(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var $m,Qm=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Zm=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";$m=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=Km(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=Km(n,t,e[s]),r&&(i+=o[s]);Qm.lastIndex=0;for(var a,l="";null!==(a=Qm.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:$m}},Jm=!!t.useInsertionEffect&&t.useInsertionEffect,eg=Jm||function(e){return e()},tg=(Jm||e.useLayoutEffect,{}.hasOwnProperty),ng=e.createContext("undefined"!==typeof HTMLElement?Um({key:"css"}):null);ng.Provider;var rg=function(t){return(0,e.forwardRef)((function(n,r){var i=(0,e.useContext)(ng);return t(n,i,r)}))};var ig=e.createContext({});var og="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sg=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return zm(t,n,r),eg((function(){return function(e,t,n){zm(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},ag=rg((function(t,n,r){var i=t.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=t[og],s=[i],a="";"string"===typeof t.className?a=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,s,t.className):null!=t.className&&(a=t.className+" ");var l=Zm(s,void 0,e.useContext(ig));a+=n.key+"-"+l.name;var c={};for(var u in t)tg.call(t,u)&&"css"!==u&&u!==og&&(c[u]=t[u]);return c.ref=r,c.className=a,e.createElement(e.Fragment,null,e.createElement(sg,{cache:n,serialized:l,isStringTag:"string"===typeof o}),e.createElement(o,c))}));var lg=ag,cg=(n(178),function(t,n){var r=arguments;if(null==n||!tg.call(n,"css"))return e.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=lg,o[1]=function(e,t){var n={};for(var r in t)tg.call(t,r)&&(n[r]=t[r]);return n[og]=e,n}(t,n);for(var s=2;s<i;s++)o[s]=r[s];return e.createElement.apply(null,o)});function ug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zm(t)}const hg=Math.min,dg=Math.max,fg=Math.round,pg=Math.floor,mg=e=>({x:e,y:e});function gg(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function vg(e){return xg(e)?(e.nodeName||"").toLowerCase():"#document"}function yg(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function bg(e){var t;return null==(t=(xg(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function xg(e){return e instanceof Node||e instanceof yg(e).Node}function _g(e){return e instanceof Element||e instanceof yg(e).Element}function Sg(e){return e instanceof HTMLElement||e instanceof yg(e).HTMLElement}function wg(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof yg(e).ShadowRoot)}function Eg(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Cg(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Ag(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Tg(e){return["html","body","#document"].includes(vg(e))}function Cg(e){return yg(e).getComputedStyle(e)}function Pg(e){if("html"===vg(e))return e;const t=e.assignedSlot||e.parentNode||wg(e)&&e.host||bg(e);return wg(t)?t.host:t}function Rg(e){const t=Pg(e);return Tg(t)?e.ownerDocument?e.ownerDocument.body:e.body:Sg(t)&&Eg(t)?t:Rg(t)}function Ig(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Rg(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=yg(i);return o?t.concat(s,s.visualViewport||[],Eg(i)?i:[],s.frameElement&&n?Ig(s.frameElement):[]):t.concat(i,Ig(i,[],n))}function Mg(e){const t=Cg(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Sg(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=fg(n)!==o||fg(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Og(e){return _g(e)?e:e.contextElement}function kg(e){const t=Og(e);if(!Sg(t))return mg(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Mg(t);let s=(o?fg(n.width):n.width)/r,a=(o?fg(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const Lg=mg(0);function Dg(e){const t=yg(e);return Ag()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Lg}function Ng(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=Og(e);let s=mg(1);t&&(r?_g(r)&&(s=kg(r)):s=kg(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==yg(e))&&t}(o,n,r)?Dg(o):mg(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,h=i.height/s.y;if(o){const e=yg(o),t=r&&_g(r)?yg(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=kg(n),t=n.getBoundingClientRect(),r=Cg(n),i=t.left+(n.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(n.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,h*=e.y,l+=i,c+=o,n=yg(n).frameElement}}return gg({width:u,height:h,x:l,y:c})}function Bg(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=Og(e),u=i||o?[...c?Ig(c):[],...Ig(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const h=c&&a?function(e,t){let n,r=null;const i=bg(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const{left:c,top:u,width:h,height:d}=e.getBoundingClientRect();if(a||t(),!h||!d)return;const f={rootMargin:-pg(u)+"px "+-pg(i.clientWidth-(c+h))+"px "+-pg(i.clientHeight-(u+d))+"px "+-pg(c)+"px",threshold:dg(0,hg(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}p=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(g){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),o}(c,n):null;let d,f=-1,p=null;s&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?Ng(e):null;return l&&function t(){const r=Ng(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==h||h(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const Fg=e.useLayoutEffect;var Ug=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],zg=function(){};function Hg(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function jg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&o.push("".concat(Hg(e,s)));return o.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var Vg=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===_p(e)&&null!==e?[e]:[];var t},Gg=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,Ap({},Rp(e,Ug))},Wg=function(e,t,n){var r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.className;return{css:i(t,e),className:r(null!==n&&void 0!==n?n:{},o(t,e),s)}};function qg(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Xg(e){return qg(e)?window.pageYOffset:e.scrollTop}function Yg(e,t){qg(e)?window.scrollTo(0,t):e.scrollTop=t}function Kg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zg,i=Xg(e),o=t-i,s=0;!function t(){var a=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(s+=10,i,o,n);Yg(e,a),s<n?window.requestAnimationFrame(t):r(e)}()}function $g(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?Yg(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&Yg(e,Math.max(t.offsetTop-i,0))}function Qg(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var Zg=!1,Jg={get passive(){return Zg=!0}},ev="undefined"!==typeof window?window:{};ev.addEventListener&&ev.removeEventListener&&(ev.addEventListener("p",zg,Jg),ev.removeEventListener("p",zg,!1));var tv=Zg;function nv(e){return null!=e}function rv(e,t,n){return e?t:n}var iv=["children","innerProps"],ov=["children","innerProps"];function sv(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,s=e.isFixedPosition,a=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u,h=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),f=d.bottom,p=d.height,m=d.top,g=n.offsetParent.getBoundingClientRect().top,v=s?window.innerHeight:qg(u=l)?window.innerHeight:u.clientHeight,y=Xg(l),b=parseInt(getComputedStyle(n).marginBottom,10),x=parseInt(getComputedStyle(n).marginTop,10),_=g-x,S=v-m,w=_+y,E=h-y-m,A=f-v+y+b,T=y+m-x,C=160;switch(i){case"auto":case"bottom":if(S>=p)return{placement:"bottom",maxHeight:t};if(E>=p&&!s)return o&&Kg(l,A,C),{placement:"bottom",maxHeight:t};if(!s&&E>=r||s&&S>=r)return o&&Kg(l,A,C),{placement:"bottom",maxHeight:s?S-b:E-b};if("auto"===i||s){var P=t,R=s?_:w;return R>=r&&(P=Math.min(R-b-a,t)),{placement:"top",maxHeight:P}}if("bottom"===i)return o&&Yg(l,A),{placement:"bottom",maxHeight:t};break;case"top":if(_>=p)return{placement:"top",maxHeight:t};if(w>=p&&!s)return o&&Kg(l,T,C),{placement:"top",maxHeight:t};if(!s&&w>=r||s&&_>=r){var I=t;return(!s&&w>=r||s&&_>=r)&&(I=s?_-x:w-x),o&&Kg(l,T,C),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}var av,lv=function(e){return"auto"===e?"bottom":e},cv=(0,e.createContext)(null),uv=function(t){var n=t.children,r=t.minMenuHeight,i=t.maxMenuHeight,o=t.menuPlacement,s=t.menuPosition,a=t.menuShouldScrollIntoView,l=t.theme,c=((0,e.useContext)(cv)||{}).setPortalPlacement,u=(0,e.useRef)(null),h=Pp((0,e.useState)(i),2),d=h[0],f=h[1],p=Pp((0,e.useState)(null),2),m=p[0],g=p[1],v=l.spacing.controlHeight;return Fg((function(){var e=u.current;if(e){var t="fixed"===s,n=sv({maxHeight:i,menuEl:e,minHeight:r,placement:o,shouldScroll:a&&!t,isFixedPosition:t,controlHeight:v});f(n.maxHeight),g(n.placement),null===c||void 0===c||c(n.placement)}}),[i,o,s,a,r,c,v]),n({ref:u,placerProps:Ap(Ap({},t),{},{placement:m||lv(o),maxHeight:d})})},hv=function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return cg("div",Mp({},Wg(e,"menu",{menu:!0}),{ref:n},r),t)},dv=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return Ap({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},fv=dv,pv=dv,mv=["size"],gv=["innerProps","isRtl","size"];var vv,yv,bv={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},xv=function(e){var t=e.size,n=Rp(e,mv);return cg("svg",Mp({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:bv},n))},_v=function(e){return cg(xv,Mp({size:20},e),cg("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Sv=function(e){return cg(xv,Mp({size:20},e),cg("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},wv=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return Ap({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*i,":hover":{color:n?o.neutral80:o.neutral40}})},Ev=wv,Av=wv,Tv=function(){var e=ug.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(av||(vv=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],yv||(yv=vv.slice(0)),av=Object.freeze(Object.defineProperties(vv,{raw:{value:Object.freeze(yv)}})))),Cv=function(e){var t=e.delay,n=e.offset;return cg("span",{css:ug({animation:"".concat(Tv," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Pv=function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,o=e.innerProps,s=e.menuIsOpen;return cg("div",Mp({ref:i},Wg(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":s}),o,{"aria-disabled":n||void 0}),t)},Rv=["data"],Iv=function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,o=e.Heading,s=e.headingProps,a=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return cg("div",Mp({},Wg(e,"group",{group:!0}),a),cg(o,Mp({},s,{selectProps:u,theme:c,getStyles:r,getClassNames:i,cx:n}),l),cg("div",null,t))},Mv=["innerRef","isDisabled","isHidden","inputClassName"],Ov={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},kv={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ap({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Ov)},Lv=function(e){return Ap({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Ov)},Dv=function(e){var t=e.cx,n=e.value,r=Gg(e),i=r.innerRef,o=r.isDisabled,s=r.isHidden,a=r.inputClassName,l=Rp(r,Mv);return cg("div",Mp({},Wg(e,"input",{"input-container":!0}),{"data-value":n||""}),cg("input",Mp({className:t({input:!0},a),ref:i,style:Lv(s),disabled:o},l)))},Nv=function(e){var t=e.children,n=e.innerProps;return cg("div",n,t)};var Bv=function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,o=e.isDisabled,s=e.removeProps,a=e.selectProps,l=n.Container,c=n.Label,u=n.Remove;return cg(l,{data:r,innerProps:Ap(Ap({},Wg(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:a},cg(c,{data:r,innerProps:Ap({},Wg(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),cg(u,{data:r,innerProps:Ap(Ap({},Wg(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:a}))},Fv={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return cg("div",Mp({},Wg(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||cg(_v,null))},Control:Pv,DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return cg("div",Mp({},Wg(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||cg(Sv,null))},DownChevron:Sv,CrossIcon:_v,Group:Iv,GroupHeading:function(e){var t=Gg(e);t.data;var n=Rp(t,Rv);return cg("div",Mp({},Wg(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return cg("div",Mp({},Wg(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return cg("span",Mp({},t,Wg(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:Dv,LoadingIndicator:function(e){var t=e.innerProps,n=e.isRtl,r=e.size,i=void 0===r?4:r,o=Rp(e,gv);return cg("div",Mp({},Wg(Ap(Ap({},o),{},{innerProps:t,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),cg(Cv,{delay:0,offset:n}),cg(Cv,{delay:160,offset:!0}),cg(Cv,{delay:320,offset:!n}))},Menu:hv,MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return cg("div",Mp({},Wg(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(t){var n=t.appendTo,r=t.children,o=t.controlElement,s=t.innerProps,a=t.menuPlacement,l=t.menuPosition,c=(0,e.useRef)(null),u=(0,e.useRef)(null),h=Pp((0,e.useState)(lv(a)),2),d=h[0],f=h[1],p=(0,e.useMemo)((function(){return{setPortalPlacement:f}}),[]),m=Pp((0,e.useState)(null),2),g=m[0],v=m[1],y=(0,e.useCallback)((function(){if(o){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(o),t="fixed"===l?0:window.pageYOffset,n=e[d]+t;n===(null===g||void 0===g?void 0:g.offset)&&e.left===(null===g||void 0===g?void 0:g.rect.left)&&e.width===(null===g||void 0===g?void 0:g.rect.width)||v({offset:n,rect:e})}}),[o,l,d,null===g||void 0===g?void 0:g.offset,null===g||void 0===g?void 0:g.rect.left,null===g||void 0===g?void 0:g.rect.width]);Fg((function(){y()}),[y]);var b=(0,e.useCallback)((function(){"function"===typeof u.current&&(u.current(),u.current=null),o&&c.current&&(u.current=Bg(o,c.current,y,{elementResize:"ResizeObserver"in window}))}),[o,y]);Fg((function(){b()}),[b]);var x=(0,e.useCallback)((function(e){c.current=e,b()}),[b]);if(!n&&"fixed"!==l||!g)return null;var _=cg("div",Mp({ref:x},Wg(Ap(Ap({},t),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),s),r);return cg(cv.Provider,{value:p},n?(0,i.createPortal)(_,n):_)},LoadingMessage:function(e){var t=e.children,n=void 0===t?"Loading...":t,r=e.innerProps,i=Rp(e,ov);return cg("div",Mp({},Wg(Ap(Ap({},i),{},{children:n,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),n)},NoOptionsMessage:function(e){var t=e.children,n=void 0===t?"No options":t,r=e.innerProps,i=Rp(e,iv);return cg("div",Mp({},Wg(Ap(Ap({},i),{},{children:n,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),n)},MultiValue:Bv,MultiValueContainer:Nv,MultiValueLabel:Nv,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return cg("div",Mp({role:"button"},n),t||cg(_v,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.innerRef,s=e.innerProps;return cg("div",Mp({},Wg(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":n},s),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return cg("div",Mp({},Wg(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return cg("div",Mp({},Wg(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return cg("div",Mp({},Wg(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return cg("div",Mp({},Wg(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},Uv=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function zv(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||Uv(r)&&Uv(i)))return!1;var r,i;return!0}for(var Hv={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},jv=function(e){return cg("span",Mp({css:Hv},e))},Vv={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.tabSelectsValue,i=e.context,o=e.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,o=void 0===i?"":i,s=e.selectValue,a=e.isDisabled,l=e.isSelected,c=e.isAppleDevice,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(o," focused, ").concat(u(s,n),".");if("menu"===t&&c){var h=a?" disabled":"",d="".concat(l?" selected":"").concat(h);return"".concat(o).concat(d,", ").concat(u(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},Gv=function(t){var n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,o=t.focusableOptions,s=t.isFocused,a=t.selectValue,l=t.selectProps,c=t.id,u=t.isAppleDevice,h=l.ariaLiveMessages,d=l.getOptionLabel,f=l.inputValue,p=l.isMulti,m=l.isOptionDisabled,g=l.isSearchable,v=l.menuIsOpen,y=l.options,b=l.screenReaderStatus,x=l.tabSelectsValue,_=l.isLoading,S=l["aria-label"],w=l["aria-live"],E=(0,e.useMemo)((function(){return Ap(Ap({},Vv),h||{})}),[h]),A=(0,e.useMemo)((function(){var e,t="";if(n&&E.onChange){var r=n.option,i=n.options,o=n.removedValue,s=n.removedValues,l=n.value,c=o||r||(e=l,Array.isArray(e)?null:e),u=c?d(c):"",h=i||s||void 0,f=h?h.map(d):[],p=Ap({isDisabled:c&&m(c,a),label:u,labels:f},n);t=E.onChange(p)}return t}),[n,E,m,a,d]),T=(0,e.useMemo)((function(){var e="",t=r||i,n=!!(r&&a&&a.includes(r));if(t&&E.onFocus){var s={focused:t,label:d(t),isDisabled:m(t,a),isSelected:n,options:o,context:t===r?"menu":"value",selectValue:a,isAppleDevice:u};e=E.onFocus(s)}return e}),[r,i,d,m,E,o,a,u]),C=(0,e.useMemo)((function(){var e="";if(v&&y.length&&!_&&E.onFilter){var t=b({count:o.length});e=E.onFilter({inputValue:f,resultsMessage:t})}return e}),[o,f,v,E,y,b,_]),P="initial-input-focus"===(null===n||void 0===n?void 0:n.action),R=(0,e.useMemo)((function(){var e="";if(E.guidance){var t=i?"value":v?"menu":"input";e=E.guidance({"aria-label":S,context:t,isDisabled:r&&m(r,a),isMulti:p,isSearchable:g,tabSelectsValue:x,isInitialFocus:P})}return e}),[S,r,i,p,m,g,v,E,a,x,P]),I=cg(e.Fragment,null,cg("span",{id:"aria-selection"},A),cg("span",{id:"aria-focused"},T),cg("span",{id:"aria-results"},C),cg("span",{id:"aria-guidance"},R));return cg(e.Fragment,null,cg(jv,{id:c},P&&I),cg(jv,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&I))},Wv=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],qv=new RegExp("["+Wv.map((function(e){return e.letters})).join("")+"]","g"),Xv={},Yv=0;Yv<Wv.length;Yv++)for(var Kv=Wv[Yv],$v=0;$v<Kv.letters.length;$v++)Xv[Kv.letters[$v]]=Kv.base;var Qv=function(e){return e.replace(qv,(function(e){return Xv[e]}))},Zv=function(e,t){void 0===t&&(t=zv);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}(Qv),Jv=function(e){return e.replace(/^\s+|\s+$/g,"")},ey=function(e){return"".concat(e.label," ").concat(e.value)},ty=["innerRef"];function ny(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=Pp(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=Pp(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(Rp(e,ty),"onExited","in","enter","exit","appear");return cg("input",Mp({ref:t},n,{css:ug({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var ry=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};var iy=["boxSizing","height","overflow","paddingRight","position"],oy={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function sy(e){e.preventDefault()}function ay(e){e.stopPropagation()}function ly(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function cy(){return"ontouchstart"in window||navigator.maxTouchPoints}var uy=!("undefined"===typeof window||!window.document||!window.document.createElement),hy=0,dy={capture:!1,passive:!1};var fy=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},py={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function my(t){var n=t.children,r=t.lockEnabled,i=t.captureEnabled,o=function(t){var n=t.isEnabled,r=t.onBottomArrive,i=t.onBottomLeave,o=t.onTopArrive,s=t.onTopLeave,a=(0,e.useRef)(!1),l=(0,e.useRef)(!1),c=(0,e.useRef)(0),u=(0,e.useRef)(null),h=(0,e.useCallback)((function(e,t){if(null!==u.current){var n=u.current,c=n.scrollTop,h=n.scrollHeight,d=n.clientHeight,f=u.current,p=t>0,m=h-d-c,g=!1;m>t&&a.current&&(i&&i(e),a.current=!1),p&&l.current&&(s&&s(e),l.current=!1),p&&t>m?(r&&!a.current&&r(e),f.scrollTop=h,g=!0,a.current=!0):!p&&-t>c&&(o&&!l.current&&o(e),f.scrollTop=0,g=!0,l.current=!0),g&&ry(e)}}),[r,i,o,s]),d=(0,e.useCallback)((function(e){h(e,e.deltaY)}),[h]),f=(0,e.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),p=(0,e.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;h(e,t)}),[h]),m=(0,e.useCallback)((function(e){if(e){var t=!!tv&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",f,t),e.addEventListener("touchmove",p,t)}}),[p,f,d]),g=(0,e.useCallback)((function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",p,!1))}),[p,f,d]);return(0,e.useEffect)((function(){if(n){var e=u.current;return m(e),function(){g(e)}}}),[n,m,g]),function(e){u.current=e}}({isEnabled:void 0===i||i,onBottomArrive:t.onBottomArrive,onBottomLeave:t.onBottomLeave,onTopArrive:t.onTopArrive,onTopLeave:t.onTopLeave}),s=function(t){var n=t.isEnabled,r=t.accountForScrollbars,i=void 0===r||r,o=(0,e.useRef)({}),s=(0,e.useRef)(null),a=(0,e.useCallback)((function(e){if(uy){var t=document.body,n=t&&t.style;if(i&&iy.forEach((function(e){var t=n&&n[e];o.current[e]=t})),i&&hy<1){var r=parseInt(o.current.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,a=window.innerWidth-s+r||0;Object.keys(oy).forEach((function(e){var t=oy[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(a,"px"))}t&&cy()&&(t.addEventListener("touchmove",sy,dy),e&&(e.addEventListener("touchstart",ly,dy),e.addEventListener("touchmove",ay,dy))),hy+=1}}),[i]),l=(0,e.useCallback)((function(e){if(uy){var t=document.body,n=t&&t.style;hy=Math.max(hy-1,0),i&&hy<1&&iy.forEach((function(e){var t=o.current[e];n&&(n[e]=t)})),t&&cy()&&(t.removeEventListener("touchmove",sy,dy),e&&(e.removeEventListener("touchstart",ly,dy),e.removeEventListener("touchmove",ay,dy)))}}),[i]);return(0,e.useEffect)((function(){if(n){var e=s.current;return a(e),function(){l(e)}}}),[n,a,l]),function(e){s.current=e}}({isEnabled:r});return cg(e.Fragment,null,r&&cg("div",{onClick:fy,css:py}),n((function(e){o(e),s(e)})))}var gy={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},vy=function(e){var t=e.name,n=e.onFocus;return cg("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:gy,value:"",onChange:function(){}})};function yy(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function by(){return yy(/^Mac/i)}function xy(){return yy(/^iPhone/i)||yy(/^iPad/i)||by()&&navigator.maxTouchPoints>1}var _y={clearIndicator:Av,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,o=i.colors,s=i.borderRadius;return Ap({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:r?o.primary:o.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:Ev,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return Ap({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return Ap({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,o=i.spacing,s=i.colors;return Ap(Ap({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},kv),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,o=i.colors,s=i.spacing.baseUnit;return Ap({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*s})},loadingMessage:pv,menu:function(e,t){var n,r=e.placement,i=e.theme,o=i.borderRadius,s=i.spacing,a=i.colors;return Ap((wp(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),wp(n,"position","absolute"),wp(n,"width","100%"),wp(n,"zIndex",1),n),t?{}:{backgroundColor:a.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return Ap({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors;return Ap({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,o=e.cropWithEllipsis;return Ap({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors,s=e.isFocused;return Ap({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:s?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:fv,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.theme,s=o.spacing,a=o.colors;return Ap({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?a.primary:r?a.primary25:"transparent",color:n?a.neutral20:i?a.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?a.primary:a.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return Ap({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,o=r.colors;return Ap({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ap({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}};var Sy,wy={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Ey={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Qg(),captureMenuScroll:!Qg(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=Ap({ignoreCase:!0,ignoreAccents:!0,stringify:ey,trim:!0,matchFrom:"any"},Sy),r=n.ignoreCase,i=n.ignoreAccents,o=n.stringify,s=n.trim,a=n.matchFrom,l=s?Jv(t):t,c=s?Jv(o(e)):o(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=Zv(l),c=Qv(c)),"start"===a?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Ay(e,t,n,r){return{type:"option",data:t,isDisabled:ky(e,t,n),isSelected:Ly(e,t,n),label:My(e,t),value:Oy(e,t),index:r}}function Ty(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return Ay(e,n,t,r)})).filter((function(t){return Ry(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=Ay(e,n,t,r);return Ry(e,o)?o:void 0})).filter(nv)}function Cy(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,Bp(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function Py(e,t){return e.reduce((function(e,n){return"group"===n.type?e.push.apply(e,Bp(n.options.map((function(e){return{data:e.data,id:"".concat(t,"-").concat(n.index,"-").concat(e.index)}})))):e.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),e}),[])}function Ry(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,o=t.isSelected,s=t.label,a=t.value;return(!Ny(e)||!o)&&Dy(e,{label:s,value:a,data:i},r)}var Iy=function(e,t){var n;return(null===(n=e.find((function(e){return e.data===t})))||void 0===n?void 0:n.id)||null},My=function(e,t){return e.getOptionLabel(t)},Oy=function(e,t){return e.getOptionValue(t)};function ky(e,t,n){return"function"===typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function Ly(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"===typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=Oy(e,t);return n.some((function(t){return Oy(e,t)===r}))}function Dy(e,t,n){return!e.filterOption||e.filterOption(t,n)}var Ny=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},By=1,Fy=function(t){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kp(e,t)}(s,t);var n,r,i,o=function(e){var t=Dp();return function(){var n,r=Lp(e);if(t){var i=Lp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Np(this,n)}}(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.isAppleDevice=by()||xy(),t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,o=r.name;n.name=o,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,o=i.closeMenuOnSelect,s=i.isMulti,a=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:a}),o&&(t.setState({inputIsHiddenAfterUpdate:!s}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,o=n.name,s=t.state.selectValue,a=i&&t.isOptionSelected(e,s),l=t.isOptionDisabled(e,s);if(a){var c=t.getOptionValue(e);t.setValue(s.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:o});i?t.setValue([].concat(Bp(s),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),o=r.filter((function(e){return t.getOptionValue(e)!==i})),s=rv(n,o,o[0]||null);t.onChange(s,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(rv(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),o=rv(e,i,i[0]||null);t.onChange(o,{action:"pop-value",removedValue:r})},t.getFocusedOptionId=function(e){return Iy(t.state.focusableOptionsWithIds,e)},t.getFocusableOptionsWithIds=function(){return Py(Ty(t.props,t.state.selectValue),t.getElementId("option"))},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return jg.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return My(t.props,e)},t.getOptionValue=function(e){return Oy(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=_y[e](n,r);i.boxSizing="border-box";var o=t.props.styles[e];return o?o(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.state.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,Ap(Ap({},Fv),e.components);var e},t.buildCategorizedOptions=function(){return Ty(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return Cy(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:Ap({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!t.props.isDisabled){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"===typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&qg(e.target)&&t.props.onMenuClose():"function"===typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),o=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||o>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){if(!t.blockOptionHover&&t.state.focusedOption!==e){var n=t.getFocusableOptions().indexOf(e);t.setState({focusedOption:e,focusedOptionId:n>-1?t.getFocusedOptionId(e):null})}},t.shouldHideSelectedOptions=function(){return Ny(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,o=n.escapeClearsValue,s=n.inputValue,a=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,h=n.tabSelectsValue,d=n.openMenuOnFocus,f=t.state,p=f.focusedOption,m=f.focusedValue,g=f.selectValue;if(!l&&("function"!==typeof u||(u(e),!e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||s)return;t.focusValue("previous");break;case"ArrowRight":if(!r||s)return;t.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(m)t.removeValue(m);else{if(!i)return;r?t.popValue():a&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!h||!p||d&&t.isOptionSelected(p,g))return;t.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(c){if(!p)return;if(t.isComposing)return;t.selectOption(p);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:s}),t.onMenuClose()):a&&o&&t.clearValue();break;case" ":if(s)return;if(!c){t.openMenu("first");break}if(!p)return;t.selectOption(p);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.state.instancePrefix="react-select-"+(t.props.instanceId||++By),t.state.selectValue=Vg(e.value),e.menuIsOpen&&t.state.selectValue.length){var n=t.getFocusableOptionsWithIds(),r=t.buildFocusableOptions(),i=r.indexOf(t.state.selectValue[0]);t.state.focusableOptionsWithIds=n,t.state.focusedOption=r[i],t.state.focusedOptionId=Iy(n,r[i])}return t}return n=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&$g(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&($g(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),s="first"===e?0:o.length-1;if(!this.props.isMulti){var a=o.indexOf(r[0]);a>-1&&(s=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[s],focusedOptionId:this.getFocusedOptionId(o[s])},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,s=-1;if(n.length){switch(e){case"previous":s=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(s=i+1)}this.setState({inputIsHidden:-1!==s,focusedValue:n[s]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===e?i=o>0?o-1:r.length-1:"down"===e?i=(o+1)%r.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null,focusedOptionId:this.getFocusedOptionId(r[i])})}}},{key:"getTheme",value:function(){return this.props.theme?"function"===typeof this.props.theme?this.props.theme(wy):Ap(Ap({},wy),this.props.theme):wy}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,o=this.selectOption,s=this.setValue,a=this.props,l=a.isMulti,c=a.isRtl,u=a.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:o,selectProps:a,setValue:s,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return ky(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return Ly(this.props,e,t)}},{key:"filterOption",value:function(e,t){return Dy(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"===typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var t=this.props,n=t.isDisabled,r=t.isSearchable,i=t.inputId,o=t.inputValue,s=t.tabIndex,a=t.form,l=t.menuIsOpen,c=t.required,u=this.getComponents().Input,h=this.state,d=h.inputIsHidden,f=h.ariaSelection,p=this.commonProps,m=i||this.getElementId("input"),g=Ap(Ap(Ap({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},l&&{"aria-controls":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null===f||void 0===f?void 0:f.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?e.createElement(u,Mp({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:n,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:a,type:"text",value:o},g)):e.createElement(ny,Mp({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:zg,onFocus:this.onInputFocus,disabled:n,tabIndex:s,inputMode:"none",form:a,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var t=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,o=n.MultiValueLabel,s=n.MultiValueRemove,a=n.SingleValue,l=n.Placeholder,c=this.commonProps,u=this.props,h=u.controlShouldRenderValue,d=u.isDisabled,f=u.isMulti,p=u.inputValue,m=u.placeholder,g=this.state,v=g.selectValue,y=g.focusedValue,b=g.isFocused;if(!this.hasValue()||!h)return p?null:e.createElement(l,Mp({},c,{key:"placeholder",isDisabled:d,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),m);if(f)return v.map((function(n,a){var l=n===y,u="".concat(t.getOptionLabel(n),"-").concat(t.getOptionValue(n));return e.createElement(r,Mp({},c,{components:{Container:i,Label:o,Remove:s},isFocused:l,isDisabled:d,key:u,index:a,removeProps:{onClick:function(){return t.removeValue(n)},onTouchEnd:function(){return t.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),t.formatOptionLabel(n,"value"))}));if(p)return null;var x=v[0];return e.createElement(a,Mp({},c,{data:x,isDisabled:d}),this.formatOptionLabel(x,"value"))}},{key:"renderClearIndicator",value:function(){var t=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;if(!this.isClearable()||!t||i||!this.hasValue()||o)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,Mp({},n,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var t=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;return t&&o?e.createElement(t,Mp({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:s})):null}},{key:"renderIndicatorSeparator",value:function(){var t=this.getComponents(),n=t.DropdownIndicator,r=t.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused;return e.createElement(r,Mp({},i,{isDisabled:o,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var t=this.getComponents().DropdownIndicator;if(!t)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return e.createElement(t,Mp({},n,{innerProps:o,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var t=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,o=n.Menu,s=n.MenuList,a=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,u=n.Option,h=this.commonProps,d=this.state.focusedOption,f=this.props,p=f.captureMenuScroll,m=f.inputValue,g=f.isLoading,v=f.loadingMessage,y=f.minMenuHeight,b=f.maxMenuHeight,x=f.menuIsOpen,_=f.menuPlacement,S=f.menuPosition,w=f.menuPortalTarget,E=f.menuShouldBlockScroll,A=f.menuShouldScrollIntoView,T=f.noOptionsMessage,C=f.onMenuScrollToTop,P=f.onMenuScrollToBottom;if(!x)return null;var R,I=function(n,r){var i=n.type,o=n.data,s=n.isDisabled,a=n.isSelected,l=n.label,c=n.value,f=d===o,p=s?void 0:function(){return t.onOptionHover(o)},m=s?void 0:function(){return t.selectOption(o)},g="".concat(t.getElementId("option"),"-").concat(r),v={id:g,onClick:m,onMouseMove:p,onMouseOver:p,tabIndex:-1,role:"option","aria-selected":t.isAppleDevice?void 0:a};return e.createElement(u,Mp({},h,{innerProps:v,data:o,isDisabled:s,isSelected:a,key:g,label:l,type:i,value:c,isFocused:f,innerRef:f?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())R=this.getCategorizedOptions().map((function(n){if("group"===n.type){var o=n.data,s=n.options,a=n.index,l="".concat(t.getElementId("group"),"-").concat(a),c="".concat(l,"-heading");return e.createElement(r,Mp({},h,{key:l,data:o,options:s,Heading:i,headingProps:{id:c,data:n.data},label:t.formatGroupLabel(n.data)}),n.options.map((function(e){return I(e,"".concat(a,"-").concat(e.index))})))}if("option"===n.type)return I(n,"".concat(n.index))}));else if(g){var M=v({inputValue:m});if(null===M)return null;R=e.createElement(l,h,M)}else{var O=T({inputValue:m});if(null===O)return null;R=e.createElement(c,h,O)}var k={minMenuHeight:y,maxMenuHeight:b,menuPlacement:_,menuPosition:S,menuShouldScrollIntoView:A},L=e.createElement(uv,Mp({},h,k),(function(n){var r=n.ref,i=n.placerProps,a=i.placement,l=i.maxHeight;return e.createElement(o,Mp({},h,k,{innerRef:r,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove},isLoading:g,placement:a}),e.createElement(my,{captureEnabled:p,onTopArrive:C,onBottomArrive:P,lockEnabled:E},(function(n){return e.createElement(s,Mp({},h,{innerRef:function(e){t.getMenuListRef(e),n(e)},innerProps:{role:"listbox","aria-multiselectable":h.isMulti,id:t.getElementId("listbox")},isLoading:g,maxHeight:l,focusedOption:d}),R)})))}));return w||"fixed"===S?e.createElement(a,Mp({},h,{appendTo:w,controlElement:this.controlRef,menuPlacement:_,menuPosition:S}),L):L}},{key:"renderFormField",value:function(){var t=this,n=this.props,r=n.delimiter,i=n.isDisabled,o=n.isMulti,s=n.name,a=n.required,l=this.state.selectValue;if(a&&!this.hasValue()&&!i)return e.createElement(vy,{name:s,onFocus:this.onValueInputFocus});if(s&&!i){if(o){if(r){var c=l.map((function(e){return t.getOptionValue(e)})).join(r);return e.createElement("input",{name:s,type:"hidden",value:c})}var u=l.length>0?l.map((function(n,r){return e.createElement("input",{key:"i-".concat(r),name:s,type:"hidden",value:t.getOptionValue(n)})})):e.createElement("input",{name:s,type:"hidden",value:""});return e.createElement("div",null,u)}var h=l[0]?this.getOptionValue(l[0]):"";return e.createElement("input",{name:s,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var t=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,o=n.focusedValue,s=n.isFocused,a=n.selectValue,l=this.getFocusableOptions();return e.createElement(Gv,Mp({},t,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:o,isFocused:s,selectValue:a,focusableOptions:l,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var t=this.getComponents(),n=t.Control,r=t.IndicatorsContainer,i=t.SelectContainer,o=t.ValueContainer,s=this.props,a=s.className,l=s.id,c=s.isDisabled,u=s.menuIsOpen,h=this.state.isFocused,d=this.commonProps=this.getCommonProps();return e.createElement(i,Mp({},d,{className:a,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:h}),this.renderLiveRegion(),e.createElement(n,Mp({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:h,menuIsOpen:u}),e.createElement(o,Mp({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),e.createElement(r,Mp({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=t.ariaSelection,s=t.isFocused,a=t.prevWasFocused,l=t.instancePrefix,c=e.options,u=e.value,h=e.menuIsOpen,d=e.inputValue,f=e.isMulti,p=Vg(u),m={};if(n&&(u!==n.value||c!==n.options||h!==n.menuIsOpen||d!==n.inputValue)){var g=h?function(e,t){return Cy(Ty(e,t))}(e,p):[],v=h?Py(Ty(e,p),"".concat(l,"-option")):[],y=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,p):null,b=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,g);m={selectValue:p,focusedOption:b,focusedOptionId:Iy(v,b),focusableOptionsWithIds:v,focusedValue:y,clearFocusValueOnUpdate:!1}}var x=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},_=o,S=s&&a;return s&&!S&&(_={value:rv(f,p,p[0]||null),options:p,action:"initial-input-focus"},S=!a),"initial-input-focus"===(null===o||void 0===o?void 0:o.action)&&(_=null),Ap(Ap(Ap({},m),x),{},{prevProps:e,ariaSelection:_,prevWasFocused:S})}}],r&&Op(n.prototype,r),i&&Op(n,i),Object.defineProperty(n,"prototype",{writable:!1}),s}(e.Component);Fy.defaultProps=Ey;var Uy=(0,e.forwardRef)((function(t,n){var r=function(t){var n=t.defaultInputValue,r=void 0===n?"":n,i=t.defaultMenuIsOpen,o=void 0!==i&&i,s=t.defaultValue,a=void 0===s?null:s,l=t.inputValue,c=t.menuIsOpen,u=t.onChange,h=t.onInputChange,d=t.onMenuClose,f=t.onMenuOpen,p=t.value,m=Rp(t,Ip),g=Pp((0,e.useState)(void 0!==l?l:r),2),v=g[0],y=g[1],b=Pp((0,e.useState)(void 0!==c?c:o),2),x=b[0],_=b[1],S=Pp((0,e.useState)(void 0!==p?p:a),2),w=S[0],E=S[1],A=(0,e.useCallback)((function(e,t){"function"===typeof u&&u(e,t),E(e)}),[u]),T=(0,e.useCallback)((function(e,t){var n;"function"===typeof h&&(n=h(e,t)),y(void 0!==n?n:e)}),[h]),C=(0,e.useCallback)((function(){"function"===typeof f&&f(),_(!0)}),[f]),P=(0,e.useCallback)((function(){"function"===typeof d&&d(),_(!1)}),[d]),R=void 0!==l?l:v,I=void 0!==c?c:x,M=void 0!==p?p:w;return Ap(Ap({},m),{},{inputValue:R,menuIsOpen:I,onChange:A,onInputChange:T,onMenuClose:P,onMenuOpen:C,value:M})}(t);return e.createElement(Fy,Mp({ref:n},r))})),zy=Uy;const Hy=(()=>{let e=!1;const t="AV2_UI_SETTINGS_CACHE",n="alignment-url";let r;const i=e=>{if(void 0!==r){const o=new URLSearchParams(window.location.search),s=new URLSearchParams;for(var i=0;i<r.length;i++){const t=r[i],n=e.get(t);null!==n?(o.set(t,n),s.set(t,n)):o.delete(t)}window.history.replaceState(null,"","?".concat(o.toString())),e.delete(n),localStorage.setItem(t,s.toString())}},o=n=>{const r=new URLSearchParams(window.location.search),o=new URLSearchParams(localStorage.getItem(t)?localStorage.getItem(t):void 0);for(const[e,t]of r)o.set(e,t);return e||n||(e=!0,i(o)),o},s=o(!0);return{setValidSavePropKeys:e=>{r=e,i(o())},getAlignmentUrlParam:()=>s.get(n),getCurrentValue:e=>o().get(e),getCurrentDeserializedValue:(e,t)=>{const n=o().get(e);return null===n?void 0:t(n)},updateValue:(e,t)=>{const n=o();void 0===t?n.delete(e):n.set(e,t),i(n)}}})();function jy(t){const{propKey:n,currentValue:r,defaultValue:i,useUrlAndLocalstorage:o,serialize:s}=t,a=s(r),l=(0,e.useRef)();if(o&&a!==l.current){const e=s(i);Hy.updateValue(n,a!==e?a:void 0)}l.current=a}function Vy(t){jy({propKey:t.propKey,currentValue:t.currentValue,defaultValue:t.defaultValue,serialize:t.serialize,useUrlAndLocalstorage:t.useUrlAndLocalstorage});const n=(0,e.useMemo)((()=>t.allPossibleValues.map((e=>({value:e.key,label:e.description})))),[t.allPossibleValues]);return(0,oc.jsx)(zy,{id:t.propKey,options:n,onChange:e=>{t.onChange(t.deserialize(e.value))},value:t.currentValue?n.find((e=>e.value===t.currentValue.key)):void 0,isSearchable:!1})}function Gy(t){jy({propKey:t.propKey,currentValue:t.currentValues,defaultValue:t.defaultValues,serialize:t.serialize,useUrlAndLocalstorage:t.useUrlAndLocalstorage});const n=(0,e.useMemo)((()=>t.allPossibleValues.map((e=>({value:e.key,label:e.description})))),[t.allPossibleValues]),r=(0,e.useCallback)((e=>e.map((e=>t.allPossibleValues.find((t=>t.key===e.value))))),[t.allPossibleValues]);return(0,oc.jsx)(zy,{id:t.propKey,options:n,onChange:e=>{const n=r(e);t.onChange(n)},isMulti:!0,value:t.currentValues?n.reduce(((e,n)=>(t.currentValues.find((e=>e.key===n.value))&&e.push(n),e)),[]):void 0,isSearchable:!1})}function Wy(t){const n=(0,e.useMemo)((()=>e=>e?"true":"false"),[]),r=t.onChange,i=(0,e.useCallback)((e=>{r(e.target.checked)}),[r]);return jy({propKey:t.propKey,currentValue:t.currentValue,defaultValue:t.defaultValue,serialize:n,useUrlAndLocalstorage:t.useUrlAndLocalstorage}),(0,oc.jsx)("input",{id:t.propKey,name:t.propKey,type:"checkbox",checked:t.currentValue,onChange:i})}function qy(t){const{currentValue:n,minValue:r,maxValue:i,onChange:o}=t,s=(0,e.useCallback)((e=>e.toString()),[]);jy({propKey:t.propKey,currentValue:n,defaultValue:t.defaultValue,serialize:s,useUrlAndLocalstorage:t.useUrlAndLocalstorage});const a=(0,e.useCallback)((()=>{n+1<=i&&o(n+1)}),[n,i,o]),l=(0,e.useCallback)((()=>{n-1>=r&&o(n-1)}),[n,r,o]);return(0,oc.jsx)("div",{className:"stepper-holder",children:(0,oc.jsxs)("div",{className:"stepper",children:[(0,oc.jsx)("button",{type:"button",disabled:n<=r,onClick:l,children:"\uff0d"}),(0,oc.jsx)("span",{id:t.propKey,children:n}),(0,oc.jsx)("button",{type:"button",disabled:n>=i,onClick:a,children:"\uff0b"})]})})}function Xy(t){const{id:n,onAlignmentLoaded:r,onFileLoadStart:i,onAlignmenLoadError:o,removeDuplicateSeqs:s}=t,a=(0,e.useRef)(null),l=(0,e.useCallback)((e=>{var t;e.preventDefault(),null===(t=a.current)||void 0===t||t.click()}),[a]),c=(0,e.useCallback)((e=>{r(e),a.current&&(a.current.value="")}),[a,r]),u=(0,e.useCallback)((e=>{e.preventDefault(),a.current&&a.current.files&&(i&&i(),setTimeout((()=>{const e=a.current.files[0];xp.loadAlignmentFromFile(e,s,c,o)})))}),[c,a,o,i,s]);return(0,oc.jsxs)("div",{className:"file-upload-input",children:[(0,oc.jsx)("input",{id:n,type:"file",className:"av2-hidden-file-input",ref:a,onChange:u}),(0,oc.jsx)("button",{type:"button",onClick:l,children:"Choose File"})]})}const Yy=e=>{const{labelText:t,fileURL:n,fileName:r,onAlignmentLoaded:i,onFileLoadStart:o,onAlignmenLoadError:s,removeDuplicateSeqs:a}=e;return(0,oc.jsx)("button",{type:"button",className:"button-link",onClick:e=>{e.preventDefault(),o&&o(),xp.loadAlignmentFromURL(n,a,i,s,r)},children:t},n)},Ky=t=>{const{alignmentLoaded:n,onAlignmenLoadError:r,removeDuplicateSeqs:i,onFileLoadStart:o}=t,[s,a]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!1),u=(0,e.useCallback)((e=>{var t,n;if(1===(null===(t=e.dataTransfer)||void 0===t?void 0:t.items.length)&&-1!==(null===(n=e.dataTransfer)||void 0===n?void 0:n.types.indexOf("Files")))return a(!0),e.stopPropagation(),e.preventDefault(),!1}),[]),h=(0,e.useCallback)((e=>(e.preventDefault(),e.stopPropagation(),!1)),[]),d=(0,e.useCallback)((e=>(a(!1),e.stopPropagation(),e.preventDefault(),!1)),[]),f=(0,e.useCallback)((e=>{var t;e.preventDefault();const s=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;return s&&s.length>0&&l&&(o&&o(),setTimeout((()=>{const e=s[0];xp.loadAlignmentFromFile(e,i,n,r)}))),a(!1),c(!1),!1}),[n,l,r,o,i]);return(0,e.useEffect)((()=>(window.addEventListener("mouseup",d),window.addEventListener("dragenter",u),window.addEventListener("dragover",h),window.addEventListener("drop",f),()=>{window.removeEventListener("mouseup",d),window.removeEventListener("dragenter",u),window.removeEventListener("dragover",h),window.removeEventListener("drop",f)})),[u,d,h,f]),(0,oc.jsx)("div",{id:"av2-fileloader-fullpage-id",className:"av2-fileloader-fullpage",style:{display:s?"grid":"none"},onDragLeave:e=>{e.relatedTarget||d(e)},children:(0,oc.jsx)("div",{className:"av2-fileloader-dropbox",style:{opacity:l?1:.4},onDragEnter:e=>{c(!0),u(e)},onDragLeave:e=>{c(!1)},children:"Drop alignment file here to load"})})};function $y(){const t=e.useRef(),[n,r]=(0,e.useState)({showSettings:!0,mainViewportVisibleIdxs:void 0}),{showSettings:i}=n,o=function(t){const{requestSettingsClose:n,useUrlAndLocalstorage:r=!1}=t,i=(0,e.useMemo)((()=>({alignmentType:Qh.AMINOACID,ntColorScheme:$h.list[0],aaColorScheme:Kh.list[0],sortBy:Vf.INPUT,positionsToStyle:Zh.ALL,residueColoring:Jh.LIGHT,logoStyle:zf.LETTERS,barplots:[Yf.Conservation,Yf.Gaps],showMinimap:!0,showAnnotations:!0,showLogo:!0,removeDuplicateSequences:!0,zoomLevel:12})),[]),o=(0,e.useMemo)((()=>{function e(e){const{propKey:t,stateKey:n,defaultVal:i,all:o,serialize:s,deserialize:a}=e;let c=Hy.getCurrentDeserializedValue(t,a);return r&&void 0!==c&&o.includes(c)||(c=i),{propKey:t,initialValue:c,defaultValue:i,serialize:s,deserialize:a,allPossibleValues:o,useUrlAndLocalstorage:r,onChange:e=>{l((t=>({...t,[n]:e})))}}}const t={all:[!0,!1],serialize:e=>e?"true":"false",deserialize:e=>"TRUE"===e.toUpperCase()};return{alignmentType:e({propKey:"alignment-type",stateKey:"alignmentType",defaultVal:i.alignmentType,all:Qh.list,serialize:Qh.serialize,deserialize:Qh.deserialize}),ntColorScheme:e({propKey:"nt-color-scheme",stateKey:"ntColorScheme",defaultVal:i.ntColorScheme,all:$h.list,serialize:$h.serialize,deserialize:$h.deserialize}),aaColorScheme:e({propKey:"aa-color-scheme",stateKey:"aaColorScheme",defaultVal:i.aaColorScheme,all:Kh.list,serialize:Kh.serialize,deserialize:Kh.deserialize}),sortBy:e({propKey:"sort-by",stateKey:"sortBy",defaultVal:i.sortBy,all:Vf.list,serialize:Vf.serialize,deserialize:Vf.deserialize}),positionsToStyle:e({propKey:"positions-to-style",stateKey:"positionsToStyle",defaultVal:i.positionsToStyle,all:Zh.list,serialize:Zh.serialize,deserialize:Zh.deserialize}),residueColoring:e({propKey:"residue-coloring",stateKey:"residueColoring",defaultVal:i.residueColoring,all:Jh.list,serialize:Jh.serialize,deserialize:Jh.deserialize}),showMinimap:e({propKey:"show-minimap",stateKey:"showMinimap",defaultVal:i.showMinimap,...t}),showAnnotations:e({propKey:"show-annotations",stateKey:"showAnnotations",defaultVal:i.showAnnotations,...t}),showLogo:e({propKey:"show-logo",stateKey:"showLogo",defaultVal:i.showLogo,...t}),removeDuplicateSequences:e({propKey:"remove-duplicates",stateKey:"removeDuplicateSequences",defaultVal:i.removeDuplicateSequences,...t}),logoStyle:e({propKey:"logo-style",stateKey:"logoStyle",defaultVal:i.logoStyle,all:zf.list,serialize:zf.serialize,deserialize:zf.deserialize}),zoomLevel:e({propKey:"zoom-level",stateKey:"zoomLevel",defaultVal:i.zoomLevel,all:[...Array(15).keys()].map((e=>e+6)),serialize:e=>e.toString(),deserialize:e=>isNaN(+e)?12:+e})}}),[i,r]),s=(0,e.useMemo)((()=>{const e="barplots",t=i.barplots,n=e=>{const t=decodeURIComponent(e).split("|").map((e=>Yf.deserialize(e)));return-1!==t.findIndex((e=>void 0===e))?[]:t},o=Yf.list,s=Hy.getCurrentDeserializedValue(e,n);let a=t;if(r&&void 0!==s){const e=s.reduce(((e,t)=>(o.includes(t)||(e=!1),e)),!0);e&&(a=s)}return{propKey:e,initialValues:a,defaultValues:t,allPossibleValues:o,serialize:e=>{let t=e.map((e=>Yf.serialize(e))).toSorted().join("|");return encodeURIComponent(t)},deserialize:n,useUrlAndLocalstorage:r,onChange:e=>{l((t=>({...t,barplots:e})))}}}),[i.barplots,r]);(0,e.useEffect)((()=>{const e=Object.keys(o).reduce(((e,t)=>(e.push(o[t].propKey),e)),[s.propKey]);Hy.setValidSavePropKeys(e)}),[s,o]);const[a,l]=(0,e.useState)({alignmentType:o.alignmentType.initialValue,ntColorScheme:o.ntColorScheme.initialValue,aaColorScheme:o.aaColorScheme.initialValue,sortBy:o.sortBy.initialValue,positionsToStyle:o.positionsToStyle.initialValue,residueColoring:o.residueColoring.initialValue,showMinimap:o.showMinimap.initialValue,showAnnotations:o.showAnnotations.initialValue,showLogo:o.showLogo.initialValue,removeDuplicateSequences:o.removeDuplicateSequences.initialValue,logoType:o.logoStyle.initialValue,zoomLevel:o.zoomLevel.initialValue,barplots:s.initialValues,alignmentLoading:!1}),c=(0,e.useCallback)((e=>{(e!==Qh.AMINOACID||a.sortBy&&Vf.ALL_AMINO_ACID_SORTERS.includes(a.sortBy))&&(e!==Qh.NUCLEOTIDE||a.sortBy&&Vf.ALL_NUCLEOTIDE_SORTERS.includes(a.sortBy))?l((t=>({...t,alignmentType:e}))):l((t=>({...t,alignmentType:e,sortBy:o.sortBy.defaultValue})))}),[o.sortBy.defaultValue,a.sortBy]),u=(0,e.useCallback)((()=>{l((e=>({...e,alignmentLoading:!0})))}),[]),h=(0,e.useCallback)((e=>{l((t=>({...t,alignment:e,alignmentLoading:!1,alignmentLoadError:void 0}))),n()}),[n]),d=(0,e.useCallback)((e=>{l((t=>({...t,alignmentLoading:!1,alignmentLoadError:e})))}),[]),f=(0,e.useMemo)((()=>(0,oc.jsx)(Ky,{removeDuplicateSeqs:a.removeDuplicateSequences,alignmentLoaded:h,onAlignmenLoadError:e=>{d(e),n()},onFileLoadStart:u})),[d,h,n,u,a.removeDuplicateSequences]),p=(0,e.useRef)(!1);(0,e.useEffect)((()=>{if(!p.current){p.current=!0;const t="alignment-url",n=Hy.getAlignmentUrlParam();if(n)try{const e=new URL(n);if("http:"!==e.protocol&&"https:"!==e.protocol)throw new Error('URL protocol is "'.concat(e.protocol,'" not "http:" or "https:"'));u(),console.log('Loading URL from "'.concat(n,'"')),xp.loadAlignmentFromURL(n,a.removeDuplicateSequences,h,d)}catch(e){console.error("Loading URL from parameter (".concat(t,'="').concat(n,'") failed:'),e),d(new bp("Alignment URL Parse Error",[{name:"URL invalid",message:'The alignment link in the URL is not a valid http or https\n              link (parameter="'.concat(t,'", link="').concat(n,'").')}]))}}}),[d,h,u,a.removeDuplicateSequences]);const m=(0,e.useMemo)((()=>{if(a.alignmentLoadError)return(0,oc.jsxs)("div",{className:"load-error",children:[(0,oc.jsx)("h3",{children:(0,oc.jsx)("strong",{children:a.alignmentLoadError.message})}),(0,oc.jsx)("ul",{children:a.alignmentLoadError.errors.map((e=>(0,oc.jsxs)("li",{children:[(0,oc.jsxs)("strong",{children:[e.name,":"]})," ",e.message]},e.name)))}),a.alignmentLoadError.possibleResolution?(0,oc.jsx)("div",{children:a.alignmentLoadError.possibleResolution}):null]})}),[a.alignmentLoadError]),g=(0,e.useMemo)((()=>(0,oc.jsxs)("div",{className:"settings-content",children:[(0,oc.jsx)("h3",{className:"subheader",children:"Alignment Styling"}),(0,oc.jsxs)("div",{className:"options-box",children:[(0,oc.jsx)("label",{htmlFor:o.alignmentType.propKey,children:"Alignment Type:"}),(0,oc.jsx)(Vy,{...o.alignmentType,currentValue:a.alignmentType,onChange:c}),(0,oc.jsx)("label",{htmlFor:o.sortBy.propKey,children:"Sort Order:"}),(0,oc.jsx)(Vy,{...o.sortBy,currentValue:a.sortBy,allPossibleValues:a.alignmentType===Qh.AMINOACID?Vf.ALL_AMINO_ACID_SORTERS:Vf.ALL_NUCLEOTIDE_SORTERS}),a.alignmentType===Qh.AMINOACID?(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("label",{htmlFor:o.aaColorScheme.propKey,children:"Color Scheme:"}),(0,oc.jsx)(Vy,{...o.aaColorScheme,currentValue:a.aaColorScheme})]}):(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsx)("label",{htmlFor:o.ntColorScheme.propKey,children:"Color Scheme:"}),(0,oc.jsx)(Vy,{...o.ntColorScheme,currentValue:a.ntColorScheme})]}),(0,oc.jsx)("label",{htmlFor:o.residueColoring.propKey,children:"Residue Coloring:"}),(0,oc.jsx)(Vy,{...o.residueColoring,currentValue:a.residueColoring}),(0,oc.jsx)("label",{htmlFor:o.positionsToStyle.propKey,children:"Positions To Style:"}),(0,oc.jsx)(Vy,{...o.positionsToStyle,currentValue:a.positionsToStyle}),(0,oc.jsx)("label",{htmlFor:o.zoomLevel.propKey,children:"Zoom Level:"}),(0,oc.jsx)(qy,{...o.zoomLevel,currentValue:a.zoomLevel,minValue:5,maxValue:20})]}),(0,oc.jsx)("h3",{className:"subheader",children:"Analysis"}),(0,oc.jsxs)("div",{className:"options-box",children:[(0,oc.jsx)("label",{htmlFor:s.propKey,children:"Barplots:"}),(0,oc.jsx)(Gy,{...s,currentValues:a.barplots}),(0,oc.jsx)("label",{htmlFor:o.logoStyle.propKey,children:"Sequence logo type:"}),(0,oc.jsx)(Vy,{...o.logoStyle,currentValue:a.showLogo?a.logoType:{key:"hide-logo",description:"No logo (hidden)"},allPossibleValues:[{key:"hide-logo",description:"No logo (hidden)"},...zf.list],onChange:e=>{l(e?t=>({...t,showLogo:!0,logoType:e}):e=>({...e,showLogo:!1}))}}),(0,oc.jsx)("label",{htmlFor:o.showMinimap.propKey,children:"Show Minimap:"}),(0,oc.jsx)(Wy,{...o.showMinimap,currentValue:a.showMinimap}),(0,oc.jsx)("label",{htmlFor:o.showAnnotations.propKey,children:"Show Annotations:"}),(0,oc.jsx)(Wy,{...o.showAnnotations,currentValue:a.showAnnotations})]}),(0,oc.jsx)("h3",{className:"subheader",children:"File Input"}),(0,oc.jsxs)("div",{className:"options-box",children:[(0,oc.jsx)("label",{htmlFor:"file-loader",children:"Upload Alignment File:"}),(0,oc.jsx)(Xy,{id:"file-loader",onFileLoadStart:u,onAlignmentLoaded:h,onAlignmenLoadError:d,removeDuplicateSeqs:a.removeDuplicateSequences}),(0,oc.jsx)("label",{htmlFor:"example-files",children:"Load Example File:"}),(0,oc.jsxs)("div",{id:"example-files",children:[(0,oc.jsx)(Yy,{id:"beta-lactamase",labelText:"\u03b2-lactamase",fileURL:"".concat("","/7fa1c5691376beab198788a726917d48_b0.4.a2m"),fileName:"7fa1c5691376beab198788a726917d48_b0.4.a2m",removeDuplicateSeqs:a.removeDuplicateSequences,onFileLoadStart:u,onAlignmentLoaded:h,onAlignmenLoadError:d}),(0,oc.jsx)(Yy,{id:"covid-spike",labelText:"SARS-CoV-2 Spike",fileURL:"".concat("","/Spike_Full_f05_m05_t08.a2m"),fileName:"Spike_Full_f05_m05_t08.a2m",removeDuplicateSeqs:a.removeDuplicateSequences,onFileLoadStart:u,onAlignmentLoaded:h,onAlignmenLoadError:d})]}),(0,oc.jsx)("label",{htmlFor:o.removeDuplicateSequences.propKey,children:"Remove Duplicate Sequences on Load:"}),(0,oc.jsx)(Wy,{...o.removeDuplicateSequences,currentValue:a.removeDuplicateSequences})]}),m]})),[c,d,h,u,s,o,a,m]);return{currentlySelectedProperties:a,dropZoneElement:f,element:(0,oc.jsx)(oc.Fragment,{children:(0,oc.jsxs)("div",{className:"settings-holder",children:[(0,oc.jsx)("div",{className:"outside-settings-box",onMouseDown:n}),(0,oc.jsxs)("div",{className:"settings",children:[(0,oc.jsxs)("div",{className:"settings-header",children:[(0,oc.jsx)("h2",{children:"Settings"}),(0,oc.jsx)("button",{className:"button-link close",onClick:e=>{e.preventDefault(),n()},children:(0,oc.jsx)("img",{alt:"Close Search Box",width:"16",height:"16",src:"".concat("","/close.svg")})})]}),g]})]})})}}({requestSettingsClose:(0,e.useCallback)((()=>{r({...n,showSettings:!1})}),[n]),useUrlAndLocalstorage:!0}),{alignment:s,alignmentLoading:a,ntColorScheme:l,aaColorScheme:c,alignmentType:u,showLogo:h,logoType:d,positionsToStyle:f,residueColoring:p,showAnnotations:m,showMinimap:g,sortBy:v,zoomLevel:y,barplots:b}=o.currentlySelectedProperties,x=s?"logo-".concat(s.getUUID()):"logoplot",_=(0,e.useMemo)((()=>s?b.map((e=>({svgId:"".concat(e.key,"-barplot-").concat(null===s||void 0===s?void 0:s.getUUID()),dataSeriesSet:[e],heightPx:75}))):[]),[s,b]),S=(0,e.useMemo)((()=>s?(0,oc.jsx)("div",{className:"app-content",children:(0,oc.jsx)(gp,{alignment:s,alignmentType:u,aaColorScheme:c,ntColorScheme:l,residueColoring:p,positionsToStyle:f,triggerShowSearch:t,mainViewportVisibleChanged:e=>{hh(n.mainViewportVisibleIdxs,e)||r({...n,mainViewportVisibleIdxs:e})},zoomLevel:y,sortBy:v,disableSearch:!1,disableSearchKeyboardShortcut:!1,showQuery:!0,showConsensus:!0,showMinimap:g,showAnnotations:m,showLogo:h,logoOptions:{svgId:x,logoType:d},barplots:_})}):void 0),[s,_,d,f,p,x,g,m,h,v,n,c,l,u,y]),w=(0,e.useMemo)((()=>{const e=s?(0,oc.jsxs)(oc.Fragment,{children:[(0,oc.jsxs)("h3",{children:[(0,oc.jsx)("strong",{children:"Alignment:"})," ",s.getName()]}),(0,oc.jsxs)("h4",{children:["".concat(s.getSequenceCount()," sequences (rows) and ").concat(s.getSequenceLength()," positions (columns)"),s.getNumberRemovedDuplicateSequences()>0||s.getNumberDuplicateSequencesInAlignment()>0?(0,oc.jsx)("span",{className:"duplicates-removed",children:s.getNumberRemovedDuplicateSequences()>0?"\u2605".concat(" ",s.getNumberRemovedDuplicateSequences()," duplicate sequences removed"):"\u2605".concat(" contains ",s.getNumberDuplicateSequencesInAlignment()," duplicate sequences")}):null]})]}):(0,oc.jsx)(oc.Fragment,{});return(0,oc.jsxs)(oc.Fragment,{children:[o.dropZoneElement,(0,oc.jsx)("div",{style:{display:s&&!i?"none":void 0},children:o.element}),(0,oc.jsx)("div",{className:"app-header",children:(0,oc.jsx)("div",{className:"settings-box",children:(0,oc.jsx)("form",{children:(0,oc.jsxs)("div",{className:"settings-header",children:[(0,oc.jsx)("h2",{children:"AlignmentViewer 2.0"}),(0,oc.jsx)("div",{className:"settings-alignment-description",children:e}),(0,oc.jsx)("a",{className:"github-link",href:"https://github.com/sanderlab/AlignmentViewer2.0",target:"_blank",rel:"noopener noreferrer",title:"Github Repository",children:(0,oc.jsx)("img",{alt:"Alignment Viewer 2.0 GitHub Repo",width:"16",height:"16",src:"".concat("","/github-mark.svg")})}),(0,oc.jsx)("button",{className:"download button-link".concat(s?"":" hide"),type:"button",title:"Download Full Viewport",onClick:()=>{var e,t;s&&function(e){const{alignment:t,svgFilename:n}=e,r=fd(e);var i="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(r)),o=document.createElement("a");o.download=n||"msa_".concat(t.getName(),".svg"),o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)}({alignment:s,sortBy:v,alignmentType:u,aaColorScheme:c,ntColorScheme:l,positionsToStyle:f,residueColoring:p,logoSvgId:x,barplots:_.map((e=>({svgId:e.svgId,title:e.dataSeriesSet.map((e=>e.description)).join("/")}))),includePositionAxis:!0,includeMetadata:!0,startSeqIdx:null===(e=n.mainViewportVisibleIdxs)||void 0===e?void 0:e.seqIdxStart,endSeqIdx:null===(t=n.mainViewportVisibleIdxs)||void 0===t?void 0:t.seqIdxEnd})},children:(0,oc.jsx)("img",{alt:"Download Alignment",width:"16",height:"16",src:"".concat("","/download.svg")})}),(0,oc.jsx)("button",{id:"search-button",className:"search-button button-link",type:"button",title:"Show Search",onClick:()=>{t.current&&t.current()},children:(0,oc.jsx)("img",{alt:"Show Search",width:"16",height:"16",src:"".concat("","/search.svg")})}),(0,oc.jsx)("button",{id:"settings-toggle-button",className:"button-link settings-toggle",type:"button",style:{paddingRight:0},title:i?"Hide Settings":"Show Settings",onClick:()=>{r({...n,showSettings:!i})},children:(0,oc.jsx)("img",{alt:"Show Settings Box",width:"16",height:"16",src:"".concat("","/settings.svg")})})]})})})})]})}),[s,u,_,c,l,f,p,x,i,o.dropZoneElement,o.element,v,n]);return(0,oc.jsxs)(oc.Fragment,{children:[w,(0,oc.jsx)("div",{className:"fullscreen-loading-indicator ".concat(a?"":"hidden"),children:(0,oc.jsx)("div",{className:"loader"})}),S]})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));(0,r.s)(document.getElementById("root")).render((0,oc.jsx)($y,{})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))})()})();
//# sourceMappingURL=main.d8bc8f88.js.map